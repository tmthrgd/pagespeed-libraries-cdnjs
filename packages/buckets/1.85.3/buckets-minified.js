(function(b,a){"function"===typeof define&&define.amd?define([],a):"object"===typeof exports?module.exports=a():b.buckets=a()})(this,function(){var b={defaultCompare:function(a,d){return a<d?-1:a===d?0:1},defaultEquals:function(a,d){return a===d},defaultToString:function(a){return null===a?"BUCKETS_NULL":b.isUndefined(a)?"BUCKETS_UNDEFINED":b.isString(a)?a:a.toString()},isFunction:function(a){return"function"===typeof a},isUndefined:function(a){return"undefined"===typeof a},isString:function(a){return"[object String]"===
Object.prototype.toString.call(a)},reverseCompareFunction:function(a){return b.isFunction(a)?function(d,b){return-1*a(d,b)}:function(a,b){return a<b?1:a===b?0:-1}},compareToEquals:function(a){return function(b,c){return 0===a(b,c)}},arrays:{}};b.arrays.indexOf=function(a,d,c){c=c||b.defaultEquals;for(var e=a.length,f=0;f<e;f++)if(c(a[f],d))return f;return-1};b.arrays.lastIndexOf=function(a,d,c){c=c||b.defaultEquals;for(var e=a.length-1;0<=e;e--)if(c(a[e],d))return e;return-1};b.arrays.contains=function(a,
d,c){return 0<=b.arrays.indexOf(a,d,c)};b.arrays.remove=function(a,d,c){d=b.arrays.indexOf(a,d,c);if(0>d)return!1;a.splice(d,1);return!0};b.arrays.frequency=function(a,d,c){c=c||b.defaultEquals;for(var e=a.length,f=0,g=0;g<e;g++)c(a[g],d)&&f++;return f};b.arrays.equals=function(a,d,c){c=c||b.defaultEquals;if(a.length!==d.length)return!1;for(var e=a.length,f=0;f<e;f++)if(!c(a[f],d[f]))return!1;return!0};b.arrays.copy=function(a){return a.concat()};b.arrays.swap=function(a,b,c){if(0>b||b>=a.length||
0>c||c>=a.length)return!1;var e=a[b];a[b]=a[c];a[c]=e;return!0};b.arrays.forEach=function(a,b){for(var c=a.length,e=0;e<c&&!1!==b(a[e]);e++);};b.LinkedList=function(){this.lastNode=this.firstNode=null;this.nElements=0};b.LinkedList.prototype.add=function(a,d){b.isUndefined(d)&&(d=this.nElements);if(0>d||d>this.nElements||b.isUndefined(a))return!1;var c=this.createNode(a);if(0===this.nElements)this.lastNode=this.firstNode=c;else if(d===this.nElements)this.lastNode=this.lastNode.next=c;else if(0===
d)c.next=this.firstNode,this.firstNode=c;else{var e=this.nodeAtIndex(d-1);c.next=e.next;e.next=c}this.nElements++;return!0};b.LinkedList.prototype.first=function(){if(null!==this.firstNode)return this.firstNode.element};b.LinkedList.prototype.last=function(){if(null!==this.lastNode)return this.lastNode.element};b.LinkedList.prototype.elementAtIndex=function(a){a=this.nodeAtIndex(a);return null===a?void 0:a.element};b.LinkedList.prototype.indexOf=function(a,d){var c=d||b.defaultEquals;if(b.isUndefined(a))return-1;
for(var e=this.firstNode,f=0;null!==e;){if(c(e.element,a))return f;f++;e=e.next}return-1};b.LinkedList.prototype.contains=function(a,b){return 0<=this.indexOf(a,b)};b.LinkedList.prototype.remove=function(a,d){var c=d||b.defaultEquals;if(1>this.nElements||b.isUndefined(a))return!1;for(var e=null,f=this.firstNode;null!==f;){if(c(f.element,a))return f===this.firstNode?(this.firstNode=this.firstNode.next,f===this.lastNode&&(this.lastNode=null)):(f===this.lastNode&&(this.lastNode=e),e.next=f.next,f.next=
null),this.nElements--,!0;e=f;f=f.next}return!1};b.LinkedList.prototype.clear=function(){this.lastNode=this.firstNode=null;this.nElements=0};b.LinkedList.prototype.equals=function(a,d){var c=d||b.defaultEquals;return a instanceof b.LinkedList&&this.size()===a.size()?this.equalsAux(this.firstNode,a.firstNode,c):!1};b.LinkedList.prototype.equalsAux=function(a,b,c){for(;null!==a;){if(!c(a.element,b.element))return!1;a=a.next;b=b.next}return!0};b.LinkedList.prototype.removeElementAtIndex=function(a){if(!(0>
a||a>=this.nElements)){var b;1===this.nElements?(b=this.firstNode.element,this.lastNode=this.firstNode=null):(a=this.nodeAtIndex(a-1),null===a?(b=this.firstNode.element,this.firstNode=this.firstNode.next):a.next===this.lastNode&&(b=this.lastNode.element,this.lastNode=a),null!==a&&(b=a.next.element,a.next=a.next.next));this.nElements--;return b}};b.LinkedList.prototype.forEach=function(a){for(var b=this.firstNode;null!==b&&!1!==a(b.element);)b=b.next};b.LinkedList.prototype.reverse=function(){for(var a=
null,b=this.firstNode,c=null;null!==b;)c=b.next,b.next=a,a=b,b=c;c=this.firstNode;this.firstNode=this.lastNode;this.lastNode=c};b.LinkedList.prototype.toArray=function(){for(var a=[],b=this.firstNode;null!==b;)a.push(b.element),b=b.next;return a};b.LinkedList.prototype.size=function(){return this.nElements};b.LinkedList.prototype.isEmpty=function(){return 0>=this.nElements};b.LinkedList.prototype.nodeAtIndex=function(a){if(0>a||a>=this.nElements)return null;if(a===this.nElements-1)return this.lastNode;
for(var b=this.firstNode,c=0;c<a;c++)b=b.next;return b};b.LinkedList.prototype.createNode=function(a){return{element:a,next:null}};b.Dictionary=function(a){this.table={};this.nElements=0;this.toStr=a||b.defaultToString};b.Dictionary.prototype.keyPrefix="/$ ";b.Dictionary.prototype.hasKey=function(a){return Object.prototype.hasOwnProperty.call(this.table,a)};b.Dictionary.prototype.get=function(a){a=this.table[this.keyPrefix+this.toStr(a)];return b.isUndefined(a)?void 0:a.value};b.Dictionary.prototype.set=
function(a,d){if(!b.isUndefined(a)&&!b.isUndefined(d)){var c,e=this.keyPrefix+this.toStr(a);c=this.table[e];b.isUndefined(c)?(this.nElements++,c=void 0):c=c.value;this.table[e]={key:a,value:d};return c}};b.Dictionary.prototype.remove=function(a){a=this.keyPrefix+this.toStr(a);var d=this.table[a];if(!b.isUndefined(d))return delete this.table[a],this.nElements--,d.value};b.Dictionary.prototype.keys=function(){var a=[],b;for(b in this.table)this.hasKey(b)&&a.push(this.table[b].key);return a};b.Dictionary.prototype.values=
function(){var a=[],b;for(b in this.table)this.hasKey(b)&&a.push(this.table[b].value);return a};b.Dictionary.prototype.forEach=function(a){for(var b in this.table)if(this.hasKey(b)){var c=this.table[b];if(!1===a(c.key,c.value))break}};b.Dictionary.prototype.containsKey=function(a){return!b.isUndefined(this.get(a))};b.Dictionary.prototype.clear=function(){this.table={};this.nElements=0};b.Dictionary.prototype.size=function(){return this.nElements};b.Dictionary.prototype.isEmpty=function(){return 0>=
this.nElements};b.MultiDictionary=function(a,d){this.parent=new b.Dictionary(a);this.equalsF=d||b.defaultEquals};b.MultiDictionary.prototype.get=function(a){a=this.parent.get(a);return b.isUndefined(a)?[]:b.arrays.copy(a)};b.MultiDictionary.prototype.set=function(a,d){if(b.isUndefined(a)||b.isUndefined(d))return!1;if(!this.containsKey(a))return this.parent.set(a,[d]),!0;var c=this.parent.get(a);if(b.arrays.contains(c,d,this.equalsF))return!1;c.push(d);return!0};b.MultiDictionary.prototype.remove=
function(a,d){if(b.isUndefined(d)){var c=this.parent.remove(a);return b.isUndefined(c)?!1:!0}c=this.parent.get(a);return b.arrays.remove(c,d,this.equalsF)?(0===c.length&&this.parent.remove(a),!0):!1};b.MultiDictionary.prototype.keys=function(){return this.parent.keys()};b.MultiDictionary.prototype.values=function(){for(var a=this.parent.values(),b=[],c=0;c<a.length;c++)for(var e=a[c],f=0;f<e.length;f++)b.push(e[f]);return b};b.MultiDictionary.prototype.containsKey=function(a){return this.parent.containsKey(a)};
b.MultiDictionary.prototype.clear=function(){return this.parent.clear()};b.MultiDictionary.prototype.size=function(){return this.parent.size()};b.MultiDictionary.prototype.isEmpty=function(){return this.parent.isEmpty()};b.Heap=function(a){this.data=[];this.compare=a||b.defaultCompare};b.Heap.prototype.leftChildIndex=function(a){return 2*a+1};b.Heap.prototype.rightChildIndex=function(a){return 2*a+2};b.Heap.prototype.parentIndex=function(a){return Math.floor((a-1)/2)};b.Heap.prototype.minIndex=function(a,
b){return b>=this.data.length?a>=this.data.length?-1:a:0>=this.compare(this.data[a],this.data[b])?a:b};b.Heap.prototype.siftUp=function(a){for(var d=this.parentIndex(a);0<a&&0<this.compare(this.data[d],this.data[a]);)b.arrays.swap(this.data,d,a),a=d,d=this.parentIndex(a)};b.Heap.prototype.siftDown=function(a){for(var d=this.minIndex(this.leftChildIndex(a),this.rightChildIndex(a));0<=d&&0<this.compare(this.data[a],this.data[d]);)b.arrays.swap(this.data,d,a),a=d,d=this.minIndex(this.leftChildIndex(a),
this.rightChildIndex(a))};b.Heap.prototype.peek=function(){if(0<this.data.length)return this.data[0]};b.Heap.prototype.add=function(a){if(!b.isUndefined(a))return this.data.push(a),this.siftUp(this.data.length-1),!0};b.Heap.prototype.removeRoot=function(){if(0<this.data.length){var a=this.data[0];this.data[0]=this.data[this.data.length-1];this.data.splice(this.data.length-1,1);0<this.data.length&&this.siftDown(0);return a}};b.Heap.prototype.contains=function(a){var d=b.compareToEquals(this.compare);
return b.arrays.contains(this.data,a,d)};b.Heap.prototype.size=function(){return this.data.length};b.Heap.prototype.isEmpty=function(){return 0>=this.data.length};b.Heap.prototype.clear=function(){this.data.length=0};b.Heap.prototype.forEach=function(a){b.arrays.forEach(this.data,a)};b.Stack=function(){this.list=new b.LinkedList};b.Stack.prototype.push=function(a){return this.list.add(a,0)};b.Stack.prototype.add=function(a){return this.list.add(a,0)};b.Stack.prototype.pop=function(){return this.list.removeElementAtIndex(0)};
b.Stack.prototype.peek=function(){return this.list.first()};b.Stack.prototype.size=function(){return this.list.size()};b.Stack.prototype.contains=function(a,b){return this.list.contains(a,b)};b.Stack.prototype.isEmpty=function(){return this.list.isEmpty()};b.Stack.prototype.clear=function(){this.list.clear()};b.Stack.prototype.forEach=function(a){this.list.forEach(a)};b.Queue=function(){this.list=new b.LinkedList};b.Queue.prototype.enqueue=function(a){return this.list.add(a)};b.Queue.prototype.add=
function(a){return this.list.add(a)};b.Queue.prototype.dequeue=function(){if(0!==this.list.size()){var a=this.list.first();this.list.removeElementAtIndex(0);return a}};b.Queue.prototype.peek=function(){if(0!==this.list.size())return this.list.first()};b.Queue.prototype.size=function(){return this.list.size()};b.Queue.prototype.contains=function(a,b){return this.list.contains(a,b)};b.Queue.prototype.isEmpty=function(){return 0>=this.list.size()};b.Queue.prototype.clear=function(){this.list.clear()};
b.Queue.prototype.forEach=function(a){this.list.forEach(a)};b.PriorityQueue=function(a){this.heap=new b.Heap(b.reverseCompareFunction(a))};b.PriorityQueue.prototype.enqueue=function(a){return this.heap.add(a)};b.PriorityQueue.prototype.add=function(a){return this.heap.add(a)};b.PriorityQueue.prototype.dequeue=function(){if(0!==this.heap.size()){var a=this.heap.peek();this.heap.removeRoot();return a}};b.PriorityQueue.prototype.peek=function(){return this.heap.peek()};b.PriorityQueue.prototype.contains=
function(a){return this.heap.contains(a)};b.PriorityQueue.prototype.isEmpty=function(){return this.heap.isEmpty()};b.PriorityQueue.prototype.size=function(){return this.heap.size()};b.PriorityQueue.prototype.clear=function(){this.heap.clear()};b.PriorityQueue.prototype.forEach=function(a){this.heap.forEach(a)};b.Set=function(a){this.dictionary=new b.Dictionary(a)};b.Set.prototype.contains=function(a){return this.dictionary.containsKey(a)};b.Set.prototype.add=function(a){if(this.contains(a)||b.isUndefined(a))return!1;
this.dictionary.set(a,a);return!0};b.Set.prototype.intersection=function(a){var b=this;this.forEach(function(c){a.contains(c)||b.remove(c)})};b.Set.prototype.union=function(a){var b=this;a.forEach(function(a){b.add(a)})};b.Set.prototype.difference=function(a){var b=this;a.forEach(function(a){b.remove(a)})};b.Set.prototype.isSubsetOf=function(a){if(this.size()>a.size())return!1;var b=!0;this.forEach(function(c){if(!a.contains(c))return b=!1});return b};b.Set.prototype.remove=function(a){return this.contains(a)?
(this.dictionary.remove(a),!0):!1};b.Set.prototype.forEach=function(a){this.dictionary.forEach(function(b,c){return a(c)})};b.Set.prototype.toArray=function(){return this.dictionary.values()};b.Set.prototype.isEmpty=function(){return this.dictionary.isEmpty()};b.Set.prototype.size=function(){return this.dictionary.size()};b.Set.prototype.clear=function(){this.dictionary.clear()};b.Bag=function(a){this.toStrF=a||b.defaultToString;this.dictionary=new b.Dictionary(this.toStrF);this.nElements=0};b.Bag.prototype.add=
function(a,d){if(isNaN(d)||b.isUndefined(d))d=1;if(b.isUndefined(a)||0>=d)return!1;this.contains(a)?this.dictionary.get(a).copies+=d:this.dictionary.set(a,{value:a,copies:d});this.nElements+=d;return!0};b.Bag.prototype.count=function(a){return this.contains(a)?this.dictionary.get(a).copies:0};b.Bag.prototype.contains=function(a){return this.dictionary.containsKey(a)};b.Bag.prototype.remove=function(a,d){if(isNaN(d)||b.isUndefined(d))d=1;if(b.isUndefined(a)||0>=d||!this.contains(a))return!1;var c=
this.dictionary.get(a);this.nElements=d>c.copies?this.nElements-c.copies:this.nElements-d;c.copies-=d;0>=c.copies&&this.dictionary.remove(a);return!0};b.Bag.prototype.toArray=function(){for(var a=[],b=this.dictionary.values(),c=b.length,e=0;e<c;e++)for(var f=b[e],g=f.value,f=f.copies,h=0;h<f;h++)a.push(g);return a};b.Bag.prototype.toSet=function(){for(var a=new b.Set(this.toStrF),d=this.dictionary.values(),c=d.length,e=0;e<c;e++)a.add(d[e].value);return a};b.Bag.prototype.forEach=function(a){this.dictionary.forEach(function(b,
c){for(var e=c.value,f=c.copies,g=0;g<f;g++)if(!1===a(e))return!1;return!0})};b.Bag.prototype.size=function(){return this.nElements};b.Bag.prototype.isEmpty=function(){return 0===this.nElements};b.Bag.prototype.clear=function(){this.nElements=0;this.dictionary.clear()};b.BSTree=function(a){this.root=null;this.compare=a||b.defaultCompare;this.nElements=0};b.BSTree.prototype.add=function(a){return b.isUndefined(a)?!1:null!==this.insertNode(this.createNode(a))?(this.nElements++,!0):!1};b.BSTree.prototype.clear=
function(){this.root=null;this.nElements=0};b.BSTree.prototype.isEmpty=function(){return 0===this.nElements};b.BSTree.prototype.size=function(){return this.nElements};b.BSTree.prototype.contains=function(a){return b.isUndefined(a)?!1:null!==this.searchNode(this.root,a)};b.BSTree.prototype.remove=function(a){a=this.searchNode(this.root,a);if(null===a)return!1;this.removeNode(a);this.nElements--;return!0};b.BSTree.prototype.inorderTraversal=function(a){this.inorderTraversalAux(this.root,a,{stop:!1})};
b.BSTree.prototype.preorderTraversal=function(a){this.preorderTraversalAux(this.root,a,{stop:!1})};b.BSTree.prototype.postorderTraversal=function(a){this.postorderTraversalAux(this.root,a,{stop:!1})};b.BSTree.prototype.levelTraversal=function(a){this.levelTraversalAux(this.root,a)};b.BSTree.prototype.minimum=function(){return this.isEmpty()?void 0:this.minimumAux(this.root).element};b.BSTree.prototype.maximum=function(){return this.isEmpty()?void 0:this.maximumAux(this.root).element};b.BSTree.prototype.forEach=
function(a){this.inorderTraversal(a)};b.BSTree.prototype.toArray=function(){var a=[];this.inorderTraversal(function(b){a.push(b)});return a};b.BSTree.prototype.height=function(){return this.heightAux(this.root)};b.BSTree.prototype.searchNode=function(a,b){for(var c=null;null!==a&&0!==c;)c=this.compare(b,a.element),0>c?a=a.leftCh:0<c&&(a=a.rightCh);return a};b.BSTree.prototype.transplant=function(a,b){null===a.parent?this.root=b:a===a.parent.leftCh?a.parent.leftCh=b:a.parent.rightCh=b;null!==b&&(b.parent=
a.parent)};b.BSTree.prototype.removeNode=function(a){if(null===a.leftCh)this.transplant(a,a.rightCh);else if(null===a.rightCh)this.transplant(a,a.leftCh);else{var b=this.minimumAux(a.rightCh);b.parent!==a&&(this.transplant(b,b.rightCh),b.rightCh=a.rightCh,b.rightCh.parent=b);this.transplant(a,b);b.leftCh=a.leftCh;b.leftCh.parent=b}};b.BSTree.prototype.inorderTraversalAux=function(a,b,c){null===a||c.stop||(this.inorderTraversalAux(a.leftCh,b,c),c.stop||(c.stop=!1===b(a.element),c.stop||this.inorderTraversalAux(a.rightCh,
b,c)))};b.BSTree.prototype.levelTraversalAux=function(a,d){var c=new b.Queue;for(null!==a&&c.enqueue(a);!c.isEmpty();){a=c.dequeue();if(!1===d(a.element))break;null!==a.leftCh&&c.enqueue(a.leftCh);null!==a.rightCh&&c.enqueue(a.rightCh)}};b.BSTree.prototype.preorderTraversalAux=function(a,b,c){null===a||c.stop||(c.stop=!1===b(a.element),c.stop||(this.preorderTraversalAux(a.leftCh,b,c),c.stop||this.preorderTraversalAux(a.rightCh,b,c)))};b.BSTree.prototype.postorderTraversalAux=function(a,b,c){null===
a||c.stop||(this.postorderTraversalAux(a.leftCh,b,c),c.stop||(this.postorderTraversalAux(a.rightCh,b,c),c.stop||(c.stop=!1===b(a.element))))};b.BSTree.prototype.minimumAux=function(a){for(;null!==a.leftCh;)a=a.leftCh;return a};b.BSTree.prototype.maximumAux=function(a){for(;null!==a.rightCh;)a=a.rightCh;return a};b.BSTree.prototype.successorNode=function(a){if(null!==a.rightCh)return this.minimumAux(a.rightCh);for(var b=a.parent;null!==b&&a===b.rightCh;)a=b,b=a.parent;return b};b.BSTree.prototype.heightAux=
function(a){return null===a?-1:Math.max(this.heightAux(a.leftCh),this.heightAux(a.rightCh))+1};b.BSTree.prototype.insertNode=function(a){for(var b=null,c=this.root,e=null;null!==c;){e=this.compare(a.element,c.element);if(0===e)return null;0>e?(b=c,c=c.leftCh):(b=c,c=c.rightCh)}a.parent=b;null===b?this.root=a:0>this.compare(a.element,b.element)?b.leftCh=a:b.rightCh=a;return a};b.BSTree.prototype.createNode=function(a){return{element:a,leftCh:null,rightCh:null,parent:null}};return b});
