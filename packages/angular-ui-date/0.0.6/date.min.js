angular.module("ui.date",[]).constant("uiDateConfig",{}).directive("uiDate",["uiDateConfig","uiDateConverter",function(e,t){"use strict";var r;return r={},angular.extend(r,e),{require:"?ngModel",link:function(r,n,a,i){var u=function(){return angular.extend({},e,r.$eval(a.uiDate))},o=function(){var e=!1,o=u();if(i){var c=o.onSelect||angular.noop;o.onSelect=function(t,a){r.$apply(function(){e=!0,i.$setViewValue(n.datepicker("getDate")),c(t,a)})},o.beforeShow=function(){e=!0},o.onClose=function(){e=!1},n.off("blur.datepicker").on("blur.datepicker",function(){e||r.$apply(function(){n.datepicker("setDate",n.datepicker("getDate")),i.$setViewValue(n.datepicker("getDate"))})}),i.$render=function(){var e=i.$modelValue;if(angular.isDefined(e)&&null!==e&&!angular.isDate(e)){if(!angular.isString(i.$modelValue))throw new Error("ng-Model value must be a Date, or a String object with a date formatter - currently it is a "+typeof e+" - use ui-date-format to convert it from a string");e=t.stringToDate(a.uiDateFormat,i.$modelValue)}n.datepicker("setDate",e)}}n.datepicker("destroy"),n.datepicker(o),i&&i.$render()};r.$watch(u,o,!0)}}}]).factory("uiDateConverter",["uiDateFormatConfig",function(e){function t(t,r){return t=t||e,r?t?jQuery.datepicker.formatDate(t,r):r.toISOString():null}function r(t,r){if(t=t||e,angular.isString(r)){if(t)return jQuery.datepicker.parseDate(t,r);var n=new Date(r);return isNaN(n.getTime())?null:n}return null}return{stringToDate:r,dateToString:t}}]).constant("uiDateFormatConfig","").directive("uiDateFormat",["uiDateConverter",function(e){var t={require:"ngModel",link:function(t,r,n,a){var i=n.uiDateFormat;a.$formatters.unshift(function(t){return e.stringToDate(i,t)}),a.$parsers.push(function(t){return e.dateToString(i,t)})}};return t}]);