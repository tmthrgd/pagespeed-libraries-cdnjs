function printSingleValue(a){var b=""+a;return a instanceof Date?b=dc.dateFormat(a):typeof a=="string"?b=a:typeof a=="number"&&(b=Math.round(a)),b}dc={version:"0.7.0",constants:{STACK_CLASS:"stack",DESELECTED_CLASS:"deselected",SELECTED_CLASS:"selected",GROUP_INDEX_NAME:"__group_index__",DEFAULT_CHART_GROUP:"__default_chart_group__"}},dc.chartRegistry=function(){function b(b){return b=b,b||(b=dc.constants.DEFAULT_CHART_GROUP),a[b]||(a[b]=[]),b}var a={};return this.has=function(b){for(e in a)if(a[e].indexOf(b)>=0)return!0;return!1},this.register=function(c,d){d=b(d),a[d].push(c)},this.clear=function(){a={}},this.list=function(c){return c=b(c),a[c]},this}(),dc.registerChart=function(a,b){dc.chartRegistry.register(a,b)},dc.hasChart=function(a){return dc.chartRegistry.has(a)},dc.deregisterAllCharts=function(){dc.chartRegistry.clear()},dc.filterAll=function(a){var b=dc.chartRegistry.list(a);for(var c=0;c<b.length;++c)b[c].filterAll()},dc.renderAll=function(a){var b=dc.chartRegistry.list(a);for(var c=0;c<b.length;++c)b[c].render()},dc.redrawAll=function(a){var b=dc.chartRegistry.list(a);for(var c=0;c<b.length;++c)b[c].redraw()},dc.transition=function(a,b,c){if(b<=0)return a;var d=a.transition().duration(b);return c instanceof Function&&c(d),d},dc.units={},dc.units.integers=function(a,b){return new Array(Math.abs(b-a))},dc.round={},dc.round.floor=function(a){return Math.floor(a)},dc.round.ceil=function(a){return Math.ceil(a)},dc.round.round=function(a){return Math.round(a)},dc.override=function(obj,functionName,newFunction){var existingFunction=obj[functionName];obj[functionName]=function(){var expression="newFunction(";for(var i=0;i<arguments.length;++i)expression+="argument["+i+"],";return expression+="existingFunction);",eval(expression)}},dc.dateFormat=d3.time.format("%m/%d/%Y"),dc.printers={},dc.printers.filter=function(a){var b="";return a&&(a instanceof Array?a.length>=2?b="["+printSingleValue(a[0])+" -> "+printSingleValue(a[1])+"]":a.length>=1&&(b=printSingleValue(a[0])):b=printSingleValue(a)),b},dc.utils={},dc.utils.add=function(a,b){if(a instanceof Date){var c=new Date;return c.setTime(a.getTime()),c.setDate(a.getDate()+b),c}return a+b},dc.utils.subtract=function(a,b){if(a instanceof Date){var c=new Date;return c.setTime(a.getTime()),c.setDate(a.getDate()-b),c}return a-b},dc.utils.GroupStack=function(){function d(b){a[b]||(a[b]=[])}var a=[],b=[],c;this.setDataPoint=function(b,c,e){d(b),a[b][c]=e},this.getDataPoint=function(b,c){d(b);var e=a[b][c];return e==undefined&&(e=0),e},this.addGroup=function(a,d){return d||(d=c),b.push([a,d]),b.length-1},this.getGroupByIndex=function(a){return b[a][0]},this.getRetrieverByIndex=function(a){return b[a][1]},this.size=function(){return b.length},this.clear=function(){a=[],b=[]},this.setDefaultRetriever=function(a){c=a}},dc.cumulative={},dc.cumulative.Base=function(){this._keyIndex=[],this._map={},this.sanitizeKey=function(a){return a+="",a},this.clear=function(){this._keyIndex=[],this._map={}},this.size=function(){return this._keyIndex.length},this.getValueByKey=function(a){a=this.sanitizeKey(a);var b=this._map[a];return b},this.setValueByKey=function(a,b){return a=this.sanitizeKey(a),this._map[a]=b},this.indexOfKey=function(a){return a=this.sanitizeKey(a),this._keyIndex.indexOf(a)},this.addToIndex=function(a){a=this.sanitizeKey(a),this._keyIndex.push(a)},this.getKeyByIndex=function(a){return this._keyIndex[a]}},dc.cumulative.Sum=function(){dc.cumulative.Base.apply(this,arguments),this.add=function(a,b){b==null&&(b=0),this.getValueByKey(a)==null?(this.addToIndex(a),this.setValueByKey(a,b)):this.setValueByKey(a,this.getValueByKey(a)+b)},this.minus=function(a,b){this.setValueByKey(a,this.getValueByKey(a)-b)},this.cumulativeSum=function(a){var b=this.indexOfKey(a);if(b<0)return 0;var c=0;for(var d=0;d<=b;++d){var e=this.getKeyByIndex(d);c+=this.getValueByKey(e)}return c}},dc.cumulative.Sum.prototype=new dc.cumulative.Base,dc.cumulative.CountUnique=function(){function a(a){var b=0,c;for(c in a)a.hasOwnProperty(c)&&b++;return b}dc.cumulative.Base.apply(this,arguments),this.add=function(a,b){this.getValueByKey(a)==null&&(this.setValueByKey(a,{}),this.addToIndex(a)),b!=null&&(this.getValueByKey(a)[b]==null&&(this.getValueByKey(a)[b]=0),this.getValueByKey(a)[b]+=1)},this.minus=function(a,b){this.getValueByKey(a)[b]-=1,this.getValueByKey(a)[b]<=0&&delete this.getValueByKey(a)[b]},this.count=function(b){return a(this.getValueByKey(b))},this.cumulativeCount=function(a){var b=this.indexOfKey(a);if(b<0)return 0;var c=0;for(var d=0;d<=b;++d){var e=this.getKeyByIndex(d);c+=this.count(e)}return c}},dc.cumulative.CountUnique.prototype=new dc.cumulative.Base,dc.baseChart=function(a){var b,c,d,e,f,g=200,h=200,i=function(a){return a.key},j=function(a){return a.value},k=function(a){return a.key},l=!1,m=function(a){return a.key+": "+a.value},n=!1,o=750,p=dc.printers.filter,q,r=dc.constants.DEFAULT_CHART_GROUP;return a.dimension=function(c){return arguments.length?(b=c,a):b},a.group=function(b){return arguments.length?(c=b,a):c},a.orderedGroup=function(){return c.order(function(a){return a.key})},a.filterAll=function(){return a.filter(null)},a.dataAreSet=function(){return b!=undefined&&c!=undefined},a.select=function(a){return e.select(a)},a.selectAll=function(a){return e.selectAll(a)},a.anchor=function(b,c){return arguments.length?(b instanceof Object?(d=b.anchor(),e=b.root()):(d=b,e=d3.select(d),dc.registerChart(a,c)),r=c,a):d},a.root=function(b){return arguments.length?(e=b,a):e},a.width=function(b){return arguments.length?(g=b,a):g},a.height=function(b){return arguments.length?(h=b,a):h},a.svg=function(b){return arguments.length?(f=b,a):f},a.resetSvg=function(){return a.select("svg").remove(),a.generateSvg()},a.generateSvg=function(){return f=a.root().append("svg").attr("width",a.width()).attr("height",a.height()),f},a.filterPrinter=function(b){return arguments.length?(p=b,a):p},a.turnOnControls=function(){a.selectAll(".reset").style("display",null),a.selectAll(".filter").text(p(a.filter())).style("display",null)},a.turnOffControls=function(){a.selectAll(".reset").style("display","none"),a.selectAll(".filter").style("display","none").text(a.filter())},a.transitionDuration=function(b){return arguments.length?(o=b,a):o},a.render=function(){var b=a.doRender();return a.invokeRenderlet(a),b},a.redraw=function(){var b=a.doRedraw();return a.invokeRenderlet(a),b},a.filter=function(b){return a},a.doRender=function(){return a},a.doRedraw=function(){return a},a.keyRetriever=function(b){return arguments.length?(i=b,a):i},a.valueRetriever=function(b){return arguments.length?(j=b,a):j},a.label=function(b){return arguments.length?(k=b,l=!0,a):k},a.renderLabel=function(b){return arguments.length?(l=b,a):l},a.title=function(b){return arguments.length?(m=b,n=!0,a):m},a.renderTitle=function(b){return arguments.length?(n=b,a):n},a.renderlet=function(b){return arguments.length?(q=b,a):q},a.invokeRenderlet=function(a){a.renderlet()&&a.renderlet()(a)},a.chartGroup=function(b){return arguments.length?(r=b,a):r},a},dc.coordinateGridChart=function(a){function v(b){if(u){b.selectAll("g."+e).remove();var d=i.tickValues()?i.tickValues():h.ticks(i.ticks()[0]),f=b.append("g").attr("class",c+" "+e).attr("transform","translate("+a.yAxisX()+","+a.margins().top+")");for(var g=0;g<d.length;++g){var j=d[g];f.append("line").attr("x1",h(j)).attr("y1",a.xAxisY()-a.margins().top).attr("x2",h(j)).attr("y2",0)}}}function w(b){if(t){b.selectAll("g."+d).remove();var e=n.tickValues()?n.tickValues():m.ticks(n.ticks()[0]),f=b.append("g").attr("class",c+" "+d).attr("transform","translate("+a.yAxisX()+","+a.margins().top+")");for(var g=0;g<e.length;++g){if(g==0)continue;var h=e[g];f.append("line").attr("x1",1).attr("y1",m(h)).attr("x2",a.xAxisLength()).attr("y2",m(h))}}}function x(a){}function y(b){var c=r.extent();a.round()&&(c[0]=c.map(a.round())[0],c[1]=c.map(a.round())[1],g.select(".brush").call(r.extent(c))),c=r.extent(),a.filter(r.empty()?null:[c[0],c[1]]),dc.redrawAll(a.chartGroup())}function z(a){}var b=5,c="grid-line",d="horizontal",e="vertical";a=dc.baseChart(a);var f={top:10,right:50,bottom:30,left:20},g,h,i=d3.svg.axis(),j=dc.units.integers,k=0,l=!1,m,n=d3.svg.axis(),o=0,p=!1,q,r=d3.svg.brush(),s,t=!1,u=!1;return a.generateG=function(){return g=a.svg().append("g").attr("transform","translate("+a.margins().left+","+a.margins().top+")"),g},a.g=function(b){return arguments.length?(g=b,a):g},a.margins=function(b){return arguments.length?(f=b,a):f},a.x=function(b){return arguments.length?(h=b,a):h},a.xAxis=function(b){return arguments.length?(i=b,a):i},a.renderXAxis=function(b){b.select("g.x").remove(),a.elasticX()&&h.domain([a.xAxisMin(),a.xAxisMax()]),h.range([0,a.xAxisLength()]),i=i.scale(a.x()).orient("bottom"),b.append("g").attr("class","axis x").attr("transform","translate("+a.margins().left+","+a.xAxisY()+")").call(i),v(b)},a.xAxisY=function(){return a.height()-a.margins().bottom},a.xAxisLength=function(){return a.width()-a.margins().left-a.margins().right},a.xUnits=function(b){return arguments.length?(j=b,a):j},a.renderYAxis=function(c){c.select("g.y").remove();if(m==null||a.elasticY())m=d3.scale.linear(),m.domain([a.yAxisMin(),a.yAxisMax()]).rangeRound([a.yAxisHeight(),0]);m.range([a.yAxisHeight(),0]),n=n.scale(m).orient("left").ticks(b),c.append("g").attr("class","axis y").attr("transform","translate("+a.yAxisX()+","+a.margins().top+")").call(n),w(c)},a.renderHorizontalGridLines=function(b){return arguments.length?(t=b,a):t},a.renderVerticalGridLines=function(b){return arguments.length?(u=b,a):u},a.yAxisX=function(){return a.margins().left},a.y=function(b){return arguments.length?(m=b,a):m},a.yAxis=function(b){return arguments.length?(n=b,a):n},a.elasticY=function(b){return arguments.length?(p=b,a):p},a.elasticX=function(b){return arguments.length?(l=b,a):l},a.xAxisMin=function(){var b=d3.min(a.group().all(),function(b){return a.keyRetriever()(b)});return dc.utils.subtract(b,k)},a.xAxisMax=function(){var b=d3.max(a.group().all(),function(b){return a.keyRetriever()(b)});return dc.utils.add(b,k)},a.yAxisMin=function(){var b=d3.min(a.group().all(),function(b){return a.valueRetriever()(b)})-o;return b},a.yAxisMax=function(){var b=d3.max(a.group().all(),function(b){return a.valueRetriever()(b)});return dc.utils.add(b,o)},a.xAxisPadding=function(b){return arguments.length?(k=b,a):k},a.yAxisPadding=function(b){return arguments.length?(o=b,a):o},a.yAxisHeight=function(){return a.height()-a.margins().top-a.margins().bottom},a.round=function(b){return arguments.length?(s=b,a):s},a._filter=function(b){return arguments.length?(q=b,a):q},a.filter=function(b){return arguments.length?(b?(q=b,a.brush().extent(b),a.dimension().filterRange(b),a.turnOnControls()):(q=null,a.brush().clear(),a.dimension().filterAll(),a.turnOffControls()),a):q},a.brush=function(b){return arguments.length?(r=b,a):r},a.renderBrush=function(b){r.on("brushstart",x).on("brush",y).on("brushend",z);var c=b.append("g").attr("class","brush").attr("transform","translate("+a.margins().left+",0)").call(r.x(a.x()));c.selectAll("rect").attr("height",a.xAxisY()),c.selectAll(".resize").append("path").attr("d",a.resizeHandlePath),q&&a.redrawBrush(b)},a.redrawBrush=function(b){a._filter()&&a.brush().empty()&&a.brush().extent(a._filter());var c=b.select("g.brush");c.call(a.brush().x(a.x())),c.selectAll("rect").attr("height",a.xAxisY()),a.fadeDeselectedArea()},a.fadeDeselectedArea=function(){},a.resizeHandlePath=function(b){var c=+(b=="e"),d=c?1:-1,e=a.xAxisY()/3;return"M"+.5*d+","+e+"A6,6 0 0 "+c+" "+6.5*d+","+(e+6)+"V"+(2*e-6)+"A6,6 0 0 "+c+" "+.5*d+","+2*e+"Z"+"M"+2.5*d+","+(e+8)+"V"+(2*e-8)+"M"+4.5*d+","+(e+8)+"V"+(2*e-8)},a.doRender=function(){return a.resetSvg(),a.dataAreSet()&&(a.generateG(),a.renderXAxis(a.g()),a.renderYAxis(a.g()),a.plotData(),a.renderBrush(a.g())),a},a.doRedraw=function(){return a.elasticY()&&a.renderYAxis(a.g()),a.elasticX()&&a.renderXAxis(a.g()),a.plotData(),a.redrawBrush(a.g()),a},a.subRender=function(){return a.dataAreSet()&&a.plotData(),a},a},dc.colorChart=function(a){var b=d3.scale.category20c();return a.colors=function(c){return arguments.length?(c instanceof Array?b=d3.scale.ordinal().range(c):b=c,a):b},a},dc.singleSelectionChart=function(a){var b;return a.hasFilter=function(){return b!=null},a.filter=function(c){return arguments.length?(b=c,a.dataAreSet()&&a.dimension().filter(b),c?a.turnOnControls():a.turnOffControls(),a):b},a.currentFilter=function(){return b},a.highlightSelected=function(a){d3.select(a).classed(dc.constants.SELECTED_CLASS,!0),d3.select(a).classed(dc.constants.DESELECTED_CLASS,!1)},a.fadeDeselected=function(a){d3.select(a).classed(dc.constants.SELECTED_CLASS,!1),d3.select(a).classed(dc.constants.DESELECTED_CLASS,!0)},a.resetHighlight=function(a){d3.select(a).classed(dc.constants.SELECTED_CLASS,!1),d3.select(a).classed(dc.constants.DESELECTED_CLASS,!1)},a},dc.stackableChart=function(a){var b=0,c=1,d=new dc.utils.GroupStack;return a.stack=function(b,c){return d.setDefaultRetriever(a.valueRetriever()),d.addGroup(b,c),a},a.allGroups=function(){var b=[];b.push(a.group());for(var c=0;c<d.size();++c)b.push(d.getGroupByIndex(c));return b},a.allValueRetrievers=function(){var b=[];b.push(a.valueRetriever());for(var c=0;c<d.size();++c)b.push(d.getRetrieverByIndex(c));return b},a.getValueRetrieverByIndex=function(b){return a.allValueRetrievers()[b]},a.yAxisMin=function(){var b=0,c=a.allGroups();for(var d=0;d<c.length;++d){var e=c[d],f=d3.min(e.all(),function(b){return a.getValueRetrieverByIndex(d)(b)});f<b&&(b=f)}return b},a.yAxisMax=function(){var b=0,c=a.allGroups();for(var d=0;d<c.length;++d){var e=c[d];b+=d3.max(e.all(),function(b){return a.getValueRetrieverByIndex(d)(b)})}return dc.utils.add(b,a.yAxisPadding())},a.allKeyRetrievers=function(){var b=[];b.push(a.keyRetriever());for(var c=0;c<d.size();++c)b.push(a.keyRetriever());return b},a.getKeyRetrieverByIndex=function(b){return a.allKeyRetrievers()[b]},a.xAxisMin=function(){var b=null,c=a.allGroups();for(var d=0;d<c.length;++d){var e=c[d],f=d3.min(e.all(),function(b){return a.getKeyRetrieverByIndex(d)(b)});if(b==null||b>f)b=f}return dc.utils.subtract(b,a.xAxisPadding())},a.xAxisMax=function(){var b=null,c=a.allGroups();for(var d=0;d<c.length;++d){var e=c[d],f=d3.max(e.all(),function(b){return a.getKeyRetrieverByIndex(d)(b)});if(b==null||b<f)b=f}return dc.utils.add(b,a.xAxisPadding())},a.dataPointBaseline=function(){return a.margins().top+a.yAxisHeight()-c},a.dataPointHeight=function(d,e){var f=a.yAxisHeight()-a.y()(a.getValueRetrieverByIndex(e)(d))-c;if(isNaN(f)||f<b)f=b;return f},a.calculateDataPointMatrix=function(b){for(var c=0;c<b.length;++c){var e=b[c].all();for(var f=0;f<e.length;++f){var g=e[f];c==0?d.setDataPoint(c,f,a.dataPointBaseline()-a.dataPointHeight(g,c)):d.setDataPoint(c,f,d.getDataPoint(c-1,f)-a.dataPointHeight(g,c))}}},a.getChartStack=function(){return d},a},dc.pieChart=function(a,b){function o(){return d3.layout.pie().value(function(a){return n.valueRetriever()(a)})}function p(a){dc.transition(l,n.transitionDuration()).attr("transform",function(b){b.innerRadius=n.innerRadius(),b.outerRadius=e;var c=a.centroid(b);return isNaN(c[0])||isNaN(c[1])?"translate(0,0)":"translate("+c+")"}).attr("text-anchor","middle").text(function(a){var b=a.data;return r(b)||q(a)?"":n.label()(a)})}function q(a){var b=a.endAngle-a.startAngle;return isNaN(b)||b<m}function r(a){return n.valueRetriever()(a)==0}function s(){n.renderTitle()&&j.selectAll("title").text(function(a){return n.title()(a)})}function t(a){a.innerRadius=n.innerRadius();var b=this._current;u(b)&&(b={startAngle:0,endAngle:0});var c=d3.interpolate(b,a);return this._current=c(0),function(a){return h(c(a))}}function u(a){return a==null||isNaN(a.startAngle)||isNaN(a.endAngle)}function v(a){n.filter(n.keyRetriever()(a.data)),dc.redrawAll(n.chartGroup())}var c=.5,d="pie-slice",e=0,f=0,g,h,i,j,k,l,m=c,n=dc.singleSelectionChart(dc.colorChart(dc.baseChart({})));return n.label(function(a){return n.keyRetriever()(a.data)}),n.renderLabel(!0),n.title(function(a){return a.data.key+": "+a.data.value}),n.transitionDuration(350),n.doRender=function(){return n.resetSvg(),n.dataAreSet()&&(g=n.svg().append("g").attr("transform","translate("+n.cx()+","+n.cy()+")"),i=o(),h=n.buildArcs(),j=n.drawSlices(g,i,h),n.drawLabels(j,h),n.drawTitles(j,h),n.highlightFilter()),n},n.innerRadius=function(a){return arguments.length?(f=a,n):f},n.radius=function(a){return arguments.length?(e=a,n):e},n.cx=function(){return n.width()/2},n.cy=function(){return n.height()/2},n.buildArcs=function(){return d3.svg.arc().outerRadius(e).innerRadius(f)},n.drawSlices=function(a,b,c){return j=a.selectAll("g."+d).data(b(n.orderedGroup().top(Infinity))).enter().append("g").attr("class",function(a,b){return d+" "+b}),k=j.append("path").attr("fill",function(a,b){return n.colors()(b)}).attr("d",c),k.transition().duration(n.transitionDuration()).attrTween("d",t),k.on("click",v),j},n.drawLabels=function(a,b){n.renderLabel()&&(l=a.append("text"),p(b),l.on("click",v))},n.drawTitles=function(a,b){n.renderTitle()&&a.append("title").text(function(a){return n.title()(a)})},n.highlightFilter=function(){n.hasFilter()?n.selectAll("g."+d).select("path").each(function(a){n.isSelectedSlice(a)?n.highlightSelected(this):n.fadeDeselected(this)}):n.selectAll("g."+d).selectAll("path").each(function(a){n.resetHighlight(this)})},n.isSelectedSlice=function(a){return n.filter()==n.keyRetriever()(a.data)},n.doRedraw=function(){n.highlightFilter();var a=i(n.orderedGroup().top(Infinity));return k=k.data(a),l=l.data(a),dc.transition(k,n.transitionDuration(),function(a){a.attrTween("d",t)}),p(h),s(),n},n.minAngelForLabel=function(a){return arguments.length?(m=a,n):m},n.anchor(a,b)},dc.barChart=function(a,b){function f(a,b){var c=e.g().selectAll("rect."+dc.constants.STACK_CLASS+a).data(b.all());c.enter().append("rect").attr("class","bar "+dc.constants.STACK_CLASS+a).attr("x",function(b,c){return i(this,b,a,c)}).attr("y",e.xAxisY()).attr("width",g),dc.transition(c,e.transitionDuration()).attr("y",function(a,b){return k(this,a,b)}).attr("height",function(a){return e.dataPointHeight(a,j(this))}),dc.transition(c,e.transitionDuration()).attr("y",function(a,b){return k(this,a,b)}).attr("height",function(a){return e.dataPointHeight(a,j(this))}),dc.transition(c.exit(),e.transitionDuration()).attr("y",e.xAxisY()).attr("height",0)}function g(a){var b=e.xUnits()(e.x().domain()[0],e.x().domain()[1]).length+d,f=Math.floor(e.xAxisLength()/b);if(isNaN(f)||f<c)f=c;return f}function h(a,b){a[dc.constants.GROUP_INDEX_NAME]=b}function i(a,b,c,d){return h(a,c),e.x()(e.keyRetriever()(b))+e.margins().left-g(b)/2}function j(a){var b=a[dc.constants.GROUP_INDEX_NAME];return b}function k(a,b,c){var d=j(a);return e.getChartStack().getDataPoint(d,c)}var c=1,d=2,e=dc.stackableChart(dc.coordinateGridChart({}));return e.transitionDuration(500),e.plotData=function(){var a=e.allGroups();e.calculateDataPointMatrix(a);for(var b=0;b<a.length;++b)f(b,a[b])},e.fadeDeselectedArea=function(){var a=e.g().selectAll("rect.bar");if(!e.brush().empty()&&e.brush().extent()!=null){var b=e.brush().extent()[0],c=e.brush().extent()[1];a.classed(dc.constants.DESELECTED_CLASS,function(a){var d=e.keyRetriever()(a);return d<b||d>=c})}else a.classed(dc.constants.DESELECTED_CLASS,!1)},e.anchor(a,b)},dc.lineChart=function(a,b){function f(a,b){var c=g(a),d=h(c,b),f=i(d,c,a);e&&j(d,c,a,f)}function g(a){return dc.constants.STACK_CLASS+a}function h(a,b){var c=d.g().select("g."+a);return c.empty()&&(c=d.g().append("g").attr("class",a)),c.datum(b.all()),c}function i(a,b,c){var e=a.select("path.line");e.empty()&&(e=a.append("path").attr("class","line "+b)),e[0][0][dc.constants.GROUP_INDEX_NAME]=c;var f=d3.svg.line().x(function(a){return d.margins().left+d.x()(d.keyRetriever()(a))}).y(function(a,b){var c=this[dc.constants.GROUP_INDEX_NAME];return d.getChartStack().getDataPoint(c,b)});return dc.transition(e,d.transitionDuration(),function(a){a.ease("linear")}).attr("d",f),f}function j(a,b,e,f){var g=a.selectAll("path.area");g.empty()&&(g=a.append("path").attr("class","area "+b)),g[0][0][dc.constants.GROUP_INDEX_NAME]=e;var h=d3.svg.area().x(f.x()).y1(f.y()).y0(function(a,b){var e=this[dc.constants.GROUP_INDEX_NAME];return e==0?d.y()(0)-c+d.margins().top:d.getChartStack().getDataPoint(e-1,b)});dc.transition(g,d.transitionDuration(),function(a){a.ease("linear")}).attr("d",h)}var c=1,d=dc.stackableChart(dc.coordinateGridChart({})),e=!1;return d.transitionDuration(500),d.plotData=function(){var a=d.allGroups();d.calculateDataPointMatrix(a);for(var b=0;b<a.length;++b){var c=a[b];f(b,c)}},d.renderArea=function(a){return arguments.length?(e=a,d):e},d.anchor(a,b)},dc.dataCount=function(a,b){var c=d3.format(",d"),d=dc.baseChart({});return d.doRender=function(){return d.selectAll(".total-count").text(c(d.dimension().size())),d.selectAll(".filter-count").text(c(d.group().value())),d},d.doRedraw=function(){return d.doRender()},d.anchor(a,b)},dc.dataTable=function(a,b){function i(){var a=c.root().selectAll("div.group").data(j(),function(a){return c.keyRetriever()(a)});return a.enter().append("div").attr("class","group").append("span").attr("class","label").text(function(a){return c.keyRetriever()(a)}),a.exit().remove(),a}function j(){h||(h=crossfilter.quicksort.by(f));var a=c.dimension().top(d);return d3.nest().key(c.group()).sortKeys(g).entries(h(a,0,a.length))}function k(a){var b=a.order().selectAll("div.row").data(function(a){return a.values}),c=b.enter().append("div").attr("class","row");for(var d=0;d<e.length;++d){var f=e[d];c.append("span").attr("class","column "+d).text(function(a){return f(a)})}return b.exit().remove(),b}var c=dc.baseChart({}),d=25,e=[],f=function(a){return a},g=d3.ascending,h;return c.doRender=function(){return c.selectAll("div.row").remove(),k(i()),c},c.doRedraw=function(){return c.doRender()},c.size=function(a){return arguments.length?(d=a,c):d},c.columns=function(a){return arguments.length?(e=a,c):e},c.sortBy=function(a){return arguments.length?(f=a,c):f},c.order=function(a){return arguments.length?(g=a,c):g},c.anchor(a,b)},dc.bubbleChart=function(a,b){function j(a){var b=a.enter().append("g");b.attr("class",c).attr("transform",i).append("circle").attr("class",function(a,b){return d+" "+b}).on("click",s).attr("fill",function(a,b){return f.colors()(b)}).attr("r",0),dc.transition(a,f.transitionDuration()).attr("r",function(a){return v(a)}),l(b),o(b)}function l(a){f.renderLabel()&&a.append("text").attr("text-anchor","middle").attr("dy",".3em").on("click",s).text(k)}function m(a){f.renderLabel()&&a.selectAll("text").text(k)}function o(a){f.renderTitle()&&a.append("title").text(n)}function p(a){f.renderTitle()&&a.selectAll("title").text(n)}function q(a){dc.transition(a,f.transitionDuration()).attr("transform",i).selectAll("circle."+d).attr("r",function(a){return v(a)}),m(a),p(a)}function r(a){dc.transition(a.exit().selectAll("circle."+d),f.transitionDuration()).attr("r",0).remove()}function t(a){return f.x()(f.keyRetriever()(a))+f.margins().left}function u(a){return f.margins().top+f.y()(f.valueRetriever()(a))}function v(a){return f.r()(f.radiusValueRetriever()(a))}var c="node",d="bubble",e=10,f=dc.singleSelectionChart(dc.colorChart(dc.coordinateGridChart({})));f.renderLabel(!0),f.renderTitle(!1);var g=d3.scale.linear().domain([0,100]),h=function(a){return a.r};f.transitionDuration(750);var i=function(a){return"translate("+t(a)+","+u(a)+")"};f.plotData=function(){g.range([0,f.xAxisLength()/3]);var a=f.g().selectAll("g."+c).data(f.group().all());j(a),q(a),r(a),f.fadeDeselectedArea()};var k=function(a){return v(a)>e?f.label()(a):""},n=function(a){return f.title()(a)},s=function(a){f.filter(a.key),dc.redrawAll(f.chartGroup())};return f.renderBrush=function(a){},f.redrawBrush=function(a){f.fadeDeselectedArea()},f.fadeDeselectedArea=function(){var a=1,b=.1;f.hasFilter()?f.selectAll("g."+c).select("circle").each(function(a){f.isSelectedSlice(a)?f.highlightSelected(this):f.fadeDeselected(this)}):f.selectAll("g."+c).selectAll("circle").each(function(a){f.resetHighlight(this)})},f.isSelectedSlice=function(a){return f.filter()==a.key},f.r=function(a){return arguments.length?(g=a,f):g},f.radiusValueRetriever=function(a){return arguments.length?(h=a,f):h},f.anchor(a,b)},dc.compositeChart=function(a,b){function f(){var a=[];for(var b=0;b<e.length;++b)a.push(e[b].yAxisMin());return a}function g(){var a=[];for(var b=0;b<e.length;++b)a.push(e[b].yAxisMax());return a}function h(){var a=[];for(var b=0;b<e.length;++b)a.push(e[b].xAxisMin());return a}function i(){var a=[];for(var b=0;b<e.length;++b)a.push(e[b].xAxisMax());return a}var c="sub",d=dc.coordinateGridChart({}),e=[];return d.transitionDuration(500),dc.override(d,"generateG",function(a){for(var b=0;b<e.length;++b){var f=e[b];f.dimension()==null&&f.dimension(d.dimension()),f.group()==null&&f.group(d.group()),f.chartGroup(d.chartGroup()),f.svg(d.svg()),f.height(d.height()),f.width(d.width()),f.margins(d.margins()),f.xUnits(d.xUnits()),f.transitionDuration(d.transitionDuration()),f.generateG(),f.g().attr("class",c)}return a()}),d.plotData=function(){for(var a=0;a<e.length;++a){var b=e[a];b.x(d.x()),b.y(d.y()),b.xAxis(d.xAxis()),b.yAxis(d.yAxis()),b.plotData()}},d.fadeDeselectedArea=function(){for(var a=0;a<e.length;++a){var b=e[a];b.brush(d.brush()),b.fadeDeselectedArea()}},d.compose=function(a){return e=a,d},d.yAxisMin=function(){return d3.min(f())},d.yAxisMax=function(){return dc.utils.add(d3.max(g()),d.yAxisPadding())},d.xAxisMin=function(){return dc.utils.subtract(d3.min(h()),d.xAxisPadding())},d.xAxisMax=function(){return dc.utils.add(d3.max(i()),d.xAxisPadding())},d.anchor(a,b)};