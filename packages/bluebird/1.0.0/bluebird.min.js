(function(a){if(typeof exports==="object"){module.exports=a()}else{if(typeof define==="function"&&define.amd){define(a)}else{if(typeof window!=="undefined"){window.Promise=a()}else{if(typeof global!=="undefined"){global.Promise=a()}else{if(typeof self!=="undefined"){self.Promise=a()}}}}}})(function(){var d,b,a;return(function c(f,k,h){function g(n,l){if(!k[n]){if(!f[n]){var i=typeof require=="function"&&require;if(!l&&i){return i(n,!0)}if(e){return e(n,!0)}throw new Error("Cannot find module '"+n+"'")}var m=k[n]={exports:{}};f[n][0].call(m.exports,function(o){var p=f[n][1][o];return g(p?p:o)},m,m.exports,c,f,k,h)}return k[n].exports}var e=typeof require=="function"&&require;for(var j=0;j<h.length;j++){g(h[j])}return g})({1:[function(f,g,e){g.exports=function(l,o,j){var h=f("./some_promise_array.js")(j);var n=f("./assert.js");function m(r,s,q){var p=o(r,h,q,s===true&&r._isBound()?r._boundTo:void 0);var t=p.promise();if(t.isRejected()){return t}p.setHowMany(1);p.setUnwrap();p.init();return t}l.any=function i(p){return m(p,false,l.any)};l.prototype.any=function k(){return m(this,true,this.any)}}},{"./assert.js":2,"./some_promise_array.js":35}],2:[function(f,g,e){g.exports=(function(){var i=(function(){function j(k){this.constructor$(k);this.message=k;this.name="AssertionError"}j.prototype=new Error();j.prototype.constructor=j;j.prototype.constructor$=Error;return j})();return function h(l,k){if(l===true){return}var j=new i(k);if(Error.captureStackTrace){Error.captureStackTrace(j,h)}if(console&&console.error){console.error(j.stack+"")}throw j}})()},{}],3:[function(j,h,m){var o=j("./assert.js");var n=j("./schedule.js");var k=j("./queue.js");var p=j("./util.js").errorObj;var l=j("./util.js").tryCatch1;function e(){this._isTickUsed=false;this._length=0;this._lateBuffer=new k();this._functionBuffer=new k(25000*3);var u=this;this.consumeFunctionBuffer=function v(){u._consumeFunctionBuffer()}}e.prototype.haveItemsQueued=function r(){return this._length>0};e.prototype.invokeLater=function t(v,w,u){this._lateBuffer.push(v,w,u);this._queueTick()};e.prototype.invoke=function s(v,w,u){var x=this._functionBuffer;x.push(v,w,u);this._length=x.length();this._queueTick()};e.prototype._consumeFunctionBuffer=function i(){var x=this._functionBuffer;while(x.length()>0){var v=x.shift();var w=x.shift();var u=x.shift();v.call(w,u)}this._reset();this._consumeLateBuffer()};e.prototype._consumeLateBuffer=function q(){var v=this._lateBuffer;while(v.length()>0){var x=v.shift();var y=v.shift();var u=v.shift();var w=l(x,y,u);if(w===p){this._queueTick();throw w.e}}};e.prototype._queueTick=function f(){if(!this._isTickUsed){n(this.consumeFunctionBuffer);this._isTickUsed=true}};e.prototype._reset=function g(){this._isTickUsed=false;this._length=0};h.exports=new e()},{"./assert.js":2,"./queue.js":28,"./schedule.js":31,"./util.js":39}],4:[function(f,g,e){var h=f("./promise.js")();g.exports=h},{"./promise.js":20}],5:[function(f,g,e){g.exports=function(j){j.prototype.call=function k(l){var o=arguments.length;var m=new Array(o-1);for(var n=1;n<o;++n){m[n-1]=arguments[n]}return this._then(function(p){return p[l].apply(p,m)},void 0,void 0,void 0,void 0,this.call)};function h(l){var m=typeof this==="string"?this:(""+this);return l[m]}j.prototype.get=function i(l){return this._then(h,void 0,void 0,l,void 0,this.get)}}},{}],6:[function(f,g,e){g.exports=function(m,l){var p=f("./errors.js");var j=f("./async.js");var n=f("./assert.js");var h=p.CancellationError;var s={};m.prototype._cancel=function q(){if(!this.isCancellable()){return this}var t;if((t=this._cancellationParent)!==void 0){t.cancel(s);return}var u=new h();this._attachExtraTrace(u);this._rejectUnchecked(u)};m.prototype.cancel=function r(t){if(!this.isCancellable()){return this}if(t===s){this._cancel();return this}j.invokeLater(this._cancel,this,void 0);return this};m.prototype.cancellable=function k(){if(this._cancellable()){return this}this._setCancellable();this._cancellationParent=void 0;return this};m.prototype.uncancellable=function o(){var t=new m(l);t._setTrace(this.uncancellable,this);t._follow(this);t._unsetCancellable();if(this._isBound()){t._setBoundTo(this._boundTo)}return t};m.prototype.fork=function i(w,v,u){var t=this._then(w,v,u,void 0,void 0,this.fork);t._setCancellable();t._cancellationParent=void 0;return t}}},{"./assert.js":2,"./async.js":3,"./errors.js":10}],7:[function(f,g,e){g.exports=function(){var t=f("./assert.js");var u=f("./util.js").inherits;var k=f("./es5.js").defineProperty;var o=new RegExp("\\b(?:[\\w.]*Promise(?:Array|Spawn)?\\$_\\w+|tryCatch(?:1|2|Apply)|new \\w*PromiseArray|\\w*PromiseArray\\.\\w*PromiseArray|setTimeout|CatchFilter\\$_\\w+|makeNodePromisified|processImmediate|process._tickCallback|nextTick|Async\\$\\w+)\\b");var r=null;var m=null;var j=false;function q(A){var B;if(typeof A==="function"){B="[function "+(A.name||"anonymous")+"]"}else{B=A.toString();var y=/\[object [a-zA-Z0-9$_]+\]/;if(y.test(B)){try{var x=JSON.stringify(A);B=x}catch(z){}}if(B.length===0){B="(empty array)"}}return("(<"+p(B)+">, no stack trace)")}function p(y){var x=41;if(y.length<x){return y}return y.substr(0,x-3)+"..."}function s(x,y){if(!j){}this.captureStackTrace(x,y)}u(s,Error);s.prototype.captureStackTrace=function i(x,y){h(this,x,y)};s.possiblyUnhandledRejection=function n(z){if(typeof console==="object"){var y;if(typeof z==="object"||typeof z==="function"){var x=z.stack;y="Possibly unhandled "+m(x,z)}else{y="Possibly unhandled "+String(z)}if(typeof console.error==="function"||typeof console.error==="object"){console.error(y)}else{if(typeof console.log==="function"||typeof console.error==="object"){console.log(y)}}}};j=s.prototype.captureStackTrace.name!=="CapturedTrace$captureStackTrace";s.combine=function l(E,D){var C=E.length-1;for(var B=D.length-1;B>=0;--B){var z=D[B];if(E[C]===z){E.pop();C--}else{break}}E.push("From previous event:");var y=E.concat(D);var A=[];for(var B=0,x=y.length;B<x;++B){if((o.test(y[B])||(B>0&&!r.test(y[B]))&&y[B]!=="From previous event:")){continue}A.push(y[B])}return A};s.isSupported=function w(){return typeof h==="function"};var h=(function v(){if(typeof Error.stackTraceLimit==="number"&&typeof Error.captureStackTrace==="function"){r=/^\s*at\s*/;m=function(B,C){if(typeof B==="string"){return B}if(C.name!==void 0&&C.message!==void 0){return C.name+". "+C.message}return q(C)};var x=Error.captureStackTrace;return function A(C,B){x(C,B)}}var z=new Error();if(!j&&typeof z.stack==="string"&&typeof"".startsWith==="function"&&(z.stack.startsWith("stackDetection@"))&&v.name==="stackDetection"){k(Error,"stackTraceLimit",{writable:true,enumerable:false,configurable:false,value:25});r=/@/;var y=/[@\n]/;m=function(B,C){if(typeof B==="string"){return(C.name+". "+C.message+"\n"+B)}if(C.name!==void 0&&C.message!==void 0){return C.name+". "+C.message}return q(C)};return function x(I,H){var E=H.name;var C=new Error().stack;var G=C.split(y);var F,B=G.length;for(F=0;F<B;F+=2){if(G[F]===E){break}}G=G.slice(F+2);B=G.length-2;var D="";for(F=0;F<B;F+=2){D+=G[F];D+="@";D+=G[F+1];D+="\n"}I.stack=D}}else{m=function(B,C){if(typeof B==="string"){return B}if((typeof C==="object"||typeof C==="function")&&C.name!==void 0&&C.message!==void 0){return C.name+". "+C.message}return q(C)};return null}})();return s}},{"./assert.js":2,"./es5.js":12,"./util.js":39}],8:[function(f,g,e){g.exports=function(h){var j=f("./util.js");var m=j.tryCatch1;var k=j.errorObj;var l=f("./es5.js").keys;function o(p,r,q){this._instances=p;this._callback=r;this._promise=q}function i(p,t){var q={};var s=m(p,q,t);if(s===k){return s}var r=l(q);if(r.length){k.e=new TypeError("Catch filter must inherit from Error or be a simple predicate function");return k}return s}o.prototype.doFilter=function n(v){var q=this._callback;var y=this._promise;var p=y._isBound()?y._boundTo:void 0;for(var s=0,t=this._instances.length;s<t;++s){var x=this._instances[s];var w=x===Error||(x!=null&&x.prototype instanceof Error);if(w&&v instanceof x){var u=m(q,p,v);if(u===k){h.e=u.e;return h}return u}else{if(typeof x==="function"&&!w){var r=i(x,v);if(r===k){this._promise._attachExtraTrace(k.e);v=k.e;break}else{if(r){var u=m(q,p,v);if(u===k){h.e=u.e;return h}return u}}}}}h.e=v;return h};return o}},{"./es5.js":12,"./util.js":39}],9:[function(h,i,f){var e=h("./util.js");var k=h("./assert.js");var g=e.isPrimitive;var j=e.wrapsPrimitiveReceiver;i.exports=function(p){var q=function n(){return this};var r=function m(){throw this};var l=function o(x,w){if(w===1){return function v(){throw x}}else{if(w===2){return function u(){return x}}}};p.prototype["return"]=p.prototype.thenReturn=function t(u){if(j&&g(u)){return this._then(l(u,2),void 0,void 0,void 0,void 0,this.thenReturn)}return this._then(q,void 0,void 0,u,void 0,this.thenReturn)};p.prototype["throw"]=p.prototype.thenThrow=function s(u){if(j&&g(u)){return this._then(l(u,1),void 0,void 0,void 0,void 0,this.thenThrow)}return this._then(r,void 0,void 0,u,void 0,this.thenThrow)}}},{"./assert.js":2,"./util.js":39}],10:[function(m,g,F){var w=m("./global.js");var h=m("./es5.js").freeze;var e=m("./util.js");var s=e.inherits;var r=e.isObject;var q=e.notEnumerableProp;var E=w.Error;function y(H){return(H&1)>0}function l(H){return(H&2)>0}function u(H){return(H|1)}function f(H){return(H|2)}function o(H){return(H&(~2))}function D(I){var H;if(r(I)&&((H=I.__promiseHandled__)!==void 0)){I.__promiseHandled__=o(H)}return I}function p(H){try{q(H,"__rejectionError__",z)}catch(I){}}function k(H){if(H==null){return false}return((H instanceof z)||H.__rejectionError__===z)}function C(I){try{q(I,"__promiseHandled__",0);return true}catch(H){return false}}function B(H){return H instanceof E}function x(I){if(B(I)){var H=I.__promiseHandled__;if(H===void 0){return C(I)}return !y(H)}return false}function j(H,J){function I(K){this.message=typeof K==="string"?K:J;this.name=H;if(E.captureStackTrace){E.captureStackTrace(this,this.constructor)}}s(I,E);return I}var n=w.TypeError;if(typeof n!=="function"){n=j("TypeError","type error")}var A=w.RangeError;if(typeof A!=="function"){A=j("RangeError","range error")}var v=j("CancellationError","cancellation error");var t=j("TimeoutError","timeout error");function z(H){this.name="RejectionError";this.message=H;this.cause=H;if(H instanceof E){this.message=H.message;this.stack=H.stack}else{if(E.captureStackTrace){E.captureStackTrace(this,this.constructor)}}}s(z,E);var G="__BluebirdErrorTypes__";var i=w[G];if(!i){i=h({CancellationError:v,TimeoutError:t,RejectionError:z});q(w,G,i)}g.exports={Error:E,TypeError:n,RangeError:A,CancellationError:i.CancellationError,RejectionError:i.RejectionError,TimeoutError:i.TimeoutError,originatesFromRejection:k,markAsOriginatingFromRejection:p,attachDefaultState:C,ensureNotHandled:D,withHandledUnmarked:o,withHandledMarked:f,withStackAttached:u,isStackAttached:y,isHandled:l,canAttach:x}},{"./es5.js":12,"./global.js":16,"./util.js":39}],11:[function(f,g,e){g.exports=function(i){var h=f("./errors.js").TypeError;function j(n){var l=new h(n);var k=i.rejected(l);var m=k._peekContext();if(m!=null){m._attachExtraTrace(l)}return k}return j}},{"./errors.js":10}],12:[function(i,g,j){var o=(function(){return this===void 0})();if(o){g.exports={freeze:Object.freeze,defineProperty:Object.defineProperty,keys:Object.keys,getPrototypeOf:Object.getPrototypeOf,isArray:Array.isArray,isES5:o}}else{var p={}.hasOwnProperty;var n={}.toString;var k={}.constructor.prototype;function h(s){var q=[];for(var r in s){if(p.call(s,r)){q.push(r)}}return q}function m(s,q,r){s[q]=r.value;return s}function e(q){return q}function l(r){try{return Object(r).constructor.prototype}catch(q){return k}}function f(r){try{return n.call(r)==="[object Array]"}catch(q){return false}}g.exports={isArray:f,keys:h,defineProperty:m,freeze:e,getPrototypeOf:l,isES5:o}}},{}],13:[function(f,g,e){g.exports=function(m){var n=f("./assert.js");var h=f("./util.js").isArray;function i(t){var p=this._settledValue;var o=p.length;var r=new Array(o);var q=0;for(var s=0;s<o;++s){if(t[s]){r[q++]=p[s]}}r.length=q;return r}var k={ref:null};m.filter=function j(o,p){return m.map(o,p,k)._then(i,void 0,void 0,k.ref,void 0,m.filter)};m.prototype.filter=function l(o){return this.map(o,k)._then(i,void 0,void 0,k.ref,void 0,this.filter)}}},{"./assert.js":2,"./util.js":39}],14:[function(f,g,e){g.exports=function(o,m){var n=f("./util.js");var t=f("./errors.js").ensureNotHandled;var i=n.wrapsPrimitiveReceiver;var j=n.isPrimitive;var r=n.thrower;function q(){return this}function h(){t(this);throw this}function l(w){return function v(){return w}}function p(w){return function v(){t(w);throw w}}function k(x,v,w){var y=i&&j(v);if(w){return x._then(y?q:l(v),r,void 0,v,void 0,k)}else{return x._then(y?h:p(v),r,void 0,v,void 0,k)}}function u(v){var z=this.promise;var y=this.handler;var x=z._isBound()?y.call(z._boundTo):y();if(x!==void 0){var w=o._cast(x,u,void 0);if(o.is(w)){return k(w,v,z.isFulfilled())}}if(z.isRejected()){t(v);m.e=v;return m}else{return v}}o.prototype.lastly=o.prototype["finally"]=function s(v){if(typeof v!=="function"){return this.then()}var w={promise:this,handler:v};return this._then(u,u,void 0,w,void 0,this.lastly)}}},{"./errors.js":10,"./util.js":39}],15:[function(f,g,e){g.exports=function(j,o,l){var m=f("./promise_spawn.js")(j,l);var n=f("./errors.js");var h=n.TypeError;j.coroutine=function k(q){if(typeof q!=="function"){throw new h("generatorFunction must be a function")}var p=m;return function r(){var t=q.apply(this,arguments);var s=new p(void 0,void 0,r);s._generator=t;s._next(void 0);return s.promise()}};j.spawn=function i(q){if(typeof q!=="function"){return o("generatorFunction must be a function")}var r=new m(q,this,j.spawn);var p=r.promise();r._run(j.spawn);return p}}},{"./errors.js":10,"./promise_spawn.js":24}],16:[function(f,g,e){g.exports=(function(){if(typeof this!=="undefined"){return this}if(typeof process!=="undefined"&&typeof global!=="undefined"&&typeof process.execPath==="string"){return global}if(typeof window!=="undefined"&&typeof document!=="undefined"&&typeof navigator!=="undefined"&&navigator!==null&&typeof navigator.appName==="string"){if(window.wrappedJSObject!==undefined){return window.wrappedJSObject}return window}})()},{}],17:[function(f,g,e){g.exports=function(n,p,m,h){var o=f("./assert.js");function i(y){var v=this;var q=void 0;if(typeof v!=="function"){q=v.receiver;v=v.fn}var u=false;var t=new Array(y.length);if(q===void 0){for(var r=0,s=y.length;r<s;++r){var x=v(y[r],r,s);if(!u){var w=n._cast(x,i,void 0);if(w instanceof n){if(w.isFulfilled()){t[r]=w._settledValue;continue}else{u=true}x=w}}t[r]=x}}else{for(var r=0,s=y.length;r<s;++r){var x=v.call(q,y[r],r,s);if(!u){var w=n._cast(x,i,void 0);if(w instanceof n){if(w.isFulfilled()){t[r]=w._settledValue;continue}else{u=true}x=w}}t[r]=x}}return u?p(t,m,i,void 0).promise():t}function j(s,u,t,r,v){if(typeof u!=="function"){return h("fn must be a function")}if(t===true&&s._isBound()){u={fn:u,receiver:s._boundTo}}var q=p(s,m,r,t===true&&s._isBound()?s._boundTo:void 0).promise();if(v!==void 0){v.ref=q}return q._then(i,void 0,void 0,u,void 0,r)}n.prototype.map=function k(q,r){return j(this,q,true,this.map,r)};n.map=function l(q,r,s){return j(q,r,false,n.map,s)}}},{"./assert.js":2}],18:[function(f,g,e){g.exports=function(o){var m=f("./util.js");var k=f("./async.js");var p=f("./assert.js");var i=m.tryCatch2;var j=m.tryCatch1;var q=m.errorObj;function r(s){throw s}function l(v,u){var s=this;var t=i(s,u,null,v);if(t===q){k.invokeLater(r,void 0,t.e)}}function n(v,u){var s=this;var t=j(s,u,v);if(t===q){k.invokeLater(r,void 0,t.e)}}o.prototype.nodeify=function h(s){if(typeof s=="function"){this._then(l,n,void 0,s,this._isBound()?this._boundTo:null,this.nodeify)}return this}}},{"./assert.js":2,"./async.js":3,"./util.js":39}],19:[function(f,g,e){g.exports=function(o,n){var p=f("./assert.js");var m=f("./util.js");var k=f("./async.js");var j=m.tryCatch1;var q=m.errorObj;o.prototype.progressed=function r(t){return this._then(void 0,void 0,t,void 0,void 0,this.progressed)};o.prototype._progress=function l(t){if(this._isFollowingOrFulfilledOrRejected()){return}this._progressUnchecked(t)};o.prototype._progressHandlerAt=function s(t){if(t===0){return this._progressHandler0}return this[t+2-5]};o.prototype._doProgressWith=function h(w){var u=w.value;var v=w.handler;var y=w.promise;var x=w.receiver;this._pushContext();var t=j(v,x,u);this._popContext();if(t===q){if(t.e!=null&&t.e.name==="StopProgressPropagation"){t.e.__promiseHandled__=2}else{y._attachExtraTrace(t.e);y._progress(t.e)}}else{if(o.is(t)){t._then(y._progress,null,null,y,void 0,this._progress)}else{y._progress(t)}}};o.prototype._progressUnchecked=function i(v){if(!this.isPending()){return}var t=this._length();for(var u=0;u<t;u+=5){var w=this._progressHandlerAt(u);var y=this._promiseAt(u);if(!o.is(y)){var x=this._receiverAt(u);if(typeof w==="function"){w.call(x,v,y)}else{if(o.is(x)&&x._isProxied()){x._progressUnchecked(v)}else{if(n(x,y)){x._promiseProgressed(v,y)}}}continue}if(typeof w==="function"){k.invoke(this._doProgressWith,this,{handler:w,promise:y,receiver:this._receiverAt(u),value:v})}else{k.invoke(y._progress,y,v)}}}}},{"./assert.js":2,"./async.js":3,"./util.js":39}],20:[function(f,g,e){g.exports=function(){var G=f("./global.js");var a9=f("./assert.js");var a8=f("./util.js");var aw=f("./async.js");var aL=f("./errors.js");var i=function(){};var at={};var aT={e:null};var bp=f("./promise_array.js")(bn,i);var aF=f("./captured_trace.js")();var s=f("./catch_filter.js")(aT);var aH=f("./promise_resolver.js");var j=a8.isArray;var F=a8.notEnumerableProp;var S=a8.isObject;var a3=a8.ensurePropertyExpansion;var aU=a8.errorObj;var bw=a8.tryCatch1;var bu=a8.tryCatch2;var aE=a8.tryCatchApply;var N=aL.RangeError;var V=aL.TypeError;var o=aL.CancellationError;var P=aL.TimeoutError;var X=aL.RejectionError;var al=aL.originatesFromRejection;var ae=aL.markAsOriginatingFromRejection;var a5=aL.ensureNotHandled;var aa=aL.withHandledMarked;var ar=aL.withStackAttached;var bq=aL.isStackAttached;var aQ=aL.isHandled;var aX=aL.canAttach;var z=a8.thrower;var be=f("./errors_api_rejection")(bn);var L=function ao(){return new V("circular promise resolution chain")};function bc(by){if(by===void 0){return false}return by instanceof bn}function m(by,bz){if(by instanceof bp){return bz>=0}return false}function bn(by){if(typeof by!=="function"){throw new V("the promise constructor requires a resolver function")}if(this.constructor!==bn){throw new V("the promise constructor cannot be invoked directly")}this._bitField=0;this._fulfillmentHandler0=void 0;this._rejectionHandler0=void 0;this._promise0=void 0;this._receiver0=void 0;this._settledValue=void 0;this._boundTo=void 0;if(by!==i){this._resolveFromResolver(by)}}bn.prototype.bind=function O(by){var bz=new bn(i);if(af){bz._setTrace(this.bind,this)}bz._follow(this);bz._setBoundTo(by);if(this._cancellable()){bz._setCancellable();bz._cancellationParent=this}return bz};bn.prototype.toString=function bi(){return"[object Promise]"};bn.prototype.caught=bn.prototype["catch"]=function bj(bD){var by=arguments.length;if(by>1){var bF=new Array(by-1),bz=0,bA;for(bA=0;bA<by-1;++bA){var bE=arguments[bA];if(typeof bE==="function"){bF[bz++]=bE}else{var bC=new V("A catch filter must be an error constructor or a filter function");this._attachExtraTrace(bC);aw.invoke(this._reject,this,bC);return}}bF.length=bz;bD=arguments[bA];this._resetTrace(this.caught);var bB=new s(bF,bD,this);return this._then(void 0,bB.doFilter,void 0,bB,void 0,this.caught)}return this._then(void 0,bD,void 0,void 0,void 0,this.caught)};bn.prototype.then=function D(bA,bz,by){return this._then(bA,bz,by,void 0,void 0,this.then)};bn.prototype.done=function u(bA,bz,by){var bB=this._then(bA,bz,by,void 0,void 0,this.done);bB._setIsFinal()};bn.prototype.spread=function k(bz,by){return this._then(bz,by,void 0,at,void 0,this.spread)};bn.prototype.isFulfilled=function br(){return(this._bitField&268435456)>0};bn.prototype.isRejected=function y(){return(this._bitField&134217728)>0};bn.prototype.isPending=function W(){return !this.isResolved()};bn.prototype.isResolved=function bh(){return(this._bitField&402653184)>0};bn.prototype.isCancellable=function ad(){return !this.isResolved()&&this._cancellable()};bn.prototype.toJSON=function bl(){var by={isFulfilled:false,isRejected:false,fulfillmentValue:void 0,rejectionReason:void 0};if(this.isFulfilled()){by.fulfillmentValue=this._settledValue;by.isFulfilled=true}else{if(this.isRejected()){by.rejectionReason=this._settledValue;by.isRejected=true}}return by};bn.prototype.all=function aY(){return aZ(this,true,this.all)};bn.is=bc;function aZ(bz,bA,by){return E(bz,bp,by,bA===true&&bz._isBound()?bz._boundTo:void 0).promise()}bn.all=function a1(by){return aZ(by,false,bn.all)};bn.join=function J(){var bA=arguments.length;var by=new Array(bA);for(var bz=0;bz<bA;++bz){by[bz]=arguments[bz]}return E(by,bp,bn.join,void 0).promise()};bn.resolve=bn.fulfilled=function ab(bA,bz){var by=new bn(i);if(af){by._setTrace(typeof bz==="function"?bz:bn.resolve,void 0)}if(by._tryFollow(bA)){return by}by._cleanValues();by._setFulfilled();by._settledValue=bA;return by};bn.reject=bn.rejected=function ag(bz){var by=new bn(i);if(af){by._setTrace(bn.reject,void 0)}ae(bz);by._cleanValues();by._setRejected();by._settledValue=bz;return by};bn.prototype.error=function U(by){return this.caught(al,by)};bn.prototype._resolveFromSyncValue=function x(bA,bz){if(bA===aU){this._cleanValues();this._setRejected();this._settledValue=bA.e}else{var by=bn._cast(bA,bz,void 0);if(by instanceof bn){this._follow(by)}else{this._cleanValues();this._setFulfilled();this._settledValue=bA}}};bn.method=function Y(by){if(typeof by!=="function"){throw new V("fn must be a function")}return function bz(){var bD;switch(arguments.length){case 0:bD=bw(by,this,void 0);break;case 1:bD=bw(by,this,arguments[0]);break;case 2:bD=bu(by,this,arguments[0],arguments[1]);break;default:var bE=arguments.length;var bB=new Array(bE);for(var bC=0;bC<bE;++bC){bB[bC]=arguments[bC]}bD=aE(by,bB,this);break}var bA=new bn(i);if(af){bA._setTrace(bz,void 0)}bA._resolveFromSyncValue(bD,bz);return bA}};bn["try"]=bn.attempt=function r(bB,bA,by){if(typeof bB!=="function"){return be("fn must be a function")}var bC=j(bA)?aE(bB,bA,by):bw(bB,by,bA);var bz=new bn(i);if(af){bz._setTrace(bn.attempt,void 0)}bz._resolveFromSyncValue(bC,bn.attempt);return bz};bn.defer=bn.pending=function bm(by){var bz=new bn(i);if(af){bz._setTrace(typeof by==="function"?by:bn.defer,void 0)}return new aH(bz)};bn.bind=function aj(by){var bz=new bn(i);if(af){bz._setTrace(bn.bind,void 0)}bz._setFulfilled();bz._setBoundTo(by);return bz};bn.cast=function bb(bA,bz){if(typeof bz!=="function"){bz=bn.cast}var by=bn._cast(bA,bz,void 0);if(!(by instanceof bn)){return bn.resolve(by,bz)}return by};bn.onPossiblyUnhandledRejection=function aS(by){if(typeof by==="function"){aF.possiblyUnhandledRejection=by}else{aF.possiblyUnhandledRejection=void 0}};var af=false||!!(typeof process!=="undefined"&&typeof process.execPath==="string"&&typeof process.env==="object"&&(process.env.BLUEBIRD_DEBUG||process.env.NODE_ENV==="development"));bn.longStackTraces=function aA(){if(aw.haveItemsQueued()&&af===false){throw new Error("cannot enable long stack traces after promises have been created")}af=aF.isSupported()};bn.hasLongStackTraces=function bv(){return af&&aF.isSupported()};bn.prototype._setProxyHandlers=function am(bA,bB){var by=this._length();if(by>=4194303-5){by=0;this._setLength(0)}if(by===0){this._promise0=bB;this._receiver0=bA}else{var bz=by-5;this[bz+3]=bB;this[bz+4]=bA;this[bz+0]=this[bz+1]=this[bz+2]=void 0}this._setLength(by+5)};bn.prototype._proxyPromiseArray=function aM(bz,by){this._setProxyHandlers(bz,by)};bn.prototype._proxyPromise=function an(by){by._setProxied();this._setProxyHandlers(by,-1)};bn.prototype._then=function C(bz,bG,bA,by,bF,bB){var bH=bF!==void 0;var bD=bH?bF:new bn(i);if(af&&!bH){var bE=this._peekContext()===this._traceParent;bD._traceParent=bE?this._traceParent:this;bD._setTrace(typeof bB==="function"?bB:this._then,this)}if(!bH&&this._isBound()){bD._setBoundTo(this._boundTo)}var bC=this._addCallbacks(bz,bG,bA,bD,by);if(!bH&&this._cancellable()){bD._setCancellable();bD._cancellationParent=this}if(this.isResolved()){aw.invoke(this._queueSettleAt,this,bC)}return bD};bn.prototype._length=function w(){return this._bitField&4194303};bn.prototype._isFollowingOrFulfilledOrRejected=function aJ(){return(this._bitField&939524096)>0};bn.prototype._isFollowing=function aV(){return(this._bitField&536870912)===536870912};bn.prototype._setLength=function aO(by){this._bitField=(this._bitField&-4194304)|(by&4194303)};bn.prototype._cancellable=function aP(){return(this._bitField&67108864)>0};bn.prototype._setFulfilled=function a7(){this._bitField=this._bitField|268435456};bn.prototype._setRejected=function aN(){this._bitField=this._bitField|134217728};bn.prototype._setFollowing=function aW(){this._bitField=this._bitField|536870912};bn.prototype._setIsFinal=function ah(){this._bitField=this._bitField|33554432};bn.prototype._isFinal=function aq(){return(this._bitField&33554432)>0};bn.prototype._setCancellable=function aK(){this._bitField=this._bitField|67108864};bn.prototype._unsetCancellable=function R(){this._bitField=this._bitField&(~67108864)};bn.prototype._receiverAt=function K(bz){var by;if(bz===0){by=this._receiver0}else{by=this[bz+4-5]}if(this._isBound()&&by===void 0){return this._boundTo}return by};bn.prototype._promiseAt=function bo(by){if(by===0){return this._promise0}return this[by+3-5]};bn.prototype._fulfillmentHandlerAt=function bt(by){if(by===0){return this._fulfillmentHandler0}return this[by+0-5]};bn.prototype._rejectionHandlerAt=function aC(by){if(by===0){return this._rejectionHandler0}return this[by+1-5]};bn.prototype._unsetAt=function bk(by){if(by===0){this._fulfillmentHandler0=this._rejectionHandler0=this._progressHandler0=this._promise0=this._receiver0=void 0}else{this[by-5+0]=this[by-5+1]=this[by-5+2]=this[by-5+3]=this[by-5+4]=void 0}};bn.prototype._resolveFromResolver=function B(bD){var bC=this;var bz=af;if(bz){this._setTrace(this._resolveFromResolver,void 0);this._pushContext()}function bB(bE){if(bC._tryFollow(bE)){return}bC._fulfill(bE)}function by(bE){bC._attachExtraTrace(bE);ae(bE);bC._reject(bE)}var bA=bu(bD,void 0,bB,by);if(bz){this._popContext()}if(bA!==void 0&&bA===aU){bC._reject(bA.e)}};bn.prototype._addCallbacks=function v(bB,bD,bz,bE,bC){var by=this._length();if(by>=4194303-5){by=0;this._setLength(0)}if(by===0){this._promise0=bE;if(bC!==void 0){this._receiver0=bC}if(typeof bB==="function"){this._fulfillmentHandler0=bB}if(typeof bD==="function"){this._rejectionHandler0=bD}if(typeof bz==="function"){this._progressHandler0=bz}}else{var bA=by-5;this[bA+3]=bE;this[bA+4]=bC;this[bA+0]=typeof bB==="function"?bB:void 0;this[bA+1]=typeof bD==="function"?bD:void 0;this[bA+2]=typeof bz==="function"?bz:void 0}this._setLength(by+5);return by};bn.prototype._setBoundTo=function a0(by){if(by!==void 0){this._bitField=this._bitField|8388608;this._boundTo=by}else{this._bitField=this._bitField&(~8388608)}};bn.prototype._isBound=function q(){return(this._bitField&8388608)===8388608};bn.prototype._spreadSlowCase=function M(bB,bA,by,bC){var bz=E(by,bp,this._spreadSlowCase,bC).promise()._then(function(){return bB.apply(bC,arguments)},void 0,void 0,at,void 0,this._spreadSlowCase);bA._follow(bz)};bn.prototype._markHandled=function T(by){if(typeof by==="object"&&by!==null){var bz=by.__promiseHandled__;if(bz===void 0){F(by,"__promiseHandled__",2)}else{by.__promiseHandled__=aa(bz)}}};bn.prototype._callSpread=function ba(bC,bE,bD,bA){var bF=this._isBound()?this._boundTo:void 0;if(j(bD)){var bz=this._settlePromiseFromHandler;for(var bB=0,by=bD.length;bB<by;++bB){if(bc(bn._cast(bD[bB],bz,void 0))){this._spreadSlowCase(bC,bE,bD,bF);return}}}if(bA){bE._pushContext()}return aE(bC,bD,bF)};bn.prototype._callHandler=function bd(bA,bC,bD,bB,bz){var by;if(bC===at&&!this.isRejected()){by=this._callSpread(bA,bD,bB,bz)}else{if(bz){bD._pushContext()}by=bw(bA,bC,bB)}if(bz){bD._popContext()}return by};bn.prototype._settlePromiseFromHandler=function aB(bA,bD,bC,bE){if(!bc(bE)){bA.call(bD,bC,bE);return}if(this.isRejected()){this._markHandled(bC)}var bz=af;var by=this._callHandler(bA,bD,bE,bC,bz);if(bE._isFollowing()){return}if(by===aU||by===bE||by===aT){var bB=by===bE?L():a5(by.e);if(by!==aT){bE._attachExtraTrace(bB)}bE._rejectUnchecked(bB)}else{var bF=bn._cast(by,bz?this._settlePromiseFromHandler:void 0,bE);if(bc(bF)){bE._follow(bF);if(bF._cancellable()){bE._cancellationParent=bF;bE._setCancellable()}}else{bE._fulfillUnchecked(by)}}};bn.prototype._follow=function bf(by){this._setFollowing();if(by.isPending()){if(by._cancellable()){this._cancellationParent=by;this._setCancellable()}by._proxyPromise(this)}else{if(by.isFulfilled()){this._fulfillUnchecked(by._settledValue)}else{this._rejectUnchecked(by._settledValue)}}if(af&&by._traceParent==null){by._traceParent=this}};bn.prototype._tryFollow=function bx(bz){if(this._isFollowingOrFulfilledOrRejected()||bz===this){return false}var by=bn._cast(bz,this._tryFollow,void 0);if(!bc(by)){return false}this._follow(by);return true};bn.prototype._resetTrace=function Q(by){if(af){var bz=this._peekContext();var bA=bz===void 0;this._trace=new aF(typeof by==="function"?by:this._resetTrace,bA)}};bn.prototype._setTrace=function ap(by,bA){if(af){var bz=this._peekContext();this._traceParent=bz;var bB=bz===void 0;if(bA!==void 0&&bA._traceParent===bz){this._trace=bA._trace}else{this._trace=new aF(typeof by==="function"?by:this._setTrace,bB)}}return this};bn.prototype._attachExtraTrace=function aR(bB){if(af&&aX(bB)){var bD=this;var bA=bB.stack;bA=typeof bA==="string"?bA.split("\n"):[];var bC=1;while(bD!=null&&bD._trace!=null){bA=aF.combine(bA,bD._trace.stack.split("\n"));bD=bD._traceParent}var bz=Error.stackTraceLimit+bC;var by=bA.length;if(by>bz){bA.length=bz}if(bA.length<=bC){bB.stack="(No stack trace)"}else{bB.stack=bA.join("\n")}bB.__promiseHandled__=ar(bB.__promiseHandled__)}};bn.prototype._notifyUnhandledRejection=function ac(by){if(!aQ(by.__promiseHandled__)){by.__promiseHandled__=aa(by.__promiseHandled__);aF.possiblyUnhandledRejection(by,this)}};bn.prototype._unhandledRejection=function H(by){if(!aQ(by.__promiseHandled__)){aw.invokeLater(this._notifyUnhandledRejection,this,by)}};bn.prototype._cleanValues=function A(){if(this._cancellable()){this._cancellationParent=void 0}};bn.prototype._fulfill=function ai(by){if(this._isFollowingOrFulfilledOrRejected()){return}this._fulfillUnchecked(by)};bn.prototype._reject=function a2(by){if(this._isFollowingOrFulfilledOrRejected()){return}this._rejectUnchecked(by)};bn.prototype._settlePromiseAt=function ay(bA){var bB=this.isFulfilled()?this._fulfillmentHandlerAt(bA):this._rejectionHandlerAt(bA);var bD=this._settledValue;var bC=this._receiverAt(bA);var bE=this._promiseAt(bA);if(typeof bB==="function"){this._settlePromiseFromHandler(bB,bC,bD,bE)}else{var by=false;var bz=this.isFulfilled();if(bC!==void 0){if(bC instanceof bn&&bC._isProxied()){bC._unsetProxied();if(bz){bC._fulfillUnchecked(bD)}else{bC._rejectUnchecked(bD)}by=true}else{if(m(bC,bE)){if(bz){bC._promiseFulfilled(bD,bE)}else{bC._promiseRejected(bD,bE)}by=true}}}if(!by){if(bz){bE._fulfill(bD)}else{bE._reject(bD)}}}if(bA>=256){this._queueGC()}};bn.prototype._isProxied=function ax(){return(this._bitField&4194304)===4194304};bn.prototype._setProxied=function I(){this._bitField=this._bitField|4194304};bn.prototype._unsetProxied=function av(){this._bitField=this._bitField&(~4194304)};bn.prototype._isGcQueued=function bs(){return(this._bitField&-1073741824)===-1073741824};bn.prototype._setGcQueued=function h(){this._bitField=this._bitField|-1073741824};bn.prototype._unsetGcQueued=function a6(){this._bitField=this._bitField&(~-1073741824)};bn.prototype._queueGC=function aD(){if(this._isGcQueued()){return}this._setGcQueued();aw.invokeLater(this._gc,this,void 0)};bn.prototype._gc=function l(){var by=this._length();this._unsetAt(0);for(var bz=0;bz<by;bz++){delete this[bz]}this._setLength(0);this._unsetGcQueued()};bn.prototype._queueSettleAt=function t(by){aw.invoke(this._settlePromiseAt,this,by)};bn.prototype._fulfillUnchecked=function a4(bA){if(!this.isPending()){return}if(bA===this){var bz=L();this._attachExtraTrace(bz);return this._rejectUnchecked(bz)}this._cleanValues();this._setFulfilled();this._settledValue=bA;var by=this._length();if(by>0){aw.invoke(this._fulfillPromises,this,by)}};bn.prototype._fulfillPromises=function aG(by){by=this._length();for(var bz=0;bz<by;bz+=5){this._settlePromiseAt(bz)}};bn.prototype._rejectUnchecked=function bg(bA){if(!this.isPending()){return}if(bA===this){var bz=L();this._attachExtraTrace(bz);return this._rejectUnchecked(bz)}this._cleanValues();this._setRejected();this._settledValue=bA;if(this._isFinal()){aw.invokeLater(z,void 0,bA);return}var by=this._length();if(by>0){aw.invoke(this._rejectPromises,this,by)}else{this._ensurePossibleRejectionHandled(bA)}};bn.prototype._rejectPromises=function au(by){by=this._length();var bB=false;for(var bz=0;bz<by;bz+=5){var bA=this._rejectionHandlerAt(bz);if(!bB){if(typeof bA==="function"){bB=true}else{var bD=this._promiseAt(bz);if(bc(bD)&&bD._length()>0){bB=true}else{var bC=this._receiverAt(bz);if(bc(bC)&&bC._length()>0||m(bC,bD)){bB=true}}}}this._settlePromiseAt(bz)}if(!bB){this._ensurePossibleRejectionHandled(this._settledValue)}};bn.prototype._ensurePossibleRejectionHandled=function p(bz){if(aF.possiblyUnhandledRejection!==void 0){if(S(bz)){var by=bz.__promiseHandled__;var bA=bz;if(by===void 0){bA=a3(bz,"__promiseHandled__",0);by=0}else{if(aQ(by)){return}}if(!bq(by)){this._attachExtraTrace(bA)}aw.invoke(this._unhandledRejection,this,bA)}}};var az=[];bn.prototype._peekContext=function n(){var by=az.length-1;if(by>=0){return az[by]}return void 0};bn.prototype._pushContext=function aI(){if(!af){return}az.push(this)};bn.prototype._popContext=function Z(){if(!af){return}az.pop()};function E(bz,bA,by,bC){var bB=null;if(j(bz)){bB=bz}else{bB=bn._cast(bz,by,void 0);if(bB!==bz){bB._setBoundTo(bC)}else{if(!bc(bB)){bB=null}}}if(bB!==null){return new bA(bB,typeof by==="function"?by:E,bC)}return{promise:function(){return be("expecting an array, a promise or a thenable")}}}var ak=G.Promise;bn.noConflict=function(){if(G.Promise===bn){G.Promise=ak}return bn};if(!aF.isSupported()){bn.longStackTraces=function(){};af=false}bn._makeSelfResolutionError=L;f("./finally.js")(bn,aT);f("./direct_resolve.js")(bn);f("./thenables.js")(bn);bn.RangeError=N;bn.CancellationError=o;bn.TimeoutError=P;bn.TypeError=V;bn.RejectionError=X;f("./timers.js")(bn,i);f("./synchronous_inspection.js")(bn);f("./any.js")(bn,E,bp);f("./race.js")(bn,i);f("./call_get.js")(bn);f("./filter.js")(bn,E,bp,be);f("./generators.js")(bn,be,i);f("./map.js")(bn,E,bp,be);f("./nodeify.js")(bn);f("./promisify.js")(bn,i);f("./props.js")(bn,bp);f("./reduce.js")(bn,E,bp,be,i);f("./settle.js")(bn,E,bp);f("./some.js")(bn,E,bp,be);f("./progress.js")(bn,m);f("./cancel.js")(bn,i);bn.prototype=bn.prototype;return bn}},{"./any.js":1,"./assert.js":2,"./async.js":3,"./call_get.js":5,"./cancel.js":6,"./captured_trace.js":7,"./catch_filter.js":8,"./direct_resolve.js":9,"./errors.js":10,"./errors_api_rejection":11,"./filter.js":13,"./finally.js":14,"./generators.js":15,"./global.js":16,"./map.js":17,"./nodeify.js":18,"./progress.js":19,"./promise_array.js":21,"./promise_resolver.js":23,"./promisify.js":25,"./props.js":27,"./race.js":29,"./reduce.js":30,"./settle.js":32,"./some.js":34,"./synchronous_inspection.js":36,"./thenables.js":37,"./timers.js":38,"./util.js":39}],21:[function(f,g,e){g.exports=function(l,j){var m=f("./assert.js");var B=f("./errors.js").ensureNotHandled;var i=f("./util.js");var o=f("./async.js");var x={}.hasOwnProperty;var u=i.isArray;function k(D){switch(D){case -1:return void 0;case -2:return[];case -3:return{}}}function C(D,E,H){var G=this._promise=new l(j);var F=void 0;if(l.is(D)){F=D;if(D._cancellable()){G._setCancellable();G._cancellationParent=D}if(D._isBound()){G._setBoundTo(H)}}G._setTrace(E,F);this._values=D;this._length=0;this._totalResolved=0;this._init(void 0,-2)}C.PropertiesPromiseArray=function(){};C.prototype.length=function s(){return this._length};C.prototype.promise=function y(){return this._promise};C.prototype._init=function p(K,D){var L=this._values;if(l.is(L)){if(L.isFulfilled()){L=L._settledValue;if(!u(L)){var E=new l.TypeError("expecting an array, a promise or a thenable");this.__hardReject__(E);return}this._values=L}else{if(L.isPending()){L._then(this._init,this._reject,void 0,this,D,this.constructor);return}else{this._reject(L._settledValue);return}}}if(L.length===0){this._resolve(k(D));return}var I=L.length;var G=I;var O;if(this instanceof C.PropertiesPromiseArray){O=this._values}else{O=new Array(I)}var M=false;for(var F=0;F<I;++F){var N=L[F];if(N===void 0&&!x.call(L,F)){G--;continue}var J=l._cast(N,void 0,void 0);if(J instanceof l&&J.isPending()){J._proxyPromiseArray(this,F)}else{M=true}O[F]=J}if(G===0){if(D===-2){this._resolve(O)}else{this._resolve(k(D))}return}this._values=O;this._length=G;if(M){var H=G===I?this._scanDirectValues:this._scanDirectValuesHoled;o.invoke(H,this,I)}};C.prototype._settlePromiseAt=function z(D){var E=this._values[D];if(!l.is(E)){this._promiseFulfilled(E,D)}else{if(E.isFulfilled()){this._promiseFulfilled(E._settledValue,D)}else{if(E.isRejected()){this._promiseRejected(E._settledValue,D)}}}};C.prototype._scanDirectValuesHoled=function h(D){for(var E=0;E<D;++E){if(this._isResolved()){break}if(x.call(this._values,E)){this._settlePromiseAt(E)}}};C.prototype._scanDirectValues=function t(D){for(var E=0;E<D;++E){if(this._isResolved()){break}this._settlePromiseAt(E)}};C.prototype._isResolved=function r(){return this._values===null};C.prototype._resolve=function A(D){this._values=null;this._promise._fulfill(D)};C.prototype.__hardReject__=C.prototype._reject=function n(D){B(D);this._values=null;this._promise._attachExtraTrace(D);this._promise._reject(D)};C.prototype._promiseProgressed=function v(E,D){if(this._isResolved()){return}this._promise._progress({index:D,value:E})};C.prototype._promiseFulfilled=function q(F,E){if(this._isResolved()){return}this._values[E]=F;var D=++this._totalResolved;if(D>=this._length){this._resolve(this._values)}};C.prototype._promiseRejected=function w(E,D){if(this._isResolved()){return}this._totalResolved++;this._reject(E)};return C}},{"./assert.js":2,"./async.js":3,"./errors.js":10,"./util.js":39}],22:[function(i,g,k){var n=i("./errors.js").TypeError;function m(o){if(o!==void 0){this._bitField=o._bitField;this._settledValue=o.isResolved()?o._settledValue:void 0}else{this._bitField=0;this._settledValue=void 0}}m.prototype.isFulfilled=function f(){return(this._bitField&268435456)>0};m.prototype.isRejected=function e(){return(this._bitField&134217728)>0};m.prototype.isPending=function l(){return(this._bitField&402653184)===0};m.prototype.value=function j(){if(!this.isFulfilled()){throw new n("cannot get fulfillment value of a non-fulfilled promise")}return this._settledValue};m.prototype.error=function h(){if(!this.isRejected()){throw new n("cannot get rejection reason of a non-rejected promise")}return this._settledValue};g.exports=m},{"./errors.js":10}],23:[function(l,f,B){var e=l("./util.js");var r=e.maybeWrapAsError;var m=l("./errors.js");var p=m.TimeoutError;var v=m.RejectionError;var i=l("./async.js");var h=e.haveGetters;var z=l("./es5.js");function t(C){return C instanceof Error&&z.getPrototypeOf(C)===Error.prototype}function n(D){var C;if(t(D)){C=new v(D)}else{C=D}m.markAsOriginatingFromRejection(C);return C}function y(D){function C(H,I){if(H){var E=n(r(H));D._attachExtraTrace(E);D._reject(E)}else{if(arguments.length>2){var J=arguments.length;var F=new Array(J-1);for(var G=1;G<J;++G){F[G-1]=arguments[G]}D._fulfill(F)}else{D._fulfill(I)}}}return C}var A;if(!h){A=function A(C){this.promise=C;this.asCallback=y(C);this.callback=this.asCallback}}else{A=function A(C){this.promise=C}}if(h){var g={get:function(){return y(this.promise)}};z.defineProperty(A.prototype,"asCallback",g);z.defineProperty(A.prototype,"callback",g)}A._nodebackForPromise=y;A.prototype.toString=function j(){return"[object PromiseResolver]"};A.prototype.resolve=A.prototype.fulfill=function w(C){var D=this.promise;if(D._tryFollow(C)){return}i.invoke(D._fulfill,D,C)};A.prototype.reject=function u(C){var D=this.promise;m.markAsOriginatingFromRejection(C);D._attachExtraTrace(C);i.invoke(D._reject,D,C)};A.prototype.progress=function x(C){i.invoke(this.promise._progress,this.promise,C)};A.prototype.cancel=function s(){i.invoke(this.promise.cancel,this.promise,void 0)};A.prototype.timeout=function o(){this.reject(new p("timeout"))};A.prototype.isResolved=function q(){return this.promise.isResolved()};A.prototype.toJSON=function k(){return this.promise.toJSON()};f.exports=A},{"./async.js":3,"./errors.js":10,"./es5.js":12,"./util.js":39}],24:[function(f,g,e){g.exports=function(p,n){var s=f("./errors.js");var v=s.TypeError;var t=s.ensureNotHandled;var l=f("./util.js");var m=l.isArray;var r=l.errorObj;var j=l.tryCatch1;function o(x,y,w){var z=this._promise=new p(n);z._setTrace(w,void 0);this._generatorFunction=x;this._receiver=y;this._generator=void 0}o.prototype.promise=function h(){return this._promise};o.prototype._run=function k(){this._generator=this._generatorFunction.call(this._receiver);this._receiver=this._generatorFunction=void 0;this._next(void 0)};o.prototype._continue=function i(w){if(w===r){this._generator=void 0;this._promise._attachExtraTrace(w.e);this._promise._reject(w.e);return}var y=w.value;if(w.done===true){this._generator=void 0;if(!this._promise._tryFollow(y)){this._promise._fulfill(y)}}else{var x=p._cast(y,i,void 0);if(!(x instanceof p)){if(m(x)){x=p.all(x)}else{this._throw(new v("A value was yielded that could not be treated as a promise"));return}}x._then(this._next,this._throw,void 0,this,null,void 0)}};o.prototype._throw=function q(w){t(w);this._promise._attachExtraTrace(w);this._continue(j(this._generator["throw"],this._generator,w))};o.prototype._next=function u(w){this._continue(j(this._generator.next,this._generator,w))};return o}},{"./errors.js":10,"./util.js":39}],25:[function(f,g,e){g.exports=function(l,j){var o={};var i=f("./util.js");var B=f("./es5.js");var A=f("./promise_resolver.js")._nodebackForPromise;var x=i.withAppended;var u=i.maybeWrapAsError;var q=i.canEvaluate;var p=i.notEnumerableProp;var z=i.deprecated;var m=f("./assert.js");var t=new RegExp("__beforePromisified__$");var C={}.hasOwnProperty;function v(E){return E.__isPromisified__===true}var w=(function(){if(B.isES5){var E=Object.create;var F=Object.getOwnPropertyDescriptor;return function(M){var G=M;var K=[];var L=E(null);while(M!==null){var O=B.keys(M);for(var H=0,J=O.length;H<J;++H){var N=O[H];if(L[N]||t.test(N)||C.call(G,N+"__beforePromisified__")){continue}L[N]=true;var I=F(M,N);if(I!=null&&typeof I.value==="function"&&!v(I.value)){K.push(N,I.value)}}M=B.getPrototypeOf(M)}return K}}else{return function(J){var G=[];for(var H in J){if(t.test(H)||C.call(J,H+"__beforePromisified__")){continue}var I=J[H];if(typeof I==="function"&&!v(I)){G.push(H,I)}}return G}}})();function k(J,G,E){function I(O){var M=new Array(O);for(var N=0,L=M.length;N<L;++N){M[N]="a"+(N+1)}var K=O>0?",":"";if(typeof J==="string"&&G===o){return"this['"+J+"']("+M.join(",")+K+" fn);break;"}return(G===void 0?"callback("+M.join(",")+K+" fn);":"callback.call("+(G===o?"this":"receiver")+", "+M.join(",")+K+" fn);")+"break;"}function F(){return"var args = new Array(len + 1);var i = 0;for (var i = 0; i < len; ++i) {    args[i] = arguments[i];}args[i] = fn;"}var H=(typeof E==="string"?E+"Async":"promisified");return new Function("Promise","callback","receiver","withAppended","maybeWrapAsError","nodebackForPromise","INTERNAL","var ret = function "+H+'(a1, a2, a3, a4, a5) {"use strict";var len = arguments.length;var promise = new Promise(INTERNAL);promise._setTrace('+H+", void 0);var fn = nodebackForPromise(promise);try{switch(len) {case 1:"+I(1)+"case 2:"+I(2)+"case 3:"+I(3)+"case 0:"+I(0)+"case 4:"+I(4)+"case 5:"+I(5)+"default: "+F()+(typeof J==="string"?"this['"+J+"'].apply(":"callback.apply(")+(G===o?"this":"receiver")+", args); break;}}catch(e){ var wrapped = maybeWrapAsError(e);promise._attachExtraTrace(wrapped);promise._reject(wrapped);}return promise;}; ret.__isPromisified__ = true; return ret;")(l,J,G,x,u,A,j)}function n(G,E){function F(){var K=E;if(E===o){K=this}if(typeof G==="string"){G=K[G]}var L=new l(j);L._setTrace(F,void 0);var I=A(L);try{G.apply(K,x(arguments,I))}catch(J){var H=u(J);L._attachExtraTrace(H);L._reject(H)}return L}F.__isPromisified__=true;return F}var h=q?k:n;function y(){}function s(N,E,L){if(L){var F=w(N);for(var G=0,I=F.length;G<I;G+=2){var M=F[G];var K=F[G+1];var J=M+"__beforePromisified__";var H=M+"Async";p(N,J,K);N[H]=h(J,o,M)}if(F.length>16){y.prototype=N}return N}else{return h(N,E,void 0)}}l.promisify=function D(E,F){if(typeof E==="object"&&E!==null){z("Promise.promisify for promisifying entire objects is deprecated. Use Promise.promisifyAll instead.");return s(E,F,true)}if(typeof E!=="function"){throw new TypeError("fn must be a function")}if(v(E)){return E}return s(E,arguments.length<2?o:F,false)};l.promisifyAll=function r(E){if(typeof E!=="function"&&typeof E!=="object"){throw new TypeError("the target of promisifyAll must be an object or a function")}return s(E,void 0,true)}}},{"./assert.js":2,"./es5.js":12,"./promise_resolver.js":23,"./util.js":39}],26:[function(f,g,e){g.exports=function(n,l){var o=f("./assert.js");var k=f("./util.js");var p=k.inherits;var m=f("./es5.js");function i(w,t,x){var v=m.keys(w);var s=new Array(v.length);for(var u=0,r=s.length;u<r;++u){s[u]=w[v[u]]}this.constructor$(s,t,x);if(!this._isResolved()){for(var u=0,r=v.length;u<r;++u){s.push(v[u])}}}p(i,l);i.prototype._init=function h(){this._init$(void 0,-3)};i.prototype._promiseFulfilled=function q(v,t){if(this._isResolved()){return}this._values[t]=v;var s=++this._totalResolved;if(s>=this._length){var x={};var w=this.length();for(var u=0,r=this.length();u<r;++u){x[this._values[u+w]]=this._values[u]}this._resolve(x)}};i.prototype._promiseProgressed=function j(s,r){if(this._isResolved()){return}this._promise._progress({key:this._values[r+this.length()],value:s})};l.PropertiesPromiseArray=i;return i}},{"./assert.js":2,"./es5.js":12,"./util.js":39}],27:[function(f,g,e){g.exports=function(o,m){var j=f("./properties_promise_array.js")(o,m);var l=f("./util.js");var h=f("./errors_api_rejection")(o);var p=l.isObject;function n(s,t,r){var q;var u=o._cast(s,r,void 0);if(!p(u)){return h("cannot await properties of a non-object")}else{if(o.is(u)){q=u._then(o.props,void 0,void 0,void 0,void 0,r)}else{q=new j(u,r,t===true&&u._isBound()?u._boundTo:void 0).promise();t=false}}if(t===true&&u._isBound()){q._setBoundTo(u._boundTo)}return q}o.prototype.props=function k(){return n(this,true,this.props)};o.props=function i(q){return n(q,false,o.props)}}},{"./errors_api_rejection":11,"./properties_promise_array.js":26,"./util.js":39}],28:[function(h,g,j){var s=h("./assert.js");function f(y,w,z,x,u){for(var v=0;v<u;++v){z[v+x]=y[v+w]}}function p(u){u=u>>>0;u=u-1;u=u|(u>>1);u=u|(u>>2);u=u|(u>>4);u=u|(u>>8);u=u|(u>>16);return u+1}function m(u){if(typeof u!=="number"){return 16}return p(Math.min(Math.max(16,u),1073741824))}function i(u){this._capacity=m(u);this._length=0;this._front=0;this._makeCapacity()}i.prototype._willBeOverCapacity=function l(u){return this._capacity<u};i.prototype._pushOne=function e(u){var w=this.length();this._checkCapacity(w+1);var v=(this._front+w)&(this._capacity-1);this[v]=u;this._length=w+1};i.prototype.push=function q(w,z,u){var y=this.length()+3;if(this._willBeOverCapacity(y)){this._pushOne(w);this._pushOne(z);this._pushOne(u);return}var v=this._front+y-3;this._checkCapacity(y);var x=this._capacity-1;this[(v+0)&x]=w;this[(v+1)&x]=z;this[(v+2)&x]=u;this._length=y};i.prototype.shift=function k(){var v=this._front,u=this[v];this[v]=void 0;this._front=(v+1)&(this._capacity-1);this._length--;return u};i.prototype.length=function r(){return this._length};i.prototype._makeCapacity=function t(){var u=this._capacity;for(var v=0;v<u;++v){this[v]=void 0}};i.prototype._checkCapacity=function o(u){if(this._capacity<u){this._resizeTo(this._capacity<<3)}};i.prototype._resizeTo=function n(v){var u=this._front;var z=this._capacity;var y=new Array(z);var x=this.length();f(this,0,y,0,z);this._capacity=v;this._makeCapacity();this._front=0;if(u+x<=z){f(y,u,this,0,x)}else{var w=x-((u+x)&(z-1));f(y,u,this,0,w);f(y,0,this,w,x-w)}};g.exports=i},{"./assert.js":2}],29:[function(f,g,e){g.exports=function(o,l){var h=f("./errors_api_rejection.js")(o);var k=f("./util.js").isArray;var p=function m(s){return s.then(function r(t){return i(t,r,s)})};var j={}.hasOwnProperty;function i(x,r,y){var z=o._cast(x,r,void 0);if(o.is(z)){return p(z)}else{if(!k(x)){return h("expecting an array, a promise or a thenable")}}var v=new o(l);v._setTrace(r,y);if(y!==void 0){if(y._isBound()){v._setBoundTo(y._boundTo)}if(y._cancellable()){v._setCancellable();v._cancellationParent=y}}var w=v._fulfill;var A=v._reject;for(var t=0,u=x.length;t<u;++t){var s=x[t];if(s===void 0&&!(j.call(x,t))){continue}o.cast(s)._then(w,A,void 0,v,null,r)}return v}o.race=function q(r){return i(r,o.race,void 0)};o.prototype.race=function n(){return i(this,this.race,void 0)}}},{"./errors_api_rejection.js":11,"./util.js":39}],30:[function(f,g,e){g.exports=function(q,s,o,i,n){var r=f("./assert.js");function u(B,z,y,x,A){this.promise=new q(n);this.index=z;this.length=x.length;this.items=x;this.callback=B;this.receiver=A;this.accum=y}u.prototype.reject=function t(x){this.promise._reject(x)};u.prototype.fulfill=function m(y,x){this.accum=y;this.index=x+1;this.iterate()};u.prototype.iterate=function j(){var B=this.index;var y=this.length;var A=this.items;var x=this.accum;var C=this.receiver;var D=this.callback;var z=this.iterate;for(;B<y;++B){x=q._cast(D.call(C,x,A[B],B,y),z,void 0);if(x instanceof q){x._then(this.fulfill,this.reject,void 0,this,B,z);return}}this.promise._fulfill(x)};function l(y,F){var B=this;var x=void 0;if(typeof B!=="function"){x=B.receiver;B=B.fn}var A=y.length;var D=void 0;var E=0;if(F!==void 0){D=F;E=0}else{E=1;if(A>0){D=y[0]}}var z=E;if(z>=A){return D}var C=new u(B,z,D,y,x);C.iterate();return C.promise}function k(z){var y=this.fn;var x=this.initialValue;return l.call(y,z,x)}function h(z,C,x,B,y){return x._then(function A(D){return p(z,C,D,B,A)},void 0,void 0,void 0,void 0,y)}function p(z,B,x,A,y){if(typeof B!=="function"){return i("fn must be a function")}if(A===true&&z._isBound()){B={fn:B,receiver:z._boundTo}}if(x!==void 0){if(q.is(x)){if(x.isFulfilled()){x=x._settledValue}else{return h(z,B,x,A,y)}}return s(z,o,y,A===true&&z._isBound()?z._boundTo:void 0).promise()._then(k,void 0,void 0,{fn:B,initialValue:x},void 0,q.reduce)}return s(z,o,y,A===true&&z._isBound()?z._boundTo:void 0).promise()._then(l,void 0,void 0,B,void 0,y)}q.reduce=function w(y,z,x){return p(y,z,x,false,q.reduce)};q.prototype.reduce=function v(y,x){return p(this,y,x,true,this.reduce)}}},{"./assert.js":2}],31:[function(g,h,e){var j=g("./global.js");var l=g("./assert.js");var k;if(typeof process!=="undefined"&&process!==null&&typeof process.cwd==="function"&&typeof process.nextTick==="function"){k=process.nextTick}else{if((typeof MutationObserver==="function"||typeof WebkitMutationObserver==="function"||typeof WebKitMutationObserver==="function")&&typeof document!=="undefined"&&typeof document.createElement==="function"){k=(function(){var o=j.MutationObserver||j.WebkitMutationObserver||j.WebKitMutationObserver;var q=document.createElement("div");var p=void 0;var m=new o(function n(){var r=p;p=void 0;r()});m.observe(q,{attributes:true});return function n(r){p=r;q.setAttribute("class","foo")}})()}else{if(typeof j.postMessage==="function"&&typeof j.importScripts!=="function"&&typeof j.addEventListener==="function"&&typeof j.removeEventListener==="function"){var i="bluebird_message_key_"+Math.random();k=(function(){var n=void 0;function m(p){if(p.source===j&&p.data===i){var o=n;n=void 0;o()}}j.addEventListener("message",m,false);return function m(o){n=o;j.postMessage(i,"*")}})()}else{if(typeof MessageChannel==="function"){k=(function(){var o=void 0;var n=new MessageChannel();n.port1.onmessage=function m(){var p=o;o=void 0;p()};return function m(p){o=p;n.port2.postMessage(null)}})()}else{if(j.setTimeout){k=function f(m){setTimeout(m,4)}}else{k=function f(m){m()}}}}}}h.exports=k},{"./assert.js":2,"./global.js":16}],32:[function(f,g,e){g.exports=function(l,n,i){var k=f("./settled_promise_array.js")(l,i);function h(p,q,o){return n(p,k,o,q===true&&p._isBound()?p._boundTo:void 0).promise()}l.settle=function j(o){return h(o,false,l.settle)};l.prototype.settle=function m(){return h(this,true,this.settle)}}},{"./settled_promise_array.js":33}],33:[function(f,g,e){g.exports=function(l,k){var m=f("./assert.js");var q=f("./promise_inspection.js");var j=f("./util.js");var p=j.inherits;function n(r,s,t){this.constructor$(r,s,t)}p(n,k);n.prototype._promiseResolved=function h(t,r){this._values[t]=r;var s=++this._totalResolved;if(s>=this._length){this._resolve(this._values)}};n.prototype._promiseFulfilled=function o(t,s){if(this._isResolved()){return}var r=new q();r._bitField=268435456;r._settledValue=t;this._promiseResolved(s,r)};n.prototype._promiseRejected=function i(t,s){if(this._isResolved()){return}var r=new q();r._bitField=134217728;r._settledValue=t;this._promiseResolved(s,r)};return n}},{"./assert.js":2,"./promise_inspection.js":22,"./util.js":39}],34:[function(f,g,e){g.exports=function(m,o,l,h){var j=f("./some_promise_array.js")(l);var n=f("./assert.js");function k(t,s,u,r){if((s|0)!==s||s<0){return h("expecting a positive integer")}var q=o(t,j,r,u===true&&t._isBound()?t._boundTo:void 0);var v=q.promise();if(v.isRejected()){return v}q.setHowMany(s);q.init();return v}m.some=function i(r,q){return k(r,q,false,m.some)};m.prototype.some=function p(q){return k(this,q,true,this.some)}}},{"./assert.js":2,"./some_promise_array.js":35}],35:[function(f,g,e){g.exports=function(y){var h=f("./util.js");var s=f("./errors.js").RangeError;var m=h.inherits;var n=h.isArray;function u(z,A,B){this.constructor$(z,A,B);this._howMany=0;this._unwrap=false;this._initialized=false}m(u,y);u.prototype._init=function p(){if(!this._initialized){return}if(this._howMany===0){this._resolve([]);return}this._init$(void 0,-2);var A=n(this._values);this._holes=A?this._values.length-this.length():0;if(!this._isResolved()&&A&&this._howMany>this._canPossiblyFulfill()){var z="(Promise.some) input array contains less than "+this._howMany+" promises";this._reject(new s(z))}};u.prototype.init=function q(){this._initialized=true;this._init()};u.prototype.setUnwrap=function l(){this._unwrap=true};u.prototype.howMany=function j(){return this._howMany};u.prototype.setHowMany=function x(z){if(this._isResolved()){return}this._howMany=z};u.prototype._promiseFulfilled=function v(z){if(this._isResolved()){return}this._addFulfilled(z);if(this._fulfilled()===this.howMany()){this._values.length=this.howMany();if(this.howMany()===1&&this._unwrap){this._resolve(this._values[0])}else{this._resolve(this._values)}}};u.prototype._promiseRejected=function i(z){if(this._isResolved()){return}this._addRejected(z);if(this.howMany()>this._canPossiblyFulfill()){if(this._values.length===this.length()){this._reject([])}else{this._reject(this._values.slice(this.length()+this._holes))}}};u.prototype._fulfilled=function r(){return this._totalResolved};u.prototype._rejected=function o(){return this._values.length-this.length()-this._holes};u.prototype._addRejected=function t(z){this._values.push(z)};u.prototype._addFulfilled=function w(z){this._values[this._totalResolved++]=z};u.prototype._canPossiblyFulfill=function k(){return this.length()-this._rejected()};return u}},{"./errors.js":10,"./util.js":39}],36:[function(f,g,e){g.exports=function(j){var i=f("./promise_inspection.js");j.prototype.inspect=function h(){return new i(this)}}},{"./promise_inspection.js":22}],37:[function(f,g,e){g.exports=function(l){var m=f("./assert.js");var k=f("./util.js");var n=k.errorObj;var p=k.isObject;var h=k.tryCatch2;function i(r){try{return r.then}catch(q){n.e=q;return n}}function o(s,q,r){if(p(s)){if(s instanceof l){return s}var t=i(s);if(t===n){q=typeof q==="function"?q:o;if(r!==void 0){r._attachExtraTrace(t.e)}return l.reject(t.e,q)}else{if(typeof t==="function"){q=typeof q==="function"?q:o;return j(s,t,q,r)}}}return s}function j(z,t,q,v){var r=l.defer(q);var y=false;var w=h(t,z,s,u);if(w===n&&!y){y=true;if(v!==void 0){v._attachExtraTrace(w.e)}r.promise._reject(w.e)}return r.promise;function s(A){if(y){return}y=true;if(z===A){var x=l._makeSelfResolutionError();if(v!==void 0){v._attachExtraTrace(x)}r.promise._reject(x);return}r.resolve(A)}function u(x){if(y){return}y=true;if(v!==void 0){v._attachExtraTrace(x)}r.promise._attachExtraTrace(x);r.promise._reject(x)}}l._cast=o}},{"./assert.js":2,"./util.js":39}],38:[function(f,g,e){var i=f("./global.js");var j=function(l,o){var n=arguments.length;var k=new Array(n-2);for(var m=2;m<n;++m){k[m-2]=arguments[m]}i.setTimeout(function(){l.apply(void 0,k)},o)};var h={};i.setTimeout(function(k){if(k===h){j=i.setTimeout}},1,h);g.exports=function(t,r){var p=f("./util.js");var u=f("./assert.js");var v=f("./errors.js");var k=f("./errors_api_rejection")(t);var l=t.TimeoutError;var o=function s(B,A,y){if(!B.isPending()){return}if(typeof A!=="string"){A="operation timed out after "+y+" ms"}var z=new l(A);v.markAsOriginatingFromRejection(z);B._attachExtraTrace(z);B._rejectUnchecked(z)};var n=function q(y,z){z._fulfill(y)};t.delay=function w(B,A,z){if(A===void 0){A=B;B=void 0}if((A|0)!==A||A<0){return k("expecting a positive integer")}if(typeof z!=="function"){z=t.delay}var y=t._cast(B,z,void 0);var C=new t(r);if(t.is(y)){if(y._isBound()){C._setBoundTo(y._boundTo)}if(y._cancellable()){C._setCancellable();C._cancellationParent=y}C._setTrace(z,y);C._follow(y);return C.then(function(D){return t.delay(D,A)})}else{C._setTrace(z,void 0);j(n,A,B,C)}return C};t.prototype.delay=function m(y){return t.delay(this,y,this.delay)};t.prototype.timeout=function x(z,A){if((z|0)!==z||z<0){return k("expecting a positive integer")}var y=new t(r);y._setTrace(this.timeout,this);if(this._isBound()){y._setBoundTo(this._boundTo)}if(this._cancellable()){y._setCancellable();y._cancellationParent=this}y._follow(this);j(o,z,y,A,z);return y}}},{"./assert.js":2,"./errors.js":10,"./errors_api_rejection":11,"./global.js":16,"./util.js":39}],39:[function(l,e,B){var u=l("./global.js");var g=l("./assert.js");var y=l("./es5.js");var j=(function(){try{var D={};y.defineProperty(D,"f",{get:function(){return 3}});return D.f===3}catch(C){return false}})();var f=function(E,C,J){try{m(E,C,J);return E}catch(H){var I={};var L=y.keys(E);for(var F=0,G=L.length;F<G;++F){try{var K=L[F];I[K]=E[K]}catch(D){I[K]=D}}m(I,C,J);return I}};var o=(function(){if(typeof window!=="undefined"&&window!==null&&typeof window.document!=="undefined"&&typeof navigator!=="undefined"&&navigator!==null&&typeof navigator.appName==="string"&&window===u){return false}return true})();function w(C){if(typeof console!=="undefined"&&console!==null&&typeof console.warn==="function"){console.warn("Bluebird: "+C)}}var k={e:{}};function i(D,E,C){try{return D.call(E,C)}catch(F){k.e=F;return k}}function h(E,F,C,D){try{return E.call(F,C,D)}catch(G){k.e=G;return k}}function r(D,C,E){try{return D.apply(E,C)}catch(F){k.e=F;return k}}var p=function(F,D){var E={}.hasOwnProperty;function C(){this.constructor=F;this.constructor$=D;for(var G in D.prototype){if(E.call(D.prototype,G)&&G.charAt(G.length-1)!=="$"){this[G+"$"]=D.prototype[G]}}}C.prototype=D.prototype;F.prototype=new C();return F.prototype};function q(C){return typeof C==="string"?C:(""+C)}function z(C){return C==null||C===true||C===false||typeof C==="string"||typeof C==="number"}function n(C){return !z(C)}function t(C){if(!z(C)){return C}return new Error(q(C))}function v(G,E){var C=G.length;var D=new Array(C+1);var F;for(F=0;F<C;++F){D[F]=G[F]}D[F]=E;return D}function m(F,C,D){var E={value:D,configurable:true,enumerable:false,writable:true};y.defineProperty(F,C,E);return F}var s=(function(){return this!=="string"}).call("string");function x(C){throw C}var A={thrower:x,isArray:y.isArray,haveGetters:j,notEnumerableProp:m,isPrimitive:z,isObject:n,ensurePropertyExpansion:f,canEvaluate:o,deprecated:w,errorObj:k,tryCatch1:i,tryCatch2:h,tryCatchApply:r,inherits:p,withAppended:v,asString:q,maybeWrapAsError:t,wrapsPrimitiveReceiver:s};e.exports=A},{"./assert.js":2,"./es5.js":12,"./global.js":16}]},{},[4])(4)});