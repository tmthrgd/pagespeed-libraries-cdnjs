function getGlobal(){return function(){return this.dust}.call(null)}var dust={};!function(dust){function Context(t,e,n){this.stack=t,this.global=e,this.blocks=n}function Stack(t,e,n,r){this.tail=e,this.isObject=!dust.isArray(t)&&t&&"object"==typeof t,this.head=t,this.index=n,this.of=r}function Stub(t){this.head=new Chunk(this),this.callback=t,this.out=""}function Stream(){this.head=new Chunk(this)}function Chunk(t,e,n){this.root=t,this.next=e,this.data="",this.flushable=!1,this.taps=n}function Tap(t,e){this.head=t,this.tail=e}dust.cache={},dust.register=function(t,e){t&&(dust.cache[t]=e)},dust.render=function(t,e,n){var r=new Stub(n).head;dust.load(t,r,Context.wrap(e)).end()},dust.stream=function(t,e){var n=new Stream;return dust.nextTick(function(){dust.load(t,n.head,Context.wrap(e)).end()}),n},dust.renderSource=function(t,e,n){return dust.compileFn(t)(e,n)},dust.compileFn=function(t,e){var n=dust.loadSource(dust.compile(t,e));return function(t,e){var r=e?new Stub(e):new Stream;return dust.nextTick(function(){n(r.head,Context.wrap(t)).end()}),r}},dust.load=function(t,e,n){var r=dust.cache[t];return r?r(e,n):dust.onLoad?e.map(function(e){dust.onLoad(t,function(r,o){return r?e.setError(r):(dust.cache[t]||dust.loadSource(dust.compile(o,t)),void dust.cache[t](e,n).end())})}):e.setError(new Error("Template Not Found: "+t))},dust.loadSource=function(source,path){return eval(source)},dust.isArray=Array.isArray?Array.isArray:function(t){return"[object Array]"==Object.prototype.toString.call(t)},dust.nextTick=function(){return"undefined"!=typeof process?process.nextTick:function(t){setTimeout(t,0)}}(),dust.isEmpty=function(t){return dust.isArray(t)&&!t.length?!0:0===t?!1:!t},dust.filter=function(t,e,n){if(n)for(var r=0,o=n.length;o>r;r++){var u=n[r];"s"===u?e=null:t=dust.filters[u](t)}return e&&(t=dust.filters[e](t)),t},dust.filters={h:function(t){return dust.escapeHtml(t)},j:function(t){return dust.escapeJs(t)},u:encodeURI,uc:encodeURIComponent,js:function(t){return JSON?JSON.stringify(t):t},jp:function(t){return JSON?JSON.parse(t):t}},dust.makeBase=function(t){return new Context(new Stack,t)},Context.wrap=function(t){return t instanceof Context?t:new Context(new Stack(t))},Context.prototype.get=function(t){for(var e,n=this.stack;n;){if(n.isObject&&(e=n.head[t],void 0!==e))return e;n=n.tail}return this.global?this.global[t]:void 0},Context.prototype.getPath=function(t,e){var n=this.stack,r=e.length;if(t&&0===r)return n.head;if(!n.isObject)return void 0;n=n.head;for(var o=0;n&&r>o;)n=n[e[o]],o++;return n},Context.prototype.push=function(t,e,n){return t&&(t.$idx=e,t.$len=n),new Context(new Stack(t,this.stack,e,n),this.global,this.blocks)},Context.prototype.rebase=function(t){return new Context(new Stack(t),this.global,this.blocks)},Context.prototype.current=function(){return this.stack.head},Context.prototype.getBlock=function(t){var e=this.blocks;if(e)for(var n,r=e.length;r--;)if(n=e[r][t])return n},Context.prototype.shiftBlocks=function(t){var e=this.blocks;return t?(newBlocks=e?e.concat([t]):[t],new Context(this.stack,this.global,newBlocks)):this},Stub.prototype.flush=function(){for(var t=this.head;t;){if(!t.flushable)return t.error?(this.callback(t.error),void(this.flush=function(){})):void 0;this.out+=t.data,t=t.next,this.head=t}this.callback(null,this.out)},Stream.prototype.flush=function(){for(var t=this.head;t;){if(!t.flushable)return t.error?(this.emit("error",t.error),void(this.flush=function(){})):void 0;this.emit("data",t.data),t=t.next,this.head=t}this.emit("end")},Stream.prototype.emit=function(t,e){var n=this.events;n&&n[t]&&n[t](e)},Stream.prototype.on=function(t,e){return this.events||(this.events={}),this.events[t]=e,this},Chunk.prototype.write=function(t){var e=this.taps;return e&&(t=e.go(t)),this.data+=t,this},Chunk.prototype.end=function(t){return t&&this.write(t),this.flushable=!0,this.root.flush(),this},Chunk.prototype.map=function(t){var e=new Chunk(this.root,this.next,this.taps),n=new Chunk(this.root,e,this.taps);return this.next=n,this.flushable=!0,t(n),e},Chunk.prototype.tap=function(t){var e=this.taps;return this.taps=e?e.push(t):new Tap(t),this},Chunk.prototype.untap=function(){return this.taps=this.taps.tail,this},Chunk.prototype.render=function(t,e){return t(this,e)},Chunk.prototype.reference=function(t,e,n,r){return"function"==typeof t&&(t=t(this,e,null,{auto:n,filters:r}),t instanceof Chunk)?t:dust.isEmpty(t)?this:this.write(dust.filter(t,n,r))},Chunk.prototype.section=function(t,e,n,r){if("function"==typeof t&&(t=t(this,e,n,r),t instanceof Chunk))return t;var o=n.block,u=n["else"];if(r&&(e=e.push(r)),dust.isArray(t)){if(o){for(var i=t.length,s=this,c=0;i>c;c++)s=o(s,e.push(t[c],c,i));return s}}else if(t===!0){if(o)return o(this,e)}else if(t||0===t){if(o)return o(this,e.push(t))}else if(u)return u(this,e);return this},Chunk.prototype.exists=function(t,e,n){var r=n.block,o=n["else"];if(dust.isEmpty(t)){if(o)return o(this,e)}else if(r)return r(this,e);return this},Chunk.prototype.notexists=function(t,e,n){var r=n.block,o=n["else"];if(dust.isEmpty(t)){if(r)return r(this,e)}else if(o)return o(this,e);return this},Chunk.prototype.block=function(t,e,n){var r=n.block;return t&&(r=t),r?r(this,e):this},Chunk.prototype.partial=function(t,e,n){var r=e.stack,o=r.head;return n&&(e=e.rebase(r.tail),e=e.push(n),e=e.push(o)),"function"==typeof t?this.capture(t,e,function(t,n){dust.load(t,n,e).end()}):dust.load(t,this,e)},Chunk.prototype.helper=function(t,e,n,r){return dust.helpers[t](this,e,n,r)},Chunk.prototype.capture=function(t,e,n){return this.map(function(r){var o=new Stub(function(t,e){t?r.setError(t):n(e,r)});t(o.head,e).end()})},Chunk.prototype.setError=function(t){return this.error=t,this.root.flush(),this},Tap.prototype.push=function(t){return new Tap(t,this)},Tap.prototype.go=function(t){for(var e=this;e;)t=e.head(t),e=e.tail;return t};var HCHARS=new RegExp(/[&<>\"\']/),AMP=/&/g,LT=/</g,GT=/>/g,QUOT=/\"/g,SQUOT=/\'/g;dust.escapeHtml=function(t){return"string"==typeof t&&HCHARS.test(t)?t.replace(AMP,"&amp;").replace(LT,"&lt;").replace(GT,"&gt;").replace(QUOT,"&quot;").replace(SQUOT,"&#39;"):t};var BS=/\\/g,CR=/\r/g,LS=/\u2028/g,PS=/\u2029/g,NL=/\n/g,LF=/\f/g,SQ=/'/g,DQ=/"/g,TB=/\t/g;dust.escapeJs=function(t){return"string"==typeof t?t.replace(BS,"\\\\").replace(DQ,'\\"').replace(SQ,"\\'").replace(CR,"\\r").replace(LS,"\\u2028").replace(PS,"\\u2029").replace(NL,"\\n").replace(LF,"\\f").replace(TB,"\\t"):t}}(dust),"undefined"!=typeof exports&&(dust.helpers=require("./dust-helpers").helpers,"undefined"!=typeof process&&require("./server")(dust),module.exports=dust),function(dust){function isSelect(t){var e=t.current();return"object"==typeof e&&e.isSelect===!0}function filter(t,e,n,r,o){var u,i,r=r||{};if(r.key)u=e.get(r.key);else{if(!isSelect(e))throw"No key specified for filter and no key found in context from select statement";u=e.current().value,e.current().isResolved&&(o=function(){return!1})}return i=r.value,o(i,coerce(u,r.type,e))?(isSelect(e)&&(e.current().isResolved=!0),t.render(n.block,e)):n["else"]?t.render(n["else"],e):t.write("")}function coerce(t,e,n){if(t)switch(e||typeof t){case"number":return+t;case"string":return String(t);case"boolean":return Boolean(t);case"date":return new Date(t);case"context":return n.get(t)}return t}var helpers={sep:function(t,e,n){return e.stack.index===e.stack.of-1?t:n.block(t,e)},idx:function(t,e,n){return n.block(t,e.push(e.stack.index))},"if":function(chunk,context,bodies,params){if(params&&params.cond){var cond=params.cond;if("function"==typeof cond&&(cond="",chunk.tap(function(t){return cond+=t,""}).render(params.cond,context).untap(),""===cond&&(cond=!1)),eval(cond))return chunk.render(bodies.block,context);if(bodies["else"])return chunk.render(bodies["else"],context)}else"undefined"!=typeof window&&window.console&&window.console.log("No expression given!");return chunk},select:function(t,e,n,r){return t.render(n.block,e.push({isSelect:!0,isResolved:!1,value:e.get(r.key)}))},eq:function(t,e,n,r){return filter(t,e,n,r,function(t,e){return e===t})},lt:function(t,e,n,r){return filter(t,e,n,r,function(t,e){return t>e})},lte:function(t,e,n,r){return filter(t,e,n,r,function(t,e){return t>=e})},gt:function(t,e,n,r){return filter(t,e,n,r,function(t,e){return e>t})},gte:function(t,e,n,r){return filter(t,e,n,r,function(t,e){return e>=t})},"else":function(t,e,n,r){return filter(t,e,n,r,function(){return!0})}};dust.helpers=helpers}("undefined"!=typeof exports?exports:getGlobal());