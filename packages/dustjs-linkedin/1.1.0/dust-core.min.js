function getGlobal(){return function(){return this.dust}.call(null)}var dust={};!function(dust){function Context(t,e,n){this.stack=t,this.global=e,this.blocks=n}function Stack(t,e,n,r){this.tail=e,this.isObject=!dust.isArray(t)&&t&&"object"==typeof t,this.head=t,this.index=n,this.of=r}function Stub(t){this.head=new Chunk(this),this.callback=t,this.out=""}function Stream(){this.head=new Chunk(this)}function Chunk(t,e,n){this.root=t,this.next=e,this.data="",this.flushable=!1,this.taps=n}function Tap(t,e){this.head=t,this.tail=e}dust.cache={},dust.register=function(t,e){t&&(dust.cache[t]=e)},dust.render=function(t,e,n){var r=new Stub(n).head;dust.load(t,r,Context.wrap(e)).end()},dust.stream=function(t,e){var n=new Stream;return dust.nextTick(function(){dust.load(t,n.head,Context.wrap(e)).end()}),n},dust.renderSource=function(t,e,n){return dust.compileFn(t)(e,n)},dust.compileFn=function(t,e){var n=dust.loadSource(dust.compile(t,e));return function(t,e){var r=e?new Stub(e):new Stream;return dust.nextTick(function(){n(r.head,Context.wrap(t)).end()}),r}},dust.load=function(t,e,n){var r=dust.cache[t];return r?r(e,n):dust.onLoad?e.map(function(e){dust.onLoad(t,function(r,o){return r?e.setError(r):(dust.cache[t]||dust.loadSource(dust.compile(o,t)),void dust.cache[t](e,n).end())})}):e.setError(new Error("Template Not Found: "+t))},dust.loadSource=function(source,path){return eval(source)},dust.isArray=Array.isArray?Array.isArray:function(t){return"[object Array]"==Object.prototype.toString.call(t)},dust.nextTick=function(){return"undefined"!=typeof process?process.nextTick:function(t){setTimeout(t,0)}}(),dust.isEmpty=function(t){return dust.isArray(t)&&!t.length?!0:0===t?!1:!t},dust.filter=function(t,e,n){if(n)for(var r=0,o=n.length;o>r;r++){var i=n[r];"s"===i?e=null:"function"==typeof dust.filters[i]&&(t=dust.filters[i](t))}return e&&(t=dust.filters[e](t)),t},dust.filters={h:function(t){return dust.escapeHtml(t)},j:function(t){return dust.escapeJs(t)},u:encodeURI,uc:encodeURIComponent,js:function(t){return JSON?JSON.stringify(t):t},jp:function(t){return JSON?JSON.parse(t):t}},dust.makeBase=function(t){return new Context(new Stack,t)},Context.wrap=function(t){return t instanceof Context?t:new Context(new Stack(t))},Context.prototype.get=function(t){for(var e,n=this.stack;n;){if(n.isObject&&(e=n.head[t],void 0!==e))return e;n=n.tail}return this.global?this.global[t]:void 0},Context.prototype.getPath=function(t,e){var n=this.stack,r=e.length;if(t&&0===r)return n.head;n=n.head;for(var o=0;n&&r>o;)n=n[e[o]],o++;return n},Context.prototype.push=function(t,e,n){return new Context(new Stack(t,this.stack,e,n),this.global,this.blocks)},Context.prototype.rebase=function(t){return new Context(new Stack(t),this.global,this.blocks)},Context.prototype.current=function(){return this.stack.head},Context.prototype.getBlock=function(t,e,n){"function"==typeof t&&(t=t(e,n).data,e.data="");var r=this.blocks;if(r)for(var o,i=r.length;i--;)if(o=r[i][t])return o},Context.prototype.shiftBlocks=function(t){var e,n=this.blocks;return t?(e=n?n.concat([t]):[t],new Context(this.stack,this.global,e)):this},Stub.prototype.flush=function(){for(var t=this.head;t;){if(!t.flushable)return t.error?(this.callback(t.error),void(this.flush=function(){})):void 0;this.out+=t.data,t=t.next,this.head=t}this.callback(null,this.out)},Stream.prototype.flush=function(){for(var t=this.head;t;){if(!t.flushable)return t.error?(this.emit("error",t.error),void(this.flush=function(){})):void 0;this.emit("data",t.data),t=t.next,this.head=t}this.emit("end")},Stream.prototype.emit=function(t,e){if(!this.events)return!1;var n=this.events[t];if(!n)return!1;if("function"==typeof n)n(e);else for(var r=n.slice(0),o=0,i=r.length;i>o;o++)r[o](e)},Stream.prototype.on=function(t,e){return this.events||(this.events={}),this.events[t]?"function"==typeof this.events[t]?this.events[t]=[this.events[t],e]:this.events[t].push(e):this.events[t]=e,this},Stream.prototype.pipe=function(t){return this.on("data",function(e){t.write(e,"utf8")}).on("end",function(){t.end()}).on("error",function(e){t.error(e)}),this},Chunk.prototype.write=function(t){var e=this.taps;return e&&(t=e.go(t)),this.data+=t,this},Chunk.prototype.end=function(t){return t&&this.write(t),this.flushable=!0,this.root.flush(),this},Chunk.prototype.map=function(t){var e=new Chunk(this.root,this.next,this.taps),n=new Chunk(this.root,e,this.taps);return this.next=n,this.flushable=!0,t(n),e},Chunk.prototype.tap=function(t){var e=this.taps;return this.taps=e?e.push(t):new Tap(t),this},Chunk.prototype.untap=function(){return this.taps=this.taps.tail,this},Chunk.prototype.render=function(t,e){return t(this,e)},Chunk.prototype.reference=function(t,e,n,r){return"function"==typeof t&&(t.isFunction=!0,t=t.apply(e.current(),[this,e,null,{auto:n,filters:r}]),t instanceof Chunk)?t:dust.isEmpty(t)?this:this.write(dust.filter(t,n,r))},Chunk.prototype.section=function(t,e,n,r){if("function"==typeof t&&(t=t.apply(e.current(),[this,e,n,r]),t instanceof Chunk))return t;var o=n.block,i=n["else"];if(r&&(e=e.push(r)),dust.isArray(t)){if(o){var s=t.length,u=this;if(s>0){e.stack.head&&(e.stack.head.$len=s);for(var c=0;s>c;c++)e.stack.head&&(e.stack.head.$idx=c),u=o(u,e.push(t[c],c,s));return e.stack.head&&(e.stack.head.$idx=void 0,e.stack.head.$len=void 0),u}if(i)return i(this,e)}}else if(t&&"object"==typeof t){if(o)return e.stack.head&&(e.stack.head.$idx=0,e.stack.head.$len=1),u=o(this,e.push(t)),e.stack.head&&(e.stack.head.$idx=void 0,e.stack.head.$len=void 0),u}else if(t===!0||0===t){if(o)return o(this,e)}else if(i)return i(this,e);return this},Chunk.prototype.exists=function(t,e,n){var r=n.block,o=n["else"];if(dust.isEmpty(t)){if(o)return o(this,e)}else if(r)return r(this,e);return this},Chunk.prototype.notexists=function(t,e,n){var r=n.block,o=n["else"];if(dust.isEmpty(t)){if(r)return r(this,e)}else if(o)return o(this,e);return this},Chunk.prototype.block=function(t,e,n){var r=n.block;return t&&(r=t),r?r(this,e):this},Chunk.prototype.partial=function(t,e,n){var r;return n?(r=dust.makeBase(e.global),e.stack&&e.stack.tail&&(r.stack=e.stack.tail),r=r.push(n),r=r.push(e.stack.head)):r=e,"function"==typeof t?this.capture(t,r,function(t,e){dust.load(t,e,r).end()}):dust.load(t,this,r)},Chunk.prototype.helper=function(t,e,n,r){return dust.helpers[t]?dust.helpers[t](this,e,n,r):void 0},Chunk.prototype.capture=function(t,e,n){return this.map(function(r){var o=new Stub(function(t,e){t?r.setError(t):n(e,r)});t(o.head,e).end()})},Chunk.prototype.setError=function(t){return this.error=t,this.root.flush(),this},Tap.prototype.push=function(t){return new Tap(t,this)},Tap.prototype.go=function(t){for(var e=this;e;)t=e.head(t),e=e.tail;return t};var HCHARS=new RegExp(/[&<>\"\']/),AMP=/&/g,LT=/</g,GT=/>/g,QUOT=/\"/g,SQUOT=/\'/g;dust.escapeHtml=function(t){return"string"==typeof t&&HCHARS.test(t)?t.replace(AMP,"&amp;").replace(LT,"&lt;").replace(GT,"&gt;").replace(QUOT,"&quot;").replace(SQUOT,"&#39;"):t};var BS=/\\/g,CR=/\r/g,LS=/\u2028/g,PS=/\u2029/g,NL=/\n/g,LF=/\f/g,SQ=/'/g,DQ=/"/g,TB=/\t/g;dust.escapeJs=function(t){return"string"==typeof t?t.replace(BS,"\\\\").replace(DQ,'\\"').replace(SQ,"\\'").replace(CR,"\\r").replace(LS,"\\u2028").replace(PS,"\\u2029").replace(NL,"\\n").replace(LF,"\\f").replace(TB,"\\t"):t}}(dust),"undefined"!=typeof exports&&(dust.helpers=require("./dust-helpers").helpers,"undefined"!=typeof process&&require("./server")(dust),module.exports=dust),function(dust){function isSelect(t){var e=t.current();return"object"==typeof e&&e.isSelect===!0}function filter(t,e,n,r,o){var i,s,r=r||{};if(r.key)i=helpers.tap(r.key,t,e);else{if(!isSelect(e))throw"No key specified for filter and no key found in context from select statement";i=e.current().selectKey,e.current().isResolved&&(o=function(){return!1})}return s=helpers.tap(r.value,t,e),o(s,coerce(i,r.type,e))?(isSelect(e)&&(e.current().isResolved=!0),t.render(n.block,e)):n["else"]?t.render(n["else"],e):t.write("")}function coerce(t,e,n){if(t)switch(e||typeof t){case"number":return+t;case"string":return String(t);case"boolean":return Boolean(t);case"date":return new Date(t);case"context":return n.get(t)}return t}var _console="undefined"!=typeof console?console:{log:function(){}},helpers={sep:function(t,e,n){return e.stack.index===e.stack.of-1?t:n.block(t,e)},idx:function(t,e,n){return n.block(t,e.push(e.stack.index))},contextDump:function(t,e){return _console.log(JSON.stringify(e.stack)),t},tap:function(t,e,n){var r=t;return"function"==typeof t&&("undefined"!=typeof t.isFunction&&t.isFunction===!0?r=t():(r="",e.tap(function(t){return r+=t,""}).render(t,n).untap(),""===r&&(r=!1))),r},"if":function(chunk,context,bodies,params){if(params&&params.cond){var cond=params.cond;if(cond=this.tap(cond,chunk,context),eval(cond))return chunk.render(bodies.block,context);if(bodies["else"])return chunk.render(bodies["else"],context)}else _console.log("No condition given in the if helper!");return chunk},select:function(t,e,n,r){if(r&&r.key){var o=this.tap(r.key,t,e);return t.render(n.block,e.push({isSelect:!0,isResolved:!1,selectKey:o}))}return _console.log("No key given in the select helper!"),t},eq:function(t,e,n,r){return filter(t,e,n,r,function(t,e){return e===t})},lt:function(t,e,n,r){return filter(t,e,n,r,function(t,e){return t>e})},lte:function(t,e,n,r){return filter(t,e,n,r,function(t,e){return t>=e})},gt:function(t,e,n,r){return filter(t,e,n,r,function(t,e){return e>t})},gte:function(t,e,n,r){return filter(t,e,n,r,function(t,e){return e>=t})},"default":function(t,e,n,r){return filter(t,e,n,r,function(){return!0})},size:function(t,e,n,r){var o=r.subject,i=0;if(o)if(dust.isArray(o))i=o.length;else if(isNaN(o))if(Object(o)===o){var s=0;for(var u in o)Object.hasOwnProperty.call(o,u)&&s++;i=s}else i=(o+"").length;else i=o;else i=0;return t.write(i)}};dust.helpers=helpers}("undefined"!=typeof exports?exports:getGlobal());