function getGlobal(){return function(){return this.dust}.call(null)}var dust={};!function(dust){function Context(n,l,t){this.stack=n,this.global=l,this.blocks=t}function Stack(n,l,t,e){this.tail=l,this.isObject=!dust.isArray(n)&&n&&"object"==typeof n,this.head=n,this.index=t,this.of=e}function Stub(n){this.head=new Chunk(this),this.callback=n,this.out=""}function Stream(){this.head=new Chunk(this)}function Chunk(n,l,t){this.root=n,this.next=l,this.data="",this.flushable=!1,this.taps=t}function Tap(n,l){this.head=n,this.tail=l}dust.cache={},dust.register=function(n,l){n&&(dust.cache[n]=l)},dust.render=function(n,l,t){var e=new Stub(t).head;dust.load(n,e,Context.wrap(l)).end()},dust.stream=function(n,l){var t=new Stream;return dust.nextTick(function(){dust.load(n,t.head,Context.wrap(l)).end()}),t},dust.renderSource=function(n,l,t){return dust.compileFn(n)(l,t)},dust.compileFn=function(n,l){var t=dust.loadSource(dust.compile(n,l));return function(n,l){var e=l?new Stub(l):new Stream;return dust.nextTick(function(){t(e.head,Context.wrap(n)).end()}),e}},dust.load=function(n,l,t){var e=dust.cache[n];return e?e(l,t):dust.onLoad?l.map(function(l){dust.onLoad(n,function(e,u){return e?l.setError(e):(dust.cache[n]||dust.loadSource(dust.compile(u,n)),void dust.cache[n](l,t).end())})}):l.setError(new Error("Template Not Found: "+n))},dust.loadSource=function(source,path){return eval(source)},dust.isArray=Array.isArray?Array.isArray:function(n){return"[object Array]"==Object.prototype.toString.call(n)},dust.nextTick=function(){return"undefined"!=typeof process?process.nextTick:function(n){setTimeout(n,0)}}(),dust.isEmpty=function(n){return dust.isArray(n)&&!n.length?!0:0===n?!1:!n},dust.filter=function(n,l,t){if(t)for(var e=0,u=t.length;u>e;e++){var r=t[e];"s"===r?l=null:"function"==typeof dust.filters[r]&&(n=dust.filters[r](n))}return l&&(n=dust.filters[l](n)),n},dust.filters={h:function(n){return dust.escapeHtml(n)},j:function(n){return dust.escapeJs(n)},u:encodeURI,uc:encodeURIComponent,js:function(n){return JSON?JSON.stringify(n):n},jp:function(n){return JSON?JSON.parse(n):n}},dust.makeBase=function(n){return new Context(new Stack,n)},Context.wrap=function(n){return n instanceof Context?n:new Context(new Stack(n))},Context.prototype.get=function(n){for(var l,t=this.stack;t;){if(t.isObject&&(l=t.head[n],void 0!==l))return l;t=t.tail}return this.global?this.global[n]:void 0},Context.prototype.getPath=function(n,l){var t=this.stack,e=l.length;if(n&&0===e)return t.head;t=t.head;for(var u=0;t&&e>u;)t=t[l[u]],u++;return t},Context.prototype.push=function(n,l,t){return new Context(new Stack(n,this.stack,l,t),this.global,this.blocks)},Context.prototype.rebase=function(n){return new Context(new Stack(n),this.global,this.blocks)},Context.prototype.current=function(){return this.stack.head},Context.prototype.getBlock=function(n,l,t){"function"==typeof n&&(n=n(l,t).data,l.data="");var e=this.blocks;if(e)for(var u,r=e.length;r--;)if(u=e[r][n])return u},Context.prototype.shiftBlocks=function(n){var l,t=this.blocks;return n?(l=t?t.concat([n]):[n],new Context(this.stack,this.global,l)):this},Stub.prototype.flush=function(){for(var n=this.head;n;){if(!n.flushable)return n.error?(this.callback(n.error),void(this.flush=function(){})):void 0;this.out+=n.data,n=n.next,this.head=n}this.callback(null,this.out)},Stream.prototype.flush=function(){for(var n=this.head;n;){if(!n.flushable)return n.error?(this.emit("error",n.error),void(this.flush=function(){})):void 0;this.emit("data",n.data),n=n.next,this.head=n}this.emit("end")},Stream.prototype.emit=function(n,l){if(!this.events)return!1;var t=this.events[n];if(!t)return!1;if("function"==typeof t)t(l);else for(var e=t.slice(0),u=0,r=e.length;r>u;u++)e[u](l)},Stream.prototype.on=function(n,l){return this.events||(this.events={}),this.events[n]?"function"==typeof this.events[n]?this.events[n]=[this.events[n],l]:this.events[n].push(l):this.events[n]=l,this},Stream.prototype.pipe=function(n){return this.on("data",function(l){n.write(l,"utf8")}).on("end",function(){n.end()}).on("error",function(l){n.error(l)}),this},Chunk.prototype.write=function(n){var l=this.taps;return l&&(n=l.go(n)),this.data+=n,this},Chunk.prototype.end=function(n){return n&&this.write(n),this.flushable=!0,this.root.flush(),this},Chunk.prototype.map=function(n){var l=new Chunk(this.root,this.next,this.taps),t=new Chunk(this.root,l,this.taps);return this.next=t,this.flushable=!0,n(t),l},Chunk.prototype.tap=function(n){var l=this.taps;return this.taps=l?l.push(n):new Tap(n),this},Chunk.prototype.untap=function(){return this.taps=this.taps.tail,this},Chunk.prototype.render=function(n,l){return n(this,l)},Chunk.prototype.reference=function(n,l,t,e){return"function"==typeof n&&(n.isFunction=!0,n=n.apply(l.current(),[this,l,null,{auto:t,filters:e}]),n instanceof Chunk)?n:dust.isEmpty(n)?this:this.write(dust.filter(n,t,e))},Chunk.prototype.section=function(n,l,t,e){if("function"==typeof n&&(n=n.apply(l.current(),[this,l,t,e]),n instanceof Chunk))return n;var u=t.block,r=t["else"];if(e&&(l=l.push(e)),dust.isArray(n)){if(u){var o=n.length,f=this;if(o>0){l.stack.head&&(l.stack.head.$len=o);for(var i=0;o>i;i++)l.stack.head&&(l.stack.head.$idx=i),f=u(f,l.push(n[i],i,o));return l.stack.head&&(l.stack.head.$idx=void 0,l.stack.head.$len=void 0),f}if(r)return r(this,l)}}else if(n&&"object"==typeof n){if(u)return l.stack.head&&(l.stack.head.$idx=0,l.stack.head.$len=1),f=u(this,l.push(n)),l.stack.head&&(l.stack.head.$idx=void 0,l.stack.head.$len=void 0),f}else if(n===!0||0===n){if(u)return u(this,l)}else if(r)return r(this,l);return this},Chunk.prototype.exists=function(n,l,t){var e=t.block,u=t["else"];if(dust.isEmpty(n)){if(u)return u(this,l)}else if(e)return e(this,l);return this},Chunk.prototype.notexists=function(n,l,t){var e=t.block,u=t["else"];if(dust.isEmpty(n)){if(e)return e(this,l)}else if(u)return u(this,l);return this},Chunk.prototype.block=function(n,l,t){var e=t.block;return n&&(e=n),e?e(this,l):this},Chunk.prototype.partial=function(n,l,t){var e;return t?(e=dust.makeBase(l.global),l.stack&&l.stack.tail&&(e.stack=l.stack.tail),e=e.push(t),e=e.push(l.stack.head)):e=l,"function"==typeof n?this.capture(n,e,function(n,l){dust.load(n,l,e).end()}):dust.load(n,this,e)},Chunk.prototype.helper=function(n,l,t,e){return dust.helpers[n]?dust.helpers[n](this,l,t,e):void 0},Chunk.prototype.capture=function(n,l,t){return this.map(function(e){var u=new Stub(function(n,l){n?e.setError(n):t(l,e)});n(u.head,l).end()})},Chunk.prototype.setError=function(n){return this.error=n,this.root.flush(),this},Tap.prototype.push=function(n){return new Tap(n,this)},Tap.prototype.go=function(n){for(var l=this;l;)n=l.head(n),l=l.tail;return n};var HCHARS=new RegExp(/[&<>\"\']/),AMP=/&/g,LT=/</g,GT=/>/g,QUOT=/\"/g,SQUOT=/\'/g;dust.escapeHtml=function(n){return"string"==typeof n&&HCHARS.test(n)?n.replace(AMP,"&amp;").replace(LT,"&lt;").replace(GT,"&gt;").replace(QUOT,"&quot;").replace(SQUOT,"&#39;"):n};var BS=/\\/g,CR=/\r/g,LS=/\u2028/g,PS=/\u2029/g,NL=/\n/g,LF=/\f/g,SQ=/'/g,DQ=/"/g,TB=/\t/g;dust.escapeJs=function(n){return"string"==typeof n?n.replace(BS,"\\\\").replace(DQ,'\\"').replace(SQ,"\\'").replace(CR,"\\r").replace(LS,"\\u2028").replace(PS,"\\u2029").replace(NL,"\\n").replace(LF,"\\f").replace(TB,"\\t"):n}}(dust),"undefined"!=typeof exports&&(dust.helpers=require("./dust-helpers").helpers,"undefined"!=typeof process&&require("./server")(dust),module.exports=dust),function(dust){function isSelect(n){var l=n.current();return"object"==typeof l&&l.isSelect===!0}function filter(n,l,t,e,u){var r,o,e=e||{};if(e.key)r=helpers.tap(e.key,n,l);else{if(!isSelect(l))throw"No key specified for filter and no key found in context from select statement";r=l.current().selectKey,l.current().isResolved&&(u=function(){return!1})}return o=helpers.tap(e.value,n,l),u(o,coerce(r,e.type,l))?(isSelect(l)&&(l.current().isResolved=!0),n.render(t.block,l)):t["else"]?n.render(t["else"],l):n.write("")}function coerce(n,l,t){if(n)switch(l||typeof n){case"number":return+n;case"string":return String(n);case"boolean":return Boolean(n);case"date":return new Date(n);case"context":return t.get(n)}return n}var _console="undefined"!=typeof console?console:{log:function(){}},helpers={sep:function(n,l,t){return l.stack.index===l.stack.of-1?n:t.block(n,l)},idx:function(n,l,t){return t.block(n,l.push(l.stack.index))},contextDump:function(n,l){return _console.log(JSON.stringify(l.stack)),n},tap:function(n,l,t){var e=n;return"function"==typeof n&&("undefined"!=typeof n.isFunction&&n.isFunction===!0?e=n():(e="",l.tap(function(n){return e+=n,""}).render(n,t).untap(),""===e&&(e=!1))),e},"if":function(chunk,context,bodies,params){if(params&&params.cond){var cond=params.cond;if(cond=this.tap(cond,chunk,context),eval(cond))return chunk.render(bodies.block,context);if(bodies["else"])return chunk.render(bodies["else"],context)}else _console.log("No condition given in the if helper!");return chunk},select:function(n,l,t,e){if(e&&e.key){var u=this.tap(e.key,n,l);return n.render(t.block,l.push({isSelect:!0,isResolved:!1,selectKey:u}))}return _console.log("No key given in the select helper!"),n},eq:function(n,l,t,e){return filter(n,l,t,e,function(n,l){return l===n})},lt:function(n,l,t,e){return filter(n,l,t,e,function(n,l){return n>l})},lte:function(n,l,t,e){return filter(n,l,t,e,function(n,l){return n>=l})},gt:function(n,l,t,e){return filter(n,l,t,e,function(n,l){return l>n})},gte:function(n,l,t,e){return filter(n,l,t,e,function(n,l){return l>=n})},"default":function(n,l,t,e){return filter(n,l,t,e,function(){return!0})},size:function(n,l,t,e){var u=e.subject,r=0;if(u)if(dust.isArray(u))r=u.length;else if(isNaN(u))if(Object(u)===u){var o=0;for(var f in u)Object.hasOwnProperty.call(u,f)&&o++;r=o}else r=(u+"").length;else r=u;else r=0;return n.write(r)}};dust.helpers=helpers}("undefined"!=typeof exports?exports:getGlobal()),function(n){function l(l){var t={};return n.filterNode(t,l)}function t(l,t){for(var e=[t[0]],u=1,r=t.length;r>u;u++){var o=n.filterNode(l,t[u]);o&&e.push(o)}return e}function e(l,t){for(var e,u=[t[0]],r=1,o=t.length;o>r;r++){var f=n.filterNode(l,t[r]);f&&("buffer"===f[0]?e?e[1]+=f[1]:(e=f,u.push(f)):(e=null,u.push(f)))}return u}function u(n,l){return["buffer",h[l[1]]]}function r(n,l){return l}function o(){}function f(l,t){var e={name:t,bodies:[],blocks:{},index:0,auto:"h"};return"(function(){dust.register("+(t?'"'+t+'"':"null")+","+n.compileNode(e,l)+");"+i(e)+s(e)+"return body_0;})();"}function i(n){var l=[],t=n.blocks;for(var e in t)l.push("'"+e+"':"+t[e]);return l.length?(n.blocks="ctx=ctx.shiftBlocks(blocks);","var blocks={"+l.join(",")+"};"):n.blocks=""}function s(n){for(var l=[],t=n.bodies,e=n.blocks,u=0,r=t.length;r>u;u++)l[u]="function body_"+u+"(chk,ctx){"+e+"return chk"+t[u]+";}";return l.join("")}function c(l,t){for(var e="",u=1,r=t.length;r>u;u++)e+=n.compileNode(l,t[u]);return e}function a(l,t,e){return"."+e+"("+n.compileNode(l,t[1])+","+n.compileNode(l,t[2])+","+n.compileNode(l,t[4])+","+n.compileNode(l,t[3])+")"}n.compile=function(t,e){try{var u=l(n.parse(t));return f(u,e)}catch(r){if(!r.line||!r.column)throw r;throw new SyntaxError(r.message+" At line : "+r.line+", column : "+r.column)}},n.filterNode=function(l,t){return n.optimizers[t[0]](l,t)},n.optimizers={body:e,buffer:r,special:u,format:o,reference:t,"#":t,"?":t,"^":t,"<":t,"+":t,"@":t,"%":t,partial:t,context:t,params:t,bodies:t,param:t,filters:r,key:r,path:r,literal:r,comment:o},n.pragmas={esc:function(n,l,t){var e=n.auto;l||(l="h"),n.auto="s"===l?"":l;var u=c(n,t.block);return n.auto=e,u}};var h={s:" ",n:"\n",r:"\r",lb:"{",rb:"}"};n.compileNode=function(l,t){return n.nodes[t[0]](l,t)},n.nodes={body:function(n,l){var t=n.index++,e="body_"+t;return n.bodies[t]=c(n,l),e},buffer:function(n,l){return".write("+p(l[1])+")"},format:function(n,l){return".write("+p(l[1]+l[2])+")"},reference:function(l,t){return".reference("+n.compileNode(l,t[1])+",ctx,"+n.compileNode(l,t[2])+")"},"#":function(n,l){return a(n,l,"section")},"?":function(n,l){return a(n,l,"exists")},"^":function(n,l){return a(n,l,"notexists")},"<":function(l,t){for(var e=t[4],u=1,r=e.length;r>u;u++){var o=e[u],f=o[1][1];if("block"===f)return l.blocks[t[1].text]=n.compileNode(l,o[2]),""}return""},"+":function(l,t){return"undefined"==typeof t[1].text&&"undefined"==typeof t[4]?".block(ctx.getBlock("+n.compileNode(l,t[1])+",chk, ctx),"+n.compileNode(l,t[2])+", {},"+n.compileNode(l,t[3])+")":".block(ctx.getBlock("+p(t[1].text)+"),"+n.compileNode(l,t[2])+","+n.compileNode(l,t[4])+","+n.compileNode(l,t[3])+")"},"@":function(l,t){return".helper("+p(t[1].text)+","+n.compileNode(l,t[2])+","+n.compileNode(l,t[4])+","+n.compileNode(l,t[3])+")"},"%":function(l,t){var e=t[1][1];if(!n.pragmas[e])return"";for(var u=t[4],r={},o=1,f=u.length;f>o;o++){var i=u[o];r[i[1][1]]=i[2]}for(var s=t[3],c={},o=1,f=s.length;f>o;o++){var a=s[o];c[a[1][1]]=a[2][1]}var h=t[2][1]?t[2][1].text:null;return n.pragmas[e](l,h,r,c)},partial:function(l,t){return".partial("+n.compileNode(l,t[1])+","+n.compileNode(l,t[2])+","+n.compileNode(l,t[3])+")"},context:function(l,t){return t[1]?"ctx.rebase("+n.compileNode(l,t[1])+")":"ctx"},params:function(l,t){for(var e=[],u=1,r=t.length;r>u;u++)e.push(n.compileNode(l,t[u]));return e.length?"{"+e.join(",")+"}":"null"},bodies:function(l,t){for(var e=[],u=1,r=t.length;r>u;u++)e.push(n.compileNode(l,t[u]));return"{"+e.join(",")+"}"},param:function(l,t){return n.compileNode(l,t[1])+":"+n.compileNode(l,t[2])},filters:function(n,l){for(var t=[],e=1,u=l.length;u>e;e++){var r=l[e];t.push('"'+r+'"')}return'"'+n.auto+'"'+(t.length?",["+t.join(",")+"]":"")},key:function(n,l){return'ctx.get("'+l[1]+'")'},path:function(n,l){for(var t=l[1],e=l[2],u=[],r=0,o=e.length;o>r;r++)u.push('"'+e[r]+'"');return"ctx.getPath("+t+",["+u.join(",")+"])"},literal:function(n,l){return p(l[1])}};var p="undefined"==typeof JSON?function(l){return'"'+n.escapeJs(l)+'"'}:JSON.stringify}("undefined"!=typeof exports?exports:getGlobal()),function(n){var l=function(){function n(n){return'"'+n.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\x08/g,"\\b").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\f/g,"\\f").replace(/\r/g,"\\r").replace(/[\x00-\x07\x0B\x0E-\x1F\x80-\uFFFF]/g,escape)+'"'}var t={parse:function(t,e){function u(n){var l={};for(var t in n)l[t]=n[t];return l}function r(n,l){for(var e=n.offset+l,u=n.offset;e>u;u++){var r=t.charAt(u);"\n"===r?(n.seenCR||n.line++,n.column=1,n.seenCR=!1):"\r"===r||"\u2028"===r||"\u2029"===r?(n.line++,n.column=1,n.seenCR=!0):(n.column++,n.seenCR=!1)}n.offset+=l}function o(n){P.offset<H.offset||(P.offset>H.offset&&(H=u(P),U=[]),U.push(n))}function f(){var n,l,t;for(t=u(P),n=[],l=i();null!==l;)n.push(l),l=i();return null!==n&&(n=function(n,l,t,e){return["body"].concat(e)}(t.offset,t.line,t.column,n)),null===n&&(P=u(t)),n}function i(){var n;return n=O(),null===n&&(n=s(),null===n&&(n=v(),null===n&&(n=y(),null===n&&(n=m(),null===n&&(n=T()))))),n}function s(){var n,l,e,i,s,h,p,m,v;if(G++,m=u(P),v=u(P),n=c(),null!==n){for(l=[],e=L();null!==e;)l.push(e),e=L();null!==l?(e=$(),null!==e?(i=f(),null!==i?(s=d(),null!==s?(h=a(),null!==h?(p=function(n,l,t,e,u,r,o){return e[1].text===o.text}(P.offset,P.line,P.column,n,i,s,h)?"":null,null!==p?n=[n,l,e,i,s,h,p]:(n=null,P=u(v))):(n=null,P=u(v))):(n=null,P=u(v))):(n=null,P=u(v))):(n=null,P=u(v))):(n=null,P=u(v))}else n=null,P=u(v);if(null!==n&&(n=function(n,l,t,e,u,r){return r.push(["param",["literal","block"],u]),e.push(r),e}(m.offset,m.line,m.column,n[0],n[3],n[4],n[5])),null===n&&(P=u(m)),null===n){if(m=u(P),v=u(P),n=c(),null!==n){for(l=[],e=L();null!==e;)l.push(e),e=L();null!==l?(47===t.charCodeAt(P.offset)?(e="/",r(P,1)):(e=null,0===G&&o('"/"')),null!==e?(i=$(),null!==i?n=[n,l,e,i]:(n=null,P=u(v))):(n=null,P=u(v))):(n=null,P=u(v))}else n=null,P=u(v);null!==n&&(n=function(n,l,t,e){return e.push(["bodies"]),e}(m.offset,m.line,m.column,n[0])),null===n&&(P=u(m))}return G--,0===G&&null===n&&o("section"),n}function c(){var n,l,e,f,i,s,c,a;if(c=u(P),a=u(P),n=B(),null!==n)if(/^[#?^<+@%]/.test(t.charAt(P.offset))?(l=t.charAt(P.offset),r(P,1)):(l=null,0===G&&o("[#?^<+@%]")),null!==l){for(e=[],f=L();null!==f;)e.push(f),f=L();null!==e?(f=b(),null!==f?(i=h(),null!==i?(s=p(),null!==s?n=[n,l,e,f,i,s]:(n=null,P=u(a))):(n=null,P=u(a))):(n=null,P=u(a))):(n=null,P=u(a))}else n=null,P=u(a);else n=null,P=u(a);return null!==n&&(n=function(n,l,t,e,u,r,o){return[e,u,r,o]}(c.offset,c.line,c.column,n[1],n[3],n[4],n[5])),null===n&&(P=u(c)),n}function a(){var n,l,e,f,i,s,c,a;if(G++,c=u(P),a=u(P),n=B(),null!==n)if(47===t.charCodeAt(P.offset)?(l="/",r(P,1)):(l=null,0===G&&o('"/"')),null!==l){for(e=[],f=L();null!==f;)e.push(f),f=L();if(null!==e)if(f=b(),null!==f){for(i=[],s=L();null!==s;)i.push(s),s=L();null!==i?(s=$(),null!==s?n=[n,l,e,f,i,s]:(n=null,P=u(a))):(n=null,P=u(a))}else n=null,P=u(a);else n=null,P=u(a)}else n=null,P=u(a);else n=null,P=u(a);return null!==n&&(n=function(n,l,t,e){return e}(c.offset,c.line,c.column,n[3])),null===n&&(P=u(c)),G--,0===G&&null===n&&o("end tag"),n}function h(){var n,l,e,f,i;return e=u(P),f=u(P),i=u(P),58===t.charCodeAt(P.offset)?(n=":",r(P,1)):(n=null,0===G&&o('":"')),null!==n?(l=b(),null!==l?n=[n,l]:(n=null,P=u(i))):(n=null,P=u(i)),null!==n&&(n=function(n,l,t,e){return e}(f.offset,f.line,f.column,n[1])),null===n&&(P=u(f)),n=null!==n?n:"",null!==n&&(n=function(n,l,t,e){return e?["context",e]:["context"]}(e.offset,e.line,e.column,n)),null===n&&(P=u(e)),n}function p(){var n,l,e,f,i,s,c,a;if(G++,s=u(P),n=[],c=u(P),a=u(P),e=L(),null!==e)for(l=[];null!==e;)l.push(e),e=L();else l=null;for(null!==l?(e=S(),null!==e?(61===t.charCodeAt(P.offset)?(f="=",r(P,1)):(f=null,0===G&&o('"="')),null!==f?(i=g(),null===i&&(i=b(),null===i&&(i=j())),null!==i?l=[l,e,f,i]:(l=null,P=u(a))):(l=null,P=u(a))):(l=null,P=u(a))):(l=null,P=u(a)),null!==l&&(l=function(n,l,t,e,u){return["param",["literal",e],u]}(c.offset,c.line,c.column,l[1],l[3])),null===l&&(P=u(c));null!==l;){if(n.push(l),c=u(P),a=u(P),e=L(),null!==e)for(l=[];null!==e;)l.push(e),e=L();else l=null;null!==l?(e=S(),null!==e?(61===t.charCodeAt(P.offset)?(f="=",r(P,1)):(f=null,0===G&&o('"="')),null!==f?(i=g(),null===i&&(i=b(),null===i&&(i=j())),null!==i?l=[l,e,f,i]:(l=null,P=u(a))):(l=null,P=u(a))):(l=null,P=u(a))):(l=null,P=u(a)),null!==l&&(l=function(n,l,t,e,u){return["param",["literal",e],u]}(c.offset,c.line,c.column,l[1],l[3])),null===l&&(P=u(c))}return null!==n&&(n=function(n,l,t,e){return["params"].concat(e)}(s.offset,s.line,s.column,n)),null===n&&(P=u(s)),G--,0===G&&null===n&&o("params"),n}function d(){var n,l,e,i,s,c,a,h,p;for(G++,a=u(P),n=[],h=u(P),p=u(P),l=B(),null!==l?(58===t.charCodeAt(P.offset)?(e=":",r(P,1)):(e=null,0===G&&o('":"')),null!==e?(i=S(),null!==i?(s=$(),null!==s?(c=f(),null!==c?l=[l,e,i,s,c]:(l=null,P=u(p))):(l=null,P=u(p))):(l=null,P=u(p))):(l=null,P=u(p))):(l=null,P=u(p)),null!==l&&(l=function(n,l,t,e,u){return["param",["literal",e],u]}(h.offset,h.line,h.column,l[2],l[4])),null===l&&(P=u(h));null!==l;)n.push(l),h=u(P),p=u(P),l=B(),null!==l?(58===t.charCodeAt(P.offset)?(e=":",r(P,1)):(e=null,0===G&&o('":"')),null!==e?(i=S(),null!==i?(s=$(),null!==s?(c=f(),null!==c?l=[l,e,i,s,c]:(l=null,P=u(p))):(l=null,P=u(p))):(l=null,P=u(p))):(l=null,P=u(p))):(l=null,P=u(p)),null!==l&&(l=function(n,l,t,e,u){return["param",["literal",e],u]}(h.offset,h.line,h.column,l[2],l[4])),null===l&&(P=u(h));return null!==n&&(n=function(n,l,t,e){return["bodies"].concat(e)}(a.offset,a.line,a.column,n)),null===n&&(P=u(a)),G--,0===G&&null===n&&o("bodies"),n}function m(){var n,l,t,e,r,f;return G++,r=u(P),f=u(P),n=B(),null!==n?(l=b(),null!==l?(t=k(),null!==t?(e=$(),null!==e?n=[n,l,t,e]:(n=null,P=u(f))):(n=null,P=u(f))):(n=null,P=u(f))):(n=null,P=u(f)),null!==n&&(n=function(n,l,t,e,u){return["reference",e,u]}(r.offset,r.line,r.column,n[1],n[2])),null===n&&(P=u(r)),G--,0===G&&null===n&&o("reference"),n}function v(){var n,l,e,f,i,s,c,a,d,m,v;if(G++,d=u(P),m=u(P),n=B(),null!==n)if(62===t.charCodeAt(P.offset)?(l=">",r(P,1)):(l=null,0===G&&o('">"')),null===l&&(43===t.charCodeAt(P.offset)?(l="+",r(P,1)):(l=null,0===G&&o('"+"'))),null!==l)if(v=u(P),e=S(),null!==e&&(e=function(n,l,t,e){return["literal",e]}(v.offset,v.line,v.column,e)),null===e&&(P=u(v)),null===e&&(e=j()),null!==e)if(f=h(),null!==f)if(i=p(),null!==i){for(s=[],c=L();null!==c;)s.push(c),c=L();null!==s?(47===t.charCodeAt(P.offset)?(c="/",r(P,1)):(c=null,0===G&&o('"/"')),null!==c?(a=$(),null!==a?n=[n,l,e,f,i,s,c,a]:(n=null,P=u(m))):(n=null,P=u(m))):(n=null,P=u(m))}else n=null,P=u(m);else n=null,P=u(m);else n=null,P=u(m);else n=null,P=u(m);else n=null,P=u(m);return null!==n&&(n=function(n,l,t,e,u,r,o){var f=">"===e?"partial":e;return[f,u,r,o]}(d.offset,d.line,d.column,n[1],n[2],n[3],n[4])),null===n&&(P=u(d)),G--,0===G&&null===n&&o("partial"),n}function k(){var n,l,e,f,i,s;for(G++,f=u(P),n=[],i=u(P),s=u(P),124===t.charCodeAt(P.offset)?(l="|",r(P,1)):(l=null,0===G&&o('"|"')),null!==l?(e=S(),null!==e?l=[l,e]:(l=null,P=u(s))):(l=null,P=u(s)),null!==l&&(l=function(n,l,t,e){return e}(i.offset,i.line,i.column,l[1])),null===l&&(P=u(i));null!==l;)n.push(l),i=u(P),s=u(P),124===t.charCodeAt(P.offset)?(l="|",r(P,1)):(l=null,0===G&&o('"|"')),null!==l?(e=S(),null!==e?l=[l,e]:(l=null,P=u(s))):(l=null,P=u(s)),null!==l&&(l=function(n,l,t,e){return e}(i.offset,i.line,i.column,l[1])),null===l&&(P=u(i));return null!==n&&(n=function(n,l,t,e){return["filters"].concat(e)}(f.offset,f.line,f.column,n)),null===n&&(P=u(f)),G--,0===G&&null===n&&o("filters"),n}function y(){var n,l,e,f,i,s;return G++,i=u(P),s=u(P),n=B(),null!==n?(126===t.charCodeAt(P.offset)?(l="~",r(P,1)):(l=null,0===G&&o('"~"')),null!==l?(e=S(),null!==e?(f=$(),null!==f?n=[n,l,e,f]:(n=null,P=u(s))):(n=null,P=u(s))):(n=null,P=u(s))):(n=null,P=u(s)),null!==n&&(n=function(n,l,t,e){return["special",e]}(i.offset,i.line,i.column,n[2])),null===n&&(P=u(i)),G--,0===G&&null===n&&o("special"),n}function b(){var n,l;return G++,l=u(P),n=C(),null!==n&&(n=function(n,l,t,e){var u=["path"].concat(e);return u.text=e[1].join("."),u}(l.offset,l.line,l.column,n)),null===n&&(P=u(l)),null===n&&(l=u(P),n=S(),null!==n&&(n=function(n,l,t,e){var u=["key",e];return u.text=e,u}(l.offset,l.line,l.column,n)),null===n&&(P=u(l))),G--,0===G&&null===n&&o("identifier"),n}function g(){var n,l;return G++,l=u(P),n=x(),null===n&&(n=A()),null!==n&&(n=function(n,l,t,e){return["literal",e]}(l.offset,l.line,l.column,n)),null===n&&(P=u(l)),G--,0===G&&null===n&&o("number"),n}function x(){var n,l,e,f,i,s;if(G++,i=u(P),s=u(P),n=A(),null!==n)if(46===t.charCodeAt(P.offset)?(l=".",r(P,1)):(l=null,0===G&&o('"."')),null!==l){if(f=A(),null!==f)for(e=[];null!==f;)e.push(f),f=A();else e=null;null!==e?n=[n,l,e]:(n=null,P=u(s))}else n=null,P=u(s);else n=null,P=u(s);return null!==n&&(n=function(n,l,t,e,u){return parseFloat(e+"."+u.join(""))}(i.offset,i.line,i.column,n[0],n[2])),null===n&&(P=u(i)),G--,0===G&&null===n&&o("frac"),n}function A(){var n,l,e;if(G++,e=u(P),/^[0-9]/.test(t.charAt(P.offset))?(l=t.charAt(P.offset),r(P,1)):(l=null,0===G&&o("[0-9]")),null!==l)for(n=[];null!==l;)n.push(l),/^[0-9]/.test(t.charAt(P.offset))?(l=t.charAt(P.offset),r(P,1)):(l=null,0===G&&o("[0-9]"));else n=null;return null!==n&&(n=function(n,l,t,e){return parseInt(e.join(""),10)}(e.offset,e.line,e.column,n)),null===n&&(P=u(e)),G--,0===G&&null===n&&o("integer"),n}function C(){var n,l,e,f,i;if(G++,f=u(P),i=u(P),n=S(),n=null!==n?n:"",null!==n){if(e=N(),null===e&&(e=w()),null!==e)for(l=[];null!==e;)l.push(e),e=N(),null===e&&(e=w());else l=null;null!==l?n=[n,l]:(n=null,P=u(i))}else n=null,P=u(i);if(null!==n&&(n=function(n,l,t,e,u){return u=u[0],e&&u?(u.unshift(e),[!1,u]):[!0,u]}(f.offset,f.line,f.column,n[0],n[1])),null===n&&(P=u(f)),null===n){if(f=u(P),i=u(P),46===t.charCodeAt(P.offset)?(n=".",r(P,1)):(n=null,0===G&&o('"."')),null!==n){for(l=[],e=N(),null===e&&(e=w());null!==e;)l.push(e),e=N(),null===e&&(e=w());null!==l?n=[n,l]:(n=null,P=u(i))}else n=null,P=u(i);null!==n&&(n=function(n,l,t,e){return e.length>0?[!0,e[0]]:[!0,[]]}(f.offset,f.line,f.column,n[1])),null===n&&(P=u(f))}return G--,0===G&&null===n&&o("path"),n}function S(){var n,l,e,f,i;if(G++,f=u(P),i=u(P),/^[a-zA-Z_$]/.test(t.charAt(P.offset))?(n=t.charAt(P.offset),r(P,1)):(n=null,0===G&&o("[a-zA-Z_$]")),null!==n){for(l=[],/^[0-9a-zA-Z_$\-]/.test(t.charAt(P.offset))?(e=t.charAt(P.offset),r(P,1)):(e=null,0===G&&o("[0-9a-zA-Z_$\\-]"));null!==e;)l.push(e),/^[0-9a-zA-Z_$\-]/.test(t.charAt(P.offset))?(e=t.charAt(P.offset),r(P,1)):(e=null,0===G&&o("[0-9a-zA-Z_$\\-]"));null!==l?n=[n,l]:(n=null,P=u(i))}else n=null,P=u(i);return null!==n&&(n=function(n,l,t,e,u){return e+u.join("")}(f.offset,f.line,f.column,n[0],n[1])),null===n&&(P=u(f)),G--,0===G&&null===n&&o("key"),n}function w(){var n,l,e,f,i,s,c;if(G++,f=u(P),i=u(P),s=u(P),c=u(P),91===t.charCodeAt(P.offset)?(n="[",r(P,1)):(n=null,0===G&&o('"["')),null!==n){if(/^[0-9]/.test(t.charAt(P.offset))?(e=t.charAt(P.offset),r(P,1)):(e=null,0===G&&o("[0-9]")),null!==e)for(l=[];null!==e;)l.push(e),/^[0-9]/.test(t.charAt(P.offset))?(e=t.charAt(P.offset),r(P,1)):(e=null,0===G&&o("[0-9]"));else l=null;null!==l?(93===t.charCodeAt(P.offset)?(e="]",r(P,1)):(e=null,0===G&&o('"]"')),null!==e?n=[n,l,e]:(n=null,P=u(c))):(n=null,P=u(c))}else n=null,P=u(c);return null!==n&&(n=function(n,l,t,e){return e.join("")}(s.offset,s.line,s.column,n[1])),null===n&&(P=u(s)),null!==n?(l=N(),l=null!==l?l:"",null!==l?n=[n,l]:(n=null,P=u(i))):(n=null,P=u(i)),null!==n&&(n=function(n,l,t,e,u){return u?u.unshift(e):u=[e],u}(f.offset,f.line,f.column,n[0],n[1])),null===n&&(P=u(f)),G--,0===G&&null===n&&o("array"),n}function N(){var n,l,e,f,i,s,c;if(G++,f=u(P),i=u(P),s=u(P),c=u(P),46===t.charCodeAt(P.offset)?(l=".",r(P,1)):(l=null,0===G&&o('"."')),null!==l?(e=S(),null!==e?l=[l,e]:(l=null,P=u(c))):(l=null,P=u(c)),null!==l&&(l=function(n,l,t,e){return e}(s.offset,s.line,s.column,l[1])),null===l&&(P=u(s)),null!==l)for(n=[];null!==l;)n.push(l),s=u(P),c=u(P),46===t.charCodeAt(P.offset)?(l=".",r(P,1)):(l=null,0===G&&o('"."')),null!==l?(e=S(),null!==e?l=[l,e]:(l=null,P=u(c))):(l=null,P=u(c)),null!==l&&(l=function(n,l,t,e){return e}(s.offset,s.line,s.column,l[1])),null===l&&(P=u(s));else n=null;return null!==n?(l=w(),l=null!==l?l:"",null!==l?n=[n,l]:(n=null,P=u(i))):(n=null,P=u(i)),null!==n&&(n=function(n,l,t,e,u){return u?e.concat(u):e}(f.offset,f.line,f.column,n[0],n[1])),null===n&&(P=u(f)),G--,0===G&&null===n&&o("array_part"),n}function j(){var n,l,e,f,i;if(G++,f=u(P),i=u(P),34===t.charCodeAt(P.offset)?(n='"',r(P,1)):(n=null,0===G&&o('"\\""')),null!==n?(34===t.charCodeAt(P.offset)?(l='"',r(P,1)):(l=null,0===G&&o('"\\""')),null!==l?n=[n,l]:(n=null,P=u(i))):(n=null,P=u(i)),null!==n&&(n=function(){return["literal",""]}(f.offset,f.line,f.column)),null===n&&(P=u(f)),null===n&&(f=u(P),i=u(P),34===t.charCodeAt(P.offset)?(n='"',r(P,1)):(n=null,0===G&&o('"\\""')),null!==n?(l=F(),null!==l?(34===t.charCodeAt(P.offset)?(e='"',r(P,1)):(e=null,0===G&&o('"\\""')),null!==e?n=[n,l,e]:(n=null,P=u(i))):(n=null,P=u(i))):(n=null,P=u(i)),null!==n&&(n=function(n,l,t,e){return["literal",e]}(f.offset,f.line,f.column,n[1])),null===n&&(P=u(f)),null===n)){if(f=u(P),i=u(P),34===t.charCodeAt(P.offset)?(n='"',r(P,1)):(n=null,0===G&&o('"\\""')),null!==n){if(e=E(),null!==e)for(l=[];null!==e;)l.push(e),e=E();else l=null;null!==l?(34===t.charCodeAt(P.offset)?(e='"',r(P,1)):(e=null,0===G&&o('"\\""')),null!==e?n=[n,l,e]:(n=null,P=u(i))):(n=null,P=u(i))}else n=null,P=u(i);null!==n&&(n=function(n,l,t,e){return["body"].concat(e)}(f.offset,f.line,f.column,n[1])),null===n&&(P=u(f))}return G--,0===G&&null===n&&o("inline"),n}function E(){var n,l;return n=y(),null===n&&(n=m(),null===n&&(l=u(P),n=F(),null!==n&&(n=function(n,l,t,e){return["buffer",e]}(l.offset,l.line,l.column,n)),null===n&&(P=u(l)))),n}function T(){var n,l,e,f,i,s,c,a,h;if(G++,s=u(P),c=u(P),n=J(),null!==n){for(l=[],e=L();null!==e;)l.push(e),e=L();null!==l?n=[n,l]:(n=null,P=u(c))}else n=null,P=u(c);if(null!==n&&(n=function(n,l,t,e,u){return["format",e,u.join("")]}(s.offset,s.line,s.column,n[0],n[1])),null===n&&(P=u(s)),null===n){if(s=u(P),c=u(P),a=u(P),h=u(P),G++,l=R(),G--,null===l?l="":(l=null,P=u(h)),null!==l?(h=u(P),G++,e=J(),G--,null===e?e="":(e=null,P=u(h)),null!==e?(h=u(P),G++,f=O(),G--,null===f?f="":(f=null,P=u(h)),null!==f?(t.length>P.offset?(i=t.charAt(P.offset),r(P,1)):(i=null,0===G&&o("any character")),null!==i?l=[l,e,f,i]:(l=null,P=u(a))):(l=null,P=u(a))):(l=null,P=u(a))):(l=null,P=u(a)),null!==l&&(l=function(n,l,t,e){return e}(c.offset,c.line,c.column,l[3])),null===l&&(P=u(c)),null!==l)for(n=[];null!==l;)n.push(l),c=u(P),a=u(P),h=u(P),G++,l=R(),G--,null===l?l="":(l=null,P=u(h)),null!==l?(h=u(P),G++,e=J(),G--,null===e?e="":(e=null,P=u(h)),null!==e?(h=u(P),G++,f=O(),G--,null===f?f="":(f=null,P=u(h)),null!==f?(t.length>P.offset?(i=t.charAt(P.offset),r(P,1)):(i=null,0===G&&o("any character")),null!==i?l=[l,e,f,i]:(l=null,P=u(a))):(l=null,P=u(a))):(l=null,P=u(a))):(l=null,P=u(a)),null!==l&&(l=function(n,l,t,e){return e}(c.offset,c.line,c.column,l[3])),null===l&&(P=u(c));else n=null;null!==n&&(n=function(n,l,t,e){return["buffer",e.join("")]}(s.offset,s.line,s.column,n)),null===n&&(P=u(s))}return G--,0===G&&null===n&&o("buffer"),n}function F(){var n,l,e,f,i,s,c;if(G++,f=u(P),i=u(P),s=u(P),c=u(P),G++,l=R(),G--,null===l?l="":(l=null,P=u(c)),null!==l?(e=_(),null===e&&(/^[^"]/.test(t.charAt(P.offset))?(e=t.charAt(P.offset),r(P,1)):(e=null,0===G&&o('[^"]'))),null!==e?l=[l,e]:(l=null,P=u(s))):(l=null,P=u(s)),null!==l&&(l=function(n,l,t,e){return e}(i.offset,i.line,i.column,l[1])),null===l&&(P=u(i)),null!==l)for(n=[];null!==l;)n.push(l),i=u(P),s=u(P),c=u(P),G++,l=R(),G--,null===l?l="":(l=null,P=u(c)),null!==l?(e=_(),null===e&&(/^[^"]/.test(t.charAt(P.offset))?(e=t.charAt(P.offset),r(P,1)):(e=null,0===G&&o('[^"]'))),null!==e?l=[l,e]:(l=null,P=u(s))):(l=null,P=u(s)),null!==l&&(l=function(n,l,t,e){return e}(i.offset,i.line,i.column,l[1])),null===l&&(P=u(i));else n=null;return null!==n&&(n=function(n,l,t,e){return e.join("")}(f.offset,f.line,f.column,n)),null===n&&(P=u(f)),G--,0===G&&null===n&&o("literal"),n}function _(){var n,l;return l=u(P),'\\"'===t.substr(P.offset,2)?(n='\\"',r(P,2)):(n=null,0===G&&o('"\\\\\\""')),null!==n&&(n=function(){return'"'}(l.offset,l.line,l.column)),null===n&&(P=u(l)),n}function O(){var n,l,e,f,i,s,c,a,h;if(G++,i=u(P),s=u(P),"{!"===t.substr(P.offset,2)?(n="{!",r(P,2)):(n=null,0===G&&o('"{!"')),null!==n){for(l=[],c=u(P),a=u(P),h=u(P),G++,"!}"===t.substr(P.offset,2)?(e="!}",r(P,2)):(e=null,0===G&&o('"!}"')),G--,null===e?e="":(e=null,P=u(h)),null!==e?(t.length>P.offset?(f=t.charAt(P.offset),r(P,1)):(f=null,0===G&&o("any character")),null!==f?e=[e,f]:(e=null,P=u(a))):(e=null,P=u(a)),null!==e&&(e=function(n,l,t,e){return e}(c.offset,c.line,c.column,e[1])),null===e&&(P=u(c));null!==e;)l.push(e),c=u(P),a=u(P),h=u(P),G++,"!}"===t.substr(P.offset,2)?(e="!}",r(P,2)):(e=null,0===G&&o('"!}"')),G--,null===e?e="":(e=null,P=u(h)),null!==e?(t.length>P.offset?(f=t.charAt(P.offset),r(P,1)):(f=null,0===G&&o("any character")),null!==f?e=[e,f]:(e=null,P=u(a))):(e=null,P=u(a)),null!==e&&(e=function(n,l,t,e){return e}(c.offset,c.line,c.column,e[1])),null===e&&(P=u(c));null!==l?("!}"===t.substr(P.offset,2)?(e="!}",r(P,2)):(e=null,0===G&&o('"!}"')),null!==e?n=[n,l,e]:(n=null,P=u(s))):(n=null,P=u(s))}else n=null,P=u(s);return null!==n&&(n=function(n,l,t,e){return["comment",e.join("")]}(i.offset,i.line,i.column,n[1])),null===n&&(P=u(i)),G--,0===G&&null===n&&o("comment"),n}function R(){var n,l,e,f,i,s,c,a,h,p;if(a=u(P),n=B(),null!==n)if(/^[#?^><+%:@\/~%]/.test(t.charAt(P.offset))?(l=t.charAt(P.offset),r(P,1)):(l=null,0===G&&o("[#?^><+%:@\\/~%]")),null!==l){for(e=[],f=L();null!==f;)e.push(f),f=L();if(null!==e){if(h=u(P),p=u(P),G++,i=$(),G--,null===i?i="":(i=null,P=u(p)),null!==i?(p=u(P),G++,s=J(),G--,null===s?s="":(s=null,P=u(p)),null!==s?(t.length>P.offset?(c=t.charAt(P.offset),r(P,1)):(c=null,0===G&&o("any character")),null!==c?i=[i,s,c]:(i=null,P=u(h))):(i=null,P=u(h))):(i=null,P=u(h)),null!==i)for(f=[];null!==i;)f.push(i),h=u(P),p=u(P),G++,i=$(),G--,null===i?i="":(i=null,P=u(p)),null!==i?(p=u(P),G++,s=J(),G--,null===s?s="":(s=null,P=u(p)),null!==s?(t.length>P.offset?(c=t.charAt(P.offset),r(P,1)):(c=null,0===G&&o("any character")),null!==c?i=[i,s,c]:(i=null,P=u(h))):(i=null,P=u(h))):(i=null,P=u(h));
else f=null;if(null!==f){for(i=[],s=L();null!==s;)i.push(s),s=L();null!==i?(s=$(),null!==s?n=[n,l,e,f,i,s]:(n=null,P=u(a))):(n=null,P=u(a))}else n=null,P=u(a)}else n=null,P=u(a)}else n=null,P=u(a);else n=null,P=u(a);return null===n&&(n=m()),n}function B(){var n;return 123===t.charCodeAt(P.offset)?(n="{",r(P,1)):(n=null,0===G&&o('"{"')),n}function $(){var n;return 125===t.charCodeAt(P.offset)?(n="}",r(P,1)):(n=null,0===G&&o('"}"')),n}function J(){var n;return 10===t.charCodeAt(P.offset)?(n="\n",r(P,1)):(n=null,0===G&&o('"\\n"')),null===n&&("\r\n"===t.substr(P.offset,2)?(n="\r\n",r(P,2)):(n=null,0===G&&o('"\\r\\n"')),null===n&&(13===t.charCodeAt(P.offset)?(n="\r",r(P,1)):(n=null,0===G&&o('"\\r"')),null===n&&(8232===t.charCodeAt(P.offset)?(n="\u2028",r(P,1)):(n=null,0===G&&o('"\\u2028"')),null===n&&(8233===t.charCodeAt(P.offset)?(n="\u2029",r(P,1)):(n=null,0===G&&o('"\\u2029"')))))),n}function L(){var n;return/^[\t\x0B\f \xA0\uFEFF]/.test(t.charAt(P.offset))?(n=t.charAt(P.offset),r(P,1)):(n=null,0===G&&o("[\\t\\x0B\\f \\xA0\\uFEFF]")),null===n&&(n=J()),n}function z(n){n.sort();for(var l=null,t=[],e=0;e<n.length;e++)n[e]!==l&&(t.push(n[e]),l=n[e]);return t}var Q={body:f,part:i,section:s,sec_tag_start:c,end_tag:a,context:h,params:p,bodies:d,reference:m,partial:v,filters:k,special:y,identifier:b,number:g,frac:x,integer:A,path:C,key:S,array:w,array_part:N,inline:j,inline_part:E,buffer:T,literal:F,esc:_,comment:O,tag:R,ld:B,rd:$,eol:J,ws:L};if(void 0!==e){if(void 0===Q[e])throw new Error("Invalid rule name: "+n(e)+".")}else e="body";var P={offset:0,line:1,column:1,seenCR:!1},G=0,H={offset:0,line:1,column:1,seenCR:!1},U=[],Z=Q[e]();if(null===Z||P.offset!==t.length){var q=Math.max(P.offset,H.offset),D=q<t.length?t.charAt(q):null,I=P.offset>H.offset?P:H;throw new l.SyntaxError(z(U),D,q,I.line,I.column)}return Z},toSource:function(){return this._source}};return t.SyntaxError=function(l,t,e,u,r){function o(l,t){var e,u;switch(l.length){case 0:e="end of input";break;case 1:e=l[0];break;default:e=l.slice(0,l.length-1).join(", ")+" or "+l[l.length-1]}return u=t?n(t):"end of input","Expected "+e+" but "+u+" found."}this.name="SyntaxError",this.expected=l,this.found=t,this.message=o(l,t),this.offset=e,this.line=u,this.column=r},t.SyntaxError.prototype=Error.prototype,t}();n.parse=l.parse}("undefined"!=typeof exports?exports:getGlobal());