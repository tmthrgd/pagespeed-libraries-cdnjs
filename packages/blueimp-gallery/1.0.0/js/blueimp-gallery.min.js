function Swipe(t,e){"use strict";function n(){m=C.children,y=m.length,2>m.length&&(e.continuous=!1),v.transitions&&e.continuous&&3>m.length&&(C.appendChild(m[0].cloneNode(!0)),C.appendChild(C.children[1].cloneNode(!0)),m=C.children),f=Array(m.length),g=t.getBoundingClientRect().width||t.offsetWidth,C.style.width=m.length*g+"px";for(var n=m.length;n--;){var i=m[n];i.style.width=g+"px",i.setAttribute("data-index",n),v.transitions&&(i.style.left=n*-g+"px",a(n,w>n?-g:n>w?g:0,0))}e.continuous&&v.transitions&&(a(o(w-1),-g,0),a(o(w+1),g,0)),v.transitions||(C.style.left=w*-g+"px"),t.style.visibility="visible"}function i(){e.continuous?r(w-1):w&&r(w-1)}function s(){e.continuous?r(w+1):m.length-1>w&&r(w+1)}function o(t){return(m.length+t%m.length)%m.length}function r(t,n){if(w!=t){if(v.transitions){var i=Math.abs(w-t)/(w-t);if(e.continuous){var s=i;i=-f[o(t)]/g,i!==s&&(t=-i*m.length+t)}for(var r=Math.abs(w-t)-1;r--;)a(o((t>w?t:w)-r-1),g*i,0);t=o(t),a(w,g*i,n||E),a(t,0,n||E),e.continuous&&a(o(t-i),-(g*i),0)}else t=o(t),h(w*-g,t*-g,n||E);w=t,p(e.callback&&e.callback(w,m[w]))}}function a(t,e,n){l(t,e,n),f[t]=e}function l(t,e,n){var i=m[t],s=i&&i.style;s&&(s.webkitTransitionDuration=s.MozTransitionDuration=s.msTransitionDuration=s.OTransitionDuration=s.transitionDuration=n+"ms",s.webkitTransform="translate("+e+"px,0)"+"translateZ(0)",s.msTransform=s.MozTransform=s.OTransform="translateX("+e+"px)")}function h(t,n,i){if(!i)return C.style.left=n+"px",void 0;var s=+new Date,o=setInterval(function(){var r=+new Date-s;return r>i?(C.style.left=n+"px",L&&c(),e.transitionEnd&&e.transitionEnd.call(event,w,m[w]),clearInterval(o),void 0):(C.style.left=(n-t)*(Math.floor(100*(r/i))/100)+t+"px",void 0)},4)}function c(){b=setTimeout(s,L)}function d(){L=0,clearTimeout(b)}var u=function(){},p=function(t){setTimeout(t||u,0)},v={addEventListener:!!window.addEventListener,touch:"ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch,transitions:function(t){var e=["transitionProperty","WebkitTransition","MozTransition","OTransition","msTransition"];for(var n in e)if(void 0!==t.style[e[n]])return!0;return!1}(document.createElement("swipe"))};if(t){var m,f,g,y,C=t.children[0];e=e||{};var w=parseInt(e.startSlide,10)||0,E=e.speed||300;e.continuous=void 0!==e.continuous?e.continuous:!0;var b,x,L=e.auto||0,S={},k={},N={handleEvent:function(t){switch(t.type){case"touchstart":this.start(t);break;case"touchmove":this.move(t);break;case"touchend":p(this.end(t));break;case"webkitTransitionEnd":case"msTransitionEnd":case"oTransitionEnd":case"otransitionend":case"transitionend":p(this.transitionEnd(t));break;case"resize":p(n.call())}e.stopPropagation&&t.stopPropagation()},start:function(t){var e=t.touches[0];S={x:e.pageX,y:e.pageY,time:+new Date},x=void 0,k={},C.addEventListener("touchmove",this,!1),C.addEventListener("touchend",this,!1)},move:function(t){if(!(t.touches.length>1||t.scale&&1!==t.scale)){e.disableScroll&&t.preventDefault();var n=t.touches[0];k={x:n.pageX-S.x,y:n.pageY-S.y},x===void 0&&(x=!!(x||Math.abs(k.x)<Math.abs(k.y))),x||(t.preventDefault(),d(),e.continuous?(l(o(w-1),k.x+f[o(w-1)],0),l(w,k.x+f[w],0),l(o(w+1),k.x+f[o(w+1)],0)):(k.x=k.x/(!w&&k.x>0||w==m.length-1&&0>k.x?Math.abs(k.x)/g+1:1),l(w-1,k.x+f[w-1],0),l(w,k.x+f[w],0),l(w+1,k.x+f[w+1],0)))}},end:function(){var t=+new Date-S.time,n=250>Number(t)&&Math.abs(k.x)>20||Math.abs(k.x)>g/2,i=!w&&k.x>0||w==m.length-1&&0>k.x;e.continuous&&(i=!1);var s=0>k.x;x||(n&&!i?(s?(e.continuous?(a(o(w-1),-g,0),a(o(w+2),g,0)):a(w-1,-g,0),a(w,f[w]-g,E),a(o(w+1),f[o(w+1)]-g,E),w=o(w+1)):(e.continuous?(a(o(w+1),g,0),a(o(w-2),-g,0)):a(w+1,g,0),a(w,f[w]+g,E),a(o(w-1),f[o(w-1)]+g,E),w=o(w-1)),e.callback&&e.callback(w,m[w])):e.continuous?(a(o(w-1),-g,E),a(w,0,E),a(o(w+1),g,E)):(a(w-1,-g,E),a(w,0,E),a(w+1,g,E))),C.removeEventListener("touchmove",N,!1),C.removeEventListener("touchend",N,!1)},transitionEnd:function(t){parseInt(t.target.getAttribute("data-index"),10)==w&&(L&&c(),e.transitionEnd&&e.transitionEnd.call(t,w,m[w]))}};return n(),L&&c(),v.addEventListener?(v.touch&&C.addEventListener("touchstart",N,!1),v.transitions&&(C.addEventListener("webkitTransitionEnd",N,!1),C.addEventListener("msTransitionEnd",N,!1),C.addEventListener("oTransitionEnd",N,!1),C.addEventListener("otransitionend",N,!1),C.addEventListener("transitionend",N,!1)),window.addEventListener("resize",N,!1)):window.onresize=function(){n()},{setup:function(){n()},slide:function(t,e){d(),r(t,e)},prev:function(){d(),i()},next:function(){d(),s()},getPos:function(){return w},getNumSlides:function(){return y},kill:function(){d(),C.style.width="auto",C.style.left=0;for(var t=m.length;t--;){var e=m[t];e.style.width="100%",e.style.left=0,v.transitions&&l(t,0,0)}v.addEventListener?(C.removeEventListener("touchstart",N,!1),C.removeEventListener("webkitTransitionEnd",N,!1),C.removeEventListener("msTransitionEnd",N,!1),C.removeEventListener("oTransitionEnd",N,!1),C.removeEventListener("otransitionend",N,!1),C.removeEventListener("transitionend",N,!1),window.removeEventListener("resize",N,!1)):window.onresize=null}}}}(window.jQuery||window.Zepto)&&function(t){t.fn.Swipe=function(e){return this.each(function(){t(this).data("Swipe",new Swipe(t(this)[0],e))})}}(window.jQuery||window.Zepto),function(){"use strict";function t(e,n){if(!e||!e.length||void 0===document.body.style.maxHeight)return!1;if(!this||this.options!==t.prototype.options)return new t(e,n);var i=this,s=this.helper,o=n&&n.callback;this.list=e,this.options=s.extend({},this.options),(n&&n.carousel||this.options.carousel&&(!n||n.carousel!==!1))&&s.extend(this.options,this.carouselOptions),s.extend(this.options,n),this.options.callback=function(t,e){i.onslide(t,e),o&&o(t,e)},this.container=document.getElementById(this.options.containerId),this.containerWrap=this.container.children[0],this.options.titleElement=s.query(this.container,this.options.titleElement),this.options.indicatorContainer=s.query(this.container,this.options.indicatorContainer),this.initEventListeners(),this.initElements(),this.requestFullScreen(),this.options.hidePageScrollbars&&(this.bodyOverflowStyle=document.body.style.overflow,document.body.style.overflow="hidden"),this.container.style.display="block",this.noop=this.container.offsetWidth,1===this.list.length&&s.addClass(this.container,this.options.singleClass),s.addClass(this.container,this.options.displayClass),this.swipe=window.Swipe(this.container,this.options)}var e={extend:function(t,e){var n;for(n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t},hasClass:function(t,e){return RegExp("(^|\\s+)"+e+"(\\s+|$)").test(t.className)},addClass:function(t,e){return t.className?(this.hasClass(t,e)||(t.className+=" "+e),void 0):(t.className=e,void 0)},removeClass:function(t,e){var n=RegExp("(^|\\s+)"+e+"(\\s+|$)");t.className=t.className.replace(n," ")},addListener:function(t,e,n){t.addEventListener?t.addEventListener(e,n,!1):t.attachEvent&&t.attachEvent("on"+e,n)},removeListener:function(t,e,n){t.removeEventListener?t.removeEventListener(e,n,!1):t.detachEvent&&t.detachEvent("on"+e,n)},preventDefault:function(t){t.preventDefault?t.preventDefault():t.returnValue=!1},empty:function(t){for(;t.hasChildNodes();)t.removeChild(t.lastChild)},query:function(t,e){return"string"==typeof e?t.getElementsByTagName(e)[0]:e}};e.extend(t.prototype,{helper:e,options:{carousel:!1,preloadRange:2,containerId:"blueimp-gallery",displayClass:"blueimp-gallery-display",controlsClass:"blueimp-gallery-controls",singleClass:"blueimp-gallery-single",loadingClass:"loading",errorClass:"error",prevClass:"prev",nextClass:"next",closeClass:"close",activeClass:"active",titleElement:"h3",indicatorContainer:"ol",thumbnailProperty:"thumbnail",thumbnailIndicators:!0,clearElements:!1,fullScreen:!1,toggleControlsOnReturn:!0,enableKeyboardNavigation:!0,closeOnEscape:!0,closeOnSlideClick:!0,closeOnSwipeUpOrDown:!0,touchMoveThreshold:50,hidePageScrollbars:!0,disableScroll:!0,startSlide:0},carouselOptions:{hidePageScrollbars:!1,toggleControlsOnReturn:!1,enableKeyboardNavigation:!1,closeOnEscape:!1,closeOnSlideClick:!1,closeOnSwipeUpOrDown:!1,disableScroll:!1,auto:5e3},prev:function(){return this.swipe.prev()},next:function(){return this.swipe.next()},getPos:function(){return this.swipe.getPos()},getNumSlides:function(){return this.slides.length},slide:function(t,e){return this.swipe.slide(t,e)},onslide:function(t){2===this.list.length&&t>1&&(t-=2),this.loadElements(t),this.setTitle(t),this.setActiveIndicator(t)},setTitle:function(t){var e=this.elements[t].title,n=this.options.titleElement;n&&(this.helper.empty(n),e&&n.appendChild(document.createTextNode(e)))},setActiveIndicator:function(t){this.indicators&&(this.activeIndicator&&this.helper.removeClass(this.activeIndicator,this.options.activeClass),this.activeIndicator=this.indicators[t],this.helper.addClass(this.activeIndicator,this.options.activeClass))},createElement:function(t,e){var n=this.imgPrototype.cloneNode(!1),i="string"==typeof t?t:t.href;return t.title&&(n.title=t.title),this.helper.addListener(n,"load",e),this.helper.addListener(n,"error",e),n.src=i,n.complete&&window.setTimeout(function(){e({type:"load",target:n})},1),n},createIndicator:function(t){var e,n,i=this.indicatorPrototype.cloneNode(!1),s=this.options.thumbnailProperty;return this.options.thumbnailIndicators&&(t.firstChild&&t.firstChild.src?n=t.firstChild.cloneNode(!1):s&&(e=t[s]||t.getAttribute&&t.getAttribute("data-"+s),e&&(n=this.imgPrototype.cloneNode(!1),n.src=e)),n&&(!n.title&&t.title&&(n.title=t.title),i.appendChild(n))),i},loadElement:function(t){this.elements[t]||(this.slides[t].firstChild?this.elements[t]=this.slides[t].firstChild:(this.helper.addClass(this.slides[t],this.options.loadingClass),this.elements[t]=this.createElement(this.list[t],this.proxyListener),this.slides[t].appendChild(this.elements[t])))},loadElements:function(t){if(!this.loaded[t]){this.loaded[t]=!0;var e,n=this.list.length,i=Math.min(n,2*this.options.preloadRange+1),s=t;for(e=0;i>e;e+=1)s+=e*(0===e%2?-1:1),0>s?s=n+s:s>=n&&(s-=n),this.loadElement(s)}},initElements:function(){var t,e,n;if(this.slides=this.containerWrap.children,this.imgPrototype=document.createElement("img"),this.elements=[],this.elements.length=this.list.length,t=this.options.clearElements||this.list.length!==this.slides.length)for(this.helper.empty(this.containerWrap),this.options.indicatorContainer&&this.helper.empty(this.options.indicatorContainer),this.slidePrototype=document.createElement("div"),this.slides=[],this.options.indicatorContainer&&(this.indicatorPrototype=document.createElement("li"),this.indicators=[]);this.list.length>this.slides.length;)e=this.slidePrototype.cloneNode(!1),this.containerWrap.appendChild(e),this.slides.push(e),this.indicators&&(n=this.createIndicator(this.list[this.indicators.length]),this.options.indicatorContainer.appendChild(n),n.setAttribute("data-index",this.indicators.length),this.indicators.push(n));else this.options.indicatorContainer&&(this.indicators=this.options.indicatorContainer.children);this.loaded=[],this.loaded.length=this.elements.length,this.onslide(this.options.startSlide)},getFullScreenElement:function(){return document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement},requestFullScreen:function(){!this.getFullScreenElement()&&this.options.fullScreen&&(this.container.requestFullscreen?this.container.requestFullscreen():this.container.webkitRequestFullscreen?this.container.webkitRequestFullscreen():this.container.mozRequestFullScreen&&this.container.mozRequestFullScreen())},exitFullScreen:function(){this.getFullScreenElement()===this.container&&(document.exitFullscreen?document.exitFullscreen():document.webkitCancelFullScreen?document.webkitCancelFullScreen():document.mozCancelFullScreen&&document.mozCancelFullScreen())},toggleControls:function(){var t=this.options.controlsClass;this.helper.hasClass(this.container,t)?this.helper.removeClass(this.container,t):this.helper.addClass(this.container,t)},getNodeIndex:function(t){return parseInt(t.getAttribute("data-index"),10)},oncomplete:function(t){var e,n=t.target||t.srcElement;n&&n.parentNode&&(this.helper.removeClass(n.parentNode,this.options.loadingClass),2===this.list.length&&this.containerWrap.children.length>2&&(e=this.containerWrap.children[this.getNodeIndex(n.parentNode)+2],e.firstChild||e.appendChild(n.cloneNode(!0)),this.helper.removeClass(e,this.options.loadingClass)),"error"===t.type&&(this.helper.addClass(n.parentNode,this.options.errorClass),e&&this.helper.addClass(e,this.options.errorClass)),n.clientHeight>this.container.clientHeight&&(n.style.maxHeight=this.container.clientHeight))},onload:function(t){this.oncomplete(t)},onerror:function(t){this.oncomplete(t)},onkeydown:function(t){switch(t.which||t.keyCode){case 13:this.options.toggleControlsOnReturn&&(this.helper.preventDefault(t),this.toggleControls());break;case 27:this.options.closeOnEscape&&this.close();break;case 37:this.options.enableKeyboardNavigation&&(this.helper.preventDefault(t),this.prev());break;case 39:this.options.enableKeyboardNavigation&&(this.helper.preventDefault(t),this.next())}},onclick:function(t){var e=t.target||t.srcElement,n=e.parentNode,i=this.helper,s=function(t){return i.hasClass(e,t)||i.hasClass(n,t)};n===this.containerWrap?(i.preventDefault(t),this.options.closeOnSlideClick?this.close():this.toggleControls()):n.parentNode&&n.parentNode===this.containerWrap?(i.preventDefault(t),this.toggleControls()):n===this.options.indicatorContainer?(i.preventDefault(t),this.slide(this.getNodeIndex(e))):n.parentNode===this.options.indicatorContainer?(i.preventDefault(t),this.slide(this.getNodeIndex(n))):s(this.options.prevClass)?(i.preventDefault(t),this.prev()):s(this.options.nextClass)?(i.preventDefault(t),this.next()):s(this.options.closeClass)&&(i.preventDefault(t),this.close())},ontouchstart:function(t){this.touchStartPageY=1===t.touches.length&&t.touches[0].pageY},ontouchmove:function(t){this.touchStartPageY&&1===t.touches.length&&Math.abs(this.touchStartPageY-t.touches[0].pageY)>this.options.touchMoveThreshold&&this.close()},initEventListeners:function(){var t=this,e=this.helper;this.proxyListener=function(e){t["on"+e.type](e)},e.addListener(document.body,"keydown",this.proxyListener),e.addListener(this.container,"click",this.proxyListener),this.options.closeOnSwipeUpOrDown&&(e.addListener(this.container,"touchstart",this.proxyListener),e.addListener(this.container,"touchmove",this.proxyListener))},destroyEventListeners:function(){var t=this.helper;t.removeListener(document.body,"keydown",this.proxyListener),t.removeListener(this.container,"click",this.proxyListener),this.options.closeOnSwipeUpOrDown&&(t.removeListener(this.container,"touchstart",this.proxyListener),t.removeListener(this.container,"touchmove",this.proxyListener))},close:function(){var t=this.helper;this.exitFullScreen(),this.container.style.display="none",t.removeClass(this.container,this.options.displayClass),this.options.hidePageScrollbars&&(document.body.style.overflow=this.bodyOverflowStyle),this.destroyEventListeners(),this.swipe.kill(),this.options.clearElements?(t.empty(this.containerWrap),this.options.indicatorContainer&&t.empty(this.options.indicatorContainer)):this.activeIndicator&&t.removeClass(this.activeIndicator,this.options.activeClass)}}),"function"==typeof define&&define.amd?define(function(){return t}):(window.blueimp=window.blueimp||{},window.blueimp.Gallery=t)}();