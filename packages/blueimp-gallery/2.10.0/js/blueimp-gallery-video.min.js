!function(e){"use strict";"function"==typeof define&&define.amd?define(["./blueimp-helper","./blueimp-gallery"],e):e(window.blueimp.helper||window.jQuery,window.blueimp.Gallery)}(function(e,t){"use strict";return e.extend(t.prototype.options,{videoContentClass:"video-content",videoLoadingClass:"video-loading",videoPlayingClass:"video-playing",videoPosterProperty:"poster",videoSourcesProperty:"sources"}),t.prototype.videoFactory=function(t,o,s){var i,r,n,a,l,p=this,d=this.options,y=this.elementPrototype.cloneNode(!1),c=e(y),u=[{type:"error",target:y}],C=s||document.createElement("video"),g=this.getItemProperty(t,d.urlProperty),m=this.getItemProperty(t,d.typeProperty),P=this.getItemProperty(t,d.titleProperty),v=this.getItemProperty(t,d.videoPosterProperty),h=this.getItemProperty(t,d.videoSourcesProperty);if(c.addClass(d.videoContentClass),P&&(y.title=P),C.canPlayType)if(g&&m&&C.canPlayType(m))C.src=g;else for(;h&&h.length;)if(r=h.shift(),g=this.getItemProperty(r,d.urlProperty),m=this.getItemProperty(r,d.typeProperty),g&&m&&C.canPlayType(m)){C.src=g;break}return v&&(C.poster=v,i=this.imagePrototype.cloneNode(!1),e(i).addClass(d.toggleClass),i.src=v,i.draggable=!1,y.appendChild(i)),n=document.createElement("a"),n.setAttribute("target","_blank"),s||n.setAttribute("download",P),n.href=g,C.src&&(C.controls=!0,(s||e(C)).on("error",function(){p.setTimeout(o,u)}).on("pause",function(){a=!1,c.removeClass(p.options.videoLoadingClass).removeClass(p.options.videoPlayingClass),l&&p.container.addClass(p.options.controlsClass),p.interval&&p.play()}).on("playing",function(){a=!1,c.removeClass(p.options.videoLoadingClass).addClass(p.options.videoPlayingClass),p.container.hasClass(p.options.controlsClass)?(l=!0,p.container.removeClass(p.options.controlsClass)):l=!1}).on("play",function(){window.clearTimeout(p.timeout),a=!0,c.addClass(p.options.videoLoadingClass)}),e(n).on("click",function(e){p.preventDefault(e),a?C.pause():C.play()}),y.appendChild(s&&s.element||C)),y.appendChild(n),this.setTimeout(o,[{type:"load",target:y}]),y},t});