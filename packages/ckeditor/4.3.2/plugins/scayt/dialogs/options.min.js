CKEDITOR.dialog.add("scaytcheck",function(N){function e(){return"undefined"!=typeof document.forms["optionsbar_"+R]?document.forms["optionsbar_"+R].options:[]}function d(g,f){if(g){var h=g.length;if(void 0==h){g.checked=g.value==f.toString()}else{for(var j=0;j<h;j++){g[j].checked=!1,g[j].value==f.toString()&&(g[j].checked=!0)}}}}function K(b){Q.getById("dic_message_"+R).setHtml('<span style="color:red;">'+b+"</span>")}function J(b){Q.getById("dic_message_"+R).setHtml('<span style="color:blue;">'+b+"</span>")}function I(g){for(var g=(""+g).split(","),f=0,h=g.length;f<h;f+=1){Q.getById(g[f]).$.style.display="inline"}}function G(g){for(var g=(""+g).split(","),f=0,h=g.length;f<h;f+=1){Q.getById(g[f]).$.style.display="none"}}function E(b){Q.getById("dic_name_"+R).$.value=b}var D=!0,O,Q=CKEDITOR.document,R=N.name,M=CKEDITOR.plugins.scayt.getUiTabs(N),P,C=[],k=0,L=["dic_create_"+R+",dic_restore_"+R,"dic_rename_"+R+",dic_delete_"+R],i=["mixedCase","mixedWithDigits","allCaps","ignoreDomainNames"];P=N.lang.scayt;var a=[{id:"options",label:P.optionsTab,elements:[{type:"html",id:"options",html:'<form name="optionsbar_'+R+'"><div class="inner_options">\t<div class="messagebox"></div>\t<div style="display:none;">\t\t<input type="checkbox" name="options"  id="allCaps_'+R+'" />\t\t<label style = "display: inline" for="allCaps" id="label_allCaps_'+R+'"></label>\t</div>\t<div style="display:none;">\t\t<input name="options" type="checkbox"  id="ignoreDomainNames_'+R+'" />\t\t<label style = "display: inline" for="ignoreDomainNames" id="label_ignoreDomainNames_'+R+'"></label>\t</div>\t<div style="display:none;">\t<input name="options" type="checkbox"  id="mixedCase_'+R+'" />\t\t<label style = "display: inline" for="mixedCase" id="label_mixedCase_'+R+'"></label>\t</div>\t<div style="display:none;">\t\t<input name="options" type="checkbox"  id="mixedWithDigits_'+R+'" />\t\t<label style = "display: inline" for="mixedWithDigits" id="label_mixedWithDigits_'+R+'"></label>\t</div></div></form>'}]},{id:"langs",label:P.languagesTab,elements:[{type:"html",id:"langs",html:'<div class="inner_langs">\t<div class="messagebox"></div>\t   <div style="float:left;width:45%;margin-left:5px;" id="scayt_lcol_'+R+'" ></div>   <div style="float:left;width:45%;margin-left:15px;" id="scayt_rcol_'+R+'"></div></div>'}]},{id:"dictionaries",label:P.dictionariesTab,elements:[{type:"html",style:"",id:"dictionaries",html:'<form name="dictionarybar_'+R+'"><div class="inner_dictionary" style="text-align:left; white-space:normal; width:320px; overflow: hidden;">\t<div style="margin:5px auto; width:95%;white-space:normal; overflow:hidden;" id="dic_message_'+R+'"> </div>\t<div style="margin:5px auto; width:95%;white-space:normal;">        <span class="cke_dialog_ui_labeled_label" >Dictionary name</span><br>\t\t<span class="cke_dialog_ui_labeled_content" >\t\t\t<div class="cke_dialog_ui_input_text">\t\t\t\t<input id="dic_name_'+R+'" type="text" class="cke_dialog_ui_input_text" style = "height: 25px; background: none; padding: 0;"/>\t\t</div></span></div>\t\t<div style="margin:5px auto; width:95%;white-space:normal;">\t\t\t<a style="display:none;" class="cke_dialog_ui_button" href="javascript:void(0)" id="dic_create_'+R+'">\t\t\t\t</a>\t\t\t<a  style="display:none;" class="cke_dialog_ui_button" href="javascript:void(0)" id="dic_delete_'+R+'">\t\t\t\t</a>\t\t\t<a  style="display:none;" class="cke_dialog_ui_button" href="javascript:void(0)" id="dic_rename_'+R+'">\t\t\t\t</a>\t\t\t<a  style="display:none;" class="cke_dialog_ui_button" href="javascript:void(0)" id="dic_restore_'+R+'">\t\t\t\t</a>\t\t</div>\t<div style="margin:5px auto; width:95%;white-space:normal;" id="dic_info_'+R+'"></div></div></form>'}]},{id:"about",label:P.aboutTab,elements:[{type:"html",id:"about",style:"margin: 5px 5px;",html:'<div><div id="scayt_about_'+R+'"></div></div>'}]}],F={title:P.title,minWidth:360,minHeight:220,onShow:function(){var g=this;g.data=N.fire("scaytDialog",{});g.options=g.data.scayt_control.option();g.chosed_lang=g.sLang=g.data.scayt_control.sLang;if(!g.data||!g.data.scayt||!g.data.scayt_control){alert("Error loading application service"),g.hide()}else{var f=0;D?g.data.scayt.getCaption(N.langCode||"en",function(b){0<f++||(O=b,H.apply(g),c.apply(g),D=!1)}):c.apply(g);g.selectPage(g.data.tab)}},onOk:function(){var b=this.data.scayt_control;b.option(this.options);b.setLang(this.chosed_lang);b.refresh()},onCancel:function(){var b=e(),g;for(g in b){b[g].checked=!1}b="undefined"!=typeof document.forms["languagesbar_"+R]?document.forms["languagesbar_"+R].scayt_lang:[];d(b,"")},contents:C};CKEDITOR.plugins.scayt.getScayt(N);for(P=0;P<M.length;P++){1==M[P]&&(C[C.length]=a[P])}1==M[2]&&(k=1);var H=function(){function b(g){var s=Q.getById("dic_name_"+R).getValue();if(!s){return K(" Dictionary name should not be empty. "),!1}try{var r=g.data.getTarget().getParent(),j=/(dic_\w+)_[\w\d]+/.exec(r.getId())[1];h[j].apply(null,[r,s,L])}catch(q){K(" Dictionary error. ")}return !0}var f=this,n=f.data.scayt.getLangList(),o=["dic_create","dic_delete","dic_rename","dic_restore"],m=[],l=[],p;if(k){for(p=0;p<o.length;p++){m[p]=o[p]+"_"+R,Q.getById(m[p]).setHtml('<span class="cke_dialog_ui_button">'+O["button_"+o[p]]+"</span>")}Q.getById("dic_info_"+R).setHtml(O.dic_info)}if(1==M[0]){for(p in i){o="label_"+i[p],m=Q.getById(o+"_"+R),"undefined"!=typeof m&&("undefined"!=typeof O[o]&&"undefined"!=typeof f.options[i[p]])&&(m.setHtml(O[o]),m.getParent().$.style.display="block")}}o='<p><img src="'+window.scayt.getAboutInfo().logoURL+'" /></p><p>'+O.version+window.scayt.getAboutInfo().version.toString()+"</p><p>"+O.about_throwt_copy+"</p>";Q.getById("scayt_about_"+R).setHtml(o);o=function(j,g){var s=Q.createElement("label");s.setAttribute("for","cke_option"+j);s.setStyle("display","inline");s.setHtml(g[j]);f.sLang==j&&(f.chosed_lang=j);var r=Q.createElement("div"),q=CKEDITOR.dom.element.createFromHtml('<input class = "cke_dialog_ui_radio_input" id="cke_option'+j+'" type="radio" '+(f.sLang==j?'checked="checked"':"")+' value="'+j+'" name="scayt_lang" />');q.on("click",function(){this.$.checked=true;f.chosed_lang=j});r.append(q);r.append(s);return{lang:g[j],code:j,radio:r}};if(1==M[1]){for(p in n.rtl){l[l.length]=o(p,n.ltr)}for(p in n.ltr){l[l.length]=o(p,n.ltr)}l.sort(function(j,g){return g.lang>j.lang?-1:1});n=Q.getById("scayt_lcol_"+R);o=Q.getById("scayt_rcol_"+R);for(p=0;p<l.length;p++){(p<l.length/2?n:o).append(l[p].radio)}}var h={dic_create:function(j,g,t){var s=t[0]+","+t[1],r=O.err_dic_create,q=O.succ_dic_create;window.scayt.createUserDictionary(g,function(u){G(s);I(t[1]);q=q.replace("%s",u.dname);J(q)},function(u){r=r.replace("%s",u.dname);K(r+"( "+(u.message||"")+")")})},dic_rename:function(j,g){var r=O.err_dic_rename||"",q=O.succ_dic_rename||"";window.scayt.renameUserDictionary(g,function(s){q=q.replace("%s",s.dname);E(g);J(q)},function(s){r=r.replace("%s",s.dname);E(g);K(r+"( "+(s.message||"")+" )")})},dic_delete:function(j,g,t){var s=t[0]+","+t[1],r=O.err_dic_delete,q=O.succ_dic_delete;window.scayt.deleteUserDictionary(function(u){q=q.replace("%s",u.dname);G(s);I(t[0]);E("");J(q)},function(u){r=r.replace("%s",u.dname);K(r)})}};h.dic_restore=f.dic_restore||function(j,g,t){var s=t[0]+","+t[1],r=O.err_dic_restore,q=O.succ_dic_restore;window.scayt.restoreUserDictionary(g,function(u){q=q.replace("%s",u.dname);G(s);I(t[1]);J(q)},function(u){r=r.replace("%s",u.dname);K(r)})};l=(L[0]+","+L[1]).split(",");p=0;for(n=l.length;p<n;p+=1){if(o=Q.getById(l[p])){o.on("click",b,this)}}},c=function(){var b=this;if(1==M[0]){for(var l=e(),m=0,n=l.length;m<n;m++){var j=l[m].id,f=Q.getById(j);if(f&&(l[m].checked=!1,1==b.options[j.split("_")[0]]&&(l[m].checked=!0),D)){f.on("click",function(){b.options[this.getId().split("_")[0]]=this.$.checked?1:0})}}}1==M[1]&&(l=Q.getById("cke_option"+b.sLang),d(l.$,b.sLang));k&&(window.scayt.getNameUserDictionary(function(g){g=g.dname;G(L[0]+","+L[1]);if(g){Q.getById("dic_name_"+R).setValue(g);I(L[1])}else{I(L[0])}},function(){Q.getById("dic_name_"+R).setValue("")}),J(""))};return F});