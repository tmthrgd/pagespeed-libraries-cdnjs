(function(){function d(i,g,q){var j=l[this.id];if(j){for(var m=this instanceof CKEDITOR.ui.dialog.checkbox,n=0;n<j.length;n++){var o=j[n];switch(o.type){case h:if(!i){continue}if(null!==i.getAttribute(o.name)){i=i.getAttribute(o.name);m?this.setValue("true"==i.toLowerCase()):this.setValue(i);return}m&&this.setValue(!!o["default"]);break;case k:if(!i){continue}if(o.name in q){i=q[o.name];m?this.setValue("true"==i.toLowerCase()):this.setValue(i);return}m&&this.setValue(!!o["default"]);break;case f:if(!g){continue}if(g.getAttribute(o.name)){i=g.getAttribute(o.name);m?this.setValue("true"==i.toLowerCase()):this.setValue(i);return}m&&this.setValue(!!o["default"])}}}}function p(t,s,r){var j=l[this.id];if(j){for(var n=""===this.getValue(),o=this instanceof CKEDITOR.ui.dialog.checkbox,q=0;q<j.length;q++){var m=j[q];switch(m.type){case h:if(!t||"data"==m.name&&s&&!t.hasAttribute("data")){continue}var i=this.getValue();n||o&&i===m["default"]?t.removeAttribute(m.name):t.setAttribute(m.name,i);break;case k:if(!t){continue}i=this.getValue();if(n||o&&i===m["default"]){m.name in r&&r[m.name].remove()}else{if(m.name in r){r[m.name].setAttribute("value",i)}else{var g=CKEDITOR.dom.element.createFromHtml("<cke:param></cke:param>",t.getDocument());g.setAttributes({name:m.name,value:i});1>t.getChildCount()?g.appendTo(t):g.insertBefore(t.getFirst())}}break;case f:if(!s){continue}i=this.getValue();n||o&&i===m["default"]?s.removeAttribute(m.name):s.setAttribute(m.name,i)}}}}for(var h=1,k=2,f=4,l={id:[{type:h,name:"id"}],classid:[{type:h,name:"classid"}],codebase:[{type:h,name:"codebase"}],pluginspage:[{type:f,name:"pluginspage"}],src:[{type:k,name:"movie"},{type:f,name:"src"},{type:h,name:"data"}],name:[{type:f,name:"name"}],align:[{type:h,name:"align"}],"class":[{type:h,name:"class"},{type:f,name:"class"}],width:[{type:h,name:"width"},{type:f,name:"width"}],height:[{type:h,name:"height"},{type:f,name:"height"}],hSpace:[{type:h,name:"hSpace"},{type:f,name:"hSpace"}],vSpace:[{type:h,name:"vSpace"},{type:f,name:"vSpace"}],style:[{type:h,name:"style"},{type:f,name:"style"}],type:[{type:f,name:"type"}]},a="play loop menu quality scale salign wmode bgcolor base flashvars allowScriptAccess allowFullScreen".split(" "),e=0;e<a.length;e++){l[a[e]]=[{type:f,name:a[e]},{type:k,name:a[e]}]}a=["allowFullScreen","play","loop","menu"];for(e=0;e<a.length;e++){l[a[e]][0]["default"]=l[a[e]][1]["default"]=!0}CKEDITOR.dialog.add("flash",function(b){var m=!b.config.flashEmbedTagOnly,j=b.config.flashAddEmbedTag||b.config.flashEmbedTagOnly,c,n="<div>"+CKEDITOR.tools.htmlEncode(b.lang.common.preview)+'<br><div id="cke_FlashPreviewLoader'+CKEDITOR.tools.getNextNumber()+'" style="display:none"><div class="loading">&nbsp;</div></div><div id="cke_FlashPreviewBox'+CKEDITOR.tools.getNextNumber()+'" class="FlashPreviewBox"></div></div>';return{title:b.lang.flash.title,minWidth:420,minHeight:310,onShow:function(){this.fakeImage=this.objectNode=this.embedNode=null;c=new CKEDITOR.dom.element("embed",b.document);var u=this.getSelectedElement();if(u&&u.data("cke-real-element-type")&&"flash"==u.data("cke-real-element-type")){this.fakeImage=u;var v=b.restoreRealElement(u),r=null,x=null,w={};if("cke:object"==v.getName()){r=v;v=r.getElementsByTag("embed","cke");0<v.count()&&(x=v.getItem(0));for(var v=r.getElementsByTag("param","cke"),s=0,q=v.count();s<q;s++){var t=v.getItem(s),o=t.getAttribute("name"),t=t.getAttribute("value");w[o]=t}}else{"cke:embed"==v.getName()&&(x=v)}this.objectNode=r;this.embedNode=x;this.setupContent(r,x,w,u)}},onOk:function(){var q=null,r=null,g=null;if(this.fakeImage){q=this.objectNode,r=this.embedNode}else{if(m&&(q=CKEDITOR.dom.element.createFromHtml("<cke:object></cke:object>",b.document),q.setAttributes({classid:"clsid:d27cdb6e-ae6d-11cf-96b8-444553540000",codebase:"http://download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=6,0,40,0"})),j){r=CKEDITOR.dom.element.createFromHtml("<cke:embed></cke:embed>",b.document),r.setAttributes({type:"application/x-shockwave-flash",pluginspage:"http://www.macromedia.com/go/getflashplayer"}),q&&r.appendTo(q)}}if(q){for(var g={},s=q.getElementsByTag("param","cke"),o=0,i=s.count();o<i;o++){g[s.getItem(o).getAttribute("name")]=s.getItem(o)}}s={};o={};this.commitContent(q,r,g,s,o);q=b.createFakeElement(q||r,"cke_flash","flash",!0);q.setAttributes(o);q.setStyles(s);this.fakeImage?(q.replace(this.fakeImage),b.getSelection().selectElement(q)):b.insertElement(q)},onHide:function(){this.preview&&this.preview.setHtml("")},contents:[{id:"info",label:b.lang.common.generalTab,accessKey:"I",elements:[{type:"vbox",padding:0,children:[{type:"hbox",widths:["280px","110px"],align:"right",children:[{id:"src",type:"text",label:b.lang.common.url,required:!0,validate:CKEDITOR.dialog.validate.notEmpty(b.lang.flash.validateSrc),setup:d,commit:p,onLoad:function(){var i=this.getDialog(),g=function(o){c.setAttribute("src",o);i.preview.setHtml('<embed height="100%" width="100%" src="'+CKEDITOR.tools.htmlEncode(c.getAttribute("src"))+'" type="application/x-shockwave-flash"></embed>')};i.preview=i.getContentElement("info","preview").getElement().getChild(3);this.on("change",function(o){o.data&&o.data.value&&g(o.data.value)});this.getInputElement().on("change",function(){g(this.getValue())},this)}},{type:"button",id:"browse",filebrowser:"info:src",hidden:!0,style:"display:inline-block;margin-top:10px;",label:b.lang.common.browseServer}]}]},{type:"hbox",widths:["25%","25%","25%","25%","25%"],children:[{type:"text",id:"width",requiredContent:"embed[width]",style:"width:95px",label:b.lang.common.width,validate:CKEDITOR.dialog.validate.htmlLength(b.lang.common.invalidHtmlLength.replace("%1",b.lang.common.width)),setup:d,commit:p},{type:"text",id:"height",requiredContent:"embed[height]",style:"width:95px",label:b.lang.common.height,validate:CKEDITOR.dialog.validate.htmlLength(b.lang.common.invalidHtmlLength.replace("%1",b.lang.common.height)),setup:d,commit:p},{type:"text",id:"hSpace",requiredContent:"embed[hspace]",style:"width:95px",label:b.lang.flash.hSpace,validate:CKEDITOR.dialog.validate.integer(b.lang.flash.validateHSpace),setup:d,commit:p},{type:"text",id:"vSpace",requiredContent:"embed[vspace]",style:"width:95px",label:b.lang.flash.vSpace,validate:CKEDITOR.dialog.validate.integer(b.lang.flash.validateVSpace),setup:d,commit:p}]},{type:"vbox",children:[{type:"html",id:"preview",style:"width:95%;",html:n}]}]},{id:"Upload",hidden:!0,filebrowser:"uploadButton",label:b.lang.common.upload,elements:[{type:"file",id:"upload",label:b.lang.common.upload,size:38},{type:"fileButton",id:"uploadButton",label:b.lang.common.uploadSubmit,filebrowser:"info:src","for":["Upload","upload"]}]},{id:"properties",label:b.lang.flash.propertiesTab,elements:[{type:"hbox",widths:["50%","50%"],children:[{id:"scale",type:"select",requiredContent:"embed[scale]",label:b.lang.flash.scale,"default":"",style:"width : 100%;",items:[[b.lang.common.notSet,""],[b.lang.flash.scaleAll,"showall"],[b.lang.flash.scaleNoBorder,"noborder"],[b.lang.flash.scaleFit,"exactfit"]],setup:d,commit:p},{id:"allowScriptAccess",type:"select",requiredContent:"embed[allowscriptaccess]",label:b.lang.flash.access,"default":"",style:"width : 100%;",items:[[b.lang.common.notSet,""],[b.lang.flash.accessAlways,"always"],[b.lang.flash.accessSameDomain,"samedomain"],[b.lang.flash.accessNever,"never"]],setup:d,commit:p}]},{type:"hbox",widths:["50%","50%"],children:[{id:"wmode",type:"select",requiredContent:"embed[wmode]",label:b.lang.flash.windowMode,"default":"",style:"width : 100%;",items:[[b.lang.common.notSet,""],[b.lang.flash.windowModeWindow,"window"],[b.lang.flash.windowModeOpaque,"opaque"],[b.lang.flash.windowModeTransparent,"transparent"]],setup:d,commit:p},{id:"quality",type:"select",requiredContent:"embed[quality]",label:b.lang.flash.quality,"default":"high",style:"width : 100%;",items:[[b.lang.common.notSet,""],[b.lang.flash.qualityBest,"best"],[b.lang.flash.qualityHigh,"high"],[b.lang.flash.qualityAutoHigh,"autohigh"],[b.lang.flash.qualityMedium,"medium"],[b.lang.flash.qualityAutoLow,"autolow"],[b.lang.flash.qualityLow,"low"]],setup:d,commit:p}]},{type:"hbox",widths:["50%","50%"],children:[{id:"align",type:"select",requiredContent:"object[align]",label:b.lang.common.align,"default":"",style:"width : 100%;",items:[[b.lang.common.notSet,""],[b.lang.common.alignLeft,"left"],[b.lang.flash.alignAbsBottom,"absBottom"],[b.lang.flash.alignAbsMiddle,"absMiddle"],[b.lang.flash.alignBaseline,"baseline"],[b.lang.common.alignBottom,"bottom"],[b.lang.common.alignMiddle,"middle"],[b.lang.common.alignRight,"right"],[b.lang.flash.alignTextTop,"textTop"],[b.lang.common.alignTop,"top"]],setup:d,commit:function(q,o,u,t,s){var r=this.getValue();p.apply(this,arguments);r&&(s.align=r)}},{type:"html",html:"<div></div>"}]},{type:"fieldset",label:CKEDITOR.tools.htmlEncode(b.lang.flash.flashvars),children:[{type:"vbox",padding:0,children:[{type:"checkbox",id:"menu",label:b.lang.flash.chkMenu,"default":!0,setup:d,commit:p},{type:"checkbox",id:"play",label:b.lang.flash.chkPlay,"default":!0,setup:d,commit:p},{type:"checkbox",id:"loop",label:b.lang.flash.chkLoop,"default":!0,setup:d,commit:p},{type:"checkbox",id:"allowFullScreen",label:b.lang.flash.chkFull,"default":!0,setup:d,commit:p}]}]}]},{id:"advanced",label:b.lang.common.advancedTab,elements:[{type:"hbox",children:[{type:"text",id:"id",requiredContent:"object[id]",label:b.lang.common.id,setup:d,commit:p}]},{type:"hbox",widths:["45%","55%"],children:[{type:"text",id:"bgcolor",requiredContent:"embed[bgcolor]",label:b.lang.flash.bgcolor,setup:d,commit:p},{type:"text",id:"class",requiredContent:"embed(cke-xyz)",label:b.lang.common.cssClass,setup:d,commit:p}]},{type:"text",id:"style",requiredContent:"embed{cke-xyz}",validate:CKEDITOR.dialog.validate.inlineStyle(b.lang.common.invalidInlineStyle),label:b.lang.common.cssStyle,setup:d,commit:p}]}]}})})();