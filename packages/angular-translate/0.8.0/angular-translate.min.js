angular.module("pascalprecht.translate",["ng"]).run(["$translate",function(t){var e=t.storageKey(),r=t.storage();r?r.get(e)?t.uses(r.get(e)):angular.isString(t.preferredLanguage())?t.uses(t.preferredLanguage()):r.set(e,t.uses()):angular.isString(t.preferredLanguage())&&t.uses(t.preferredLanguage())}]),angular.module("pascalprecht.translate").constant("$STORAGE_KEY","NG_TRANSLATE_LANG_KEY"),angular.module("pascalprecht.translate").provider("$translate",["$STORAGE_KEY",function(t){var e,r,n,a,o,s={},i=t,u=[],l=".",c={forUrl:function(t){return["$http","$q",function(e,r){return function(n){var a=r.defer();return e({url:t,params:{lang:n},method:"GET"}).success(function(t){a.resolve(t)}).error(function(){a.reject(n)}),a.promise}}]},byStaticFiles:function(t,e){return["$http","$q",function(r,n){return function(a){var o=n.defer();return r({url:[t,a,e].join(""),method:"GET",params:""}).success(function(t){o.resolve(t)}).error(function(){o.reject(a)}),o.promise}}]}},g=function(t,e){if(!t&&!e)return s;if(t&&!e){if(angular.isString(t))return s[t];angular.extend(s,f(t))}else angular.isObject(s[t])||(s[t]={}),angular.extend(s[t],f(e))},f=function(t,e,r){var n,a,o;e||(e=[]),r||(r={});for(n in t)t.hasOwnProperty(n)&&(o=t[n],angular.isObject(o)?f(o,e.concat(n),r):(a=e.length?""+e.join(l)+l+n:n,r[a]=o));return r},d=function(t,e){var r,n=t.get("$q").defer(),a=u[0];return a?(r=t.invoke(a),angular.isFunction(r)?r(e).then(function(t){g(e,t),n.resolve(t)},function(t){n.reject(t)}):n.reject(e)):n.reject(e),n.promise};this.translations=g,this.preferredLanguage=function(t){return t?(e=t,void 0):e},this.uses=function(t){if(!t)return r;if(!s[t]&&!u.length)throw Error("$translateProvider couldn't find translationTable for langKey: '"+t+"'");r=t};var p=function(t){return t?(i=t,void 0):a?a+i:i};this.storageKey=p,this.missingTranslationHandler=function(t){return angular.isUndefined(t)?o:(o=t,void 0)},this.registerLoader=function(t){if(!t)throw Error("Please define a valid loader!");var e;if(angular.isFunction(t)||angular.isArray(t))e=t;else switch(angular.isString(t)&&(t={type:"url",url:t}),t.type){case"url":e=c.forUrl(t.url);break;case"static-files":e=c.byStaticFiles(t.prefix,t.suffix)}u.push(e)},this.useLoaderFactory=function(t){this.registerLoader(t)},this.useLocalStorage=function(){this.useStorage("$translateLocalStorage")},this.useCookieStorage=function(){this.useStorage("$translateCookieStorage")},this.useStorage=function(t){n=t},this.storagePrefix=function(t){return t?(a=t,void 0):t},this.$get=["$interpolate","$log","$injector","$rootScope","$q",function(t,a,i,l,c){var g;if(n&&(g=i.get(n),!g.get||!g.set))throw Error("Couldn't use storage '"+n+"', missing get() or set() method!");var f=function(e,n){var i=r?s[r]?s[r][e]:e:s[e];return i?t(i)(n):(angular.isUndefined(o)?a.warn("Translation for "+e+" doesn't exist"):o(e),e)};return f.preferredLanguage=function(){return e},f.storage=function(){return g},f.uses=function(t){if(!t)return r;var e=c.defer();return s[t]?(r=t,n&&g.set(f.storageKey(),r),e.resolve(r),l.$broadcast("translationChangeSuccess"),e.promise):(d(i,t).then(function(){r=t,n&&g.set(f.storageKey(),r),l.$broadcast("translationChangeSuccess"),e.resolve(r)},function(t){l.$broadcast("translationChangeError"),e.reject(t)}),e.promise)},f.storageKey=function(){return p()},u.length&&angular.equals(s,{})&&f.uses(f.uses()),f}]}]),angular.module("pascalprecht.translate").directive("translate",["$filter","$interpolate",function(t,e){var r=t("translate");return{restrict:"A",scope:!0,link:function(t,n,a){a.$observe("translate",function(r){t.translationId=angular.equals(r,"")?e(n.text().replace(/^\s+|\s+$/g,""))(t.$parent):r}),a.$observe("values",function(e){t.interpolateParams=e}),t.$on("translationChangeSuccess",function(){n.html(r(t.translationId,t.interpolateParams))}),t.$watch("translationId + interpolateParams",function(e){e&&n.html(r(t.translationId,t.interpolateParams))})}}}]),angular.module("pascalprecht.translate").filter("translate",["$parse","$translate",function(t,e){return function(r,n){return angular.isObject(n)||(n=t(n)()),e(r,n)}}]),angular.module("pascalprecht.translate").factory("$translateCookieStorage",["$cookieStore",function(t){var e={get:function(e){return t.get(e)},set:function(e,r){t.put(e,r)}};return e}]),angular.module("pascalprecht.translate").factory("$translateLocalStorage",["$window","$translateCookieStorage",function(t,e){var r={get:function(e){return t.localStorage.getItem(e)},set:function(e,r){t.localStorage.setItem(e,r)}},n="localStorage"in t&&null!==t.localStorage?r:e;return n}]);