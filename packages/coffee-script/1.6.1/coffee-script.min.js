(function(){var e,r,n,t,o,i,a,l,s,u,c,f,p,m,d={}.hasOwnProperty;if(t=require("fs"),s=require("path"),e=require("./lexer").Lexer,l=require("./parser").parser,o=require("./helpers"),c=require("vm"),u=require("./sourcemap"),a=function(e,n){var i,a;return i=t.readFileSync(n,"utf8"),a=65279===i.charCodeAt(0)?i.substring(1):i,e._compile(r(a,{filename:n,literate:o.isLiterate(n)}),n)},require.extensions)for(m=[".coffee",".litcoffee",".md",".coffee.md"],f=0,p=m.length;p>f;f++)n=m[f],require.extensions[n]=a;exports.VERSION="1.6.1",exports.helpers=o,exports.compile=r=function(e,r){var n,t,a,s,c,f,p,m,d,h,x,g,q,y;null==r&&(r={}),h=exports.helpers.merge;try{for(r.sourceMap&&(t=o.baseFileName(r.filename),d=o.baseFileName(r.filename,!0)+".js",g=new u.SourceMap),f=l.parse(i.tokenize(e,r)).compileToFragments(r),s=0,r.header&&(s+=1),r.sourceMap&&(s+=1),a=0,m="",q=0,y=f.length;y>q;q++)c=f[q],g&&(c.locationData&&g.addMapping([c.locationData.first_line,c.locationData.first_column],[s,a],{noReplace:!0}),x=o.count(c.code,"\n"),s+=x,a=c.code.length-(x?c.code.lastIndexOf("\n"):0)),m+=c.code}catch(_){throw r.filename&&(_.message="In "+r.filename+", "+_.message),_}return r.header&&(p="Generated by CoffeeScript "+this.VERSION,m="// "+p+"\n"+m),r.sourceMap?(n={js:m},g&&(n.sourceMap=g,n.v3SourceMap=u.generateV3SourceMap(g,t,d)),n):m},exports.tokens=function(e,r){return i.tokenize(e,r)},exports.nodes=function(e,r){return l.parse("string"==typeof e?i.tokenize(e,r):e)},exports.run=function(e,n){var i;return null==n&&(n={}),i=require.main,i.filename=process.argv[1]=n.filename?t.realpathSync(n.filename):".",i.moduleCache&&(i.moduleCache={}),i.paths=require("module")._nodeModulePaths(s.dirname(t.realpathSync(n.filename))),!o.isCoffee(i.filename)||require.extensions?i._compile(r(e,n),i.filename):i._compile(e,i.filename)},exports.eval=function(e,n){var t,o,i,a,l,u,f,p,m,h,x,g,q,y;if(null==n&&(n={}),e=e.trim()){if(o=c.Script){if(null!=n.sandbox){if(n.sandbox instanceof o.createContext().constructor)f=n.sandbox;else{f=o.createContext(),g=n.sandbox;for(a in g)d.call(g,a)&&(p=g[a],f[a]=p)}f.global=f.root=f.GLOBAL=f}else f=global;if(f.__filename=n.filename||"eval",f.__dirname=s.dirname(f.__filename),f===global&&!f.module&&!f.require){for(t=require("module"),f.module=x=new t(n.modulename||"eval"),f.require=y=function(e){return t._load(e,x,!0)},x.filename=f.__filename,q=Object.getOwnPropertyNames(require),m=0,h=q.length;h>m;m++)u=q[m],"paths"!==u&&(y[u]=require[u]);y.paths=x.paths=t._nodeModulePaths(process.cwd()),y.resolve=function(e){return t._resolveFilename(e,x)}}}l={};for(a in n)d.call(n,a)&&(p=n[a],l[a]=p);return l.bare=!0,i=r(e,l),f===global?c.runInThisContext(i):c.runInContext(i,f)}},i=new e,l.lexer={lex:function(){var e,r;return r=this.tokens[this.pos++],r?(e=r[0],this.yytext=r[1],this.yylloc=r[2],this.yylineno=this.yylloc.first_line):e="",e},setInput:function(e){return this.tokens=e,this.pos=0},upcomingInput:function(){return""}},l.yy=require("./nodes")}).call(this);