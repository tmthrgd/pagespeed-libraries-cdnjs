!function(){function e(e,r){var o=e.getRange(CodeMirror.Pos(r.line,r.ch-1),CodeMirror.Pos(r.line,r.ch+1));return 2==o.length?o:null}function r(r){for(var o={name:"autoCloseBrackets",Backspace:function(o){if(o.somethingSelected())return CodeMirror.Pass;var n=o.getCursor(),i=e(o,n);return i&&0==r.indexOf(i)%2?(o.replaceRange("",CodeMirror.Pos(n.line,n.ch-1),CodeMirror.Pos(n.line,n.ch+1)),void 0):CodeMirror.Pass}},n="",i=0;i<r.length;i+=2)!function(e,r){function i(o){var n=o.getSelection();o.replaceSelection(e+n+r)}function a(e){var o=e.getCursor(),n=e.getRange(o,CodeMirror.Pos(o.line,o.ch+1));return n!=r||e.somethingSelected()?CodeMirror.Pass:(e.execCommand("goCharRight"),void 0)}e!=r&&(n+=r),o["'"+e+"'"]=function(o){if("'"==e&&"comment"==o.getTokenAt(o.getCursor()).type)return CodeMirror.Pass;if(o.somethingSelected())return i(o);if(e!=r||a(o)==CodeMirror.Pass){var c=o.getCursor(),s=CodeMirror.Pos(c.line,c.ch+1),d=o.getLine(c.line),l=d.charAt(c.ch),u=c.ch>0?d.charAt(c.ch-1):"";return e==r&&CodeMirror.isWordChar(u)?CodeMirror.Pass:d.length==c.ch||n.indexOf(l)>=0||t.test(l)?(o.replaceSelection(e+r,{head:s,anchor:s}),void 0):CodeMirror.Pass}},e!=r&&(o["'"+r+"'"]=a)}(r.charAt(i),r.charAt(i+1));return o}function o(r){return function(o){var n=o.getCursor(),i=e(o,n);return i&&0==r.indexOf(i)%2?(o.operation(function(){var e=CodeMirror.Pos(n.line+1,0);o.replaceSelection("\n\n",{anchor:e,head:e},"+input"),o.indentLine(n.line+1,null,!0),o.indentLine(n.line+2,null,!0)}),void 0):CodeMirror.Pass}}var n="()[]{}''\"\"",i="[]{}",t=/\s/;CodeMirror.defineOption("autoCloseBrackets",!1,function(e,t,a){if(a!=CodeMirror.Init&&a&&e.removeKeyMap("autoCloseBrackets"),t){var c=n,s=i;"string"==typeof t?c=t:"object"==typeof t&&(null!=t.pairs&&(c=t.pairs),null!=t.explode&&(s=t.explode));var d=r(c);s&&(d.Enter=o(s)),e.addKeyMap(d)}})}();