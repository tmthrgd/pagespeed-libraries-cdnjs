!function(){function t(t,e,n){function r(e,n,r){if(e.text){var a=s?0:e.text.length-1,h=s?e.text.length:-1;if(e.text.length>c)return null;for(null!=r&&(a=r+m);a!=h;a+=m){var l=e.text.charAt(a);if(p.test(l)&&t.getTokenTypeAt(o(n,a+1))==g){var u=i[l];if(">"==u.charAt(1)==s)x.push(l);else{if(x.pop()!=u.charAt(0))return{pos:a,match:!1};if(!x.length)return{pos:a,match:!0}}}}}}var a=t.state.matchBrackets,c=a&&a.maxScanLineLength||1e4,h=e||t.getCursor(),l=t.getLineHandle(h.line),u=h.ch-1,f=u>=0&&i[l.text.charAt(u)]||i[l.text.charAt(++u)];if(!f)return null;var s=">"==f.charAt(1),m=s?1:-1;if(n&&s!=(u==h.ch))return null;for(var d,g=t.getTokenTypeAt(o(h.line,u+1)),x=[l.text.charAt(u)],p=/[(){}[\]]/,v=h.line,M=s?Math.min(v+100,t.lineCount()):Math.max(-1,v-100);v!=M&&!(d=v==h.line?r(l,v,u):r(t.getLineHandle(v),v));v+=m);return{from:o(h.line,u),to:d&&o(v,d.pos),match:d&&d.match,forward:s}}function e(e,n){var i=e.state.matchBrackets.maxHighlightLineLength||1e3,a=t(e);if(!(!a||e.getLine(a.from.line).length>i||a.to&&e.getLine(a.to.line).length>i)){var c=a.match?"CodeMirror-matchingbracket":"CodeMirror-nonmatchingbracket",h=e.markText(a.from,o(a.from.line,a.from.ch+1),{className:c}),l=a.to&&e.markText(a.to,o(a.to.line,a.to.ch+1),{className:c});r&&e.state.focused&&e.display.input.focus();var u=function(){e.operation(function(){h.clear(),l&&l.clear()})};return n?(setTimeout(u,800),void 0):u}}function n(t){t.operation(function(){a&&(a(),a=null),t.somethingSelected()||(a=e(t,!1))})}var r=/MSIE \d/.test(navigator.userAgent)&&(null==document.documentMode||document.documentMode<8),o=CodeMirror.Pos,i={"(":")>",")":"(<","[":"]>","]":"[<","{":"}>","}":"{<"},a=null;CodeMirror.defineOption("matchBrackets",!1,function(t,e,r){r&&r!=CodeMirror.Init&&t.off("cursorActivity",n),e&&(t.state.matchBrackets="object"==typeof e?e:{},t.on("cursorActivity",n))}),CodeMirror.defineExtension("matchBrackets",function(){e(this,!0)}),CodeMirror.defineExtension("findMatchingBracket",function(e,n){return t(this,e,n)})}();