CodeMirror.registerHelper("fold","comment",function(e,r){var t=e.getModeAt(r),o=t.blockCommentStart,n=t.blockCommentEnd;if(o&&n){for(var i,f=r.line,l=e.getLine(f),a=r.ch,d=0;;){var g=0>=a?-1:l.lastIndexOf(o,a-1);if(-1!=g){if(1==d&&g<r.ch)return;if(/comment/.test(e.getTokenTypeAt(CodeMirror.Pos(f,g+1)))){i=g+o.length;break}a=g-1}else{if(1==d)return;d=1,a=l.length}}var m,s,h=1,c=e.lastLine();e:for(var v=f;c>=v;++v)for(var k=e.getLine(v),C=v==f?i:0;;){var M=k.indexOf(o,C),b=k.indexOf(n,C);if(0>M&&(M=k.length),0>b&&(b=k.length),C=Math.min(M,b),C==k.length)break;if(C==M)++h;else if(!--h){m=v,s=C;break e}++C}if(null!=m&&(f!=m||s!=i))return{from:CodeMirror.Pos(f,i),to:CodeMirror.Pos(m,s)}}});