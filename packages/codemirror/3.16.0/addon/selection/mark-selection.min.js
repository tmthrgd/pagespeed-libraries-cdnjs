!function(){"use strict";function e(e){e.operation(function(){l(e)})}function t(e){e.state.markedSelection.length&&e.operation(function(){o(e)})}function r(e,t){return e.line-t.line||e.ch-t.ch}function n(e,t,n,o){if(0!=r(t,n))for(var i=e.state.markedSelection,l=e.state.markedSelectionStyle,f=t.line;;){var s=f==t.line?t:c(f,0),u=f+a,d=u>=n.line,m=d?n:c(u,0),g=e.markText(s,m,{className:l});if(null==o?i.push(g):i.splice(o++,0,g),d)break;f=u}}function o(e){for(var t=e.state.markedSelection,r=0;r<t.length;++r)t[r].clear();t.length=0}function i(e){o(e);var t=e.getCursor("start"),r=e.getCursor("end");n(e,t,r)}function l(e){var t=e.getCursor("start"),l=e.getCursor("end");if(0==r(t,l))return o(e);var c=e.state.markedSelection;if(!c.length)return n(e,t,l);var f=c[0].find(),s=c[c.length-1].find();if(!f||!s||l.line-t.line<a||r(t,s.to)>=0||r(l,f.from)<=0)return i(e);for(;r(t,f.from)>0;)c.shift().clear(),f=c[0].find();for(r(t,f.from)<0&&(f.to.line-t.line<a?(c.shift().clear(),n(e,t,f.to,0)):n(e,t,f.from,0));r(l,s.to)<0;)c.pop().clear(),s=c[c.length-1].find();r(l,s.to)>0&&(l.line-s.from.line<a?(c.pop().clear(),n(e,s.from,l)):n(e,s.to,l))}CodeMirror.defineOption("styleSelectedText",!1,function(r,n,l){var a=l&&l!=CodeMirror.Init;n&&!a?(r.state.markedSelection=[],r.state.markedSelectionStyle="string"==typeof n?n:"CodeMirror-selectedtext",i(r),r.on("cursorActivity",e),r.on("change",t)):!n&&a&&(r.off("cursorActivity",e),r.off("change",t),o(r),r.state.markedSelection=r.state.markedSelectionStyle=null)});var a=8,c=CodeMirror.Pos}();