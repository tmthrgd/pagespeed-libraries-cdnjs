CodeMirror.defineMode("rst",function(e,t){var a=/^\*\*[^\*\s](?:[^\*]*[^\*\s])?\*\*/,r=/^\*[^\*\s](?:[^\*]*[^\*\s])?\*/,c=/^``[^`\s](?:[^`]*[^`\s])``/,n=/^(?:[\d]+(?:[\.,]\d+)*)/,o=/^(?:\s\+[\d]+(?:[\.,]\d+)*)/,m=/^(?:\s\-[\d]+(?:[\.,]\d+)*)/,s="[Hh][Tt][Tt][Pp][Ss]?://",i="(?:[\\d\\w.-]+)\\.(?:\\w{2,6})",h="(?:/[\\d\\w\\#\\%\\&\\-\\.\\,\\/\\:\\=\\?\\~]+)*",l=new RegExp("^"+s+i+h),u={token:function(e){if(e.match(a)&&e.match(/\W+|$/,!1))return"strong";if(e.match(r)&&e.match(/\W+|$/,!1))return"em";if(e.match(c)&&e.match(/\W+|$/,!1))return"string-2";if(e.match(n))return"number";if(e.match(o))return"positive";if(e.match(m))return"negative";if(e.match(l))return"link";for(;!(null==e.next()||e.match(a,!1)||e.match(r,!1)||e.match(c,!1)||e.match(n,!1)||e.match(o,!1)||e.match(m,!1)||e.match(l,!1)););return null}},p=CodeMirror.getMode(e,t.backdrop||"rst-base");return CodeMirror.overlayMode(p,u,!0)},"python","stex"),CodeMirror.defineMode("rst-base",function(e){function t(e){var t=Array.prototype.slice.call(arguments,1);return e.replace(/{(\d+)}/g,function(e,a){return"undefined"!=typeof t[a]?t[a]:e})}function a(e){this.message=e}function r(e,t){if(!e)throw new a(t);return e}function c(e,t){var a=null;if(e.sol()&&e.match(X,!1))l(t,i,{mode:d,local:CodeMirror.startState(d)});else if(e.sol()&&e.match(C))l(t,n),a="meta";else if(e.sol()&&e.match(v))l(t,c),a="header";else if(p(t)==z||e.match(z,!1))switch(u(t)){case 0:l(t,c,h(z,1)),r(e.match(/^:/)),a="meta";break;case 1:l(t,c,h(z,2)),r(e.match(b)),a="keyword",e.current().match(/^(?:math|latex)/)&&(t.tmp_stex=!0);break;case 2:l(t,c,h(z,3)),r(e.match(/^:`/)),a="meta";break;case 3:if(t.tmp_stex&&(t.tmp_stex=void 0,t.tmp={mode:k,local:CodeMirror.startState(k)}),t.tmp){if("`"==e.peek()){l(t,c,h(z,4)),t.tmp=void 0;break}a=t.tmp.mode.token(e,t.tmp.local);break}l(t,c,h(z,4)),r(e.match(y)),a="string";break;case 4:l(t,c,h(z,5)),r(e.match(/^`/)),a="meta";break;case 5:l(t,c,h(z,6)),r(e.match(w));break;default:l(t,c),r(""==e.current())}else if(p(t)==B||e.match(B,!1))switch(u(t)){case 0:l(t,c,h(B,1)),r(e.match(/^`/)),a="meta";break;case 1:l(t,c,h(B,2)),r(e.match(y)),a="string";break;case 2:l(t,c,h(B,3)),r(e.match(/^`:/)),a="meta";break;case 3:l(t,c,h(B,4)),r(e.match(b)),a="keyword";break;case 4:l(t,c,h(B,5)),r(e.match(/^:/)),a="meta";break;case 5:l(t,c,h(B,6)),r(e.match(w));break;default:l(t,c),r(""==e.current())}else if(p(t)==D||e.match(D,!1))switch(u(t)){case 0:l(t,c,h(D,1)),r(e.match(/^:/)),a="meta";break;case 1:l(t,c,h(D,2)),r(e.match(b)),a="keyword";break;case 2:l(t,c,h(D,3)),r(e.match(/^:/)),a="meta";break;case 3:l(t,c,h(D,4)),r(e.match(w));break;default:l(t,c),r(""==e.current())}else if(p(t)==A||e.match(A,!1))switch(u(t)){case 0:l(t,c,h(A,1)),r(e.match(J)),a="variable-2";break;case 1:l(t,c,h(A,2)),e.match(/^_?_?/)&&(a="link");break;default:l(t,c),r(""==e.current())}else if(e.match(I))l(t,c),a="quote";else if(e.match(H))l(t,c),a="quote";else if(e.match(P))l(t,c),(!e.peek()||e.peek().match(/^\W$/))&&(a="link");else if(p(t)==j||e.match(j,!1))switch(u(t)){case 0:!e.peek()||e.peek().match(/^\W$/)?l(t,c,h(j,1)):e.match(j);break;case 1:l(t,c,h(j,2)),r(e.match(/^`/)),a="link";break;case 2:l(t,c,h(j,3)),r(e.match(y));break;case 3:l(t,c,h(j,4)),r(e.match(/^`_/)),a="link";break;default:l(t,c),r(""==e.current())}else e.match(V)?l(t,m):e.next()&&l(t,c);return a}function n(e,t){var a=null;if(p(t)==W||e.match(W,!1))switch(u(t)){case 0:l(t,n,h(W,1)),r(e.match(J)),a="variable-2";break;case 1:l(t,n,h(W,2)),r(e.match(K));break;case 2:l(t,n,h(W,3)),r(e.match(L)),a="keyword";break;case 3:l(t,n,h(W,4)),r(e.match(N)),a="meta";break;default:l(t,c),r(""==e.current())}else if(p(t)==$||e.match($,!1))switch(u(t)){case 0:l(t,n,h($,1)),r(e.match(F)),a="keyword",e.current().match(/^(?:math|latex)/)?t.tmp_stex=!0:e.current().match(/^python/)&&(t.tmp_py=!0);break;case 1:l(t,n,h($,2)),r(e.match(G)),a="meta",(e.match(/^latex\s*$/)||t.tmp_stex)&&(t.tmp_stex=void 0,l(t,i,{mode:k,local:CodeMirror.startState(k)}));break;case 2:l(t,n,h($,3)),(e.match(/^python\s*$/)||t.tmp_py)&&(t.tmp_py=void 0,l(t,i,{mode:d,local:CodeMirror.startState(d)}));break;default:l(t,c),r(""==e.current())}else if(p(t)==S||e.match(S,!1))switch(u(t)){case 0:l(t,n,h(S,1)),r(e.match(O)),r(e.match(Q)),a="link";break;case 1:l(t,n,h(S,2)),r(e.match(U)),a="meta";break;default:l(t,c),r(""==e.current())}else e.match(q)?(l(t,c),a="quote"):e.match(T)?(l(t,c),a="quote"):(e.eatSpace(),e.eol()?l(t,c):(e.skipToEnd(),l(t,o),a="comment"));return a}function o(e,t){return s(e,t,"comment")}function m(e,t){return s(e,t,"meta")}function s(e,t,a){return e.eol()||e.eatSpace()?(e.skipToEnd(),a):(l(t,c),null)}function i(e,t){return t.ctx.mode&&t.ctx.local?e.sol()?(e.eatSpace()||l(t,c),null):t.ctx.mode.token(e,t.ctx.local):(l(t,c),null)}function h(e,t,a,r){return{phase:e,stage:t,mode:a,local:r}}function l(e,t,a){e.tok=t,e.ctx=a||{}}function u(e){return e.ctx.stage||0}function p(e){return e.ctx.phase}a.prototype.toString=function(){return"AssertException: "+this.message};var d=CodeMirror.getMode(e,"python"),k=CodeMirror.getMode(e,"stex"),f="\\s+",x="(?:\\s*|\\W|$)",w=new RegExp(t("^{0}",x)),g="(?:[^\\W\\d_](?:[\\w!\"#$%&'()\\*\\+,\\-\\./:;<=>\\?]*[^\\W_])?)",b=new RegExp(t("^{0}",g)),E="(?:[^\\W\\d_](?:[\\w\\s!\"#$%&'()\\*\\+,\\-\\./:;<=>\\?]*[^\\W_])?)",R=t("(?:{0}|`{1}`)",g,E),_="(?:[^\\s\\|](?:[^\\|]*[^\\s\\|])?)",M="(?:[^\\`]+)",y=new RegExp(t("^{0}",M)),v=new RegExp("^([!'#$%&\"()*+,-./:;<=>?@\\[\\\\\\]^_`{|}~])\\1{3,}\\s*$"),C=new RegExp(t("^\\.\\.{0}",f)),S=new RegExp(t("^_{0}:{1}|^__:{1}",R,x)),$=new RegExp(t("^{0}::{1}",R,x)),W=new RegExp(t("^\\|{0}\\|{1}{2}::{3}",_,f,R,x)),q=new RegExp(t("^\\[(?:\\d+|#{0}?|\\*)]{1}",R,x)),T=new RegExp(t("^\\[{0}\\]{1}",R,x)),A=new RegExp(t("^\\|{0}\\|",_)),I=new RegExp(t("^\\[(?:\\d+|#{0}?|\\*)]_",R)),H=new RegExp(t("^\\[{0}\\]_",R)),P=new RegExp(t("^{0}__?",R)),j=new RegExp(t("^`{0}`_",M)),z=new RegExp(t("^:{0}:`{1}`{2}",g,M,x)),B=new RegExp(t("^`{1}`:{0}:{2}",g,M,x)),D=new RegExp(t("^:{0}:{1}",g,x)),F=new RegExp(t("^{0}",R)),G=new RegExp(t("^::{0}",x)),J=new RegExp(t("^\\|{0}\\|",_)),K=new RegExp(t("^{0}",f)),L=new RegExp(t("^{0}",R)),N=new RegExp(t("^::{0}",x)),O=new RegExp("^_"),Q=new RegExp(t("^{0}|_",R)),U=new RegExp(t("^:{0}",x)),V=new RegExp("^::\\s*$"),X=new RegExp("^\\s+(?:>>>|In \\[\\d+\\]:)\\s");return{startState:function(){return{tok:c,ctx:h(void 0,0)}},copyState:function(e){var t=e.ctx,a=e.tmp;return t.local&&(t={mode:t.mode,local:CodeMirror.copyState(t.mode,t.local)}),a&&(a={mode:a.mode,local:CodeMirror.copyState(a.mode,a.local)}),{tok:e.tok,ctx:t,tmp:a}},innerMode:function(e){return e.tmp?{state:e.tmp.local,mode:e.tmp.mode}:e.ctx.mode?{state:e.ctx.local,mode:e.ctx.mode}:null},token:function(e,t){return t.tok(e,t)}}},"python","stex"),CodeMirror.defineMIME("text/x-rst","rst");