CodeMirror.defineMode("dtd",function(t){function e(t,e){return i=e,t}function n(t,n){var i=t.next();if("<"!=i||!t.eat("!")){if("<"==i&&t.eat("?"))return n.tokenize=u("meta","?>"),e("meta",i);if("#"==i&&t.eatWhile(/[\w]/))return e("atom","tag");if("|"==i)return e("keyword","seperator");if(i.match(/[\(\)\[\]\-\.,\+\?>]/))return e(null,i);if(i.match(/[\[\]]/))return e("rule",i);if('"'==i||"'"==i)return n.tokenize=a(i),n.tokenize(t,n);if(t.eatWhile(/[a-zA-Z\?\+\d]/)){var l=t.current();return null!==l.substr(l.length-1,l.length).match(/\?|\+/)&&t.backUp(1),e("tag","tag")}return"%"==i||"*"==i?e("number","number"):(t.eatWhile(/[\w\\\-_%.{,]/),e(null,null))}return t.eatWhile(/[\-]/)?(n.tokenize=r,r(t,n)):t.eatWhile(/[\w]/)?e("keyword","doindent"):void 0}function r(t,r){for(var a,u=0;null!=(a=t.next());){if(u>=2&&">"==a){r.tokenize=n;break}u="-"==a?u+1:0}return e("comment","comment")}function a(t){return function(r,a){for(var u,i=!1;null!=(u=r.next());){if(u==t&&!i){a.tokenize=n;break}i=!i&&"\\"==u}return e("string","tag")}}function u(t,e){return function(r,a){for(;!r.eol();){if(r.match(e)){a.tokenize=n;break}r.next()}return t}}var i,l=t.indentUnit;return{startState:function(t){return{tokenize:n,baseIndent:t||0,stack:[]}},token:function(t,e){if(t.eatSpace())return null;var n=e.tokenize(t,e),r=e.stack[e.stack.length-1];return"["==t.current()||"doindent"===i||"["==i?e.stack.push("rule"):"endtag"===i?e.stack[e.stack.length-1]="endtag":"]"==t.current()||"]"==i||">"==i&&"rule"==r?e.stack.pop():"["==i&&e.stack.push("["),n},indent:function(t,e){var n=t.stack.length;return e.match(/\]\s+|\]/)?n-=1:">"===e.substr(e.length-1,e.length)&&("<"===e.substr(0,1)||"doindent"==i&&e.length>1||("doindent"==i?n--:">"==i&&e.length>1||"tag"==i&&">"!==e||("tag"==i&&"rule"==t.stack[t.stack.length-1]?n--:"tag"==i?n++:">"===e&&"rule"==t.stack[t.stack.length-1]&&">"===i?n--:">"===e&&"rule"==t.stack[t.stack.length-1]||("<"!==e.substr(0,1)&&">"===e.substr(0,1)?n-=1:">"===e||(n-=1)))),(null==i||"]"==i)&&n--),t.baseIndent+n*l},electricChars:"]>"}}),CodeMirror.defineMIME("application/xml-dtd","dtd");