CodeMirror.defineMode("xml",function(t,e){function r(t,e){function r(r){return e.tokenize=r,r(t,e)}var o=t.next();if("<"==o){if(t.eat("!"))return t.eat("[")?t.match("CDATA[")?r(a("atom","]]>")):null:t.match("--")?r(a("comment","-->")):t.match("DOCTYPE",!0,!0)?(t.eatWhile(/[\w\._\-]/),r(i(1))):null;if(t.eat("?"))return t.eatWhile(/[\w\._\-]/),e.tokenize=a("meta","?>"),"meta";var l=t.eat("/");C="";for(var u;u=t.eat(/[^\s\u00a0=<>\"\'\/?]/);)C+=u;return C?(w=l?"closeTag":"openTag",e.tokenize=n,"tag"):"tag error"}if("&"==o){var d;return d=t.eat("#")?t.eat("x")?t.eatWhile(/[a-fA-F\d]/)&&t.eat(";"):t.eatWhile(/[\d]/)&&t.eat(";"):t.eatWhile(/[\w\.\-:]/)&&t.eat(";"),d?"atom":"error"}return t.eatWhile(/[^&<]/),null}function n(t,e){var n=t.next();if(">"==n||"/"==n&&t.eat(">"))return e.tokenize=r,w=">"==n?"endTag":"selfcloseTag","tag";if("="==n)return w="equals",null;if("<"==n){e.tokenize=r,e.state=s,e.tagName=e.tagStart=null;var a=e.tokenize(t,e);return a?a+" error":"error"}return/[\'\"]/.test(n)?(e.tokenize=o(n),e.stringStartCol=t.column(),e.tokenize(t,e)):(t.eatWhile(/[^\s\u00a0=<>\"\']/),"word")}function o(t){var e=function(e,r){for(;!e.eol();)if(e.next()==t){r.tokenize=n;break}return"string"};return e.isInAttribute=!0,e}function a(t,e){return function(n,o){for(;!n.eol();){if(n.match(e)){o.tokenize=r;break}n.next()}return t}}function i(t){return function(e,n){for(var o;null!=(o=e.next());){if("<"==o)return n.tokenize=i(t+1),n.tokenize(e,n);if(">"==o){if(1==t){n.tokenize=r;break}return n.tokenize=i(t-1),n.tokenize(e,n)}}return"meta"}}function l(t,e,r){this.prev=t.context,this.tagName=e,this.indent=t.indented,this.startOfLine=r,(M.doNotIndent.hasOwnProperty(e)||t.context&&t.context.noIndent)&&(this.noIndent=!0)}function u(t){t.context&&(t.context=t.context.prev)}function d(t,e){for(var r;;){if(!t.context)return;if(r=t.context.tagName.toLowerCase(),!M.contextGrabbers.hasOwnProperty(r)||!M.contextGrabbers[r].hasOwnProperty(e))return;u(t)}}function s(t,e,r){if("openTag"==t)return r.tagName=C,r.tagStart=e.column(),m;if("closeTag"==t){var n=!1;return r.context?r.context.tagName!=C&&(M.implicitlyClosed.hasOwnProperty(r.context.tagName.toLowerCase())&&u(r),n=!r.context||r.context.tagName!=C):n=!0,n&&(v="error"),n?f:c}return s}function c(t,e,r){return"endTag"!=t?(v="error",c):(u(r),s)}function f(t,e,r){return v="error",c(t,e,r)}function m(t,e,r){if("word"==t)return v="attribute",g;if("endTag"==t||"selfcloseTag"==t){var n=r.tagName,o=r.tagStart;return r.tagName=r.tagStart=null,"selfcloseTag"==t||M.autoSelfClosers.hasOwnProperty(n.toLowerCase())?d(r,n.toLowerCase()):(d(r,n.toLowerCase()),r.context=new l(r,n,o==r.indented)),s}return v="error",m}function g(t,e,r){return"equals"==t?h:(M.allowMissing||(v="error"),m(t,e,r))}function h(t,e,r){return"string"==t?p:"word"==t&&M.allowUnquoted?(v="string",m):(v="error",m(t,e,r))}function p(t,e,r){return"string"==t?p:m(t,e,r)}var x=t.indentUnit,k=e.multilineTagIndentFactor||1,b=e.multilineTagIndentPastTag;null==b&&(b=!0);var C,w,v,M=e.htmlMode?{autoSelfClosers:{area:!0,base:!0,br:!0,col:!0,command:!0,embed:!0,frame:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0},implicitlyClosed:{dd:!0,li:!0,optgroup:!0,option:!0,p:!0,rp:!0,rt:!0,tbody:!0,td:!0,tfoot:!0,th:!0,tr:!0},contextGrabbers:{dd:{dd:!0,dt:!0},dt:{dd:!0,dt:!0},li:{li:!0},option:{option:!0,optgroup:!0},optgroup:{optgroup:!0},p:{address:!0,article:!0,aside:!0,blockquote:!0,dir:!0,div:!0,dl:!0,fieldset:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,menu:!0,nav:!0,ol:!0,p:!0,pre:!0,section:!0,table:!0,ul:!0},rp:{rp:!0,rt:!0},rt:{rp:!0,rt:!0},tbody:{tbody:!0,tfoot:!0},td:{td:!0,th:!0},tfoot:{tbody:!0},th:{td:!0,th:!0},thead:{tbody:!0,tfoot:!0},tr:{tr:!0}},doNotIndent:{pre:!0},allowUnquoted:!0,allowMissing:!0}:{autoSelfClosers:{},implicitlyClosed:{},contextGrabbers:{},doNotIndent:{},allowUnquoted:!1,allowMissing:!1},z=e.alignCDATA;return{startState:function(){return{tokenize:r,state:s,indented:0,tagName:null,tagStart:null,context:null}},token:function(t,e){if(!e.tagName&&t.sol()&&(e.indented=t.indentation()),t.eatSpace())return null;C=w=null;var r=e.tokenize(t,e);return(r||w)&&"comment"!=r&&(v=null,e.state=e.state(w||r,t,e),v&&(r="error"==v?r+" error":v)),r},indent:function(t,e,o){var a=t.context;if(t.tokenize.isInAttribute)return t.stringStartCol+1;if(a&&a.noIndent)return CodeMirror.Pass;if(t.tokenize!=n&&t.tokenize!=r)return o?o.match(/^(\s*)/)[0].length:0;if(t.tagName)return b?t.tagStart+t.tagName.length+2:t.tagStart+x*k;if(z&&/<!\[CDATA\[/.test(e))return 0;for(a&&/^<\//.test(e)&&(a=a.prev);a&&!a.startOfLine;)a=a.prev;return a?a.indent+x:0},electricChars:"/",blockCommentStart:"<!--",blockCommentEnd:"-->",configuration:e.htmlMode?"html":"xml",helperType:e.htmlMode?"html":"xml"}}),CodeMirror.defineMIME("text/xml","xml"),CodeMirror.defineMIME("application/xml","xml"),CodeMirror.mimeModes.hasOwnProperty("text/html")||CodeMirror.defineMIME("text/html",{name:"xml",htmlMode:!0});