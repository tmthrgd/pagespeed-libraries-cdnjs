CodeMirror.defineMode("less",function(t){function e(t,e){return u=e,t}function r(t,r){var i=t.next();if("@"==i)return t.eatWhile(/[\w\-]/),e("meta",t.current());if("/"==i&&t.eat("*"))return r.tokenize=a,a(t,r);if("<"==i&&t.eat("!"))return r.tokenize=c,c(t,r);if("="==i)e(null,"compare");else{if("|"==i&&t.eat("="))return e(null,"compare");if('"'==i||"'"==i)return r.tokenize=l(i),r.tokenize(t,r);if("/"==i){if(t.eat("/"))return r.tokenize=n,n(t,r);if("string"==u||"("==u)return e("string","string");if(void 0!==r.stack[r.stack.length-1])return e(null,i);if(t.eatWhile(/[\a-zA-Z0-9\-_.\s]/),/\/|\)|#/.test(t.peek()||t.eatSpace()&&")"===t.peek())||t.eol())return e("string","string")}else{if("!"==i)return t.match(/^\s*\w*/),e("keyword","important");if(/\d/.test(i))return t.eatWhile(/[\w.%]/),e("number","unit");if(/[,+<>*\/]/.test(i))return"="==t.peek()||"a"==u?e("string","string"):","===i?e(null,i):e(null,"select-op");if(/[;{}:\[\]()~\|]/.test(i)){if(":"==i)return t.eatWhile(/[a-z\\\-]/),s.test(t.current())?e("tag","tag"):":"==t.peek()?(t.next(),t.eatWhile(/[a-z\\\-]/),t.current().match(/\:\:\-(o|ms|moz|webkit)\-/)?e("string","string"):s.test(t.current().substring(1))?e("tag","tag"):e(null,i)):e(null,i);if("~"!=i)return e(null,i);if("r"==u)return e("string","string")}else{if("."==i)return"("==u?e("string","string"):(t.eatWhile(/[\a-zA-Z0-9\-_]/)," "===t.peek()&&t.eatSpace(),")"===t.peek()||":"===u?e("number","unit"):t.current().length>1&&"rule"===r.stack[r.stack.length-1]&&!t.match(/^[{,+(]/,!1)?e("number","unit"):e("tag","tag"));if("#"==i)return t.eatWhile(/[A-Za-z0-9]/),4==t.current().length||7==t.current().length?null!=t.current().match(/[A-Fa-f0-9]{6}|[A-Fa-f0-9]{3}/,!1)?t.current().substring(1)!=t.current().match(/[A-Fa-f0-9]{6}|[A-Fa-f0-9]{3}/,!1)?e("atom","tag"):(t.eatSpace(),/[\/<>.(){!$%^&*_\-\\?=+\|#'~`]/.test(t.peek())?"select-op"===u?e("number","unit"):e("atom","tag"):"}"==t.peek()?e("number","unit"):/[a-zA-Z\\]/.test(t.peek())?e("atom","tag"):t.eol()?e("atom","tag"):e("number","unit")):(t.eatWhile(/[\w\\\-]/),e("atom",t.current())):(t.eatWhile(/[\w\\\-]/),"rule"===r.stack[r.stack.length-1]?e("atom",t.current()):e("atom",t.current()));if("&"==i)return t.eatWhile(/[\w\-]/),e(null,i);if(t.eatWhile(/[\w\\\-_%.{]/),null===t.current().match(/\\/)){if("string"==u)return"{"===r.stack[r.stack.length-1]&&":"===t.peek()?e("variable","variable"):("/"===t.peek()&&t.eatWhile(/[\w\\\-_%.{:\/]/),e(u,t.current()));if(null!=t.current().match(/(^http$|^https$)/))return t.eatWhile(/[\w\\\-_%.{:\/]/),"/"===t.peek()&&t.eatWhile(/[\w\\\-_%.{:\/]/),e("string","string");if("<"==t.peek()||">"==t.peek()||"+"==t.peek())return"("!==u||"n"!==t.current()&&"-n"!==t.current()?e("tag","tag"):e("string",t.current());if(/\(/.test(t.peek()))return"when"===t.current()?e("variable","variable"):"@media"===r.stack[r.stack.length-1]&&"and"===t.current()?e("variable",t.current()):e(null,i);if("/"==t.peek()&&void 0!==r.stack[r.stack.length-1])return"/"===t.peek()&&t.eatWhile(/[\w\\\-_%.{:\/]/),e("string",t.current());if(t.current().match(/\-\d|\-.\d/))return e("number","unit");if(/\/|[\s\)]/.test(t.peek()||t.eol()||t.eatSpace()&&"/"==t.peek())&&-1!==t.current().indexOf("."))return"{"==t.current().substring(t.current().length-1,t.current().length)?(t.backUp(1),e("tag","tag")):(t.eatSpace(),/[{<>.a-zA-Z\/]/.test(t.peek())||t.eol()?e("tag","tag"):e("string","string"));if(t.eol()||"["==t.peek()||"#"==t.peek()||"tag"==u){if("{"==t.current().substring(t.current().length-1,t.current().length))t.backUp(1);else{if("border-color"===r.stack[r.stack.length-1]||"background-position"===r.stack[r.stack.length-1]||"font-family"===r.stack[r.stack.length-1])return e(null,t.current());if("tag"===u)return e("tag","tag");if((":"===u||"unit"===u)&&"rule"===r.stack[r.stack.length-1])return e(null,t.current());if("rule"===r.stack[r.stack.length-1]&&"tag"===u)return e("string",t.current());if(";"===r.stack[r.stack.length-1]&&":"===u)return e(null,t.current());if("#"===t.peek()&&void 0!==u&&null===u.match(/\+|,|tag|select\-op|}|{|;/g))return e("string",t.current());if("variable"===u)return e(null,t.current());if("{"===r.stack[r.stack.length-1]&&"comment"===u)return e("variable",t.current());if(0===r.stack.length&&(";"===u||"comment"===u))return e("tag",t.current());if(("{"===r.stack[r.stack.length-1]||";"===u)&&"@media{"!==r.stack[r.stack.length-1])return e("variable",t.current());if("{"===r.stack[r.stack.length-2]&&";"===r.stack[r.stack.length-1])return e("variable",t.current())}return e("tag","tag")}if("compare"==u||"a"==u||"("==u)return e("string","string");if("|"==u||"-"==t.current()||"["==u)return"|"==u&&t.match(/^[\]=~]/,!1)?e("number",t.current()):"|"==u?e("tag","tag"):"["==u?(t.eatWhile(/\w\-/),e("number",t.current())):e(null,i);if(":"==t.peek()||t.eatSpace()&&":"==t.peek()){t.next();var k=":"==t.peek()?!0:!1;if(k)t.backUp(1);else{var g=t.pos,o=t.current().length;t.eatWhile(/[a-z\\\-]/);var h=t.pos;if(null!=t.current().substring(o-1).match(s))return t.backUp(h-(g-1)),e("tag","tag");t.backUp(h-(g-1))}return k?e("tag","tag"):e("variable","variable")}return"font-family"===r.stack[r.stack.length-1]||"background-position"===r.stack[r.stack.length-1]||"border-color"===r.stack[r.stack.length-1]?e(null,null):null===r.stack[r.stack.length-1]&&":"===u?e(null,t.current()):/\^|\$/.test(t.current())&&t.match(/^[~=]/,!1)?e("string","string"):"unit"===u&&"rule"===r.stack[r.stack.length-1]?e(null,"unit"):"unit"===u&&";"===r.stack[r.stack.length-1]?e(null,"unit"):")"===u&&"rule"===r.stack[r.stack.length-1]?e(null,"unit"):u&&null!==u.match("@")&&"rule"===r.stack[r.stack.length-1]?e(null,"unit"):";"!==u&&"}"!==u&&","!==u||";"!==r.stack[r.stack.length-1]?";"===u&&void 0!==t.peek()&&!t.match(/^[{\.]/,!1)||";"===u&&t.eatSpace()&&!t.match(/^[{\.]/)?e("variable",t.current()):"@media"===u&&"@media"===r.stack[r.stack.length-1]||"@namespace"===u?e("tag",t.current()):"{"===u&&";"===r.stack[r.stack.length-1]&&"{"===t.peek()?e("tag","tag"):"{"!==u&&":"!==u||";"!==r.stack[r.stack.length-1]?"{"===r.stack[r.stack.length-1]&&t.eatSpace()&&!t.match(/^[\.#]/)||"select-op"===u||"rule"===r.stack[r.stack.length-1]&&","===u?e("tag","tag"):"variable"===u&&"rule"===r.stack[r.stack.length-1]?e("tag","tag"):t.eatSpace()&&"{"===t.peek()||t.eol()||"{"===t.peek()?e("tag","tag"):")"!==u||"and"!=t.current()&&"and "!=t.current()?")"!==u||"when"!=t.current()&&"when "!=t.current()?")"===u||"comment"===u||"{"===u?e("tag","tag"):t.sol()?e("tag","tag"):t.eatSpace()&&"#"===t.peek()||"#"===t.peek()?e("tag","tag"):0===r.stack.length?e("tag","tag"):";"===u&&void 0!==t.peek()&&t.match(/^[\.|#]/g)?e("tag","tag"):":"===u?(t.eatSpace(),e(null,t.current())):"and "===t.current()||"and"===t.current()?e("variable",t.current()):";"===u&&"{"===r.stack[r.stack.length-1]?e("variable",t.current()):"rule"===r.stack[r.stack.length-1]?e(null,t.current()):e("tag",t.current()):e("variable","variable"):e("variable","variable"):e(null,t.current()):e("tag",t.current())}if("\\"===t.current().charAt(t.current().length-1)){for(t.eat(/\'|\"|\)|\(/);t.eatWhile(/[\w\\\-_%.{]/);)t.eat(/\'|\"|\)|\(/);return e("string",t.current())}}}}}function n(t,n){return t.skipToEnd(),n.tokenize=r,e("comment","comment")}function a(t,n){for(var a,c=!1;null!=(a=t.next());){if(c&&"/"==a){n.tokenize=r;break}c="*"==a}return e("comment","comment")}function c(t,n){for(var a,c=0;null!=(a=t.next());){if(c>=2&&">"==a){n.tokenize=r;break}c="-"==a?c+1:0}return e("comment","comment")}function l(t){return function(n,a){for(var c,l=!1;null!=(c=n.next())&&(c!=t||l);)l=!l&&"\\"==c;return l||(a.tokenize=r),e("string","string")}}var u,i=t.indentUnit,s=/(^\:root$|^\:nth\-child$|^\:nth\-last\-child$|^\:nth\-of\-type$|^\:nth\-last\-of\-type$|^\:first\-child$|^\:last\-child$|^\:first\-of\-type$|^\:last\-of\-type$|^\:only\-child$|^\:only\-of\-type$|^\:empty$|^\:link|^\:visited$|^\:active$|^\:hover$|^\:focus$|^\:target$|^\:lang$|^\:enabled^\:disabled$|^\:checked$|^\:first\-line$|^\:first\-letter$|^\:before$|^\:after$|^\:not$|^\:required$|^\:invalid$)/;return{startState:function(t){return{tokenize:r,baseIndent:t||0,stack:[]}},token:function(t,r){if(t.eatSpace())return null;var n=r.tokenize(t,r),a=r.stack[r.stack.length-1];if("hash"==u&&"rule"==a?n="atom":"variable"==n&&("rule"==a?n=null:a&&"@media{"!=a||(n="when"==t.current()?"variable":/[\s,|\s\)|\s]/.test(t.peek())?"tag":u)),"rule"==a&&/^[\{\};]$/.test(u)&&r.stack.pop(),"{"==u?"@media"==a?r.stack[r.stack.length-1]="@media{":r.stack.push("{"):"}"==u?r.stack.pop():"@media"==u?r.stack.push("@media"):"font-family"===t.current()?r.stack[r.stack.length-1]="font-family":"background-position"===t.current()?r.stack[r.stack.length-1]="background-position":"border-color"===t.current()?r.stack[r.stack.length-1]="border-color":"{"==a&&"comment"!=u&&"tag"!==u?r.stack.push("rule"):":"===t.peek()&&null===t.current().match(/@|#/)&&(n=u),";"!==u||"font-family"!=r.stack[r.stack.length-1]&&"background-position"!=r.stack[r.stack.length-1]&&"border-color"!=r.stack[r.stack.length-1]){if("tag"===u&&")"===t.peek()&&null===t.current().match(/\:/))u=null,n=null;else if("variable"===u&&")"===t.peek()||"variable"===u&&t.eatSpace()&&")"===t.peek())return e(null,t.current())}else r.stack[r.stack.length-1]=t.current();return n},indent:function(t,e){var r=t.stack.length;return/^\}/.test(e)?r-="rule"===t.stack[t.stack.length-1]?2:1:"{"===t.stack[t.stack.length-2]&&(r-="rule"===t.stack[t.stack.length-1]?1:0),t.baseIndent+r*i},electricChars:"}",blockCommentStart:"/*",blockCommentEnd:"*/",lineComment:"//"}}),CodeMirror.defineMIME("text/x-less","less"),CodeMirror.mimeModes.hasOwnProperty("text/css")||CodeMirror.defineMIME("text/css","less");