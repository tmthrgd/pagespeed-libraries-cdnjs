CodeMirror.defineMode("smarty",function(t){"use strict";var e={rightDelimiter:"}",leftDelimiter:"{",smartyVersion:2};t.hasOwnProperty("leftDelimiter")&&(e.leftDelimiter=t.leftDelimiter),t.hasOwnProperty("rightDelimiter")&&(e.rightDelimiter=t.rightDelimiter),t.hasOwnProperty("smartyVersion")&&3===t.smartyVersion&&(e.smartyVersion=3);var r,i=["debug","extends","function","include","literal"],n={operatorChars:/[+\-*&%=<>!?]/,validIdentifier:/[a-zA-Z0-9_]/,stringChar:/['"]/},a={cont:function(t,e){return r=e,t},chain:function(t,e,r){return e.tokenize=r,r(t,e)}},o={tokenizer:function(t,i){if(t.match(e.leftDelimiter,!0)){if(t.eat("*"))return a.chain(t,i,o.inBlock("comment","*"+e.rightDelimiter));i.depth++;var n=t.eol(),l=/\s/.test(t.peek());return 3===e.smartyVersion&&"{"===e.leftDelimiter&&(n||l)?(i.depth--,null):(i.tokenize=o.smarty,r="startTag","tag")}return t.next(),null},smarty:function(t,l){if(t.match(e.rightDelimiter,!0))return 3===e.smartyVersion?(l.depth--,l.depth<=0&&(l.tokenize=o.tokenizer)):l.tokenize=o.tokenizer,a.cont("tag",null);if(t.match(e.leftDelimiter,!0))return l.depth++,a.cont("tag","startTag");var u=t.next();if("$"==u)return t.eatWhile(n.validIdentifier),a.cont("variable-2","variable");if("|"==u)return a.cont("operator","pipe");if("."==u)return a.cont("operator","property");if(n.stringChar.test(u))return l.tokenize=o.inAttribute(u),a.cont("string","string");if(n.operatorChars.test(u))return t.eatWhile(n.operatorChars),a.cont("operator","operator");if("["==u||"]"==u)return a.cont("bracket","bracket");if("("==u||")"==u)return a.cont("bracket","operator");if(/\d/.test(u))return t.eatWhile(/\d/),a.cont("number","number");if("variable"==l.last){if("@"==u)return t.eatWhile(n.validIdentifier),a.cont("property","property");if("|"==u)return t.eatWhile(n.validIdentifier),a.cont("qualifier","modifier")}else{if("pipe"==l.last)return t.eatWhile(n.validIdentifier),a.cont("qualifier","modifier");if("whitespace"==l.last)return t.eatWhile(n.validIdentifier),a.cont("attribute","modifier")}if("property"==l.last)return t.eatWhile(n.validIdentifier),a.cont("property",null);if(/\s/.test(u))return r="whitespace",null;var f="";"/"!=u&&(f+=u);for(var s=null;s=t.eat(n.validIdentifier);)f+=s;for(var c=0,d=i.length;d>c;c++)if(i[c]==f)return a.cont("keyword","keyword");return/\s/.test(u)?null:a.cont("tag","tag")},inAttribute:function(t){return function(e,r){for(var i=null,n=null;!e.eol();){if(n=e.peek(),e.next()==t&&"\\"!==i){r.tokenize=o.smarty;break}i=n}return"string"}},inBlock:function(t,e){return function(r,i){for(;!r.eol();){if(r.match(e)){i.tokenize=o.tokenizer;break}r.next()}return t}}};return{startState:function(){return{tokenize:o.tokenizer,mode:"smarty",last:null,depth:0}},token:function(t,e){var i=e.tokenize(t,e);return e.last=r,i},electricChars:""}}),CodeMirror.defineMIME("text/x-smarty","smarty");