!function(){"use strict";function r(r){var e=r.doc.modeOption;return"sql"===e&&(e="text/x-sql"),CodeMirror.resolveMode(e).keywords}function e(r,e){var t=r.length,n=e.substr(0,t);return r.toUpperCase()===n.toUpperCase()}function t(r,t,n,o){for(var i in n)n.hasOwnProperty(i)&&(Array.isArray(n)&&(i=n[i]),e(t,i)&&r.push(o(i)))}function n(r,e){var n=e.getCursor(),o=e.getTokenAt(n),i=o.string.substr(1),s=CodeMirror.Pos(n.line,o.start),u=e.getTokenAt(s).string;l.hasOwnProperty(u)||(u=a(u,e));var f=l[u];f&&t(r,i,f,function(r){return"."+r})}function o(r,e){if(r)for(var t=/[,;]/g,n=r.split(" "),o=0;o<n.length;o++)e(n[o]?n[o].replace(t,""):"")}function i(r){return r.line+r.ch/Math.pow(10,6)}function s(r){return CodeMirror.Pos(Math.floor(r),+r.toString().split(".").pop())}function a(r,e){for(var t=e.doc,n=t.getValue(),a=r.toUpperCase(),u="",f="",p=[],g={start:CodeMirror.Pos(0,0),end:CodeMirror.Pos(e.lastLine(),e.getLineHandle(e.lastLine()).length)},c=n.indexOf(d.QUERY_DIV);-1!=c;)p.push(t.posFromIndex(c)),c=n.indexOf(d.QUERY_DIV,c+1);p.unshift(CodeMirror.Pos(0,0)),p.push(CodeMirror.Pos(e.lastLine(),e.getLineHandle(e.lastLine()).text.length));for(var C=0,h=i(e.getCursor()),v=0;v<p.length;v++){var M=i(p[v]);if(h>C&&M>=h){g={start:s(C),end:s(M)};break}C=M}for(var P=t.getRange(g.start,g.end,!1),v=0;v<P.length;v++){var A=P[v];if(o(A,function(r){var e=r.toUpperCase();e===a&&l.hasOwnProperty(u)&&(f=u),e!==d.ALIAS_KEYWORD&&(u=r)}),f)break}return f}function u(e,o){l=o&&o.tables||{},f=f||r(e);var i=e.getCursor(),s=e.getTokenAt(i),a=[],u=s.string.trim();return t(a,u,f,function(r){return r.toUpperCase()}),t(a,u,l,function(r){return r}),0===u.lastIndexOf(".")&&n(a,e),{list:a,from:CodeMirror.Pos(i.line,s.start),to:CodeMirror.Pos(i.line,s.end)}}var l,f,d={QUERY_DIV:";",ALIAS_KEYWORD:"AS"};CodeMirror.registerHelper("hint","sql",u)}();