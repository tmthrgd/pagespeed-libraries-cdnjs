!function(){"use strict";function e(e){var n=e.search(t);return-1==n?0:n}var n={},t=/[^\s\u00a0]/,i=CodeMirror.Pos;CodeMirror.commands.toggleComment=function(e){var n=e.getCursor("start"),t=e.getCursor("end");e.uncomment(n,t)||e.lineComment(n,t)},CodeMirror.defineExtension("lineComment",function(l,o,r){r||(r=n);var a=this,m=a.getModeAt(l),c=r.lineComment||m.lineComment;if(!c)return void((r.blockCommentStart||m.blockCommentStart)&&(r.fullLines=!0,a.blockComment(l,o,r)));var g=a.getLine(l.line);if(null!=g){var s=Math.min(0!=o.ch||o.line==l.line?o.line+1:o.line,a.lastLine()+1),d=null==r.padding?" ":r.padding,f=r.commentBlankLines||l.line==o.line;a.operation(function(){if(r.indent)for(var n=g.slice(0,e(g)),o=l.line;s>o;++o){var m=a.getLine(o),C=n.length;(f||t.test(m))&&(m.slice(0,C)!=n&&(C=e(m)),a.replaceRange(n+c+d,i(o,0),i(o,C)))}else for(var o=l.line;s>o;++o)(f||t.test(a.getLine(o)))&&a.replaceRange(c+d,i(o,0))})}}),CodeMirror.defineExtension("blockComment",function(e,l,o){o||(o=n);var r=this,a=r.getModeAt(e),m=o.blockCommentStart||a.blockCommentStart,c=o.blockCommentEnd||a.blockCommentEnd;if(!m||!c)return void((o.lineComment||a.lineComment)&&0!=o.fullLines&&r.lineComment(e,l,o));var g=Math.min(l.line,r.lastLine());g!=e.line&&0==l.ch&&t.test(r.getLine(g))&&--g;var s=null==o.padding?" ":o.padding;e.line>g||r.operation(function(){if(0!=o.fullLines){var n=t.test(r.getLine(g));r.replaceRange(s+c,i(g)),r.replaceRange(m+s,i(e.line,0));var d=o.blockCommentLead||a.blockCommentLead;if(null!=d)for(var f=e.line+1;g>=f;++f)(f!=g||n)&&r.replaceRange(d+s,i(f,0))}else r.replaceRange(c,l),r.replaceRange(m,e)})}),CodeMirror.defineExtension("uncomment",function(e,l,o){o||(o=n);var r,a=this,m=a.getModeAt(e),c=Math.min(l.line,a.lastLine()),g=Math.min(e.line,c),s=o.lineComment||m.lineComment,d=[],f=null==o.padding?" ":o.padding;e:if(s){for(var C=g;c>=C;++C){var u=a.getLine(C),v=u.indexOf(s);if(v>-1&&!/comment/.test(a.getTokenTypeAt(i(C,v+1)))&&(v=-1),-1==v&&(C!=c||C==g)&&t.test(u))break e;if(v>-1&&t.test(u.slice(0,v)))break e;d.push(u)}if(a.operation(function(){for(var e=g;c>=e;++e){var n=d[e-g],t=n.indexOf(s),l=t+s.length;0>t||(n.slice(l,l+f.length)==f&&(l+=f.length),r=!0,a.replaceRange("",i(e,t),i(e,l)))}}),r)return!0}var p=o.blockCommentStart||m.blockCommentStart,h=o.blockCommentEnd||m.blockCommentEnd;if(!p||!h)return!1;var k=o.blockCommentLead||m.blockCommentLead,L=a.getLine(g),b=c==g?L:a.getLine(c),M=L.indexOf(p),R=b.lastIndexOf(h);return-1==R&&g!=c&&(b=a.getLine(--c),R=b.lastIndexOf(h)),-1!=M&&-1!=R&&/comment/.test(a.getTokenTypeAt(i(g,M+1)))&&/comment/.test(a.getTokenTypeAt(i(c,R+1)))?(a.operation(function(){a.replaceRange("",i(c,R-(f&&b.slice(R-f.length,R)==f?f.length:0)),i(c,R+h.length));var e=M+p.length;if(f&&L.slice(e,e+f.length)==f&&(e+=f.length),a.replaceRange("",i(g,M),i(g,e)),k)for(var n=g+1;c>=n;++n){var l=a.getLine(n),o=l.indexOf(k);if(-1!=o&&!t.test(l.slice(0,o))){var r=o+k.length;f&&l.slice(r,r+f.length)==f&&(r+=f.length),a.replaceRange("",i(n,o),i(n,r))}}}),!0):!1})}();