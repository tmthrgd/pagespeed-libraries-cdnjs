!function(){function e(e){var t=e.getCursor(),o=e.getTokenAt(t);if("comment"!=o.type||e.getOption("disableInput"))return CodeMirror.Pass;var i,r=CodeMirror.innerMode(e.getMode(),o.state).mode;if(r.blockCommentStart&&r.blockCommentContinue){var l,m=o.string.indexOf(r.blockCommentEnd),s=e.getRange(CodeMirror.Pos(t.line,0),CodeMirror.Pos(t.line,o.end));if(-1!=m&&m==o.string.length-r.blockCommentEnd.length&&t.ch>=m);else if(0==o.string.indexOf(r.blockCommentStart)){if(i=s.slice(0,o.start),!/^\s*$/.test(i)){i="";for(var c=0;c<o.start;++c)i+=" "}}else-1!=(l=s.indexOf(r.blockCommentContinue))&&l+r.blockCommentContinue.length>o.start&&/^\s*$/.test(s.slice(0,l))&&(i=s.slice(0,l));null!=i&&(i+=r.blockCommentContinue)}if(null==i&&r.lineComment&&n(e)){var C=e.getLine(t.line),l=C.indexOf(r.lineComment);l>-1&&(i=C.slice(0,l),/\S/.test(i)?i=null:i+=r.lineComment+C.slice(l+r.lineComment.length).match(/^\s*/)[0])}return null==i?CodeMirror.Pass:void e.replaceSelection("\n"+i,"end")}function n(e){var n=e.getOption("continueComments");return n&&"object"==typeof n?n.continueLineComment!==!1:!0}for(var t=["clike","css","javascript"],o=0;o<t.length;++o)CodeMirror.extendMode(t[o],{blockCommentContinue:" * "});CodeMirror.defineOption("continueComments",null,function(n,t,o){if(o&&o!=CodeMirror.Init&&n.removeKeyMap("continueComment"),t){var i="Enter";"string"==typeof t?i=t:"object"==typeof t&&t.key&&(i=t.key);var r={name:"continueComment"};r[i]=e,n.addKeyMap(r)}})}();