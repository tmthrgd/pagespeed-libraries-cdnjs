!function(){"use strict";function e(e,t){this.mv=e,this.type=t,this.classes="left"==t?{chunk:"CodeMirror-merge-l-chunk",start:"CodeMirror-merge-l-chunk-start",end:"CodeMirror-merge-l-chunk-end",insert:"CodeMirror-merge-l-inserted",del:"CodeMirror-merge-l-deleted",connect:"CodeMirror-merge-l-connect"}:{chunk:"CodeMirror-merge-r-chunk",start:"CodeMirror-merge-r-chunk-start",end:"CodeMirror-merge-r-chunk-end",insert:"CodeMirror-merge-r-inserted",del:"CodeMirror-merge-r-deleted",connect:"CodeMirror-merge-r-connect"}}function t(e){function t(t){"full"==t&&(e.svg&&k(e.svg),k(e.copyButtons),l(e.edit,n.marked,e.classes),l(e.orig,f.marked,e.classes),n.from=n.to=f.from=f.to=0),e.diffOutOfDate&&(e.diff=u(e.orig.getValue(),e.edit.getValue()),e.diffOutOfDate=!1,CodeMirror.signal(e.edit,"updateDiff",e.diff)),e.showDifferences&&(a(e.edit,e.diff,n,DIFF_INSERT,e.classes),a(e.orig,e.diff,f,DIFF_DELETE,e.classes)),c(e)}function r(e){clearTimeout(o),o=setTimeout(t,1==e?250:100)}function i(){e.diffOutOfDate||(e.diffOutOfDate=!0,n.from=n.to=f.from=f.to=0),r(!0)}var o,n={from:0,to:0,marked:[]},f={from:0,to:0,marked:[]};return e.edit.on("change",i),e.orig.on("change",i),e.edit.on("viewportChange",r),e.orig.on("viewportChange",r),t(),t}function r(e){e.edit.on("scroll",function(){i(e,DIFF_INSERT)&&c(e)}),e.orig.on("scroll",function(){i(e,DIFF_DELETE)&&c(e)})}function i(e,t){if(e.diffOutOfDate)return!1;if(!e.lockScroll)return!0;var r,i,n=+new Date;if(t==DIFF_INSERT?(r=e.edit,i=e.orig):(r=e.orig,i=e.edit),r.state.scrollSetBy==e&&(r.state.scrollSetAt||0)+50>n)return!1;var l,a,f=r.getScrollInfo(),c=.5*f.clientHeight,s=f.top+c,d=r.lineAtHeight(s,"local"),h=m(e.diff,d,t==DIFF_INSERT),u=o(r,t==DIFF_INSERT?h.edit:h.orig),g=o(i,t==DIFF_INSERT?h.orig:h.edit),v=(s-u.top)/(u.bot-u.top),p=g.top-c+v*(g.bot-g.top);if(p>f.top&&(a=f.top/c)<1)p=p*a+f.top*(1-a);else if((l=f.height-f.clientHeight-f.top)<c){var C=i.getScrollInfo(),k=C.height-C.clientHeight-p;k>l&&(a=l/c)<1&&(p=p*a+(C.height-C.clientHeight-l)*(1-a))}return i.scrollTo(f.left,p),i.state.scrollSetAt=n,i.state.scrollSetBy=e,!0}function o(e,t){var r=t.after;return null==r&&(r=e.lastLine()+1),{top:e.heightAtLine(t.before||0,"local"),bot:e.heightAtLine(r,"local")}}function n(e,t,r){e.lockScroll=t,t&&0!=r&&i(e,DIFF_INSERT)&&c(e),e.lockButton.innerHTML=t?"⇛⇚":"⇛&nbsp;&nbsp;⇚"}function l(e,t,r){for(var i=0;i<t.length;++i){var o=t[i];o instanceof CodeMirror.TextMarker?o.clear():(e.removeLineClass(o,"background",r.chunk),e.removeLineClass(o,"background",r.start),e.removeLineClass(o,"background",r.end))}t.length=0}function a(e,t,r,i,o){var n=e.getViewport();e.operation(function(){r.from==r.to||n.from-r.to>20||r.from-n.to>20?(l(e,r.marked,o),f(e,t,i,r.marked,n.from,n.to,o),r.from=n.from,r.to=n.to):(n.from<r.from&&(f(e,t,i,r.marked,n.from,r.from,o),r.from=n.from),n.to>r.to&&(f(e,t,i,r.marked,r.to,n.to,o),r.to=n.to))})}function f(e,t,r,i,o,n,l){function a(t,r){for(var a=Math.max(o,t),f=Math.min(n,r),c=a;f>c;++c){var s=e.addLineClass(c,"background",l.chunk);c==t&&e.addLineClass(s,"background",l.start),c==r-1&&e.addLineClass(s,"background",l.end),i.push(s)}t==r&&a==r&&f==r&&i.push(a?e.addLineClass(a-1,"background",l.end):e.addLineClass(a,"background",l.start))}for(var f=F(0,0),c=F(o,0),s=e.clipPos(F(n-1)),d=r==DIFF_DELETE?l.del:l.insert,h=0,u=0;u<t.length;++u){var g=t[u],m=g[0],C=g[1];if(m==DIFF_EQUAL){var k=f.line+(p(t,u)?0:1);w(f,C);var M=f.line+(v(t,u)?1:0);M>k&&(u&&a(h,k),h=M)}else if(m==r){var D=w(f,C,!0),b=S(c,f),y=E(s,D);I(b,y)||i.push(e.markText(b,y,{className:d})),f=D}}h<=f.line&&a(h,f.line+1)}function c(e){if(e.showDifferences){if(e.svg){k(e.svg);var t=e.gap.offsetWidth;M(e.svg,"width",t,"height",e.gap.offsetHeight)}k(e.copyButtons);var r="left"==e.type,i=e.edit.getViewport(),o=e.orig.getViewport(),n=e.edit.getScrollInfo().top,l=e.orig.getScrollInfo().top;g(e.diff,function(a,f,c,s){if(!(c>i.to||s<i.from||a>o.to||f<o.from)){var d=e.orig.heightAtLine(a,"local")-l,h=d;if(e.svg){var u=e.edit.heightAtLine(c,"local")-n;if(r){var g=d;d=u,u=g}var v=e.orig.heightAtLine(f,"local")-l,p=e.edit.heightAtLine(s,"local")-n;if(r){var g=v;v=p,p=g}var m=" C "+t/2+" "+u+" "+t/2+" "+d+" "+(t+2)+" "+d,k=" C "+t/2+" "+v+" "+t/2+" "+p+" -1 "+p;M(e.svg.appendChild(document.createElementNS(b,"path")),"d","M -1 "+u+m+" L "+(t+2)+" "+v+k+" z","class",e.classes.connect)}var D=e.copyButtons.appendChild(C("div","left"==e.type?"⇝":"⇜","CodeMirror-merge-copy"));D.title="Revert chunk",D.chunk={topEdit:c,botEdit:s,topOrig:a,botOrig:f},D.style.top=h+"px"}})}}function s(e,t){e.diffOutOfDate||e.edit.replaceRange(e.orig.getRange(F(t.topOrig,0),F(t.botOrig,0)),F(t.topEdit,0),F(t.botEdit,0))}function d(e){var t=e.lockButton=C("div",null,"CodeMirror-merge-scrolllock");t.title="Toggle locked scrolling";var r=C("div",[t],"CodeMirror-merge-scrolllock-wrap");CodeMirror.on(t,"click",function(){n(e,!e.lockScroll)}),e.copyButtons=C("div",null,"CodeMirror-merge-copybuttons-"+e.type),CodeMirror.on(e.copyButtons,"click",function(t){var r=t.target||t.srcElement;r.chunk&&s(e,r.chunk)});var i=[e.copyButtons,r],o=document.createElementNS&&document.createElementNS(b,"svg");return o&&!o.createSVGRect&&(o=null),e.svg=o,o&&i.push(o),e.gap=C("div",i,"CodeMirror-merge-gap")}function h(e){return"string"==typeof e?e:e.getValue()}function u(e,t){var r=L.diff_main(e,t);L.diff_cleanupSemantic(r);for(var i=0;i<r.length;++i){var o=r[i];o[1]?i&&r[i-1][0]==o[0]&&(r.splice(i--,1),r[i][1]+=o[1]):r.splice(i--,1)}return r}function g(e,t){for(var r=0,i=0,o=F(0,0),n=F(0,0),l=0;l<e.length;++l){var a=e[l],f=a[0];if(f==DIFF_EQUAL){var c=p(e,l)?0:1,s=o.line+c,d=n.line+c;w(o,a[1],null,n);var h=v(e,l)?1:0,u=o.line+h,g=n.line+h;u>s&&(l&&t(i,d,r,s),r=u,i=g)}else w(f==DIFF_INSERT?o:n,a[1])}(r<=o.line||i<=n.line)&&t(i,n.line+1,r,o.line+1)}function v(e,t){if(t==e.length-1)return!0;var r=e[t+1][1];return 1==r.length||10!=r.charCodeAt(0)?!1:t==e.length-2?!0:(r=e[t+2][1],r.length>1&&10==r.charCodeAt(0))}function p(e,t){if(0==t)return!0;var r=e[t-1][1];return 10!=r.charCodeAt(r.length-1)?!1:1==t?!0:(r=e[t-2][1],10==r.charCodeAt(r.length-1))}function m(e,t,r){var i,o,n,l;return g(e,function(e,a,f,c){var s=r?f:e,d=r?c:a;null==o&&(s>t?(o=f,l=e):d>t&&(o=c,l=a)),t>=d?(i=c,n=a):t>=s&&(i=f,n=e)}),{edit:{before:i,after:o},orig:{before:n,after:l}}}function C(e,t,r,i){var o=document.createElement(e);if(r&&(o.className=r),i&&(o.style.cssText=i),"string"==typeof t)o.appendChild(document.createTextNode(t));else if(t)for(var n=0;n<t.length;++n)o.appendChild(t[n]);return o}function k(e){for(var t=e.childNodes.length;t>0;--t)e.removeChild(e.firstChild)}function M(e){for(var t=1;t<arguments.length;t+=2)e.setAttribute(arguments[t],arguments[t+1])}function D(e,t){t||(t={});for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);return t}function w(e,t,r,i){for(var o=r?F(e.line,e.ch):e,n=0;;){var l=t.indexOf("\n",n);if(-1==l)break;++o.line,i&&++i.line,n=l+1}return o.ch=(n?0:o.ch)+(t.length-n),i&&(i.ch=(n?0:i.ch)+(t.length-n)),o}function E(e,t){return(e.line-t.line||e.ch-t.ch)<0?e:t}function S(e,t){return(e.line-t.line||e.ch-t.ch)>0?e:t}function I(e,t){return e.line==t.line&&e.ch==t.ch}var F=CodeMirror.Pos,b="http://www.w3.org/2000/svg";e.prototype={constructor:e,init:function(e,i,o){this.edit=this.mv.edit,this.orig=CodeMirror(e,D({value:i,readOnly:!0},D(o))),this.diff=u(h(i),h(o.value)),this.diffOutOfDate=!1,this.showDifferences=o.showDifferences!==!1,this.forceUpdate=t(this),n(this,!0,!1),r(this)},setShowDifferences:function(e){e=e!==!1,e!=this.showDifferences&&(this.showDifferences=e,this.forceUpdate("full"))}};var y=CodeMirror.MergeView=function(t,r){if(!(this instanceof y))return new y(t,r);var i=r.origLeft,o=null==r.origRight?r.orig:r.origRight,n=null!=i,l=null!=o,a=1+(n?1:0)+(l?1:0),f=[],s=this.left=null,h=this.right=null;if(n){s=this.left=new e(this,"left");var u=C("div",null,"CodeMirror-merge-pane");f.push(u),f.push(d(s))}var g=C("div",null,"CodeMirror-merge-pane");if(f.push(g),l){h=this.right=new e(this,"right"),f.push(d(h));var v=C("div",null,"CodeMirror-merge-pane");f.push(v)}(l?v:g).className+=" CodeMirror-merge-pane-rightmost",f.push(C("div",null,null,"height: 0; clear: both;"));var p=this.wrap=t.appendChild(C("div",f,"CodeMirror-merge CodeMirror-merge-"+a+"pane"));this.edit=CodeMirror(g,D(r)),s&&s.init(u,i,r),h&&h.init(v,o,r);var m=function(){s&&c(s),h&&c(h)};CodeMirror.on(window,"resize",m);var k=setInterval(function(){for(var e=p.parentNode;e&&e!=document.body;e=e.parentNode);e||(clearInterval(k),CodeMirror.off(window,"resize",m))},5e3)};y.prototype={constuctor:y,editor:function(){return this.edit},rightOriginal:function(){return this.right&&this.right.orig},leftOriginal:function(){return this.left&&this.left.orig},setShowDifferences:function(e){this.right&&this.right.setShowDifferences(e),this.left&&this.left.setShowDifferences(e)}};var L=new diff_match_patch}();