!function(){"use strict";function t(t){this.options=t,this.from=this.to=0}function o(t){return t===!0&&(t={}),null==t.gutter&&(t.gutter="CodeMirror-foldgutter"),null==t.indicatorOpen&&(t.indicatorOpen="CodeMirror-foldgutter-open"),null==t.indicatorFolded&&(t.indicatorFolded="CodeMirror-foldgutter-folded"),t}function e(t,o){for(var e=t.findMarksAt(l(o)),r=0;r<e.length;++r)if(e[r].__isFold&&e[r].find().from.line==o)return!0}function r(t){if("string"==typeof t){var o=document.createElement("div");return o.className=t,o}return t.cloneNode(!0)}function n(t,o,n){var i=t.state.foldGutter.options,f=o;t.eachLine(o,n,function(o){var n=null;if(e(t,f))n=r(i.indicatorFolded);else{var a=l(f,0),u=i.rangeFinder||CodeMirror.fold.auto,d=u&&u(t,a);d&&d.from.line+1<d.to.line&&(n=r(i.indicatorOpen))}t.setGutterMarker(o,i.gutter,n),++f})}function i(t){var o=t.getViewport(),e=t.state.foldGutter;e&&(t.operation(function(){n(t,o.from,o.to)}),e.from=o.from,e.to=o.to)}function f(t,o,e){var r=t.state.foldGutter.options;e==r.gutter&&t.foldCode(l(o,0),r.rangeFinder)}function a(t){var o=t.state.foldGutter,e=t.state.foldGutter.options;o.from=o.to=0,clearTimeout(o.changeUpdate),o.changeUpdate=setTimeout(function(){i(t)},e.foldOnChangeTimeSpan||600)}function u(t){var o=t.state.foldGutter,e=t.state.foldGutter.options;clearTimeout(o.changeUpdate),o.changeUpdate=setTimeout(function(){var e=t.getViewport();o.from==o.to||e.from-o.to>20||o.from-e.to>20?i(t):t.operation(function(){e.from<o.from&&(n(t,e.from,o.from),o.from=e.from),e.to>o.to&&(n(t,o.to,e.to),o.to=e.to)})},e.updateViewportTimeSpan||400)}function d(t,o){var e=t.state.foldGutter,r=o.line;r>=e.from&&r<e.to&&n(t,r,r+1)}CodeMirror.defineOption("foldGutter",!1,function(e,r,n){n&&n!=CodeMirror.Init&&(e.clearGutter(e.state.foldGutter.options.gutter),e.state.foldGutter=null,e.off("gutterClick",f),e.off("change",a),e.off("viewportChange",u),e.off("fold",d),e.off("unfold",d),e.off("swapDoc",i)),r&&(e.state.foldGutter=new t(o(r)),i(e),e.on("gutterClick",f),e.on("change",a),e.on("viewportChange",u),e.on("fold",d),e.on("unfold",d),e.on("swapDoc",i))});var l=CodeMirror.Pos}();