CodeMirror.registerGlobalHelper("fold","comment",function(e){return e.blockCommentStart&&e.blockCommentEnd},function(e,r){var t=e.getModeAt(r),o=t.blockCommentStart,n=t.blockCommentEnd;if(o&&n){for(var i,l=r.line,f=e.getLine(l),a=r.ch,m=0;;){var d=0>=a?-1:f.lastIndexOf(o,a-1);if(-1!=d){if(1==m&&d<r.ch)return;if(/comment/.test(e.getTokenTypeAt(CodeMirror.Pos(l,d+1)))){i=d+o.length;break}a=d-1}else{if(1==m)return;m=1,a=f.length}}var c,g,s=1,b=e.lastLine();e:for(var h=l;b>=h;++h)for(var k=e.getLine(h),C=h==l?i:0;;){var u=k.indexOf(o,C),v=k.indexOf(n,C);if(0>u&&(u=k.length),0>v&&(v=k.length),C=Math.min(u,v),C==k.length)break;if(C==u)++s;else if(!--s){c=h,g=C;break e}++C}if(null!=c&&(l!=c||g!=i))return{from:CodeMirror.Pos(l,i),to:CodeMirror.Pos(c,g)}}});