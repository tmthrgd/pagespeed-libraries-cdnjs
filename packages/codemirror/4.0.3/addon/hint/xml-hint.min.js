(function(e){typeof exports=="object"&&typeof module=="object"?e(require("../../lib/codemirror")):typeof define=="function"&&define.amd?define(["../../lib/codemirror"],e):e(CodeMirror)})(function(e){"use strict";function n(n,r){var i=r&&r.schemaInfo,s=r&&r.quoteChar||'"';if(!i)return;var o=n.getCursor(),u=n.getTokenAt(o),a=e.innerMode(n.getMode(),u.state);if(a.mode.name!="xml")return;var f=[],l=!1,c,h=u.string.charAt(0)=="<";if(!a.state.tagName||h){h&&(c=u.string.slice(1),l=!0);var p=a.state.context,d=p&&i[p.tagName],v=p?d&&d.children:i["!top"];if(v)for(var m=0;m<v.length;++m)(!c||v[m].lastIndexOf(c,0)==0)&&f.push("<"+v[m]);else for(var g in i)i.hasOwnProperty(g)&&g!="!top"&&(!c||g.lastIndexOf(c,0)==0)&&f.push("<"+g);p&&(!c||("/"+p.tagName).lastIndexOf(c,0)==0)&&f.push("</"+p.tagName+">")}else{var d=i[a.state.tagName],y=d&&d.attrs;if(!y)return;if(u.type=="string"||u.string=="="){var b=n.getRange(t(o.line,Math.max(0,o.ch-60)),t(o.line,u.type=="string"?u.start:u.end)),w=b.match(/([^\s\u00a0=<>\"\']+)=$/),E;if(!w||!y.hasOwnProperty(w[1])||!(E=y[w[1]]))return;typeof E=="function"&&(E=E.call(this,n)),u.type=="string"&&(c=u.string,/['"]/.test(u.string.charAt(0))&&(s=u.string.charAt(0),c=u.string.slice(1)),l=!0);for(var m=0;m<E.length;++m)(!c||E[m].lastIndexOf(c,0)==0)&&f.push(s+E[m]+s)}else{u.type=="attribute"&&(c=u.string,l=!0);for(var S in y)y.hasOwnProperty(S)&&(!c||S.lastIndexOf(c,0)==0)&&f.push(S)}}return{list:f,from:l?t(o.line,u.start):o,to:l?t(o.line,u.end):o}}var t=e.Pos;e.registerHelper("hint","xml",n)});