(function(e){typeof exports=="object"&&typeof module=="object"?e(require("../../lib/codemirror")):typeof define=="function"&&define.amd?define(["../../lib/codemirror"],e):e(CodeMirror)})(function(e){"use strict";e.multiplexingMode=function(t){function i(e,t,n){if(typeof t=="string")return e.indexOf(t,n);var r=t.exec(n?e.slice(n):e);return r?r.index+n:-1}var n=Array.prototype.slice.call(arguments,1),r=n.length;return{startState:function(){return{outer:e.startState(t),innerActive:null,inner:null}},copyState:function(n){return{outer:e.copyState(t,n.outer),innerActive:n.innerActive,inner:n.innerActive&&e.copyState(n.innerActive.mode,n.inner)}},token:function(s,o){if(!o.innerActive){var u=Infinity,a=s.string;for(var f=0;f<r;++f){var l=n[f],c=i(a,l.open,s.pos);if(c==s.pos)return s.match(l.open),o.innerActive=l,o.inner=e.startState(l.mode,t.indent?t.indent(o.outer,""):0),l.delimStyle;c!=-1&&c<u&&(u=c)}u!=Infinity&&(s.string=a.slice(0,u));var h=t.token(s,o.outer);return u!=Infinity&&(s.string=a),h}var p=o.innerActive,a=s.string;if(!p.close&&s.sol())return o.innerActive=o.inner=null,this.token(s,o);var c=p.close?i(a,p.close,s.pos):-1;if(c==s.pos)return s.match(p.close),o.innerActive=o.inner=null,p.delimStyle;c>-1&&(s.string=a.slice(0,c));var d=p.mode.token(s,o.inner);return c>-1&&(s.string=a),p.innerStyle&&(d?d=d+" "+p.innerStyle:d=p.innerStyle),d},indent:function(n,r){var i=n.innerActive?n.innerActive.mode:t;return i.indent?i.indent(n.innerActive?n.inner:n.outer,r):e.Pass},blankLine:function(i){var s=i.innerActive?i.innerActive.mode:t;s.blankLine&&s.blankLine(i.innerActive?i.inner:i.outer);if(!i.innerActive)for(var o=0;o<r;++o){var u=n[o];u.open==="\n"&&(i.innerActive=u,i.inner=e.startState(u.mode,s.indent?s.indent(i.outer,""):0))}else i.innerActive.close==="\n"&&(i.innerActive=i.inner=null)},electricChars:t.electricChars,innerMode:function(e){return e.inner?{state:e.inner,mode:e.innerActive.mode}:{state:e.outer,mode:t}}}}});