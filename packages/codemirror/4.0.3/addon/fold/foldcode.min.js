(function(e){typeof exports=="object"&&typeof module=="object"?e(require("../../lib/codemirror")):typeof define=="function"&&define.amd?define(["../../lib/codemirror"],e):e(CodeMirror)})(function(e){"use strict";function t(t,r,i,s){function a(e){var n=o(t,r);if(!n||n.to.line-n.from.line<u)return null;var i=t.findMarksAt(n.from);for(var a=0;a<i.length;++a)if(i[a].__isFold&&s!=="fold"){if(!e)return null;n.cleared=!0,i[a].clear()}return n}var o=i&&(i.call?i:i.rangeFinder);o||(o=e.fold.auto),typeof r=="number"&&(r=e.Pos(r,0));var u=i&&i.minFoldSize||0,f=a(!0);if(i&&i.scanUp)while(!f&&r.line>t.firstLine())r=e.Pos(r.line-1,0),f=a(!1);if(!f||f.cleared||s==="unfold")return;var l=n(i);e.on(l,"mousedown",function(){c.clear()});var c=t.markText(f.from,f.to,{replacedWith:l,clearOnEnter:!0,__isFold:!0});c.on("clear",function(n,r){e.signal(t,"unfold",t,n,r)}),e.signal(t,"fold",t,f.from,f.to)}function n(e){var t=e&&e.widget||"â†”";if(typeof t=="string"){var n=document.createTextNode(t);t=document.createElement("span"),t.appendChild(n),t.className="CodeMirror-foldmarker"}return t}e.newFoldFunction=function(e,n){return function(r,i){t(r,i,{rangeFinder:e,widget:n})}},e.defineExtension("foldCode",function(e,n,r){t(this,e,n,r)}),e.defineExtension("isFolded",function(e){var t=this.findMarksAt(e);for(var n=0;n<t.length;++n)if(t[n].__isFold)return!0}),e.commands.toggleFold=function(e){e.foldCode(e.getCursor())},e.commands.fold=function(e){e.foldCode(e.getCursor(),null,"fold")},e.commands.unfold=function(e){e.foldCode(e.getCursor(),null,"unfold")},e.commands.foldAll=function(t){t.operation(function(){for(var n=t.firstLine(),r=t.lastLine();n<=r;n++)t.foldCode(e.Pos(n,0),null,"fold")})},e.commands.unfoldAll=function(t){t.operation(function(){for(var n=t.firstLine(),r=t.lastLine();n<=r;n++)t.foldCode(e.Pos(n,0),null,"unfold")})},e.registerHelper("fold","combine",function(){var e=Array.prototype.slice.call(arguments,0);return function(t,n){for(var r=0;r<e.length;++r){var i=e[r](t,n);if(i)return i}}}),e.registerHelper("fold","auto",function(e,t){var n=e.getHelpers(t,"fold");for(var r=0;r<n.length;r++){var i=n[r](e,t);if(i)return i}})});