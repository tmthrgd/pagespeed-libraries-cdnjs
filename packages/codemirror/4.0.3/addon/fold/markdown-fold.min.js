(function(e){typeof exports=="object"&&typeof module=="object"?e(require("../../lib/codemirror")):typeof define=="function"&&define.amd?define(["../../lib/codemirror"],e):e(CodeMirror)})(function(e){"use strict";e.registerHelper("fold","markdown",function(t,n){function i(n){var r=t.getTokenTypeAt(e.Pos(n,0));return r&&/\bheader\b/.test(r)}function s(e,t,n){var s=t&&t.match(/^#+/);return s&&i(e)?s[0].length:(s=n&&n.match(/^[=\-]+\s*$/),s&&i(e+1)?n[0]=="="?1:2:r)}var r=100,o=t.getLine(n.line),u=t.getLine(n.line+1),a=s(n.line,o,u);if(a===r)return undefined;var f=t.lastLine(),l=n.line,c=t.getLine(l+2);while(l<f){if(s(l+1,u,c)<=a)break;++l,u=c,c=t.getLine(l+2)}return{from:e.Pos(n.line,o.length),to:e.Pos(l,t.getLine(l).length)}})});