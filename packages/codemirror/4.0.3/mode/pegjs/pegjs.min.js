(function(e){typeof exports=="object"&&typeof module=="object"?e(require("../../lib/codemirror"),require("../javascript/javascript")):typeof define=="function"&&define.amd?define(["../../lib/codemirror","../javascript/javascript"],e):e(CodeMirror)})(function(e){"use strict";e.defineMode("pegjs",function(t){function r(e){return e.match(/^[a-zA-Z_][a-zA-Z0-9_]*/)}var n=e.getMode(t,"javascript");return{startState:function(){return{inString:!1,stringType:null,inComment:!1,inChracterClass:!1,braced:0,lhs:!0,localState:null}},token:function(e,t){e&&!t.inString&&!t.inComment&&(e.peek()=='"'||e.peek()=="'")&&(t.stringType=e.peek(),e.next(),t.inString=!0),!t.inString&&!t.inComment&&e.match(/^\/\*/)&&(t.inComment=!0);if(t.inString){while(t.inString&&!e.eol())e.peek()===t.stringType?(e.next(),t.inString=!1):e.peek()==="\\"?(e.next(),e.next()):e.match(/^.[^\\\"\']*/);return t.lhs?"property string":"string"}if(t.inComment){while(t.inComment&&!e.eol())e.match(/\*\//)?t.inComment=!1:e.match(/^.[^\*]*/);return"comment"}if(t.inChracterClass)while(t.inChracterClass&&!e.eol())!e.match(/^[^\]\\]+/)&&!e.match(/^\\./)&&(t.inChracterClass=!1);else{if(e.peek()==="[")return e.next(),t.inChracterClass=!0,"bracket";if(e.match(/^\/\//))return e.skipToEnd(),"comment";if(t.braced||e.peek()==="{"){t.localState===null&&(t.localState=n.startState());var i=n.token(e,t.localState),s=e.current();if(!i)for(var o=0;o<s.length;o++)s[o]==="{"?t.braced++:s[o]==="}"&&t.braced--;return i}if(r(e))return e.peek()===":"?"variable":"variable-2";if(["[","]","(",")"].indexOf(e.peek())!=-1)return e.next(),"bracket";e.eatSpace()||e.next()}return null}}},"javascript")});