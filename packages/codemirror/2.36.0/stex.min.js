CodeMirror.defineMode("stex",function(){function e(e,t){e.cmdState.push(t)}function t(e){return e.cmdState.length>0?e.cmdState[e.cmdState.length-1]:null}function n(e){if(e.cmdState.length>0){var t=e.cmdState.pop();t.closeBracket()}}function i(e){for(var t=e.cmdState,n=t.length-1;n>=0;n--){var i=t[n];if("DEFAULT"!=i.name)return i.styleIdentifier()}return null}function r(e,t,n,i){return function(){this.name=e,this.bracketNo=0,this.style=t,this.styles=i,this.brackets=n,this.styleIdentifier=function(){return this.bracketNo<=this.styles.length?this.styles[this.bracketNo-1]:null},this.openBracket=function(){return this.bracketNo++,"bracket"},this.closeBracket=function(){}}}function a(e,t){e.f=t}function o(n,r){if(n.match(/^\\[a-zA-Z@]+/)){var o=n.current();o=o.substr(1,o.length-1);var u;return u=c.hasOwnProperty(o)?c[o]:c.DEFAULT,u=new u,e(r,u),a(r,l),u.style}if(n.match(/^\\[$&%#{}_]/))return"tag";if(n.match(/^\\[,;!\/]/))return"tag";var d=n.next();return"%"==d?(n.eol()||a(r,s),"comment"):"}"==d||"]"==d?(u=t(r))?(u.closeBracket(d),a(r,l),"bracket"):"error":"{"==d||"["==d?(u=c.DEFAULT,u=new u,e(r,u),"bracket"):/\d/.test(d)?(n.eatWhile(/[\w.%]/),"atom"):(n.eatWhile(/[\w-_]/),i(r))}function s(e,t){return e.skipToEnd(),a(t,o),"comment"}function l(e,i){var r=e.peek();if("{"==r||"["==r){var s=t(i);return s.openBracket(r),e.eat(r),a(i,o),"bracket"}return/[ \t\r]/.test(r)?(e.eat(r),null):(a(i,o),s=t(i),s&&n(i),o(e,i))}var c=[];return c.importmodule=r("importmodule","tag","{[",["string","builtin"]),c.documentclass=r("documentclass","tag","{[",["","atom"]),c.usepackage=r("documentclass","tag","[",["atom"]),c.begin=r("documentclass","tag","[",["atom"]),c.end=r("documentclass","tag","[",["atom"]),c.DEFAULT=function(){this.name="DEFAULT",this.style="tag",this.styleIdentifier=function(){},this.openBracket=function(){},this.closeBracket=function(){}},{startState:function(){return{f:o,cmdState:[]}},copyState:function(e){return{f:e.f,cmdState:e.cmdState.slice(0,e.cmdState.length)}},token:function(e,t){var n=t.f(e,t);return e.current(),n}}}),CodeMirror.defineMIME("text/x-stex","stex"),CodeMirror.defineMIME("text/x-latex","stex");