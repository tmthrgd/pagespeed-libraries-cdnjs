CodeMirror.defineMode("rust",function(){function e(e,t){return U=e,t}function t(t,r){var a=t.next();if('"'==a)return r.tokenize=n,r.tokenize(t,r);if("'"==a)return U="atom",t.eat("\\")?t.skipTo("'")?(t.next(),"string"):"error":(t.next(),t.eat("'")?"string":"error");if("/"==a){if(t.eat("/"))return t.skipToEnd(),"comment";if(t.eat("*"))return r.tokenize=i(1),r.tokenize(t,r)}if("#"==a)return t.eat("[")?(U="open-attr",null):(t.eatWhile(/\w/),e("macro","meta"));if(":"==a&&t.match(":<"))return e("op",null);if(a.match(/\d/)||"."==a&&t.eat(/\d/)){var o=!1;return t.match(/^x[\da-f]+/i)||t.match(/^b[01]+/)||(t.eatWhile(/\d/),t.eat(".")&&(o=!0,t.eatWhile(/\d/)),t.match(/^e[+\-]?\d+/i)&&(o=!0)),o?t.match(/^f(?:32|64)/):t.match(/^[ui](?:8|16|32|64)/),e("atom","number")}return a.match(/[()\[\]{}:;,]/)?e(a,null):"-"==a&&t.eat(">")?e("->",null):a.match(J)?(t.eatWhile(J),e("op",null)):(t.eatWhile(/\w/),q=t.current(),t.match(/^::\w/)?(t.backUp(1),e("prefix","variable-2")):r.keywords.propertyIsEnumerable(q)?e(r.keywords[q],q.match(/true|false/)?"atom":"keyword"):e("name","variable"))}function n(n,i){for(var r,a=!1;r=n.next();){if('"'==r&&!a)return i.tokenize=t,e("atom","string");a=!a&&"\\"==r}return e("op","string")}function i(e){return function(n,r){for(var a,o=null;a=n.next();){if("/"==a&&"*"==o){if(1==e){r.tokenize=t;break}return r.tokenize=i(e-1),r.tokenize(n,r)}if("*"==a&&"/"==o)return r.tokenize=i(e+1),r.tokenize(n,r);o=a}return"comment"}}function r(){for(var e=arguments.length-1;e>=0;e--)Z.cc.push(arguments[e])}function a(){return r.apply(null,arguments),!0}function o(e,t){var n=function(){var n=Z.state;n.lexical={indented:n.indented,column:Z.stream.column(),type:e,prev:n.lexical,info:t}};return n.lex=!0,n}function s(){var e=Z.state;e.lexical.prev&&(")"==e.lexical.type&&(e.indented=e.lexical.indented),e.lexical=e.lexical.prev)}function l(){Z.state.keywords=Y}function c(){Z.state.keywords=G}function u(e,t){function n(i){return","==i?a(e,n):i==t?a():a(n)}return function(i){return i==t?a():r(e,n)}}function d(e,t){return a(o("stat",t),e,s,p)}function p(e){return"}"==e?a():"let"==e?d(k,"let"):"fn"==e?d(T):"type"==e?a(o("stat"),w,m,s,p):"enum"==e?d(x):"mod"==e?d(A):"iface"==e?d(R):"impl"==e?d(I):"open-attr"==e?a(o("]"),u(h,"]"),s):"ignore"==e||e.match(/[\]\);,]/)?a(p):r(o("stat"),h,s,m,p)}function m(e){return";"==e?a():r()}function h(e){return"atom"==e||"name"==e?a(g):"{"==e?a(o("}"),b,s):e.match(/[\[\(]/)?j(e,h):e.match(/[\]\)\};,]/)?r():"if-style"==e?a(h,h):"else-style"==e||"op"==e?a(h):"for"==e?a(B,E,C,h,h):"alt"==e?a(h,M):"fn"==e?a(T):"macro"==e?a($):a()}function g(e){return"."==q?a(f):"::<"==q?a(D,g):"op"==e||":"==q?a(h):"("==e||"["==e?j(e,h):r()}function f(){return q.match(/^\w+$/)?(Z.marked="variable",a(g)):r(h)}function b(e){if("op"==e){if("|"==q)return a(y,s,o("}","block"),p);if("||"==q)return a(s,o("}","block"),p)}return"mutable"==q||q.match(/^\w+$/)&&":"==Z.stream.peek()&&!Z.stream.match("::",!1)?r(v(h)):r(p)}function v(e){function t(n){return"mutable"==q||"with"==q?(Z.marked="keyword",a(t)):q.match(/^\w*$/)?(Z.marked="variable",a(t)):":"==n?a(e,t):"}"==n?a():a(t)}return t}function y(e){return"name"==e?(Z.marked="def",a(y)):"op"==e&&"|"==q?a():a(y)}function k(e){return e.match(/[\]\)\};]/)?a():"="==q?a(h,_):","==e?a(k):r(B,E,k)}function _(e){return e.match(/[\]\)\};,]/)?r(k):r(h,_)}function E(e){return":"==e?a(l,L,c):r()}function C(e){return"name"==e&&"in"==q?(Z.marked="keyword",a()):r()}function T(e){return"@"==q||"~"==q?(Z.marked="keyword",a(T)):"name"==e?(Z.marked="def",a(T)):"<"==q?a(D,T):"{"==e?r(h):"("==e?a(o(")"),u(O,")"),s,T):"->"==e?a(l,L,c,T):";"==e?a():a(T)}function w(e){return"name"==e?(Z.marked="def",a(w)):"<"==q?a(D,w):"="==q?a(l,L,c):a(w)}function x(e){return"name"==e?(Z.marked="def",a(x)):"<"==q?a(D,x):"="==q?a(l,L,c,m):"{"==e?a(o("}"),l,S,c,s):a(x)}function S(e){return"}"==e?a():"("==e?a(o(")"),u(L,")"),s,S):(q.match(/^\w+$/)&&(Z.marked="def"),a(S))}function A(e){return"name"==e?(Z.marked="def",a(A)):"{"==e?a(o("}"),p,s):r()}function R(e){return"name"==e?(Z.marked="def",a(R)):"<"==q?a(D,R):"{"==e?a(o("}"),p,s):r()}function I(e){return"<"==q?a(D,I):"of"==q||"for"==q?(Z.marked="keyword",a(L,I)):"name"==e?(Z.marked="def",a(I)):"{"==e?a(o("}"),p,s):r()}function D(){return">"==q?a():","==q?a(D):":"==q?a(L,D):r(L,D)}function O(e){return"name"==e?(Z.marked="def",a(O)):":"==e?a(l,L,c):r()}function L(e){return"name"==e?(Z.marked="variable-3",a(N)):"mutable"==q?(Z.marked="keyword",a(L)):"atom"==e?a(N):"op"==e||"obj"==e?a(L):"fn"==e?a(F):"{"==e?a(o("{"),v(L),s):j(e,L)}function N(){return"<"==q?a(D):r()}function F(e){return"("==e?a(o("("),u(L,")"),s,F):"->"==e?a(L):r()}function B(e){return"name"==e?(Z.marked="def",a(P)):"atom"==e?a(P):"op"==e?a(B):e.match(/[\]\)\};,]/)?r():j(e,B)}function P(e){return"op"==e&&"."==q?a():"to"==q?(Z.marked="keyword",a(B)):r()}function M(e){return"{"==e?a(o("}","alt"),z,s):r()}function z(e){return"}"==e?a():"|"==e?a(z):"when"==q?(Z.marked="keyword",a(h,K)):e.match(/[\]\);,]/)?a(z):r(B,K)}function K(e){return"{"==e?a(o("}","alt"),p,s,z):r(z)}function $(e){return e.match(/[\[\(\{]/)?j(e,h):r()}function j(e,t){return"["==e?a(o("]"),u(t,"]"),s):"("==e?a(o(")"),u(t,")"),s):"{"==e?a(o("}"),u(t,"}"),s):a()}function H(e,t,n){var i=e.cc;for(Z.state=e,Z.stream=t,Z.marked=null,Z.cc=i;;){var r=i.length?i.pop():p;if(r(U)){for(;i.length&&i[i.length-1].lex;)i.pop()();return Z.marked||n}}}var U,q,V=4,W=2,G={"if":"if-style","while":"if-style","else":"else-style","do":"else-style",ret:"else-style",fail:"else-style","break":"atom",cont:"atom","const":"let",resource:"fn",let:"let",fn:"fn","for":"for",alt:"alt",iface:"iface",impl:"impl",type:"type","enum":"enum",mod:"mod",as:"op","true":"atom","false":"atom",assert:"op",check:"op",claim:"op","native":"ignore",unsafe:"ignore","import":"else-style","export":"else-style",copy:"op",log:"op",log_err:"op",use:"op",bind:"op",self:"atom"},Y=function(){for(var e={fn:"fn",block:"fn",obj:"obj"},t="bool uint int i8 i16 i32 i64 u8 u16 u32 u64 float f32 f64 str char".split(" "),n=0,i=t.length;i>n;++n)e[t[n]]="atom";return e}(),J=/[+\-*&%=<>!?|\.@]/,Z={state:null,stream:null,marked:null,cc:null};return s.lex=l.lex=c.lex=!0,{startState:function(){return{tokenize:t,cc:[],lexical:{indented:-V,column:0,type:"top",align:!1},keywords:G,indented:0}},token:function(e,t){if(e.sol()&&(t.lexical.hasOwnProperty("align")||(t.lexical.align=!1),t.indented=e.indentation()),e.eatSpace())return null;U=q=null;var n=t.tokenize(e,t);return"comment"==n?n:(t.lexical.hasOwnProperty("align")||(t.lexical.align=!0),"prefix"==U?n:(q||(q=e.current()),H(t,e,n)))},indent:function(e,n){if(e.tokenize!=t)return 0;var i=n&&n.charAt(0),r=e.lexical,a=r.type,o=i==a;return"stat"==a?r.indented+V:r.align?r.column+(o?0:1):r.indented+(o?0:"alt"==r.info?W:V)},electricChars:"{}"}}),CodeMirror.defineMIME("text/x-rustsrc","rust");