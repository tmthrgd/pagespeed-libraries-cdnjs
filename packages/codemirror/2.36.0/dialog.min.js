(function(){function e(e,t){var n=e.getWrapperElement(),i=n.insertBefore(document.createElement("div"),n.firstChild);return i.className="CodeMirror-dialog",i.innerHTML="<div>"+t+"</div>",i}CodeMirror.defineExtension("openDialog",function(t,n){function i(){o||(o=!0,r.parentNode.removeChild(r))}var a,r=e(this,t),o=!1,s=this,l=r.getElementsByTagName("input")[0];return l?(CodeMirror.connect(l,"keydown",function(e){(13==e.keyCode||27==e.keyCode)&&(CodeMirror.e_stop(e),i(),s.focus(),13==e.keyCode&&n(l.value))}),l.focus(),CodeMirror.connect(l,"blur",i)):(a=r.getElementsByTagName("button")[0])&&(CodeMirror.connect(a,"click",function(){i(),s.focus()}),a.focus(),CodeMirror.connect(a,"blur",i)),i}),CodeMirror.defineExtension("openConfirm",function(t,n){function i(){o||(o=!0,a.parentNode.removeChild(a),s.focus())}var a=e(this,t),r=a.getElementsByTagName("button"),o=!1,s=this,l=1;r[0].focus();for(var c=0;r.length>c;++c){var u=r[c];(function(e){CodeMirror.connect(u,"click",function(t){CodeMirror.e_preventDefault(t),i(),e&&e(s)})})(n[c]),CodeMirror.connect(u,"blur",function(){--l,setTimeout(function(){0>=l&&i()},200)}),CodeMirror.connect(u,"focus",function(){++l})}})})();