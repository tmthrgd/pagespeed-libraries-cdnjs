CodeMirror.defineMode("markdown",function(e,t){function n(e,t,n){return t.f=t.inline=n,n(e,t)}function i(e,t,n){return t.f=t.block=n,n(e,t)}function a(e){return e.linkTitle=!1,e.em=!1,e.strong=!1,e.quote=!1,f||e.f!=o||(e.f=u,e.block=r),null}function r(e,a){if(a.list!==!1&&a.indentationDiff>=0?(4>a.indentationDiff&&(a.indentation-=a.indentationDiff),a.list=null):a.list=!1,a.indentationDiff>=4)return a.indentation-=4,e.skipToEnd(),T;if(e.eatSpace())return null;if("#"===e.peek()||_&&e.match(M))a.header=!0;else if(e.eat(">"))a.indentation++,a.quote=!0;else{if("["===e.peek())return n(e,a,p);if(e.match(B,!0))return S;if(e.match(P,!0)||e.match(z,!0))a.indentation+=4,a.list=!0;else if(t.fencedCodeBlocks&&e.match(/^```([\w+#]*)/,!0))return a.localMode=y(RegExp.$1),a.localMode&&(a.localState=a.localMode.startState()),i(e,a,s),T}return n(e,a,a.inline)}function o(e,t){var n=b.token(e,t.htmlState);return f&&"tag"===n&&"openTag"!==t.htmlState.type&&!t.htmlState.context&&(t.f=u,t.block=r),t.md_inside&&-1!=e.current().indexOf(">")&&(t.f=u,t.block=r,t.htmlState.context=void 0),n}function s(e,t){return e.sol()&&e.match(/^```/,!0)?(t.localMode=t.localState=null,t.f=u,t.block=r,T):t.localMode?t.localMode.token(e,t.localState):(e.skipToEnd(),T)}function l(e){var t=[];return e.strong?t.push(e.em?F:N):e.em&&t.push(L),e.linkText&&t.push(D),e.code&&t.push(T),e.header&&t.push(E),e.quote&&t.push(w),e.list!==!1&&t.push(x),t.length?t.join(" "):null}function c(e,t){return e.match(K,!0)?l(t):void 0}function u(e,a){var r=a.text(e,a);if(r!==void 0)return r;if(a.list)return a.list=null,x;var s=e.next();if("\\"===s)return e.next(),l(a);if(a.linkTitle){a.linkTitle=!1;var c=s;"("===s&&(c=")"),c=(c+"").replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1");var u="^\\s*(?:[^"+c+"\\\\]+|\\\\\\\\|\\\\.)"+c;if(e.match(RegExp(u),!0))return O}if("`"===s){var p=l(a),m=e.pos;e.eatWhile("`");var h=1+e.pos-m;return a.code?h===k?(a.code=!1,p):l(a):(k=h,a.code=!0,l(a))}if(a.code)return l(a);if("!"===s&&e.match(/\[.*\] ?(?:\(|\[)/,!1))return e.match(/\[.*\]/),a.inline=a.f=d,A;if("["===s&&e.match(/.*\](\(| ?\[)/,!1))return a.linkText=!0,l(a);if("]"===s&&a.linkText){var f=l(a);return a.linkText=!1,a.inline=a.f=d,f}if("<"===s&&e.match(/^(https?|ftps?):\/\/(?:[^\\>]|\\.)+>/,!0))return n(e,a,g(R,">"));if("<"===s&&e.match(/^[^> \\]+@(?:[^\\>]|\\.)+>/,!0))return n(e,a,g(I,">"));if("<"===s&&e.match(/^\w/,!1)){if(-1!=e.string.indexOf(">")){var b=e.string.substring(1,e.string.indexOf(">"));/markdown\s*=\s*('|"){0,1}1('|"){0,1}/.test(b)&&(a.md_inside=!0)}return e.backUp(1),i(e,a,o)}if("<"===s&&e.match(/^\/\w*?>/))return a.md_inside=!1,"tag";var v=!1;if(!t.underscoresBreakWords&&"_"===s&&"_"!==e.peek()&&e.match(/(\w)/,!1)){var y=e.pos-2;if(y>=0){var _=e.string.charAt(y);"_"!==_&&_.match(/(\w)/,!1)&&(v=!0)}}var p=l(a);if("*"===s||"_"===s&&!v){if(a.strong===s&&e.eat(s))return a.strong=!1,p;if(!a.strong&&e.eat(s))return a.strong=s,l(a);if(a.em===s)return a.em=!1,p;if(!a.em)return a.em=s,l(a)}else if(" "===s&&(e.eat("*")||e.eat("_"))){if(" "===e.peek())return l(a);e.backUp(1)}return l(a)}function d(e,t){if(e.eatSpace())return null;var i=e.next();return"("===i||"["===i?n(e,t,g(O,"("===i?")":"]")):"error"}function p(e,t){return e.match(/^[^\]]*\]:/,!0)?(t.f=m,D):n(e,t,u)}function m(e,t){return e.eatSpace()?null:(e.match(/^[^\s]+/,!0),void 0===e.peek()?t.linkTitle=!0:e.match(/^(?:\s+(?:"(?:[^"\\]|\\\\|\\.)+"|'(?:[^'\\]|\\\\|\\.)+'|\((?:[^)\\]|\\\\|\\.)+\)))?/,!0),t.f=t.inline=u,O)}function h(e){return $[e]||(e=(e+"").replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1"),$[e]=RegExp("^(?:[^\\\\]|\\\\.)*?("+e+")")),$[e]}function g(e,t,n){return n=n||u,function(i,a){return i.match(h(t)),a.inline=a.f=n,e}}var f=CodeMirror.mimeModes.hasOwnProperty("text/html"),b=CodeMirror.getMode(e,f?"text/html":"text/plain"),v={html:"htmlmixed",js:"javascript",json:"application/json",c:"text/x-csrc","c++":"text/x-c++src",java:"text/x-java",csharp:"text/x-csharp","c#":"text/x-csharp"},y=function(){var t,n,i={},a={},r=CodeMirror.listModes();for(t=0;r.length>t;t++)i[r[t]]=r[t];var o=CodeMirror.listMIMEs();for(t=0;o.length>t;t++)n=o[t].mime,a[n]=o[t].mime;for(var s in v)(v[s]in i||v[s]in a)&&(i[s]=v[s]);return function(t){return i[t]?CodeMirror.getMode(e,i[t]):null}}();void 0===t.underscoresBreakWords&&(t.underscoresBreakWords=!0),void 0===t.fencedCodeBlocks&&(t.fencedCodeBlocks=!1);var k=0,_=!1,C=!1,E="header",T="comment",w="quote",x="string",S="hr",A="tag",R="link",I="link",D="link",O="string",L="em",N="strong",F="emstrong",B=/^([*\-=_])(?:\s*\1){2,}\s*$/,P=/^[*\-+]\s+/,z=/^[0-9]+\.\s+/,M=/^(?:\={1,}|-{1,})$/,K=/^[^!\[\]*_\\<>` "'(]+/,$=[];return{startState:function(){return _=!1,C=!1,{f:r,block:r,htmlState:CodeMirror.startState(b),indentation:0,inline:u,text:c,linkText:!1,linkTitle:!1,em:!1,strong:!1,header:!1,list:!1,quote:!1}},copyState:function(e){return{f:e.f,block:e.block,htmlState:CodeMirror.copyState(b,e.htmlState),indentation:e.indentation,localMode:e.localMode,localState:e.localMode?CodeMirror.copyState(e.localMode,e.localState):null,inline:e.inline,text:e.text,linkTitle:e.linkTitle,em:e.em,strong:e.strong,header:e.header,list:e.list,quote:e.quote,md_inside:e.md_inside}},token:function(e,t){if(e.sol()){if(e.match(/^\s*$/,!0))return _=!1,a(t);C&&(_=!0,C=!1),C=!0,t.header=!1,t.code=!1,t.f=t.block;var n=e.match(/^\s*/,!0)[0].replace(/\t/g,"    ").length,i=4*Math.floor((n-t.indentation)/4);if(i>4&&(i=4),n=t.indentation+i,t.indentationDiff=n-t.indentation,t.indentation=n,n>0)return null}return t.f(e,t)},blankLine:a,getType:l}},"xml"),CodeMirror.defineMIME("text/x-markdown","markdown");