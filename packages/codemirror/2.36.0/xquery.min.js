CodeMirror.defineMode("xquery",function(){function e(e,t,n){return y=e,k=n,t}function t(e,t,n){return t.tokenize=n,n(e,t)}function n(n,s){var p=n.next(),h=!1,f=g(n);if("<"==p){if(n.match("!--",!0))return t(n,s,l);if(n.match("![CDATA",!1))return s.tokenize=c,e("tag","tag");if(n.match("?",!1))return t(n,s,u);var y=n.eat("/");n.eatSpace();for(var k,C="";k=n.eat(/[^\s\u00a0=<>\"\'\/?]/);)C+=k;return t(n,s,o(C,y))}if("{"==p)return b(s,{type:"codeblock"}),e("","");if("}"==p)return v(s),e("","");if(d(s))return">"==p?e("tag","tag"):"/"==p&&n.eat(">")?(v(s),e("tag","tag")):e("word","variable");if(/\d/.test(p))return n.match(/^\d*(?:\.\d*)?(?:E[+\-]?\d+)?/),e("number","atom");if("("===p&&n.eat(":"))return b(s,{type:"comment"}),t(n,s,i);if(f||'"'!==p&&"'"!==p){if("$"===p)return t(n,s,a);if(":"===p&&n.eat("="))return e("operator","keyword");if("("===p)return b(s,{type:"paren"}),e("","");if(")"===p)return v(s),e("","");if("["===p)return b(s,{type:"bracket"}),e("","");if("]"===p)return v(s),e("","");var E=_.propertyIsEnumerable(p)&&_[p];if(f&&'"'===p)for(;'"'!==n.next(););if(f&&"'"===p)for(;"'"!==n.next(););E||n.eatWhile(/[\w\$_-]/);var T=n.eat(":");!n.eat(":")&&T&&n.eatWhile(/[\w\$_-]/),n.match(/^[ \t]*\(/,!1)&&(h=!0);var w=n.current();return E=_.propertyIsEnumerable(w)&&_[w],h&&!E&&(E={type:"function_call",style:"variable def"}),m(s)?(v(s),e("word","variable",w)):(("element"==w||"attribute"==w||"axis_specifier"==E.type)&&b(s,{type:"xmlconstructor"}),E?e(E.type,E.style,w):e("word","variable",w))}return t(n,s,r(p))}function i(t,n){for(var i,r=!1,a=!1,o=0;i=t.next();){if(")"==i&&r){if(!(o>0)){v(n);break}o--}else":"==i&&a&&o++;r=":"==i,a="("==i}return e("comment","comment")}function r(t,i){return function(a,o){var s;if(h(o)&&a.current()==t)return v(o),i&&(o.tokenize=i),e("string","string");if(b(o,{type:"string",name:t,tokenize:r(t,i)}),a.match("{",!1)&&p(o))return o.tokenize=n,e("string","string");for(;s=a.next();){if(s==t){v(o),i&&(o.tokenize=i);break}if(a.match("{",!1)&&p(o))return o.tokenize=n,e("string","string")}return e("string","string")}}function a(t,i){var r=/[\w\$_-]/;if(t.eat('"')){for(;'"'!==t.next(););t.eat(":")}else t.eatWhile(r),t.match(":=",!1)||t.eat(":");return t.eatWhile(r),i.tokenize=n,e("variable","variable")}function o(t,i){return function(r,a){return r.eatSpace(),i&&r.eat(">")?(v(a),a.tokenize=n,e("tag","tag")):(r.eat("/")||b(a,{type:"tag",name:t,tokenize:n}),r.eat(">")?(a.tokenize=n,e("tag","tag")):(a.tokenize=s,e("tag","tag")))}}function s(i,a){var o=i.next();return"/"==o&&i.eat(">")?(p(a)&&v(a),d(a)&&v(a),e("tag","tag")):">"==o?(p(a)&&v(a),e("tag","tag")):"="==o?e("",""):'"'==o||"'"==o?t(i,a,r(o,s)):(p(a)||b(a,{type:"attribute",name:name,tokenize:s}),i.eat(/[a-zA-Z_:]/),i.eatWhile(/[-a-zA-Z0-9_:.]/),i.eatSpace(),(i.match(">",!1)||i.match("/",!1))&&(v(a),a.tokenize=n),e("attribute","attribute"))}function l(t,i){for(var r;r=t.next();)if("-"==r&&t.match("->",!0))return i.tokenize=n,e("comment","comment")}function c(t,i){for(var r;r=t.next();)if("]"==r&&t.match("]",!0))return i.tokenize=n,e("comment","comment")}function u(t,i){for(var r;r=t.next();)if("?"==r&&t.match(">",!0))return i.tokenize=n,e("comment","comment meta")}function d(e){return f(e,"tag")}function p(e){return f(e,"attribute")}function m(e){return f(e,"xmlconstructor")}function h(e){return f(e,"string")}function g(e){return'"'===e.current()?e.match(/^[^\"]+\"\:/,!1):"'"===e.current()?e.match(/^[^\"]+\'\:/,!1):!1}function f(e,t){return e.stack.length&&e.stack[e.stack.length-1].type==t}function b(e,t){e.stack.push(t)}function v(e){e.stack.pop();var t=e.stack.length&&e.stack[e.stack.length-1].tokenize;e.tokenize=t||n}var y,k,_=function(){function e(e){return{type:e,style:"keyword"}}for(var t=e("keyword a"),n=e("keyword b"),i=e("keyword c"),r=e("operator"),a={type:"atom",style:"atom"},o={type:"punctuation",style:""},s={type:"axis_specifier",style:"qualifier"},l={"if":t,"switch":t,"while":t,"for":t,"else":n,then:n,"try":n,"finally":n,"catch":n,element:i,attribute:i,let:i,"implements":i,"import":i,module:i,namespace:i,"return":i,"super":i,"this":i,"throws":i,where:i,"private":i,",":o,"null":a,"fn:false()":a,"fn:true()":a},c=["after","ancestor","ancestor-or-self","and","as","ascending","assert","attribute","before","by","case","cast","child","comment","declare","default","define","descendant","descendant-or-self","descending","document","document-node","element","else","eq","every","except","external","following","following-sibling","follows","for","function","if","import","in","instance","intersect","item","let","module","namespace","node","node","of","only","or","order","parent","precedes","preceding","preceding-sibling","processing-instruction","ref","return","returns","satisfies","schema","schema-element","self","some","sortby","stable","text","then","to","treat","typeswitch","union","variable","version","where","xquery","empty-sequence"],u=0,d=c.length;d>u;u++)l[c[u]]=e(c[u]);for(var p=["xs:string","xs:float","xs:decimal","xs:double","xs:integer","xs:boolean","xs:date","xs:dateTime","xs:time","xs:duration","xs:dayTimeDuration","xs:time","xs:yearMonthDuration","numeric","xs:hexBinary","xs:base64Binary","xs:anyURI","xs:QName","xs:byte","xs:boolean","xs:anyURI","xf:yearMonthDuration"],u=0,d=p.length;d>u;u++)l[p[u]]=a;for(var m=["eq","ne","lt","le","gt","ge",":=","=",">",">=","<","<=",".","|","?","and","or","div","idiv","mod","*","/","+","-"],u=0,d=m.length;d>u;u++)l[m[u]]=r;for(var h=["self::","attribute::","child::","descendant::","descendant-or-self::","parent::","ancestor::","ancestor-or-self::","following::","preceding::","following-sibling::","preceding-sibling::"],u=0,d=h.length;d>u;u++)l[h[u]]=s;return l}();return{startState:function(){return{tokenize:n,cc:[],stack:[]}},token:function(e,t){if(e.eatSpace())return null;var n=t.tokenize(e,t);return n}}}),CodeMirror.defineMIME("application/xquery","xquery");