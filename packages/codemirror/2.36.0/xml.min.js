CodeMirror.defineMode("xml",function(e,t){function n(e,t){function n(n){return t.tokenize=n,n(e,t)}var r=e.next();if("<"==r){if(e.eat("!"))return e.eat("[")?e.match("CDATA[")?n(a("atom","]]>")):null:e.match("--")?n(a("comment","-->")):e.match("DOCTYPE",!0,!0)?(e.eatWhile(/[\w\._\-]/),n(o(1))):null;if(e.eat("?"))return e.eatWhile(/[\w\._\-]/),t.tokenize=a("meta","?>"),"meta";var s=e.eat("/");y="";for(var l;l=e.eat(/[^\s\u00a0=<>\"\'\/?]/);)y+=l;return y?(k=s?"closeTag":"openTag",t.tokenize=i,"tag"):"error"}if("&"==r){var c;return c=e.eat("#")?e.eat("x")?e.eatWhile(/[a-fA-F\d]/)&&e.eat(";"):e.eatWhile(/[\d]/)&&e.eat(";"):e.eatWhile(/[\w\.\-:]/)&&e.eat(";"),c?"atom":"error"}return e.eatWhile(/[^&<]/),null}function i(e,t){var i=e.next();return">"==i||"/"==i&&e.eat(">")?(t.tokenize=n,k=">"==i?"endTag":"selfcloseTag","tag"):"="==i?(k="equals",null):/[\'\"]/.test(i)?(t.tokenize=r(i),t.tokenize(e,t)):(e.eatWhile(/[^\s\u00a0=<>\"\']/),"word")}function r(e){return function(t,n){for(;!t.eol();)if(t.next()==e){n.tokenize=i;break}return"string"}}function a(e,t){return function(i,r){for(;!i.eol();){if(i.match(t)){r.tokenize=n;break}i.next()}return e}}function o(e){return function(t,i){for(var r;null!=(r=t.next());){if("<"==r)return i.tokenize=o(e+1),i.tokenize(t,i);if(">"==r){if(1==e){i.tokenize=n;break}return i.tokenize=o(e-1),i.tokenize(t,i)}}return"meta"}}function s(){for(var e=arguments.length-1;e>=0;e--)_.cc.push(arguments[e])}function l(){return s.apply(null,arguments),!0}function c(e,t){var n=T.doNotIndent.hasOwnProperty(e)||_.context&&_.context.noIndent;_.context={prev:_.context,tagName:e,indent:_.indented,startOfLine:t,noIndent:n}}function u(){_.context&&(_.context=_.context.prev)}function d(e){if("openTag"==e)return _.tagName=y,l(g,p(_.startOfLine));if("closeTag"==e){var t=!1;return _.context?_.context.tagName!=y&&(T.implicitlyClosed.hasOwnProperty(_.context.tagName.toLowerCase())&&u(),t=!_.context||_.context.tagName!=y):t=!0,t&&(C="error"),l(m(t))}return l()}function p(e){return function(t){return"selfcloseTag"==t||"endTag"==t&&T.autoSelfClosers.hasOwnProperty(_.tagName.toLowerCase())?(h(_.tagName.toLowerCase()),l()):"endTag"==t?(h(_.tagName.toLowerCase()),c(_.tagName,e),l()):l()}}function m(e){return function(t){return e&&(C="error"),"endTag"==t?(u(),l()):(C="error",l(arguments.callee))}}function h(e){for(var t;;){if(!_.context)return;if(t=_.context.tagName.toLowerCase(),!T.contextGrabbers.hasOwnProperty(t)||!T.contextGrabbers[t].hasOwnProperty(e))return;u()}}function g(e){return"word"==e?(C="attribute",l(f,g)):"endTag"==e||"selfcloseTag"==e?s():(C="error",l(g))}function f(e){return"equals"==e?l(b,g):(T.allowMissing?"word"==e&&(C="attribute"):C="error","endTag"==e||"selfcloseTag"==e?s():l())}function b(e){return"string"==e?l(v):"word"==e&&T.allowUnquoted?(C="string",l()):(C="error","endTag"==e||"selfCloseTag"==e?s():l())}function v(e){return"string"==e?l(v):s()}var y,k,_,C,E=e.indentUnit,T=t.htmlMode?{autoSelfClosers:{area:!0,base:!0,br:!0,col:!0,command:!0,embed:!0,frame:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0},implicitlyClosed:{dd:!0,li:!0,optgroup:!0,option:!0,p:!0,rp:!0,rt:!0,tbody:!0,td:!0,tfoot:!0,th:!0,tr:!0},contextGrabbers:{dd:{dd:!0,dt:!0},dt:{dd:!0,dt:!0},li:{li:!0},option:{option:!0,optgroup:!0},optgroup:{optgroup:!0},p:{address:!0,article:!0,aside:!0,blockquote:!0,dir:!0,div:!0,dl:!0,fieldset:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,menu:!0,nav:!0,ol:!0,p:!0,pre:!0,section:!0,table:!0,ul:!0},rp:{rp:!0,rt:!0},rt:{rp:!0,rt:!0},tbody:{tbody:!0,tfoot:!0},td:{td:!0,th:!0},tfoot:{tbody:!0},th:{td:!0,th:!0},thead:{tbody:!0,tfoot:!0},tr:{tr:!0}},doNotIndent:{pre:!0},allowUnquoted:!0,allowMissing:!0}:{autoSelfClosers:{},implicitlyClosed:{},contextGrabbers:{},doNotIndent:{},allowUnquoted:!1,allowMissing:!1},w=t.alignCDATA;return{startState:function(){return{tokenize:n,cc:[],indented:0,startOfLine:!0,tagName:null,context:null}},token:function(e,t){if(e.sol()&&(t.startOfLine=!0,t.indented=e.indentation()),e.eatSpace())return null;C=k=y=null;var n=t.tokenize(e,t);if(t.type=k,(n||k)&&"comment"!=n)for(_=t;;){var i=t.cc.pop()||d;if(i(k||n))break}return t.startOfLine=!1,C||n},indent:function(e,t,r){var a=e.context;if(e.tokenize!=i&&e.tokenize!=n||a&&a.noIndent)return r?r.match(/^(\s*)/)[0].length:0;if(w&&/<!\[CDATA\[/.test(t))return 0;for(a&&/^<\//.test(t)&&(a=a.prev);a&&!a.startOfLine;)a=a.prev;return a?a.indent+E:0},electricChars:"/"}}),CodeMirror.defineMIME("text/xml","xml"),CodeMirror.defineMIME("application/xml","xml"),CodeMirror.mimeModes.hasOwnProperty("text/html")||CodeMirror.defineMIME("text/html",{name:"xml",htmlMode:!0});