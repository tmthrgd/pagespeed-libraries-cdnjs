CodeMirror.defineMode("htmlmixed",function(e){function t(e,t){var n=r.token(e,t.htmlState);return"tag"==n&&">"==e.current()&&t.htmlState.context&&(/^script$/i.test(t.htmlState.context.tagName)?(t.token=i,t.localState=o.startState(r.indent(t.htmlState,""))):/^style$/i.test(t.htmlState.context.tagName)&&(t.token=a,t.localState=s.startState(r.indent(t.htmlState,"")))),n}function n(e,t,n){var i,a=e.current(),r=a.search(t);return r>-1?e.backUp(a.length-r):(i=a.match(/<\/?$/))&&(e.backUp(a.length),e.match(t,!1)||e.match(a[0])),n}function i(e,i){return e.match(/^<\/\s*script\s*>/i,!1)?(i.token=t,i.localState=null,t(e,i)):n(e,/<\/\s*script\s*>/,o.token(e,i.localState))}function a(e,i){return e.match(/^<\/\s*style\s*>/i,!1)?(i.token=t,i.localState=null,t(e,i)):n(e,/<\/\s*style\s*>/,s.token(e,i.localState))}var r=CodeMirror.getMode(e,{name:"xml",htmlMode:!0}),o=CodeMirror.getMode(e,"javascript"),s=CodeMirror.getMode(e,"css");return{startState:function(){var e=r.startState();return{token:t,localState:null,mode:"html",htmlState:e}},copyState:function(e){if(e.localState)var t=CodeMirror.copyState(e.token==a?s:o,e.localState);return{token:e.token,localState:t,mode:e.mode,htmlState:CodeMirror.copyState(r,e.htmlState)}},token:function(e,t){return t.token(e,t)},indent:function(e,n){return e.token==t||/^\s*<\//.test(n)?r.indent(e.htmlState,n):e.token==i?o.indent(e.localState,n):s.indent(e.localState,n)},electricChars:"/{}:",innerMode:function(e){var n=e.token==t?r:e.token==i?o:s;return{state:e.localState||e.htmlState,mode:n}}}},"xml","javascript","css"),CodeMirror.defineMIME("text/html","htmlmixed");