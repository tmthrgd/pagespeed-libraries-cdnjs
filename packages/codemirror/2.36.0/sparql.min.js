CodeMirror.defineMode("sparql",function(e){function t(e){return RegExp("^(?:"+e.join("|")+")$","i")}function n(e,t){var n=e.next();if(o=null,"$"==n||"?"==n)return e.match(/^[\w\d]*/),"variable-2";if("<"!=n||e.match(/^[\s\u00a0=]/,!1)){if('"'==n||"'"==n)return t.tokenize=i(n),t.tokenize(e,t);if(/[{}\(\),\.;\[\]]/.test(n))return o=n,null;if("#"==n)return e.skipToEnd(),"comment";if(u.test(n))return e.eatWhile(u),null;if(":"==n)return e.eatWhile(/[\w\d\._\-]/),"atom";if(e.eatWhile(/[_\w\d]/),e.eat(":"))return e.eatWhile(/[\w\d_\-]/),"atom";var r=e.current();return l.test(r)?null:c.test(r)?"keyword":"variable"}return e.match(/^[^\s\u00a0>]*>?/),"atom"}function i(e){return function(t,i){for(var r,a=!1;null!=(r=t.next());){if(r==e&&!a){i.tokenize=n;break}a=!a&&"\\"==r}return"string"}}function r(e,t,n){e.context={prev:e.context,indent:e.indent,col:n,type:t}}function a(e){e.indent=e.context.indent,e.context=e.context.prev}var o,s=e.indentUnit,l=t(["str","lang","langmatches","datatype","bound","sameterm","isiri","isuri","isblank","isliteral","union","a"]),c=t(["base","prefix","select","distinct","reduced","construct","describe","ask","from","named","where","order","limit","offset","filter","optional","graph","by","asc","desc"]),u=/[*+\-<>=&|]/;return{startState:function(){return{tokenize:n,context:null,indent:0,col:0}},token:function(e,t){if(e.sol()&&(t.context&&null==t.context.align&&(t.context.align=!1),t.indent=e.indentation()),e.eatSpace())return null;var n=t.tokenize(e,t);if("comment"!=n&&t.context&&null==t.context.align&&"pattern"!=t.context.type&&(t.context.align=!0),"("==o)r(t,")",e.column());else if("["==o)r(t,"]",e.column());else if("{"==o)r(t,"}",e.column());else if(/[\]\}\)]/.test(o)){for(;t.context&&"pattern"==t.context.type;)a(t);t.context&&o==t.context.type&&a(t)}else"."==o&&t.context&&"pattern"==t.context.type?a(t):/atom|string|variable/.test(n)&&t.context&&(/[\}\]]/.test(t.context.type)?r(t,"pattern",e.column()):"pattern"!=t.context.type||t.context.align||(t.context.align=!0,t.context.col=e.column()));return n},indent:function(e,t){var n=t&&t.charAt(0),i=e.context;if(/[\]\}]/.test(n))for(;i&&"pattern"==i.type;)i=i.prev;var r=i&&n==i.type;return i?"pattern"==i.type?i.col:i.align?i.col+(r?0:1):i.indent+(r?0:s):0}}}),CodeMirror.defineMIME("application/x-sparql-query","sparql");