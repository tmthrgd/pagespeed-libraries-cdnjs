function splitLines(e){return e.split(/\r?\n|\r/)}function StringStream(e){this.pos=this.start=0,this.string=e}StringStream.prototype={eol:function(){return this.pos>=this.string.length},sol:function(){return 0==this.pos},peek:function(){return this.string.charAt(this.pos)||null},next:function(){return this.pos<this.string.length?this.string.charAt(this.pos++):void 0},eat:function(e){var t=this.string.charAt(this.pos);if("string"==typeof e)var n=t==e;else var n=t&&(e.test?e.test(t):e(t));return n?(++this.pos,t):void 0},eatWhile:function(e){for(var t=this.pos;this.eat(e););return this.pos>t},eatSpace:function(){for(var e=this.pos;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>e},skipToEnd:function(){this.pos=this.string.length},skipTo:function(e){var t=this.string.indexOf(e,this.pos);return t>-1?(this.pos=t,!0):void 0},backUp:function(e){this.pos-=e},column:function(){return this.start},indentation:function(){return 0},match:function(e,t,n){function i(e){return n?e.toLowerCase():e}if("string"!=typeof e){var r=this.string.slice(this.pos).match(e);return r&&t!==!1&&(this.pos+=r[0].length),r}return i(this.string).indexOf(i(e),this.pos)==this.pos?(t!==!1&&(this.pos+=e.length),!0):void 0},current:function(){return this.string.slice(this.start,this.pos)}},exports.StringStream=StringStream,exports.startState=function(e,t,n){return e.startState?e.startState(t,n):!0};var modes=exports.modes={},mimeModes=exports.mimeModes={};exports.defineMode=function(e,t){modes[e]=t},exports.defineMIME=function(e,t){mimeModes[e]=t},exports.getMode=function(e,t){if("string"==typeof t&&mimeModes.hasOwnProperty(t)&&(t=mimeModes[t]),"string"==typeof t)var n=t,i={};else if(null!=t)var n=t.name,i=t;var r=modes[n];if(!r)throw Error("Unknown mode: "+t);return r(e,i||{})},exports.runMode=function(e,t,n){for(var i=exports.getMode({indentUnit:2},t),r=splitLines(e),a=exports.startState(i),o=0,s=r.length;s>o;++o){o&&n("\n");for(var l=new exports.StringStream(r[o]);!l.eol();){var c=i.token(l,a);n(l.current(),c,o,l.start),l.start=l.pos}}};