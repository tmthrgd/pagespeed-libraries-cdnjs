/*
Gherkin mode - http://www.cukes.info/
Report bugs/issues here: https://github.com/marijnh/CodeMirror/issues
*/// Following Objs from Brackets implementation: https://github.com/tregusti/brackets-gherkin/blob/master/main.js
//var Quotes = {
//  SINGLE: 1,
//  DOUBLE: 2
//};
//var regex = {
//  keywords: /(Feature| {2}(Scenario|In order to|As|I)| {4}(Given|When|Then|And))/
//};
CodeMirror.defineMode("gherkin",function(){return{startState:function(){return{lineNumber:0,tableHeaderLine:null,allowFeature:!0,allowBackground:!1,allowScenario:!1,allowSteps:!1,allowPlaceholders:!1,inMultilineArgument:!1,inMultilineString:!1,inMultilineTable:!1}},token:function(e,t){e.sol()&&t.lineNumber++,e.eatSpace();if(t.inMultilineArgument)return t.inMultilineString?(e.match('"""')?(t.inMultilineString=!1,t.inMultilineArgument=!1):e.match(/.*/),"string"):t.inMultilineTable?(t.tableHeaderLine===null&&(t.tableHeaderLine=t.lineNumber),e.match(/\|\s*/)?(e.eol()&&(t.inMultilineTable=!1),"bracket"):(e.match(/[^\|]*/),t.tableHeaderLine===t.lineNumber?"property":"string")):e.match('"""')?(t.inMultilineString=!0,"string"):e.match("|")?(t.inMultilineTable=!0,"bracket"):(t.inMultilineArgument=!1,t.tableHeaderLine=null,null);return e.match(/#.*/)?"comment":e.match(/@\S+/)?"def":t.allowFeature&&e.match(/Feature:/)?(t.allowScenario=!0,t.allowBackground=!0,t.allowPlaceholders=!1,t.allowSteps=!1,"keyword"):t.allowBackground&&e.match("Background:")?(t.allowPlaceholders=!1,t.allowSteps=!0,t.allowBackground=!1,"keyword"):t.allowScenario&&e.match("Scenario Outline:")?(t.allowPlaceholders=!0,t.allowSteps=!0,"keyword"):t.allowScenario&&e.match("Examples:")?(t.allowPlaceholders=!1,t.allowSteps=!0,t.allowBackground=!1,t.inMultilineArgument=!0,"keyword"):t.allowScenario&&e.match(/Scenario:/)?(t.allowPlaceholders=!1,t.allowSteps=!0,t.allowBackground=!1,"keyword"):t.allowSteps&&e.match(/(Given|When|Then|And|But)/)?"keyword":!t.inMultilineArgument&&e.match(/"/)?(e.match(/.*?"/),"string"):t.allowSteps&&e.eat(":")?e.match(/\s*$/)?(t.inMultilineArgument=!0,"keyword"):null:t.allowSteps&&e.match("<")?e.match(/.*?>/)?"property":null:(e.eatWhile(/[^":<]/),null)}}}),CodeMirror.defineMIME("text/x-feature","gherkin");