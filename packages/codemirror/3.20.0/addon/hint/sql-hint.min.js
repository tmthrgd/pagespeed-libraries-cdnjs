(function(){"use strict";function n(e){var t=e.doc.modeOption;return t==="sql"&&(t="text/x-sql"),CodeMirror.resolveMode(t).keywords}function r(e,t){var n=e.length,r=t.substr(0,n);return e.toUpperCase()===r.toUpperCase()}function i(e,t,n,i){for(var s in n){if(!n.hasOwnProperty(s))continue;Array.isArray(n)&&(s=n[s]),r(t,s)&&e.push(i(s))}}function s(t,n){var r=n.getCursor(),s=n.getTokenAt(r),o=s.string.substr(1),a=CodeMirror.Pos(r.line,s.start),f=n.getTokenAt(a).string,l=e[f];l||(f=u(f,n)),l=e[f];if(!l)return;i(t,o,l,function(e){return"."+e})}function o(e,t){var n=e.text.split(" ");for(var r=0;r<n.length;r++)t(n[r])}function u(t,n){var r=t.toUpperCase(),i="",s="";return n.eachLine(function(t){o(t,function(t){var n=t.toUpperCase();n===r&&e.hasOwnProperty(i)&&(s=i),n!=="AS"&&(i=t)})}),s}function a(r,o){e=o&&o.tables||{},t=t||n(r);var u=r.getCursor(),a=r.getTokenAt(u),f=[],l=a.string.trim();return i(f,l,t,function(e){return e.toUpperCase()}),i(f,l,e,function(e){return e}),l.lastIndexOf(".")===0&&s(f,r),{list:f,from:CodeMirror.Pos(u.line,a.start),to:CodeMirror.Pos(u.line,a.end)}}var e,t;CodeMirror.registerHelper("hint","sql",a)})();