(function(){function r(e,t){var n=e.getRange(CodeMirror.Pos(t.line,t.ch-1),CodeMirror.Pos(t.line,t.ch+1));return n.length==2?n:null}function i(e){var t={name:"autoCloseBrackets",Backspace:function(t){if(t.somethingSelected())return CodeMirror.Pass;var n=t.getCursor(),i=r(t,n);if(!i||e.indexOf(i)%2!=0)return CodeMirror.Pass;t.replaceRange("",CodeMirror.Pos(n.line,n.ch-1),CodeMirror.Pos(n.line,n.ch+1))}},i="";for(var s=0;s<e.length;s+=2)(function(e,r){function s(t){var n=t.getSelection();t.replaceSelection(e+n+r)}function o(e){var t=e.getCursor(),n=e.getRange(t,CodeMirror.Pos(t.line,t.ch+1));if(n!=r||e.somethingSelected())return CodeMirror.Pass;e.execCommand("goCharRight")}e!=r&&(i+=r),t["'"+e+"'"]=function(t){if(e=="'"&&t.getTokenAt(t.getCursor()).type=="comment")return CodeMirror.Pass;if(t.somethingSelected())return s(t);if(e==r&&o(t)!=CodeMirror.Pass)return;var u=t.getCursor(),a=CodeMirror.Pos(u.line,u.ch+1),f=t.getLine(u.line),l=f.charAt(u.ch),c=u.ch>0?f.charAt(u.ch-1):"";if(e==r&&CodeMirror.isWordChar(c))return CodeMirror.Pass;if(!(f.length==u.ch||i.indexOf(l)>=0||n.test(l)))return CodeMirror.Pass;t.replaceSelection(e+r,{head:a,anchor:a})},e!=r&&(t["'"+r+"'"]=o)})(e.charAt(s),e.charAt(s+1));return t}function s(e){return function(t){var n=t.getCursor(),i=r(t,n);if(!i||e.indexOf(i)%2!=0)return CodeMirror.Pass;t.operation(function(){var e=CodeMirror.Pos(n.line+1,0);t.replaceSelection("\n\n",{anchor:e,head:e},"+input"),t.indentLine(n.line+1,null,!0),t.indentLine(n.line+2,null,!0)})}}var e="()[]{}''\"\"",t="[]{}",n=/\s/;CodeMirror.defineOption("autoCloseBrackets",!1,function(n,r,o){o!=CodeMirror.Init&&o&&n.removeKeyMap("autoCloseBrackets");if(!r)return;var u=e,a=t;typeof r=="string"?u=r:typeof r=="object"&&(r.pairs!=null&&(u=r.pairs),r.explode!=null&&(a=r.explode));var f=i(u);a&&(f.Enter=s(a)),n.addKeyMap(f)})})();