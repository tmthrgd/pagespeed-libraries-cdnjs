(function(a){if(typeof exports=="object"&&typeof module=="object"){a(require("../../lib/codemirror"))}else{if(typeof define=="function"&&define.amd){define(["../../lib/codemirror"],a)}else{a(CodeMirror)}}})(function(a){a.registerHelper("fold","markdown",function(j,e){var f=100;function c(n){var m=j.getTokenTypeAt(a.Pos(n,0));return m&&/\bheader\b/.test(m)}function k(p,m,o){var n=m&&m.match(/^#+/);if(n&&c(p)){return n[0].length}n=o&&o.match(/^[=\-]+\s*$/);if(n&&c(p+1)){return o[0]=="="?1:2}return f}var i=j.getLine(e.line),d=j.getLine(e.line+1);var b=k(e.line,i,d);if(b===f){return undefined}var l=j.lastLine();var g=e.line,h=j.getLine(g+2);while(g<l){if(k(g+1,d,h)<=b){break}++g;d=h;h=j.getLine(g+2)}return{from:a.Pos(e.line,i.length),to:a.Pos(g,j.getLine(g).length)}})});