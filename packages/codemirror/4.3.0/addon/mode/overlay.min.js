(function(a){if(typeof exports=="object"&&typeof module=="object"){a(require("../../lib/codemirror"))}else{if(typeof define=="function"&&define.amd){define(["../../lib/codemirror"],a)}else{a(CodeMirror)}}})(function(a){a.overlayMode=function(c,b,d){return{startState:function(){return{base:a.startState(c),overlay:a.startState(b),basePos:0,baseCur:null,overlayPos:0,overlayCur:null,lineSeen:null}},copyState:function(e){return{base:a.copyState(c,e.base),overlay:a.copyState(b,e.overlay),basePos:e.basePos,baseCur:null,overlayPos:e.overlayPos,overlayCur:null}},token:function(f,e){if(f.sol()||f.string!=e.lineSeen||Math.min(e.basePos,e.overlayPos)<f.start){e.lineSeen=f.string;e.basePos=e.overlayPos=f.start}if(f.start==e.basePos){e.baseCur=c.token(f,e.base);e.basePos=f.pos}if(f.start==e.overlayPos){f.pos=f.start;e.overlayCur=b.token(f,e.overlay);e.overlayPos=f.pos}f.pos=Math.min(e.basePos,e.overlayPos);if(e.overlayCur==null){return e.baseCur}else{if(e.baseCur!=null&&e.overlay.combineTokens||d&&e.overlay.combineTokens==null){return e.baseCur+" "+e.overlayCur}else{return e.overlayCur}}},indent:c.indent&&function(f,e){return c.indent(f.base,e)},electricChars:c.electricChars,innerMode:function(e){return{state:e.base,mode:c}},blankLine:function(e){if(c.blankLine){c.blankLine(e.base)}if(b.blankLine){b.blankLine(e.overlay)}}}}});