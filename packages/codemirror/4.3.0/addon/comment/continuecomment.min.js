(function(a){if(typeof exports=="object"&&typeof module=="object"){a(require("../../lib/codemirror"))}else{if(typeof define=="function"&&define.amd){define(["../../lib/codemirror"],a)}else{a(CodeMirror)}}})(function(a){var e=["clike","css","javascript"];for(var b=0;b<e.length;++b){a.extendMode(e[b],{blockCommentContinue:" * "})}function c(r){if(r.getOption("disableInput")){return a.Pass}var f=r.listSelections(),m,p=[];for(var l=0;l<f.length;l++){var q=f[l].head,g=r.getTokenAt(q);if(g.type!="comment"){return a.Pass}var o=a.innerMode(r.getMode(),g.state).mode;if(!m){m=o}else{if(m!=o){return a.Pass}}var s=null;if(m.blockCommentStart&&m.blockCommentContinue){var h=g.string.indexOf(m.blockCommentEnd);var n=r.getRange(a.Pos(q.line,0),a.Pos(q.line,g.end)),u;if(h!=-1&&h==g.string.length-m.blockCommentEnd.length&&q.ch>=h){}else{if(g.string.indexOf(m.blockCommentStart)==0){s=n.slice(0,g.start);if(!/^\s*$/.test(s)){s="";for(var k=0;k<g.start;++k){s+=" "}}}else{if((u=n.indexOf(m.blockCommentContinue))!=-1&&u+m.blockCommentContinue.length>g.start&&/^\s*$/.test(n.slice(0,u))){s=n.slice(0,u)}}}if(s!=null){s+=m.blockCommentContinue}}if(s==null&&m.lineComment&&d(r)){var t=r.getLine(q.line),u=t.indexOf(m.lineComment);if(u>-1){s=t.slice(0,u);if(/\S/.test(s)){s=null}else{s+=m.lineComment+t.slice(u+m.lineComment.length).match(/^\s*/)[0]}}}if(s==null){return a.Pass}p[l]="\n"+s}r.operation(function(){for(var j=f.length-1;j>=0;j--){r.replaceRange(p[j],f[j].from(),f[j].to(),"+insert")}})}function d(f){var g=f.getOption("continueComments");if(g&&typeof g=="object"){return g.continueLineComment!==false}return true}a.defineOption("continueComments",null,function(f,j,h){if(h&&h!=a.Init){f.removeKeyMap("continueComment")}if(j){var g="Enter";if(typeof j=="string"){g=j}else{if(typeof j=="object"&&j.key){g=j.key}}var i={name:"continueComment"};i[g]=c;f.addKeyMap(i)}})});