(function(a){if(typeof exports=="object"&&typeof module=="object"){a(require("../../lib/codemirror"))}else{if(typeof define=="function"&&define.amd){define(["../../lib/codemirror"],a)}else{a(CodeMirror)}}})(function(a){var h=2;var b="matchhighlight";var c=100;function g(j){if(typeof j=="object"){this.minChars=j.minChars;this.style=j.style;this.showToken=j.showToken;this.delay=j.delay}if(this.style==null){this.style=b}if(this.minChars==null){this.minChars=h}if(this.delay==null){this.delay=c}this.overlay=this.timeout=null}a.defineOption("highlightSelectionMatches",false,function(j,m,k){if(k&&k!=a.Init){var l=j.state.matchHighlighter.overlay;if(l){j.removeOverlay(l)}clearTimeout(j.state.matchHighlighter.timeout);j.state.matchHighlighter=null;j.off("cursorActivity",f)}if(m){j.state.matchHighlighter=new g(m);e(j);j.on("cursorActivity",f)}});function f(j){var k=j.state.matchHighlighter;clearTimeout(k.timeout);k.timeout=setTimeout(function(){e(j)},k.delay)}function e(j){j.operation(function(){var k=j.state.matchHighlighter;if(k.overlay){j.removeOverlay(k.overlay);k.overlay=null}if(!j.somethingSelected()&&k.showToken){var r=k.showToken===true?/[\w$]/:k.showToken;var q=j.getCursor(),s=j.getLine(q.line),l=q.ch,m=l;while(l&&r.test(s.charAt(l-1))){--l}while(m<s.length&&r.test(s.charAt(m))){++m}if(l<m){j.addOverlay(k.overlay=d(s.slice(l,m),r,k.style))}return}var o=j.getCursor("from"),p=j.getCursor("to");if(o.line!=p.line){return}var n=j.getRange(o,p).replace(/^\s+|\s+$/g,"");if(n.length>=k.minChars){j.addOverlay(k.overlay=d(n,false,k.style))}})}function i(k,j){return(!k.start||!j.test(k.string.charAt(k.start-1)))&&(k.pos==k.string.length||!j.test(k.string.charAt(k.pos)))}function d(l,k,j){return{token:function(m){if(m.match(l)&&(!k||i(m,k))){return j}m.next();m.skipTo(l.charAt(0))||m.skipToEnd()}}}});