CodeMirror.defineMode("markdown",function(e,t){function A(e,t,n){return t.f=t.inline=n,n(e,t)}function O(e,t,n){return t.f=t.block=n,n(e,t)}function M(e){return e.linkTitle=!1,e.em=!1,e.strong=!1,e.quote=0,!n&&e.f==D&&(e.f=j,e.block=_),e.trailingSpace=0,e.trailingSpaceNewLine=!1,e.thisLineHasContent=!1,null}function _(e,n){var r=e.sol(),i=n.list!==!1;n.list!==!1&&n.indentationDiff>=0?(n.indentationDiff<4&&(n.indentation-=n.indentationDiff),n.list=null):n.list!==!1&&n.indentation>0?(n.list=null,n.listDepth=Math.floor(n.indentation/4)):n.list!==!1&&(n.list=!1,n.listDepth=0);var o=null;if(n.indentationDiff>=4)return n.indentation-=4,e.skipToEnd(),a;if(e.eatSpace())return null;if(o=e.match(C))return n.header=o[0].length<=6?o[0].length:6,t.highlightFormatting&&(n.formatting="header"),n.f=n.inline,H(n);if(n.prevLineHasContent&&(o=e.match(k)))return n.header=o[0].charAt(0)=="="?1:2,t.highlightFormatting&&(n.formatting="header"),n.f=n.inline,H(n);if(e.eat(">"))return n.indentation++,n.quote=r?1:n.quote+1,t.highlightFormatting&&(n.formatting="quote"),e.eatSpace(),H(n);if(e.peek()==="[")return A(e,n,R);if(e.match(S,!0))return p;if((!n.prevLineHasContent||i)&&(e.match(x,!1)||e.match(T,!1))){var u=null;return e.match(x,!0)?u="ul":(e.match(T,!0),u="ol"),n.indentation+=4,n.list=!0,n.listDepth++,t.taskLists&&e.match(N,!1)&&(n.taskList=!0),n.f=n.inline,t.highlightFormatting&&(n.formatting=["list","list-"+u]),H(n)}return t.fencedCodeBlocks&&e.match(/^```([\w+#]*)/,!0)?(n.localMode=s(RegExp.$1),n.localMode&&(n.localState=n.localMode.startState()),O(e,n,P),t.highlightFormatting&&(n.formatting="code-block"),n.code=!0,H(n)):A(e,n,n.inline)}function D(e,t){var i=r.token(e,t.htmlState);if(n&&!t.htmlState.tagName&&!t.htmlState.context||t.md_inside&&e.current().indexOf(">")>-1)t.f=j,t.block=_,t.htmlState=null;return i}function P(e,n){if(e.sol()&&e.match(/^```/,!0)){n.localMode=n.localState=null,n.f=j,n.block=_,t.highlightFormatting&&(n.formatting="code-block"),n.code=!0;var r=H(n);return n.code=!1,r}return n.localMode?n.localMode.token(e,n.localState):(e.skipToEnd(),a)}function H(e){var n=[];if(e.formatting){n.push(v),typeof e.formatting=="string"&&(e.formatting=[e.formatting]);for(var r=0;r<e.formatting.length;r++)n.push(v+"-"+e.formatting[r]),e.formatting[r]==="header"&&n.push(v+"-"+e.formatting[r]+e.header),e.formatting[r]==="quote"&&(!t.maxBlockquoteDepth||t.maxBlockquoteDepth>=e.quote?n.push(v+"-"+e.formatting[r]+"-"+e.quote):n.push("error"))}if(e.taskOpen)return n.push("meta"),n.length?n.join(" "):null;if(e.taskClosed)return n.push("property"),n.length?n.join(" "):null;if(e.linkHref)return n.push(b),n.length?n.join(" "):null;e.strong&&n.push(E),e.em&&n.push(w),e.linkText&&n.push(y),e.code&&n.push(a),e.header&&(n.push(u),n.push(u+e.header)),e.quote&&(n.push(f),!t.maxBlockquoteDepth||t.maxBlockquoteDepth>=e.quote?n.push(f+"-"+e.quote):n.push(f+"-"+t.maxBlockquoteDepth));if(e.list!==!1){var i=(e.listDepth-1)%3;i?i===1?n.push(c):n.push(h):n.push(l)}return e.trailingSpaceNewLine?n.push("trailing-space-new-line"):e.trailingSpace&&n.push("trailing-space-"+(e.trailingSpace%2?"a":"b")),n.length?n.join(" "):null}function B(e,t){return e.match(L,!0)?H(t):undefined}function j(e,n){var i=n.text(e,n);if(typeof i!="undefined")return i;if(n.list)return n.list=null,H(n);if(n.taskList){var s=e.match(N,!0)[1]!=="x";return s?n.taskOpen=!0:n.taskClosed=!0,t.highlightFormatting&&(n.formatting="task"),n.taskList=!1,H(n)}n.taskOpen=!1,n.taskClosed=!1;if(n.header&&e.match(/^#+$/,!0))return t.highlightFormatting&&(n.formatting="header"),H(n);var u=e.sol(),a=e.next();if(n.escape)return n.escape=!1,H(n);if(a==="\\")return t.highlightFormatting&&(n.formatting="escape"),n.escape=!0,H(n);if(n.linkTitle){n.linkTitle=!1;var f=a;a==="("&&(f=")"),f=(f+"").replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1");var l="^\\s*(?:[^"+f+"\\\\]+|\\\\\\\\|\\\\.)"+f;if(e.match(new RegExp(l),!0))return b}if(a==="`"){var c=n.formatting;t.highlightFormatting&&(n.formatting="code");var h=H(n),p=e.pos;e.eatWhile("`");var v=1+e.pos-p;return n.code?v===o?(n.code=!1,h):(n.formatting=c,H(n)):(o=v,n.code=!0,H(n))}if(n.code)return H(n);if(a==="!"&&e.match(/\[[^\]]*\] ?(?:\(|\[)/,!1))return e.match(/\[[^\]]*\]/),n.inline=n.f=I,d;if(a==="["&&e.match(/.*\](\(| ?\[)/,!1))return n.linkText=!0,t.highlightFormatting&&(n.formatting="link"),H(n);if(a==="]"&&n.linkText){t.highlightFormatting&&(n.formatting="link");var y=H(n);return n.linkText=!1,n.inline=n.f=I,y}if(a==="<"&&e.match(/^(https?|ftps?):\/\/(?:[^\\>]|\\.)+>/,!1)){n.f=n.inline=F,t.highlightFormatting&&(n.formatting="link");var y=H(n);return y?y+=" ":y="",y+m}if(a==="<"&&e.match(/^[^> \\]+@(?:[^\\>]|\\.)+>/,!1)){n.f=n.inline=F,t.highlightFormatting&&(n.formatting="link");var y=H(n);return y?y+=" ":y="",y+g}if(a==="<"&&e.match(/^\w/,!1)){if(e.string.indexOf(">")!=-1){var w=e.string.substring(1,e.string.indexOf(">"));/markdown\s*=\s*('|"){0,1}1('|"){0,1}/.test(w)&&(n.md_inside=!0)}return e.backUp(1),n.htmlState=CodeMirror.startState(r),O(e,n,D)}if(a==="<"&&e.match(/^\/\w*?>/))return n.md_inside=!1,"tag";var E=!1;if(!t.underscoresBreakWords&&a==="_"&&e.peek()!=="_"&&e.match(/(\w)/,!1)){var S=e.pos-2;if(S>=0){var x=e.string.charAt(S);x!=="_"&&x.match(/(\w)/,!1)&&(E=!0)}}if(a==="*"||a==="_"&&!E){if(!u||e.peek()!==" "){if(n.strong===a&&e.eat(a)){t.highlightFormatting&&(n.formatting="strong");var h=H(n);return n.strong=!1,h}if(!n.strong&&e.eat(a))return n.strong=a,t.highlightFormatting&&(n.formatting="strong"),H(n);if(n.em===a){t.highlightFormatting&&(n.formatting="em");var h=H(n);return n.em=!1,h}if(!n.em)return n.em=a,t.highlightFormatting&&(n.formatting="em"),H(n)}}else if(a===" ")if(e.eat("*")||e.eat("_")){if(e.peek()===" ")return H(n);e.backUp(1)}return a===" "&&(e.match(/ +$/,!1)?n.trailingSpace++:n.trailingSpace&&(n.trailingSpaceNewLine=!0)),H(n)}function F(e,n){var r=e.next();if(r===">"){n.f=n.inline=j,t.highlightFormatting&&(n.formatting="link");var i=H(n);return i?i+=" ":i="",i+m}return e.match(/^[^>]+/,!0),m}function I(e,n){if(e.eatSpace())return null;var r=e.next();return r==="("||r==="["?(n.f=n.inline=q(r==="("?")":"]"),t.highlightFormatting&&(n.formatting="link-string"),n.linkHref=!0,H(n)):"error"}function q(e){return function(n,r){var i=n.next();if(i===e){r.f=r.inline=j,t.highlightFormatting&&(r.formatting="link-string");var s=H(r);return r.linkHref=!1,s}return n.match(X(e),!0)&&n.backUp(1),r.linkHref=!0,H(r)}}function R(e,n){return e.match(/^[^\]]*\]:/,!1)?(n.f=U,e.next(),t.highlightFormatting&&(n.formatting="link"),n.linkText=!0,H(n)):A(e,n,j)}function U(e,n){if(e.match(/^\]:/,!0)){n.f=n.inline=z,t.highlightFormatting&&(n.formatting="link");var r=H(n);return n.linkText=!1,r}return e.match(/^[^\]]+/,!0),y}function z(e,t){return e.eatSpace()?null:(e.match(/^[^\s]+/,!0),e.peek()===undefined?t.linkTitle=!0:e.match(/^(?:\s+(?:"(?:[^"\\]|\\\\|\\.)+"|'(?:[^'\\]|\\\\|\\.)+'|\((?:[^)\\]|\\\\|\\.)+\)))?/,!0),t.f=t.inline=j,b)}function X(e){return W[e]||(e=(e+"").replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1"),W[e]=new RegExp("^(?:[^\\\\]|\\\\.)*?("+e+")")),W[e]}var n=CodeMirror.modes.hasOwnProperty("xml"),r=CodeMirror.getMode(e,n?{name:"xml",htmlMode:!0}:"text/plain"),i={html:"htmlmixed",js:"javascript",json:"application/json",c:"text/x-csrc","c++":"text/x-c++src",java:"text/x-java",csharp:"text/x-csharp","c#":"text/x-csharp",scala:"text/x-scala"},s=function(){var t,n={},r={},s,o=[];for(var u in CodeMirror.modes)CodeMirror.modes.propertyIsEnumerable(u)&&o.push(u);for(t=0;t<o.length;t++)n[o[t]]=o[t];var a=[];for(var u in CodeMirror.mimeModes)CodeMirror.mimeModes.propertyIsEnumerable(u)&&a.push({mime:u,mode:CodeMirror.mimeModes[u]});for(t=0;t<a.length;t++)s=a[t].mime,r[s]=a[t].mime;for(var f in i)if(i[f]in n||i[f]in r)n[f]=i[f];return function(t){return n[t]?CodeMirror.getMode(e,n[t]):null}}();t.highlightFormatting===undefined&&(t.highlightFormatting=!1),t.maxBlockquoteDepth===undefined&&(t.maxBlockquoteDepth=0),t.underscoresBreakWords===undefined&&(t.underscoresBreakWords=!0),t.fencedCodeBlocks===undefined&&(t.fencedCodeBlocks=!1),t.taskLists===undefined&&(t.taskLists=!1);var o=0,u="header",a="comment",f="quote",l="variable-2",c="variable-3",h="keyword",p="hr",d="tag",v="formatting",m="link",g="link",y="link",b="string",w="em",E="strong",S=/^([*\-=_])(?:\s*\1){2,}\s*$/,x=/^[*\-+]\s+/,T=/^[0-9]+\.\s+/,N=/^\[(x| )\](?=\s)/,C=/^#+/,k=/^(?:\={1,}|-{1,})$/,L=/^[^#!\[\]*_\\<>` "'(]+/,W=[],V={startState:function(){return{f:_,prevLineHasContent:!1,thisLineHasContent:!1,block:_,htmlState:null,indentation:0,inline:j,text:B,escape:!1,formatting:!1,linkText:!1,linkHref:!1,linkTitle:!1,em:!1,strong:!1,header:0,taskList:!1,list:!1,listDepth:0,quote:0,trailingSpace:0,trailingSpaceNewLine:!1}},copyState:function(e){return{f:e.f,prevLineHasContent:e.prevLineHasContent,thisLineHasContent:e.thisLineHasContent,block:e.block,htmlState:e.htmlState&&CodeMirror.copyState(r,e.htmlState),indentation:e.indentation,localMode:e.localMode,localState:e.localMode?CodeMirror.copyState(e.localMode,e.localState):null,inline:e.inline,text:e.text,escape:!1,formatting:!1,linkTitle:e.linkTitle,em:e.em,strong:e.strong,header:e.header,taskList:e.taskList,list:e.list,listDepth:e.listDepth,quote:e.quote,trailingSpace:e.trailingSpace,trailingSpaceNewLine:e.trailingSpaceNewLine,md_inside:e.md_inside}},token:function(e,t){t.formatting=!1;if(e.sol()){var n=e.match(/^\s*$/,!0)||t.header;t.header=0;if(n)return t.prevLineHasContent=!1,M(t);t.prevLineHasContent=t.thisLineHasContent,t.thisLineHasContent=!0,t.escape=!1,t.taskList=!1,t.code=!1,t.trailingSpace=0,t.trailingSpaceNewLine=!1,t.f=t.block;var r=e.match(/^\s*/,!0)[0].replace(/\t/g,"    ").length,i=Math.floor((r-t.indentation)/4)*4;i>4&&(i=4);var s=t.indentation+i;t.indentationDiff=s-t.indentation,t.indentation=s;if(r>0)return null}return t.f(e,t)},innerMode:function(e){return e.block==D?{state:e.htmlState,mode:r}:e.localState?{state:e.localState,mode:e.localMode}:{state:e,mode:V}},blankLine:M,getType:H};return V},"xml"),CodeMirror.defineMIME("text/x-markdown","markdown");