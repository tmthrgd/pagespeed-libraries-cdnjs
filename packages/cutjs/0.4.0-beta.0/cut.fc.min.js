/*
 * CutJS 0.4.0-beta.0
 * Copyright (c) 2013-2014 Ali Shakiba, Piqnt LLC and other contributors
 * Available under the MIT license
 * @license
 */
!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var e;"undefined"!=typeof window?e=window:"undefined"!=typeof global?e=global:"undefined"!=typeof self&&(e=self),e.Cut=t()}}(function(){return function t(e,i,n){function s(o,h){if(!i[o]){if(!e[o]){var a="function"==typeof require&&require;if(!h&&a)return a(o,!0);if(r)return r(o,!0);var _=new Error("Cannot find module '"+o+"'");throw _.code="MODULE_NOT_FOUND",_}var u=i[o]={exports:{}};e[o][0].call(u.exports,function(t){var i=e[o][1][t];return s(i?i:t)},u,u.exports,t,e,i,n)}return i[o].exports}for(var r="function"==typeof require&&require,o=0;o<n.length;o++)s(n[o]);return s}({1:[function(t,e){e.exports=t("../lib/main"),e.exports.Mouse=t("../lib/mouse"),t("../lib/loader.fc")},{"../lib/loader.fc":4,"../lib/main":5,"../lib/mouse":6}],2:[function(t,e){function i(){if(!(this instanceof i)){if("function"==typeof arguments[0])return i.Root.add.apply(i.Root,arguments);if("object"==typeof arguments[0])return i.Texture.add.apply(i.Texture,arguments)}i._stats.create++,this._id="",this._visible=!0,this._parent=null,this._next=null,this._prev=null,this._first=null,this._last=null,this._pin=new i.Pin(this),this._cutouts=[],this._tickBefore=[],this._tickAfter=[],this._alpha=1,this._attrs=null,this._listeners=null,this._flags=null}DEBUG="undefined"==typeof DEBUG||DEBUG,i._create=function(){function t(){}return"function"==typeof Object.create?function(t,e){return Object.create.call(Object,t,e)}:function(e,i){if(i)throw Error("Second argument is not supported!");if(!e||"object"!=typeof e)throw Error("Invalid prototype!");return t.prototype=e,new t}}(),i._extend=function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var n in i)i.hasOwnProperty(n)&&(t[n]=i[n])}return t},i._ensure=function(t){if(t&&t instanceof i)return t;throw"Invalid node: "+t},i._now="undefined"!=typeof performance&&performance.now?function(){return performance.now()}:Date.now?function(){return Date.now()}:function(){return+new Date},i._isArray=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)},i._TS=0,i._stats={create:0,tick:0,paint:0,paste:0},i.create=function(){return new i},i.prototype.MAX_ELAPSE=1/0,i.prototype._tick=function(t){if(this._visible){t>this.MAX_ELAPSE&&(t=this.MAX_ELAPSE),this._pin.tick();for(var e=this._tickBefore.length,n=0;e>n;n++)i._stats.tick++,this._tickBefore[n].call(this,t);for(var s,r=this._first;s=r;)r=s._next,s._tick(t);for(var e=this._tickAfter.length,n=0;e>n;n++)i._stats.tick++,this._tickAfter[n].call(this,t)}},i.prototype.tick=function(t,e){e?this._tickBefore.push(t):this._tickAfter.push(t)},i.prototype.untick=function(t){var e;t&&((e=this._tickBefore.indexOf(t))>=0?this._tickBefore.splice(e,1):(e=this._tickAfter.indexOf(t))>=0&&this._tickAfter.splice(e,1))},i.prototype._paint=function(t){if(this._visible){i._stats.paint++;var e=this._pin.absoluteMatrix();t.setTransform(e.a,e.b,e.c,e.d,e.e,e.f),this._alpha=this._pin._alpha*(this._parent?this._parent._alpha:1);var n=this._pin._textureAlpha*this._alpha;t.globalAlpha!=n&&(t.globalAlpha=n);for(var s=this._cutouts.length,r=0;s>r;r++)this._cutouts[r].paste(t);t.globalAlpha!=this._alpha&&(t.globalAlpha=this._alpha);for(var o,h=this._first;o=h;)h=o._next,o._paint(t)}},i.prototype.toString=function(){return"["+this._id+"]"},i.prototype.id=function(t){return"undefined"==typeof t?this._id:(this._id=t,this)},i.prototype.attr=function(t,e){return"undefined"==typeof e?null!==this._attrs?this._attrs[t]:void 0:((null!==this._attrs?this._attrs:this._attrs={})[t]=e,this)},i.prototype.on=i.prototype.listen=function(t,e){if(t=this._onoff(t,e,!0))for(var i=0;i<t.length;i++){var n=t[i];this._listeners[n]=this._listeners[n]||[],this._listeners[n].push(e),this._flag(n,!0)}return this},i.prototype.off=function(t,e){if(t=this._onoff(t,e,!1))for(var i=0;i<t.length;i++){var n,s=t[i],r=this._listeners[s];r&&(n=r.indexOf(e))>=0&&(r.splice(n,1),r.length||delete this._listeners[s],this._flag(s,!1))}return this},i.prototype._onoff=function(t,e,n){if(!t||!t.length||"function"!=typeof e)return!1;if(!(t=(i._isArray(t)?t.join(" "):t).match(/\S+/g)))return!1;if(null===this._listeners){if(!n)return!1;this._listeners={}}return t},i.prototype.listeners=function(t){return this._listeners&&this._listeners[t]},i.prototype.publish=function(t,e){var i=this.listeners(t);if(!i||!i.length)return 0;for(var n=0;n<i.length;n++)i[n].apply(this,e);return i.length},i.prototype.trigger=function(t,e){return this.publish(t,e),this},i.prototype.visit=function(t,e){var i=t.reverse,n=t.visible;if(!t.start||!t.start(this,e)){for(var s,r=i?this.last(n):this.first(n);s=r;)if(r=i?s.prev(n):s.next(n),s.visit(t,e))return!0;return t.end&&t.end(this,e)}},i.prototype.visible=function(t){return"undefined"==typeof t?this._visible:(this._visible=t,this._parent&&(this._parent._ts_children=i._TS++),this._ts_pin=i._TS++,this.touch(),this)},i.prototype.hide=function(){return this.visible(!1)},i.prototype.show=function(){return this.visible(!0)},i.prototype.parent=function(){return this._parent},i.prototype.next=function(t){for(var e=this._next;e&&t&&!e._visible;)e=e._next;return e},i.prototype.prev=function(t){for(var e=this._prev;e&&t&&!e._visible;)e=e._prev;return e},i.prototype.first=function(t){for(var e=this._first;e&&t&&!e._visible;)e=e._next;return e},i.prototype.last=function(t){for(var e=this._last;e&&t&&!e._visible;)e=e._prev;return e},i.prototype.append=function(){for(var t=0;t<arguments.length;t++)i._ensure(arguments[t]),arguments[t].appendTo(this);return this},i.prototype.prepend=function(){for(var t=0;t<arguments.length;t++)i._ensure(arguments[t]),arguments[t].prependTo(this);return this},i.prototype.appendTo=function(t){return i._ensure(t),this.remove(),t._last&&(t._last._next=this,this._prev=t._last),this._parent=t,t._last=this,t._first||(t._first=this),this._parent._flag(this,!0),this._ts_parent=i._TS++,t._ts_children=i._TS++,t.touch(),this},i.prototype.prependTo=function(t){return i._ensure(t),this.remove(),t._first&&(t._first._prev=this,this._next=t._first),this._parent=t,t._first=this,t._last||(t._last=this),this._parent._flag(this,!0),this._ts_parent=i._TS++,t._ts_children=i._TS++,t.touch(),this},i.prototype.insertNext=function(){if(arguments.length)for(var t=0;t<arguments.length;t++)i._ensure(arguments[t]),arguments[t]&&arguments[t].insertAfter(this);return this},i.prototype.insertPrev=function(){if(arguments.length)for(var t=0;t<arguments.length;t++)i._ensure(arguments[t]),arguments[t]&&arguments[t].insertBefore(this);return this},i.prototype.insertBefore=function(t){i._ensure(t),this.remove();var e=t._parent,n=t._prev;return t._prev=this,n&&(n._next=this)||e&&(e._first=this),this._parent=e,this._prev=n,this._next=t,this._parent._flag(this,!0),this._ts_parent=i._TS++,this.touch(),this},i.prototype.insertAfter=function(t){i._ensure(t),this.remove();var e=t._parent,n=t._next;return t._next=this,n&&(n._prev=this)||e&&(e._last=this),this._parent=e,this._prev=t,this._next=n,this._parent._flag(this,!0),this._ts_parent=i._TS++,this.touch(),this},i.prototype.remove=function(){if(arguments.length){for(var t=0;t<arguments.length;t++)i._ensure(arguments[t]),arguments[t]&&arguments[t].remove();return this}return this._prev&&(this._prev._next=this._next),this._next&&(this._next._prev=this._prev),this._parent&&(this._parent._first===this&&(this._parent._first=this._next),this._parent._last===this&&(this._parent._last=this._prev),this._parent._flag(this,!1),this._parent._ts_children=i._TS++,this._parent.touch()),this._prev=this._next=this._parent=null,this._ts_parent=i._TS++,this},i.prototype.empty=function(){for(var t,e=this._first;t=e;)e=t._next,t._prev=t._next=t._parent=null,this._flag(t,!1);return this._first=this._last=null,this._ts_children=i._TS++,this.touch(),this},i.prototype._flag=function(t,e){if("undefined"==typeof e)return null!==this._flags&&this._flags[t]||0;if("string"==typeof t&&(e?(this._flags=this._flags||{},!this._flags[t]&&this._parent&&this._parent._flag(t,!0),this._flags[t]=(this._flags[t]||0)+1):this._flags&&this._flags[t]>0&&(1==this._flags[t]&&this._parent&&this._parent._flag(t,!1),this._flags[t]=this._flags[t]-1)),"object"==typeof t&&t._flags)for(var i in t._flags)t._flags[i]>0&&this._flag(i,e);return this},i.prototype.touch=function(){return this._ts_touch=i._TS++,this._parent&&this._parent.touch(),this},i.prototype.pin=function(t,e){return"object"==typeof t?(this._pin.set(t),this):"string"==typeof t?"undefined"==typeof e?this._pin.get(t):(this._pin.set(t,e),this):"undefined"==typeof t?this._pin:void 0},i.prototype.matrix=function(){return this._pin.absoluteMatrix(this,this._parent?this._parent._pin:null)},i.image=function(t){var e=new i.Image;return t&&e.image(t),e},i.Image=function(){i.Image._super.call(this)},i.Image._super=i,i.Image.prototype=i._create(i.Image._super.prototype),i.Image.prototype.constructor=i.Image,i.Image.prototype.setImage=function(t,e,i){return this.image(t,e,i)},i.Image.prototype.image=function(t){return this._cutouts[0]=i.cutout(t),this._cutouts.length=1,this.pin({width:this._cutouts[0]?this._cutouts[0].dWidth():0,height:this._cutouts[0]?this._cutouts[0].dHeight():0}),this._cutout=this._cutouts[0].clone(),this},i.Image.prototype.cropX=function(t,e){return this.image(this._cutouts[0].cropX(t,e))},i.Image.prototype.cropY=function(t,e){return this.image(this._cutouts[0].cropY(t,e))},i.Image.prototype._slice=function(t){return this._cutouts[t]||(this._cutouts[t]=this._cutout.clone())},i.Image.prototype.tile=function(t){return this.untick(this._repeatTicker),this._repeatTicker=function(){if(this._mo_tile!=this._ts_touch){this._mo_tile=this._ts_touch;var e=this._cutout._left,i=this._cutout._right,n=this._cutout._top,s=this._cutout._bottom,r=this._cutout.dWidth()-e-i,o=this._cutout.dHeight()-n-s,h=this.pin("width");h=t?h:h-e-i;var a=this.pin("height");a=t?a:a-n-s;var _=t?-e:0,u=t?-n:0,c=0;n&&e&&this._slice(c++).cropX(e,0).cropY(n,0).offset(_,u),s&&e&&this._slice(c++).cropX(e,0).cropY(s,o+n).offset(_,u+a+n),n&&i&&this._slice(c++).cropX(i,r+e).cropY(n,0).offset(_+h+e,u),s&&i&&this._slice(c++).cropX(i,r+e).cropY(s,o+n).offset(_+h+e,u+a+n);for(var f=_+e,p=h;p>0;){var l=Math.min(r,p);p-=r;for(var d=u+n,g=a;g>0;){var m=Math.min(o,g);g-=o,this._slice(c++).cropX(l,e).cropY(m,n).offset(f,d),0>=p&&(e&&this._slice(c++).cropX(e,0).cropY(m,n).offset(_,d),i&&this._slice(c++).cropX(i,r+e).cropY(m,n).offset(f+l,d)),d+=m}n&&this._slice(c++).cropX(l,e).cropY(n,0).offset(f,u),s&&this._slice(c++).cropX(l,e).cropY(s,o+n).offset(f,d),f+=l}this._cutouts.length=c}},this.tick(this._repeatTicker),this},i.Image.prototype.stretch=function(t){return this.untick(this._repeatTicker),this._repeatTicker=function(){if(this._mo_stretch!=this._pin._ts_transform){this._mo_stretch=this._pin._ts_transform;var e=this._cutout._left,i=this._cutout._right,n=this._cutout._top,s=this._cutout._bottom,r=this._cutout.dWidth(),o=this._cutout.dHeight(),h=this.pin("width"),a=this.pin("height");h=t?h+e+i:Math.max(h,e+i),a=t?a+n+s:Math.max(a,n+s);var _=0;n&&e&&this._slice(_++).cropX(e,0).cropY(n,0).offset(0,0),s&&e&&this._slice(_++).cropX(e,0).cropY(s,o-s).offset(0,a-s),n&&i&&this._slice(_++).cropX(i,r-i).cropY(n,0).offset(h-i,0),s&&i&&this._slice(_++).cropX(i,r-i).cropY(s,o-s).offset(h-i,a-s),n&&this._slice(_++).cropX(r-e-i,e).cropY(n,0).offset(e,0).dWidth(h-e-i),s&&this._slice(_++).cropX(r-e-i,e).cropY(s,o-s).offset(e,a-s).dWidth(h-e-i),e&&this._slice(_++).cropX(e,0).cropY(o-n-s,n).offset(0,n).dHeight(a-n-s),i&&this._slice(_++).cropX(i,r-i).cropY(o-n-s,n).offset(h-i,n).dHeight(a-n-s),this._slice(_++).cropX(r-e-i,e).cropY(o-n-s,n).offset(e,n).dWidth(h-e-i).dHeight(a-n-s),this._cutouts.length=_}},this.tick(this._repeatTicker),this},i.anim=function(t,e){var n=(new i.Anim).frames(t).gotoFrame(0);return e&&n.fps(e),n},i.Anim=function(){i.Anim._super.call(this),this._fps=i.Anim.FPS,this._ft=1e3/this._fps,this._time=0,this._frame=0,this._frames=[],this._labels={},this.tick(function(){if(this._time&&this._frames.length>1){var t=i._now()-this._time;if(t>=this._ft){var e=t<2*this._ft?1:Math.floor(t/this._ft);this._time+=e*this._ft,this.moveFrame(e),this._repeat&&(this._repeat-=e)<=0&&(this.stop(),this._callback&&this._callback())}this.touch()}},!1)},i.Anim._super=i,i.Anim.prototype=i._create(i.Anim._super.prototype),i.Anim.prototype.constructor=i.Anim,i.Anim.FPS=22,i.Anim.prototype.fps=function(t){return"undefined"==typeof t?this._fps:(this._fps=t||i.Anim.FPS,this._ft=1e3/this._fps,this)},i.Anim.prototype.setFrames=function(t,e,i){return this.frames(t,e,i)},i.Anim.prototype.frames=function(t){if(this._time=this._time||0,this._frame=0,this._frames=[],this._labels={},t=i.cutout(t,!0),t&&t.length)for(var e=0;e<t.length;e++){var n=t[e];this._frames.push(n),this._labels[n._name]=e}return this},i.Anim.prototype.length=function(){return this._frames?this._frames.length:0},i.Anim.prototype.gotoFrame=function(t,e){return t=0|i.Math.rotate(t,this._frames.length),this._frame=t,e=e||!this._cutouts[0],this._cutouts[0]=this._frames[this._frame],e&&this.pin({width:this._cutouts[0].dWidth(),height:this._cutouts[0].dHeight()}),this._ts_frame=i._TS++,this.touch(),this},i.Anim.prototype.moveFrame=function(t){return this.gotoFrame(this._frame+t)},i.Anim.prototype.gotoLabel=function(t,e){return this.gotoFrame(this._labels[t]||0,e)},i.Anim.prototype.repeat=function(t,e){return this._repeat=t*this._frames.length-1,this._callback=e,this.play(),this},i.Anim.prototype.play=function(t){return"undefined"!=typeof t?(this.gotoFrame(t),this._time=i._now()):this._time||(this._time=i._now()),this.touch(),this},i.Anim.prototype.stop=function(t){return this._time=null,"undefined"!=typeof t&&this.gotoFrame(t),this},i.string=function(t){return(new i.String).frames(t)},i.String=function(){i.String._super.call(this),this.row()},i.String._super=i,i.String.prototype=i._create(i.String._super.prototype),i.String.prototype.constructor=i.String,i.String.prototype.setFont=function(t,e,i){return this.frames(t,e,i)},i.String.prototype.frames=function(t){return"string"==typeof t?this._frames=function(e){return t+e}:"function"==typeof t&&(this._frames=t),this},i.String.prototype.setValue=function(t,e,i){return this.value(t,e,i)},i.String.prototype.value=function(t){if(this._value===t)return this;this._value=t,"string"==typeof t||i._isArray(t)||(t+="");for(var e=this._first,n=0;n<t.length;n++){var s=this._frames(t[n]);e?e.image(s).show():e=i.image(s).appendTo(this),e=e._next}for(;e;)e.hide(),e=e._next;return this},i.row=function(t){return i.create().row(t)},i.prototype.row=function(t){return this.sequence("row",t),this},i.column=function(t){return i.create().column(t)},i.prototype.column=function(t){return this.sequence("column",t),this},i.sequence=function(t,e){return(new i.create).sequence(t,e)},i.prototype.sequence=function(t,e){return this.untick(this._layoutTicker),this._layoutTicker=function(){if(this._mo_seq!=this._ts_touch){this._mo_seq=this._ts_touch;var i=this._mo_seqAlign!=this._ts_children;this._mo_seqAlign=this._ts_children;for(var n,s=0,r=0,o=this.first(!0),h=!0;n=o;){o=n.next(!0),n._pin.relativeMatrix();var a=n._pin._boxWidth,_=n._pin._boxHeight;"column"==t?(!h&&(r+=this._spacing||0),n.pin("offsetY")!=r&&n.pin("offsetY",r),s=Math.max(s,a),r+=_,i&&n.pin("alignX",e)):"row"==t&&(!h&&(s+=this._spacing||0),n.pin("offsetX")!=s&&n.pin("offsetX",s),s+=a,r=Math.max(r,_),i&&n.pin("alignY",e)),h=!1}s+=2*this._padding||0,r+=2*this._padding||0,this.pin("width")!=s&&this.pin("width",s),this.pin("height")!=r&&this.pin("height",r)}},this.tick(this._layoutTicker),this},i.box=function(){return(new i.create).box()},i.prototype.box=function(){return this._boxTicker?this:(this._boxTicker=function(){if(this._mo_box!=this._ts_touch){this._mo_box=this._ts_touch;for(var t,e=0,i=0,n=this.first(!0);t=n;){n=t.next(!0),t._pin.relativeMatrix();var s=t._pin._boxWidth,r=t._pin._boxHeight;e=Math.max(e,s),i=Math.max(i,r)}e+=2*this._padding||0,i+=2*this._padding||0,this.pin("width")!=e&&this.pin("width",e),this.pin("height")!=i&&this.pin("height",i)}},this.tick(this._boxTicker),this)},i.prototype.padding=function(t){return this._padding=t,this},i.prototype.spacing=function(t){return this._spacing=t,this},i._config={},i.config=function(){return 1===arguments.length&&"string"==typeof arguments[0]?i._config[arguments[0]]:(1===arguments.length&&"object"==typeof arguments[0]&&i._extend(i._config,arguments[0]),void(2===arguments.length&&"string"==typeof arguments[0]&&i._config[(arguments[0],arguments[1])]))},i.start=function(t){DEBUG&&console.log("Starting..."),t=i._extend({},i._config,t),i.Texture.start(t["image-loader"],function(){i.Root.start(t["app-loader"])})},i.pause=function(){i.Root.pause()},i.resume=function(){i.Root.resume()},i.cutout=function(t,e){return i.Texture.select(t,e)},i.Root=function(t,e){i.Root._super.call(this),this._paused=!0,this._render=e;var n=this,s=function(){n._paused!==!0&&(n._mo_touch=n._ts_touch,n._render(),n.request(),n._mo_touch==n._ts_touch&&n.pause())};this.request=function(){t(s)}},i.Root._super=i,i.Root.prototype=i._create(i.Root._super.prototype),i.Root.prototype.constructor=i.Root,i.Root.prototype.start=function(){return this.resume()},i.Root.prototype.resume=function(t){return(this._paused||t)&&(this._paused=!1,this.request()),this},i.Root.prototype.pause=function(){return this._paused=!0,this},i.Root.prototype.touch=function(){return this.resume(),i.Root._super.prototype.touch.call(this)},i.Root.prototype.render=function(t){i._stats.tick=i._stats.paint=i._stats.paste=0;var e=i._now(),n=this._lastTime?e-this._lastTime:0;this._lastTime=e,this._tick(n),this._paint(t),i._stats.fps=1e3/(i._now()-e)},i.Root.prototype.viewport=function(t,e,n){if("undefined"==typeof t)return i._extend({},this._viewport);this._viewport={width:t,height:e,ratio:n||1},this._updateViewbox();var s=i._extend({},this._viewport);return this.visit({start:function(t){return t._flag("viewport")?void t.publish("viewport",[s]):!0}}),this},i.Root.prototype.viewbox=function(t,e,i){return this._viewbox={width:t,height:e,mode:/^(in|out)$/.test(i)?i:"in"},this._updateViewbox(),this},i.Root.prototype._updateViewbox=function(){var t=this._viewbox,e=this._viewport;e&&t?this.pin({width:t.width,height:t.height}).pin({resizeMode:t.mode,resizeWidth:e.width,resizeHeight:e.height}):e&&this.pin({width:e.width,height:e.height})},i.Root._queue=[],i.Root._roots=[],i.Root._loader=null,i.Root.add=function(t,e){if(!this._loader)return void this._queue.push(arguments);DEBUG&&console.log("Init app...");var i=this._loader(function(e,i){DEBUG&&console.log("Loading app..."),t(e,i)},e);this._roots.push(i),i.start()},i.Root.start=function(t){DEBUG&&console.log("Loading apps..."),this._loader=t;for(var e;e=this._queue.shift();)this.add.apply(this,e)},i.Root.pause=function(){for(var t=this._queue.length-1;t>=0;t--)this._roots[t].pause()},i.Root.resume=function(){for(var t=this._queue.length-1;t>=0;t--)this._roots[t].resume()},i.Texture=function(t){this.isTexture=!0,this._name=t.name,this._imagePath=t.imagePath,this._imageRatio=t.imageRatio||1,this._cutouts=t.cutouts||[],this._factory=t.factory,this._map=t.filter||t.map,this._ratio=t.ratio||1,this._trim=t.trim||0},i.Texture.prototype._wrap=function(t){if(!t||t.isCutout)return t;t=i._extend({},t),"function"==typeof this._map&&(t=this._map(t));var e=this._ratio;1!=e&&(t.x*=e,t.y*=e,t.width*=e,t.height*=e,t.top*=e,t.bottom*=e,t.left*=e,t.right*=e);var n=this._trim;n&&(t.x+=n,t.y+=n,t.width-=2*n,t.height-=2*n,t.top-=n,t.bottom-=n,t.left-=n,t.right-=n);var s=this;return t=new i.Out(t,function(){return i.Texture._images[s._imagePath]},this._imageRatio)},i.Texture.prototype.select=function(t,e){if(e){for(var i=[],n=t.length,s=0;s<this._cutouts.length;s++){var r=this._cutouts[s],o=r._name||r.name;o&&o.substring(0,n)==t&&i.push(this._wrap(r))}if(i.length)return i;throw"Cutouts not found: '"+this._name+":"+t+"'"}for(var s=0;s<this._cutouts.length;s++){var r=this._cutouts[s],o=r._name||r.name;if(o==t)return this._wrap(r)}if(this._factory)return this._wrap(this._factory(t));throw"Cutout not found: '"+this._name+":"+t+"'"},i.Texture._cache={one:{},many:{}},i.Texture.select=function(t,e){if("function"==typeof t)return i.Texture.select(t(),e);if("string"!=typeof t)return t;var n=t.indexOf(":");if(1>n)throw"Invalid selector: '"+t+"'";var s=t.slice(0,n),r=t.slice(n+1),o=i.Texture._list[s];if(null==o)throw"Texture not found: '"+t+"'";var h=e?i.Texture._cache.many:i.Texture._cache.one,a=h[t];return"undefined"==typeof a&&(a=o.select(r,e),h[t]=a),a},i.addTexture=function(){return i.Texture.add.apply(i.Texture,arguments)},i.Texture._list={},i.Texture.add=function(){for(var t=0;t<arguments.length;t++){var e=arguments[t];e=e.isTexture?e:new i.Texture(e),i.Texture._list[e._name]=e}return this},i.Texture._images={},i.Texture.start=function(t,e){function n(){DEBUG&&console.log("Image loaded."),r()}function s(t){DEBUG&&console.log("Error loading image: "+t),r()}function r(){--o<=0&&(DEBUG&&console.log("Images loaded."),e&&e())}DEBUG&&console.log("Loading images...");var o=0,h=!0,a=i.Texture._list;for(var _ in a){var u=a[_]._imagePath;u&&(o++,i.Texture._images[u]=t(u,n,s),h=!1)}h&&(DEBUG&&console.log("No image to load."),e&&e())},i.Out=function(t,e,i){this.isCutout=!0,"function"==typeof e?this._imagefn=e:this._image=e,this._ratio=i||1,this._name=t.name,this._x=t.x,this._y=t.y,this._width=t.width,this._height=t.height,this._top=t.top||0,this._bottom=t.bottom||0,this._left=t.left||0,this._right=t.right||0,this._reset()},i.Out.prototype._reset=function(){this._sx=this._x*this._ratio,this._sy=this._y*this._ratio,this._sw=this._width*this._ratio,this._sh=this._height*this._ratio,this._dx=0,this._dy=0,this._dw=this._width,this._dh=this._height},i.Out.prototype.clone=function(){var t=i._create(i.Out.prototype);for(var e in this)this.hasOwnProperty(e)&&(t[e]=this[e]);return t._reset(),t},i.Out.prototype.dWidth=function(t){return"undefined"!=typeof t?(this._dw=t,this):this._dw},i.Out.prototype.dHeight=function(t){return"undefined"!=typeof t?(this._dh=t,this):this._dh},i.Out.prototype.cropX=function(t,e){return e=e||0,t=Math.min(t,this._width-e),this._dw=t,this._sw=t*this._ratio,this._sx=(this._x+e)*this._ratio,this},i.Out.prototype.cropY=function(t,e){return e=e||0,t=Math.min(t,this._height-e),this._dh=t,this._sh=t*this._ratio,this._sy=(this._y+e)*this._ratio,this},i.Out.prototype.offset=function(t,e){return this._dx=t,this._dy=e,this},i.Out.prototype.paste=function(t){i._stats.paste++,!this._image&&this._imagefn&&(this._image=this._imagefn());try{this._image&&t.drawImage(this._image,this._sx,this._sy,this._sw,this._sh,this._dx,this._dy,this._dw,this._dh)}catch(e){this._failed||(console.log("Unable to paste: "+this,img),this._failed=!0)}},i.Out.prototype.toString=function(){return"["+this._name+": "+this._sx+"x"+this._sy+"-"+this._sw+"x"+this._sh+this._dx+"x"+this._dy+"-"+this._dw+"x"+this._dh+"]"},i.drawing=function(){return i.image(i.Out.drawing.apply(i.Out,arguments))},i.Out.drawing=function(){var t=document.createElement("canvas"),e=t.getContext("2d"),n={},s=0;"object"==typeof arguments[s]?n=arguments[s++]:("string"==typeof arguments[s]&&(n.name=arguments[s++]),n.width=arguments[s++],n.height=arguments[s++],"number"==typeof arguments[s]&&(n.ratio=arguments[s++]),n.x=0,n.y=0),n.ratio=n.ratio||1,n.name=n.name||1e3*Math.random()|0,t.width=Math.ceil(n.width*n.ratio),t.height=Math.ceil(n.height*n.ratio);var r=new i.Out(n,t,n.ratio);return"function"==typeof arguments[arguments.length-1]&&arguments[arguments.length-1].call(r,e,n.ratio),r},i.Pin=function(t){this._owner=t,this._parent=null,this._relativeMatrix=new i.Matrix,this._absoluteMatrix=new i.Matrix,this.reset()},i.Pin.prototype.reset=function(){this._textureAlpha=1,this._alpha=1,this._width=0,this._height=0,this._scaleX=1,this._scaleY=1,this._skewX=0,this._skewY=0,this._rotation=0,this._pivoted=!1,this._pivotX=null,this._pivotY=null,this._handled=!1,this._handleX=0,this._handleY=0,this._aligned=!1,this._alignX=0,this._alignY=0,this._offsetX=0,this._offsetY=0,this._boxX=0,this._boxY=0,this._boxWidth=this._width,this._boxHeight=this._height,this._ts_translate=i._TS++,this._ts_transform=i._TS++,this._ts_matrix=i._TS++},i.Pin.prototype.tick=function(){return this._parent=this._owner._parent&&this._owner._parent._pin,this._handled&&this._mo_handle!=this._ts_transform&&(this._mo_handle=this._ts_transform,this._ts_translate=i._TS++),this._aligned&&this._parent&&this._mo_align!=this._parent._ts_transform&&(this._mo_align=this._parent._ts_transform,this._ts_translate=i._TS++),this},i.Pin.prototype.toString=function(){return this._owner.id()+" ["+this._alignX+", "+this._alignY+"] ["+this._handleX+", "+this._handleY+"] ["+(this._parent?this._parent._owner.id():null)+"]"},i.Pin.prototype.absoluteMatrix=function(){var t=Math.max(this._ts_transform,this._ts_translate,this._parent?this._parent._ts_matrix:0);if(this._mo_abs==t)return this._absoluteMatrix;this._mo_abs=t;var e=this._absoluteMatrix;return e.copyFrom(this.relativeMatrix()),this._parent&&e.concat(this._parent._absoluteMatrix),this._ts_matrix=i._TS++,e},i.Pin.prototype.relativeMatrix=function(){var t=Math.max(this._ts_transform,this._ts_translate,this._parent?this._parent._ts_transform:0);if(this._mo_rel==t)return this._relativeMatrix;this._mo_rel=t;var e=this._relativeMatrix;if(e.identity(),this._pivoted&&e.translate(-this._pivotX*this._width,-this._pivotY*this._height),e.scale(this._scaleX,this._scaleY),e.skew(this._skewX,this._skewY),e.rotate(this._rotation),this._pivoted&&e.translate(this._pivotX*this._width,this._pivotY*this._height),this._pivoted)this._boxX=0,this._boxY=0,this._boxWidth=this._width,this._boxHeight=this._height;else{var i,n,s=e;s.a>0&&s.c>0||s.a<0&&s.c<0?(i=0,n=s.a*this._width+s.c*this._height):(i=s.a*this._width,n=s.c*this._height),i>n?(this._boxX=n,this._boxWidth=i-n):(this._boxX=i,this._boxWidth=n-i),s.b>0&&s.d>0||s.b<0&&s.d<0?(i=0,n=s.b*this._width+s.d*this._height):(i=s.b*this._width,n=s.d*this._height),i>n?(this._boxY=n,this._boxHeight=i-n):(this._boxY=i,this._boxHeight=n-i)}return this._x=this._offsetX,this._y=this._offsetY,this._x-=this._boxX+this._handleX*this._boxWidth,this._y-=this._boxY+this._handleY*this._boxHeight,this._aligned&&this._parent&&(this._parent.relativeMatrix(),this._x+=this._alignX*this._parent._width,this._y+=this._alignY*this._parent._height),e.translate(this._x,this._y),this._relativeMatrix},i.Pin._SINGLE={},i.Pin.prototype.get=function(t){return i.Pin._getters[t]?i.Pin._getters[t](this):void 0},i.Pin.prototype.set=function(t,e){var n=i.Pin._SINGLE,s=null;for(s in n)delete n[s];if("string"==typeof t)n[t]=e;else if("object"==typeof t)for(s in t)n[s]=t[s];for(s in n)"undefined"!=typeof n[s]&&i.Pin._setters[s]&&i.Pin._setters[s](this,n[s],n);return this._owner&&(this._owner._ts_pin=i._TS++,this._owner.touch()),this},i.Pin._getters={alpha:function(t){return t._alpha},textureAlpha:function(t){return t._textureAlpha},width:function(t){return t._width},height:function(t){return t._height},scaleX:function(t){return t._scaleX},scaleY:function(t){return t._scaleY},skewX:function(t){return t._skewX},skewY:function(t){return t._skewY},rotation:function(t){return t._rotation},pivotX:function(t){return t._pivotX},pivotY:function(t){return t._pivotY},offsetX:function(t){return t._offsetX},offsetY:function(t){return t._offsetY},alignX:function(t){return t._alignX},alignY:function(t){return t._alignY},handleX:function(t){return t._handleX},handleY:function(t){return t._handleY}},i.Pin._setters={alpha:function(t,e){t._alpha=e},textureAlpha:function(t,e){t._textureAlpha=e},width:function(t,e){t._width_=e,t._width=e,t._ts_transform=i._TS++},height:function(t,e){t._height_=e,t._height=e,t._ts_transform=i._TS++},scale:function(t,e){t._scaleX=e,t._scaleY=e,t._ts_transform=i._TS++},scaleX:function(t,e){t._scaleX=e,t._ts_transform=i._TS++},scaleY:function(t,e){t._scaleY=e,t._ts_transform=i._TS++},skew:function(t,e){t._skewX=e,t._skewY=e,t._ts_transform=i._TS++},skewX:function(t,e){t._skewX=e,t._ts_transform=i._TS++},skewY:function(t,e){t._skewY=e,t._ts_transform=i._TS++},rotation:function(t,e){t._rotation=e,t._ts_transform=i._TS++},pivot:function(t,e){t._pivotX=e,t._pivotY=e,t._pivoted=!0,t._ts_transform=i._TS++},pivotX:function(t,e){t._pivotX=e,t._pivoted=!0,t._ts_transform=i._TS++},pivotY:function(t,e){t._pivotY=e,t._pivoted=!0,t._ts_transform=i._TS++},offset:function(t,e){t._offsetX=e,t._offsetY=e,t._ts_translate=i._TS++},offsetX:function(t,e){t._offsetX=e,t._ts_translate=i._TS++},offsetY:function(t,e){t._offsetY=e,t._ts_translate=i._TS++},align:function(t,e,i){this.alignX(t,e,i),this.alignY(t,e,i)},alignX:function(t,e,n){t._alignX=e,t._aligned=!0,t._ts_translate=i._TS++,this.handleX(t,e,n)},alignY:function(t,e,n){t._alignY=e,t._aligned=!0,t._ts_translate=i._TS++,this.handleY(t,e,n)},handle:function(t,e,i){this.handleX(t,e,i),this.handleY(t,e,i)},handleX:function(t,e){t._handleX=e,t._handled=!0,t._ts_translate=i._TS++},handleY:function(t,e){t._handleY=e,t._handled=!0,t._ts_translate=i._TS++},resizeMode:function(t,e,i){"number"==typeof i.resizeWidth&&"number"==typeof i.resizeHeight&&(this.resizeWidth(t,i.resizeWidth,i,!0),this.resizeHeight(t,i.resizeHeight,i,!0),"out"==e?t._scaleX=t._scaleY=Math.max(t._scaleX,t._scaleY):"in"==e&&(t._scaleX=t._scaleY=Math.min(t._scaleX,t._scaleY)),t._width=i.resizeWidth/t._scaleX,t._height=i.resizeHeight/t._scaleY)},resizeWidth:function(t,e,n,s){(!n.resizeMode||s)&&(t._scaleX=e/t._width_,t._width=t._width_,t._ts_transform=i._TS++)},resizeHeight:function(t,e,n,s){(!n.resizeMode||s)&&(t._scaleY=e/t._height_,t._height=t._height_,t._ts_transform=i._TS++)},scaleMode:function(t,e,i){"number"==typeof i.scaleWidth&&"number"==typeof i.scaleHeight&&(this.scaleWidth(t,i.scaleWidth,i,!0),this.scaleHeight(t,i.scaleHeight,i,!0),"out"==e?t._scaleX=t._scaleY=Math.max(t._scaleX,t._scaleY):"in"==e&&(t._scaleX=t._scaleY=Math.min(t._scaleX,t._scaleY)))},scaleWidth:function(t,e,n,s){(!n.scaleMode||s)&&(t._scaleX=e/t._width_,t._ts_transform=i._TS++)},scaleHeight:function(t,e,n,s){(!n.scaleMode||s)&&(t._scaleY=e/t._height_,t._ts_transform=i._TS++)},matrix:function(t,e,i){this.scaleX(t,e.a,i),this.skewX(t,e.c/e.d,i),this.skewY(t,e.b/e.a,i),this.scaleY(t,e.d,i),this.offsetX(t,e.e,i),this.offsetY(t,e.f,i),this.rotation(t,0,i)}},i.Matrix=function(t,e,i,n,s,r){this.changed=!0,this.a=t||1,this.b=e||0,this.c=i||0,this.d=n||1,this.e=s||0,this.f=r||0},i.Matrix.prototype.toString=function(){return"["+this.a+", "+this.b+", "+this.c+", "+this.d+", "+this.e+", "+this.f+"]"},i.Matrix.prototype.clone=function(){return new i.Matrix(this.a,this.b,this.c,this.d,this.e,this.f)},i.Matrix.prototype.copyTo=function(t){return t.copyFrom(this),this},i.Matrix.prototype.copyFrom=function(t){return this.changed=!0,this.a=t.a,this.b=t.b,this.c=t.c,this.d=t.d,this.e=t.e,this.f=t.f,this},i.Matrix.prototype.identity=function(){return this.changed=!0,this.a=1,this.b=0,this.c=0,this.d=1,this.e=0,this.f=0,this},i.Matrix.prototype.rotate=function(t){if(!t)return this;this.changed=!0;var e=t?Math.cos(t):1,i=t?Math.sin(t):0,n=e*this.a-i*this.b,s=e*this.b+i*this.a,r=e*this.c-i*this.d,o=e*this.d+i*this.c,h=e*this.e-i*this.f,a=e*this.f+i*this.e;return this.a=n,this.b=s,this.c=r,this.d=o,this.e=h,this.f=a,this},i.Matrix.prototype.translate=function(t,e){return t||e?(this.changed=!0,this.e+=t,this.f+=e,this):this},i.Matrix.prototype.scale=function(t,e){return t-1||e-1?(this.changed=!0,this.a*=t,this.b*=e,this.c*=t,this.d*=e,this.e*=t,this.f*=e,this):this},i.Matrix.prototype.skew=function(t,e){if(!t&&!e)return this;this.changed=!0;var i=this.a+this.b*t,n=this.b+this.a*e,s=this.c+this.d*t,r=this.d+this.c*e,o=this.e+this.f*t,h=this.f+this.e*e;return this.a=i,this.b=n,this.c=s,this.d=r,this.e=o,this.f=h,this},i.Matrix.prototype.concat=function(t){this.changed=!0;var e=this,i=e.a*t.a+e.b*t.c,n=e.b*t.d+e.a*t.b,s=e.c*t.a+e.d*t.c,r=e.d*t.d+e.c*t.b,o=e.e*t.a+t.e+e.f*t.c,h=e.f*t.d+t.f+e.e*t.b;
return this.a=i,this.b=n,this.c=s,this.d=r,this.e=o,this.f=h,this},i.Matrix.prototype.reverse=function(){if(this.changed){this.changed=!1,this.reversed=this.reversed||new i.Matrix;var t=this.a*this.d-this.b*this.c;this.reversed.a=this.d/t,this.reversed.b=-this.b/t,this.reversed.c=-this.c/t,this.reversed.d=this.a/t,this.reversed.e=(this.c*this.f-this.e*this.d)/t,this.reversed.f=(this.e*this.b-this.a*this.f)/t}return this.reversed},i.Matrix.prototype.map=function(t,e){return e=e||{},e.x=this.a*t.x+this.c*t.y+this.e,e.y=this.b*t.x+this.d*t.y+this.f,e},i.Matrix.prototype.mapX=function(t,e){return this.a*t+this.c*e+this.e},i.Matrix.prototype.mapY=function(t,e){return this.b*t+this.d*e+this.f},i.Math={},i.Math.random=function(t,e){return"undefined"==typeof t?(e=1,t=0):"undefined"==typeof e&&(e=t,t=0),t==e?t:Math.random()*(e-t)+t},i.Math.rotate=function(t,e,i){return"undefined"==typeof e?(i=1,e=0):"undefined"==typeof i&&(i=e,e=0),i>e?(t=(t-e)%(i-e),t+(0>t?i:e)):(t=(t-i)%(e-i),t+(0>=t?e:i))},i.Math.length=function(t,e){return Math.sqrt(t*t+e*e)},e.exports=i},{}],3:[function(t,e){function i(t){if("function"==typeof t)return t;if("string"!=typeof t)return i._identity;var e=i._cache[t];if(e)return e;var n=/^(\w+)(-(in|out|in-out|out-in))?(\((.*)\))?$/i.exec(t);return n&&n.length?(easing=i._easings[n[1]],mode=i._modes[n[3]],params=n[5],e=easing&&easing.fn?easing.fn:easing&&easing.fc?easing.fc.apply(easing.fc,params&&params.replace(/\s+/,"").split(",")):i._identity,mode&&(e=mode.fn(e)),i._cache[t]=e,e):i._identity}DEBUG="undefined"==typeof DEBUG||DEBUG,i._identity=function(t){return t},i._cache={},i._modes={},i._easings={},i.add=function(t){for(var e=(t.name||t.mode).split(/\s+/),n=0;n<e.length;n++){var s=e[n];s&&((t.name?i._easings:i._modes)[s]=t)}},i.add({mode:"in",fn:function(t){return t}}),i.add({mode:"out",fn:function(t){return function(e){return 1-t(1-e)}}}),i.add({mode:"in-out",fn:function(t){return function(e){return.5>e?t(2*e)/2:1-t(2*(1-e))/2}}}),i.add({mode:"out-in",fn:function(t){return function(e){return.5>e?1-t(2*(1-e))/2:t(2*e)/2}}}),i.add({name:"linear",fn:function(t){return t}}),i.add({name:"quad",fn:function(t){return t*t}}),i.add({name:"cubic",fn:function(t){return t*t*t}}),i.add({name:"quart",fn:function(t){return t*t*t*t}}),i.add({name:"quint",fn:function(t){return t*t*t*t*t}}),i.add({name:"sin sine",fn:function(t){return 1-Math.cos(t*Math.PI/2)}}),i.add({name:"exp",fn:function(t){return 0==t?0:Math.pow(2,10*(t-1))}}),i.add({name:"circle circ",fn:function(t){return 1-Math.sqrt(1-t*t)}}),i.add({name:"bounce",fn:function(t){return 1/2.75>t?7.5625*t*t:2/2.75>t?7.5625*(t-=1.5/2.75)*t+.75:2.5/2.75>t?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375}}),i.add({name:"poly",fc:function(t){return function(e){return Math.pow(e,t)}}}),i.add({name:"elastic",fc:function(t,e){e=e||.45,t=t||1;var i=e/(2*Math.PI)*Math.asin(1/t);return function(n){return 1+t*Math.pow(2,-10*n)*Math.sin(2*(n-i)*Math.PI/e)}}}),i.add({name:"back",fc:function(t){return t="undefined"!=typeof t?t:1.70158,function(e){return e*e*((t+1)*e-t)}}}),e.exports=i},{}],4:[function(t){function e(t,e){function i(){o?(h=window.innerWidth>0?window.innerWidth:screen.width,a=window.innerHeight>0?window.innerHeight:screen.height,FastCanvas.isFast||(s.style.width=h+"px",s.style.height=a+"px")):(h=s.clientWidth,a=s.clientHeight),h*=_,a*=_,FastCanvas.isFast||(s.width=h,s.height=a),DEBUG&&console.log("Resize: "+h+" x "+a+" / "+_),l.viewport(h,a,_)}e=e||{};var s=e.canvas,r=null,o=!0,h=0,a=0,_=1;if(s=FastCanvas.create(FASTCANVAS_FALLBACK),console.log("FastCanvas: "+FastCanvas.isFast),"string"==typeof s&&(s=document.getElementById(s)),s||(s=document.getElementById("cutjs")),!s){o=!0,DEBUG&&console.log("Creating element..."),s=document.createElement("canvas"),s.style.position="absolute";var u=document.body;u.insertBefore(s,u.firstChild)}r=s.getContext("2d");var c=window.devicePixelRatio||1,f=r.webkitBackingStorePixelRatio||r.mozBackingStorePixelRatio||r.msBackingStorePixelRatio||r.oBackingStorePixelRatio||r.backingStorePixelRatio||1;_=c/f;var p=window.requestAnimationFrame||window.msRequestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.oRequestAnimationFrame||function(t){return window.setTimeout(t,1e3/60)};DEBUG&&console.log("Creating root...");var l=new n.Root(p,function(){r.setTransform(1,0,0,1,0,0),r.clearRect(0,0,h,a),this.render(r),FastCanvas.render()});return t(l,document),i(),window.addEventListener("resize",i,!1),l}function i(t,e,i){var n=FastCanvas.createImage();return DEBUG&&console.log("Loading image: "+t+" #"+n.id),n.onload=e,n.onerror=i,n.src=t,n}var n=t("./core");DEBUG="undefined"==typeof DEBUG||DEBUG,"undefined"==typeof FastCanvas&&(FastCanvas=window.FastCanvas),FASTCANVAS_FALLBACK="undefined"!=typeof FASTCANVAS_FALLBACK&&FASTCANVAS_FALLBACK,window.addEventListener("load",function(){DEBUG&&console.log("On load."),document.addEventListener("deviceready",function(){DEBUG&&console.log("On deviceready."),FastCanvas.create(FASTCANVAS_FALLBACK),console.log("FastCanvas: "+FastCanvas.isFast),n.start({"app-loader":e,"image-loader":i})},!1),document.addEventListener("pause",function(){n.pause()},!1),document.addEventListener("resume",function(){n.resume()},!1)},!1),function(t){document.addEventListener("click",t),document.addEventListener("mousedown",t),document.addEventListener("mouseup",t),document.addEventListener("touchstart",t),document.addEventListener("touchend",t),document.addEventListener("touchcancel",t)}(function(){})},{"./core":2}],5:[function(t,e){var i=t("./core"),n=t("./tween"),s=t("./easing");i.prototype.tween=function(t,e){return this._tween||(this._tween=new n(this)),this._tween.tween(t,e)},n.prototype.ease=function(t){return this._next.easing=s(t),this},e.exports=i,e.exports.Tween=n,e.exports.Easing=s},{"./core":2,"./easing":3,"./tween":7}],6:[function(t,e){function i(){i.subscribe.apply(i,arguments)}DEBUG="undefined"==typeof DEBUG||DEBUG,i.CLICK="click",i.START="touchstart mousedown",i.MOVE="touchmove mousemove",i.END="touchend mouseup",i.CANCEL="touchcancel",i.subscribe=function(t,e){function n(n){i._xy(t,e,n,f),DEBUG&&console.log("Mouse Start: "+n.type+" "+f),n.preventDefault(),_(n.type,n),h()}function s(t){DEBUG&&console.log("Mouse End: "+t.type+" "+f),t.preventDefault(),_(t.type,t),l.length&&(DEBUG&&console.log("Mouse Click: "+l.length),a(t))}function r(t){DEBUG&&console.log("Mouse Cancel: "+t.type),t.preventDefault(),_(t.type,t)}function o(n){i._xy(t,e,n,f),t._flag(n.type)&&(n.preventDefault(),_(n.type,n))}function h(){for(;l.length;)l.pop();_("click",null,l)}function a(e){c.event=e,c.type="click",c.root=t,c.collect=!1;for(var i=!1;l.length;){var n=l.shift();i||(i=u.end(n,c)?!0:i)}}function _(e,i,n){p.x=f.x,p.y=f.y,c.event=i,c.type=e,c.root=t,c.collect=n,c.root.visit(u,c)}var u=null,c={},f=null,p=null,l=[];e=e||document,"ontouchstart"in window?(e.addEventListener("touchstart",n),e.addEventListener("touchend",s),e.addEventListener("touchmove",o),e.addEventListener("touchcancel",r)):(e.addEventListener("mousedown",n),e.addEventListener("mouseup",s),e.addEventListener("mousemove",o)),u={reverse:!0,visible:!0,start:function(t,e){return!t._flag(e.type)},end:function(t,e){p.raw=e.event,p.type=e.type;var n=t.listeners(e.type);if(n&&(t.matrix().reverse().map(f,p),t===e.root||t.attr("spy")||i._isInside(t,p))){if(e.collect)return void e.collect.push(t);for(var s=!1,r=0;r<n.length;r++)s=n[r].call(t,p)?!0:s;return s}}},f={x:0,y:0,toString:function(){return(0|this.x)+"x"+(0|this.y)}},p={x:0,y:0,toString:function(){return f+" / "+(0|this.x)+"x"+(0|this.y)}}},i._isInside=function(t,e){return e.x>=0&&e.x<=t._pin._width&&e.y>=0&&e.y<=t._pin._height},i._xy=function(t,e,i,n){var s=!1;if(i.touches){if(!i.touches.length)return;s=!0,n.x=i.touches[0].pageX,n.y=i.touches[0].pageY}else n.x=i.clientX,n.y=i.clientY,document.body.scrollLeft||document.body.scrollTop||document.documentElement&&(n.x+=document.documentElement.scrollLeft,n.y+=document.documentElement.scrollTop);n.x-=e.clientLeft||0,n.y-=e.clientTop||0;for(var r=e;r;)n.x-=r.offsetLeft||0,n.y-=r.offsetTop||0,s||(n.x+=r.scrollLeft||0,n.y+=r.scrollTop||0),r=r.offsetParent;n.x*=t.viewport().ratio||1,n.y*=t.viewport().ratio||1},e.exports=i},{}],7:[function(t,e){function i(t){var e=this;this._owner=t,this._queue=[],this._next=null,t.tick(function(i){if(e._queue.length){this.touch();var n=e._queue[0];if(n.time?n.time+=i:n.time=1,!(n.time<n.delay)){if(!n.start){n.start={},n.keys={};for(var s in n.end)"number"==typeof(start=t.pin(s))?(n.start[s]=start,n.keys[s]=s):"number"==typeof(startX=t.pin(s+"X"))&&"number"==typeof(startY=t.pin(s+"Y"))&&(n.start[s+"X"]=startX,n.keys[s+"X"]=s,n.start[s+"Y"]=startY,n.keys[s+"Y"]=s)}var r=(n.time-n.delay)/n.duration,o=r>=1;r=r>1?1:r,r="function"==typeof n.easing?n.easing(r):r;var h=1-r;for(var s in n.keys)t.pin(s,n.start[s]*h+n.end[n.keys[s]]*r);o&&(e._queue.shift(),n.then&&n.then.call(t))}}},!0)}DEBUG="undefined"==typeof DEBUG||DEBUG,i.prototype.tween=function(t,e){return this._next={id:Cut._TS++,end:{},duration:t||400,delay:e||0},this},i.prototype.pin=function(t,e){this._next!==this._queue[this._queue.length-1]&&(this._owner.touch(),this._queue.push(this._next));var i=this._next.end;if("object"==typeof t)for(var n in t)i[n]=t[n];else"undefined"!=typeof e&&(i[t]=e);return this},i.prototype.clear=function(t){for(var e;e=this._queue.shift();)t&&this._owner.pin(e.end);return this},i.prototype.then=function(t){return this._next.then=t,this},i.prototype.ease=function(t){return this._next.easing=t,this},e.exports=i},{}]},{},[1])(1)});