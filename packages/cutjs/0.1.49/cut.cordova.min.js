/*
 * CutJS 0.1.49
 * Copyright (c) 2013-2014 Ali Shakiba, Piqnt LLC and other contributors
 * Available under the MIT license
 * @license
 */
!function(){function t(){return this instanceof t?(t._stats.create++,this._id="",this._visible=!0,this._parent=null,this._next=null,this._prev=null,this._first=null,this._last=null,this._pin=new t.Pin(this),this._cutouts=[],this._tickBefore=[],this._tickAfter=[],void(this._alpha=1)):t.Loader.load.apply(t.Loader,arguments)}DEBUG=("undefined"==typeof DEBUG||DEBUG)&&console,t._create=function(){if("function"==typeof Object.create)return function(){return Object.create.apply(null,arguments)};var t=function(){};return function(i){if(arguments.length>1)throw Error("Second argument is not supported!");if(null===i||"object"!=typeof i)throw Error("Invalid prototype!");return t.prototype=i,new t}}(),t._stats={create:0,tick:0,paint:0,paste:0},t.create=function(){return new t},t.prototype.render=function(i){t._stats.tick=t._stats.paint=t._stats.paste=0;var e=t._now(),n=this._lastTime?e-this._lastTime:0;this._lastTime=e,this._tick(n),this._paint(i),t._stats.fps=1e3/(t._now()-e)},t.prototype.MAX_ELAPSE=1/0,t.prototype._tick=function(i){if(this._visible){i>this.MAX_ELAPSE&&(i=this.MAX_ELAPSE),this._pin.tick();for(var e=this._tickBefore.length,n=0;e>n;n++)t._stats.tick++,this._tickBefore[n].call(this,i);for(var s,r=this._first;s=r;)r=s._next,s._tick(i);for(var e=this._tickAfter.length,n=0;e>n;n++)t._stats.tick++,this._tickAfter[n].call(this,i)}},t.prototype.tick=function(t,i){i?this._tickBefore.push(t):this._tickAfter.push(t)},t.prototype.untick=function(t){var i;t&&((i=this._tickBefore.indexOf(t))>=0?this._tickBefore.splice(i,1):(i=this._tickAfter.indexOf(t))>=0&&this._tickAfter.splice(i,1))},t.prototype._paint=function(i){if(this._visible){t._stats.paint++;var e=this._pin.absoluteMatrix();i.setTransform(e.a,e.b,e.c,e.d,e.e,e.f),this._alpha=this._pin._alpha*(this._parent?this._parent._alpha:1);var n=this._pin._textureAlpha*this._alpha;i.globalAlpha!=n&&(i.globalAlpha=n);for(var s=this._cutouts.length,r=0;s>r;r++)this._cutouts[r].paste(i);i.globalAlpha!=this._alpha&&(i.globalAlpha=this._alpha);for(var o,h=this._first;o=h;)h=o._next,o._paint(i)}},t.prototype.toString=function(){return"["+this._id+"]"},t.prototype.id=function(t){return arguments.length?(this._id=t,this):this._id},t.prototype.attr=function(t,i){return arguments.length<2?this._attrs?this._attrs[t]:void 0:((this._attrs?this._attrs:this._attrs={})[t]=i,this)},t.prototype.on=t.prototype.listen=function(i,e){if("function"!=typeof e)return this;i=(t._isArray(i)?i.join(" "):i).split(/\s+/);for(var n=0;n<i.length;n++){var s=i[n];s&&(this._listeners=this._listeners||{},this._listeners[s]=this._listeners[s]||[],this._listeners[s].push(e))}return this},t.prototype.listeners=function(t){return this._listeners&&this._listeners[t]},t.prototype.publish=function(t,i){var e=this.listeners(t);if(!e||!e.length)return!1;for(var n=0;n<e.length;n++)e[n].apply(this,i);return!0},t.prototype.visit=function(t){var i=t.reverse,e=t.visible;if(!t.start||!t.start(this)){for(var n,s=i?this.last(e):this.first(e);n=s;)if(s=i?n.prev(e):n.next(e),n.visit(t,i))return!0;return t.end&&t.end(this)}},t.prototype.visible=function(i){return arguments.length?(this._visible=i,this._parent&&(this._parent._ts_children=t._TS++),this._ts_pin=t._TS++,this.touch(),this):this._visible},t.prototype.hide=function(){return this.visible(!1)},t.prototype.show=function(){return this.visible(!0)},t.prototype.parent=function(){return this._parent},t.prototype.next=function(t){for(var i=this._next;i&&t&&!i._visible;)i=i._next;return i},t.prototype.prev=function(t){for(var i=this._prev;i&&t&&!i._visible;)i=i._prev;return i},t.prototype.first=function(t){for(var i=this._first;i&&t&&!i._visible;)i=i._next;return i},t.prototype.last=function(t){for(var i=this._last;i&&t&&!i._visible;)i=i._prev;return i},t.prototype.append=function(){for(var i=0;i<arguments.length;i++){if(!t._isCut(arguments[i]))throw"It is not a Cut node!";arguments[i].appendTo(this)}return this},t.prototype.prepend=function(){for(var i=0;i<arguments.length;i++){if(!t._isCut(arguments[i]))throw"It is not a Cut node!";arguments[i].prependTo(this)}return this},t.prototype.appendTo=function(i){if(!i)throw"Parent is null!";if(!t._isCut(i))throw"It is not a Cut node!";return this.remove(),i._last&&(i._last._next=this,this._prev=i._last),this._parent=i,i._last=this,i._first||(i._first=this),this._ts_parent=t._TS++,i._ts_children=t._TS++,i.touch(),this},t.prototype.prependTo=function(i){if(!i)throw"Parent is null!";if(!t._isCut(i))throw"It is not a Cut node!";return this.remove(),i._first&&(i._first._prev=this,this._next=i._first),this._parent=i,i._first=this,i._last||(i._last=this),this._ts_parent=t._TS++,i._ts_children=t._TS++,i.touch(),this},t.prototype.insertNext=function(){if(arguments.length)for(var i=0;i<arguments.length;i++){if(!t._isCut(arguments[i]))throw"It is not a Cut node!";arguments[i]&&arguments[i].insertAfter(this)}return this},t.prototype.insertPrev=function(){if(arguments.length)for(var i=0;i<arguments.length;i++){if(!t._isCut(arguments[i]))throw"It is not a Cut node!";arguments[i]&&arguments[i].insertBefore(this)}return this},t.prototype.insertBefore=function(i){if(!i)throw"Next is null!";if(!t._isCut(i))throw"It is not a Cut node!";this.remove();var e=i._parent,n=i._prev;return i._prev=this,n&&(n._next=this)||e&&(e._first=this),this._parent=e,this._prev=n,this._next=i,this._ts_parent=t._TS++,this.touch(),this},t.prototype.insertAfter=function(i){if(!i)throw"Prev is null!";if(!t._isCut(i))throw"It is not a Cut node!";this.remove();var e=i._parent,n=i._next;return i._next=this,n&&(n._prev=this)||e&&(e._last=this),this._parent=e,this._prev=i,this._next=n,this._ts_parent=t._TS++,this.touch(),this},t.prototype.remove=function(){if(arguments.length){for(var i=0;i<arguments.length;i++){if(!t._isCut(arguments[i]))throw"It is not a Cut node!";arguments[i]&&arguments[i].remove()}return this}return this._prev&&(this._prev._next=this._next),this._next&&(this._next._prev=this._prev),this._parent&&(this._parent._first===this&&(this._parent._first=this._next),this._parent._last===this&&(this._parent._last=this._prev)),this._parent&&(this._parent._ts_children=t._TS++,this._parent.touch()),this._prev=this._next=this._parent=null,this._ts_parent=t._TS++,this},t.prototype.empty=function(){for(var i,e=this._first;i=e;)e=i._next,i._prev=i._next=i._parent=null;return this._first=this._last=null,this._ts_children=t._TS++,this.touch(),this},t.prototype.touch=function(){return this._ts_touch=t._TS++,this._parent&&this._parent.touch(),this},t.prototype.pin=function(){if(!arguments.length)return this._pin;var t=this._pin.update.apply(this._pin,arguments);return t===this._pin?this:t},t.prototype.matrix=function(){return this._pin.absoluteMatrix(this,this._parent?this._parent._pin:null)},t.prototype.tween=function(i,e){return(this._tween||(this._tween=new t.Tween(this))).tween(i,e)},t.Tween=function(t){var i=this;this._owner=t,this._queue=[],this._next=null,t.tick(function(e){if(i._queue.length){this.touch();var n=i._queue[0];if(n.time?n.time+=e:n.time=1,!(n.time<n.delay)){if(!n.start){n.start={};for(var s in n.end){var r=t.pin(s);"number"==typeof r&&(n.start[s]=r)}}var o=(n.time-n.delay)/n.duration,h=o>=1;o=o>1?1:o,o="function"==typeof n.easing?n.easing(o):o;for(var s in n.start){var r=n.start[s],a=n.end[s];t.pin(s,r+(a-r)*o)}h&&(i._queue.shift(),n.then&&n.then.call(t))}}},!0)},t.Tween.prototype.tween=function(i,e){return this._next={id:t._TS++,end:{},duration:i||400,delay:e||0},this},t.Tween.prototype.pin=function(){this._next!==this._queue[this._queue.length-1]&&(this._owner.touch(),this._queue.push(this._next));var i=this._next.end;return 1===arguments.length?t._extend(i,arguments[0]):2===arguments.length&&(i[arguments[0]]=arguments[1]),this},t.Tween.prototype.clear=function(t){for(var i;i=this._queue.shift();)t&&this._owner.pin(i.end);return this},t.Tween.prototype.then=function(t){return this._next.then=t,this},t.Tween.prototype.ease=function(i){return this._next.easing=t.Easing(i),this},t.root=function(i,e){return new t.Root(i,e)},t.Root=function(i,e){t.String.prototype._super.apply(this,arguments),this._paused=!0,this._render=e,this._request=i;var n=this,s=function(){n._paused!==!0&&(n._mo_touch=n._ts_touch,n._render(),n.request(),n._mo_touch==n._ts_touch&&n.pause())};this.request=function(){this._request.call(null,s)},this.on("viewport",function(t,i){return this._size={width:t,height:i},this._updateViewbox(),!0})},t.Root.prototype=t._create(t.prototype),t.Root.prototype._super=t,t.Root.prototype.constructor=t.Root,t.Root.prototype.viewbox=function(t,i,e){return this._viewbox={width:t,height:i,mode:"undefined"==typeof e?"in":e},this._updateViewbox(),this},t.Root.prototype._updateViewbox=function(){var t=this._viewbox,i=this._size;i&&this.pin(t?{width:t.width,height:t.height,resizeMode:t.mode,resizeWidth:i.width,resizeHeight:i.height}:{width:i.width,height:i.height})},t.Root.prototype.start=function(){return this.resume()},t.Root.prototype.resume=function(t){return(this._paused||t)&&(this._paused=!1,this.request()),this},t.Root.prototype.pause=function(){return this._paused=!0,this},t.Root.prototype.touch=function(){return this.resume(),t.prototype.touch.apply(this,arguments)},t.image=function(i){var e=new t.Image;return i&&e.setImage(i),e},t.Image=function(){t.Image.prototype._super.apply(this,arguments)},t.Image.prototype=t._create(t.prototype),t.Image.prototype._super=t,t.Image.prototype.constructor=t.Image,t.Image.prototype.setImage=function(i){return this._cutouts[0]=t.Out.select(i),this._cutouts.length=1,this.pin({width:this._cutouts[0]?this._cutouts[0].dWidth():0,height:this._cutouts[0]?this._cutouts[0].dHeight():0}),this._cutout=this._cutouts[0].clone(),this},t.Image.prototype.cropX=function(t,i){return this.setImage(this._cutouts[0].cropX(t,i))},t.Image.prototype.cropY=function(t,i){return this.setImage(this._cutouts[0].cropY(t,i))},t.Image.prototype._slice=function(t){return this._cutouts[t]||(this._cutouts[t]=this._cutout.clone())},t.Image.prototype.tile=function(t){return this.untick(this._repeatTicker),this._repeatTicker=function(){if(this._mo_tile!=this._ts_touch){this._mo_tile=this._ts_touch;var i=this._cutout._left,e=this._cutout._right,n=this._cutout._top,s=this._cutout._bottom,r=this._cutout.dWidth()-i-e,o=this._cutout.dHeight()-n-s,h=this.pin("width");h=t?h:h-i-e;var a=this.pin("height");a=t?a:a-n-s;var u=t?-i:0,_=t?-n:0,c=0;n&&i&&this._slice(c++).cropX(i,0).cropY(n,0).offset(u,_),s&&i&&this._slice(c++).cropX(i,0).cropY(s,o+n).offset(u,_+a+n),n&&e&&this._slice(c++).cropX(e,r+i).cropY(n,0).offset(u+h+i,_),s&&e&&this._slice(c++).cropX(e,r+i).cropY(s,o+n).offset(u+h+i,_+a+n);for(var f=u+i,p=h;p>0;){var l=Math.min(r,p);p-=r;for(var d=_+n,g=a;g>0;){var m=Math.min(o,g);g-=o,this._slice(c++).cropX(l,i).cropY(m,n).offset(f,d),0>=p&&(i&&this._slice(c++).cropX(i,0).cropY(m,n).offset(u,d),e&&this._slice(c++).cropX(e,r+i).cropY(m,n).offset(f+l,d)),d+=m}n&&this._slice(c++).cropX(l,i).cropY(n,0).offset(f,_),s&&this._slice(c++).cropX(l,i).cropY(s,o+n).offset(f,d),f+=l}this._cutouts.length=c}},this.tick(this._repeatTicker),this},t.Image.prototype.stretch=function(t){return this.untick(this._repeatTicker),this._repeatTicker=function(){if(this._mo_stretch!=this._pin._ts_transform){this._mo_stretch=this._pin._ts_transform;var i=this._cutout._left,e=this._cutout._right,n=this._cutout._top,s=this._cutout._bottom,r=this._cutout.dWidth(),o=this._cutout.dHeight(),h=this.pin("width"),a=this.pin("height");h=t?h+i+e:Math.max(h,i+e),a=t?a+n+s:Math.max(a,n+s);var u=0;n&&i&&this._slice(u++).cropX(i,0).cropY(n,0).offset(0,0),s&&i&&this._slice(u++).cropX(i,0).cropY(s,o-s).offset(0,a-s),n&&e&&this._slice(u++).cropX(e,r-e).cropY(n,0).offset(h-e,0),s&&e&&this._slice(u++).cropX(e,r-e).cropY(s,o-s).offset(h-e,a-s),n&&this._slice(u++).cropX(r-i-e,i).cropY(n,0).offset(i,0).dWidth(h-i-e),s&&this._slice(u++).cropX(r-i-e,i).cropY(s,o-s).offset(i,a-s).dWidth(h-i-e),i&&this._slice(u++).cropX(i,0).cropY(o-n-s,n).offset(0,n).dHeight(a-n-s),e&&this._slice(u++).cropX(e,r-e).cropY(o-n-s,n).offset(h-e,n).dHeight(a-n-s),this._slice(u++).cropX(r-i-e,i).cropY(o-n-s,n).offset(i,n).dWidth(h-i-e).dHeight(a-n-s),this._cutouts.length=u}},this.tick(this._repeatTicker),this},t.anim=function(i,e){var n=(new t.Anim).setFrames(i).gotoFrame(0);return e&&n.fps(e),n},t.Anim=function(){t.Anim.prototype._super.apply(this,arguments),this._fps=t.Anim.FPS,this._ft=1e3/this._fps,this._time=0,this._frame=0,this._frames=[],this._labels={},this.tick(function(){if(this._time&&this._frames.length>1){var i=t._now()-this._time;if(i>=this._ft){var e=i<2*this._ft?1:Math.floor(i/this._ft);this._time+=e*this._ft,this.moveFrame(e),this._repeat&&(this._repeat-=e)<=0&&(this.stop(),this._callback&&this._callback())}this.touch()}},!1)},t.Anim.prototype=t._create(t.prototype),t.Anim.prototype._super=t,t.Anim.prototype.constructor=t.Anim,t.Anim.FPS=22,t.Anim.prototype.fps=function(i){return arguments.length?(this._fps=i||t.Anim.FPS,this._ft=1e3/this._fps,this):this._fps},t.Anim.prototype.setFrames=function(i){if(this._time=this._time||0,this._frame=0,this._frames=[],this._labels={},i=t.Out.select(i,!0),i&&i.length)for(var e=0;e<i.length;e++){var n=i[e];this._frames.push(n),this._labels[n.name]=e}return this},t.Anim.prototype.length=function(){return this._frames?this._frames.length:0},t.Anim.prototype.gotoFrame=function(i,e){return i=0|t.Math.rotate(i,this._frames.length),this._frame=i,e=e||!this._cutouts[0],this._cutouts[0]=this._frames[this._frame],e&&this.pin({width:this._cutouts[0].dWidth(),height:this._cutouts[0].dHeight()}),this._ts_frame=t._TS++,this.touch(),this},t.Anim.prototype.moveFrame=function(t){return this.gotoFrame(this._frame+t)},t.Anim.prototype.gotoLabel=function(t,i){return this.gotoFrame(this._labels[t]||0,i)},t.Anim.prototype.repeat=function(t,i){return this._repeat=t*this._frames.length-1,this._callback=i,this.play(),this},t.Anim.prototype.play=function(i){return arguments.length?(this.gotoFrame(i),this._time=t._now()):this._time||(this._time=t._now()),this},t.Anim.prototype.stop=function(t){return this._time=null,arguments.length&&this.gotoFrame(t),this},t.string=function(i){return(new t.String).setFont(i)},t.String=function(){t.String.prototype._super.apply(this,arguments),this.row()},t.String.prototype=t._create(t.prototype),t.String.prototype._super=t,t.String.prototype.constructor=t.String,t.String.prototype.setFont=function(i){return"string"==typeof i?this._font=function(t){return i+t}:t._isFunc(i)&&(this._font=i),this},t.String.prototype.setValue=function(i){if(this.value===i)return this;this.value=i,"string"==typeof i||t._isArray(i)||(i+="");for(var e=this._first,n=0;n<i.length;n++){var s=this._font(i[n]);e?e.setImage(s).show():e=t.image(s).appendTo(this),e=e._next}for(;e;)e.hide(),e=e._next;return this},t.row=function(i){return t.create().row(i)},t.prototype.row=function(t){return this.sequence("row",t),this},t.column=function(i){return t.create().column(i)},t.prototype.column=function(t){return this.sequence("column",t),this},t.sequence=function(i,e){return(new t.create).sequence(i,e)},t.prototype.sequence=function(t,i){return this.untick(this._layoutTicker),this._layoutTicker=function(){if(this._mo_seq!=this._ts_touch){this._mo_seq=this._ts_touch;var e=this._mo_seqAlign!=this._ts_children;this._mo_seqAlign=this._ts_children;for(var n,s=0,r=0,o=this.first(!0),h=!0;n=o;){o=n.next(!0),n._pin.relativeMatrix();var a=n._pin._boxWidth,u=n._pin._boxHeight;"column"==t?(!h&&(r+=this._spacing||0),n.pin("offsetY")!=r&&n.pin("offsetY",r),s=Math.max(s,a),r+=u,e&&n.pin("alignX",i)):"row"==t&&(!h&&(s+=this._spacing||0),n.pin("offsetX")!=s&&n.pin("offsetX",s),s+=a,r=Math.max(r,u),e&&n.pin("alignY",i)),h=!1}s+=2*this._padding||0,r+=2*this._padding||0,this.pin("width")!=s&&this.pin("width",s),this.pin("height")!=r&&this.pin("height",r)}},this.tick(this._layoutTicker),this},t.box=function(){return(new t.create).box()},t.prototype.box=function(){return this._boxTicker?this:(this._boxTicker=function(){if(this._mo_box!=this._ts_touch){this._mo_box=this._ts_touch;for(var t,i=0,e=0,n=this.first(!0);t=n;){n=t.next(!0),t._pin.relativeMatrix();var s=t._pin._boxWidth,r=t._pin._boxHeight;i=Math.max(i,s),e=Math.max(e,r)}i+=2*this._padding||0,e+=2*this._padding||0,this.pin("width")!=i&&this.pin("width",i),this.pin("height")!=e&&this.pin("height",e)}},this.tick(this._boxTicker),this)},t.prototype.padding=function(t){return this._padding=t,this},t.prototype.spacing=function(t){return this._spacing=t,this},t._images={},t.loadImages=function(i,e){function n(){DEBUG&&console.log("Loading image completed."),r()}function s(t){DEBUG&&console.log("Error loading image: "+t),r()}function r(){--o<=0&&e&&e()}var o=0,h=!0,a=t._textures;for(var u in a)if(a[u].getImagePath()){o++;var _=a[u].getImagePath(),c=i(_,n,s);t.addImage(c,_),h=!1}h&&(DEBUG&&console.log("No image to load."),e&&e())},t.getImage=function(i){return t._images[i]},t.addImage=function(i,e){return t._images[e]=i,this},t._textures={},t.addTexture=function(){for(var i=0;i<arguments.length;i++){var e=arguments[i];t._textures[e.name]=new t.Texture(e)}return this},t.Texture=function(i){function e(){return o||(o=t.getImage(i.imagePath)),o}function n(t){if(!t)return t;if(t.isCutout)return t;"function"==typeof i.map?t=i.map(t):"function"==typeof i.filter&&(t=i.filter(t));var e=i.ratio||1;1!=e&&(t.x*=e,t.y*=e,t.width*=e,t.height*=e,t.top*=e,t.bottom*=e,t.left*=e,t.right*=e);var n=i.trim||0;return n&&(t.x+=n,t.y+=n,t.width-=2*n,t.height-=2*n,t.top-=n,t.bottom-=n,t.left-=n,t.right-=n),t}function s(n){return n.isCutout||(n=new t.Out(n,e,i.imageRatio)),n}i.cutouts=i.cutouts||[];var r={},o=null;this.getImagePath=function(){return i.imagePath};for(var h=0;h<i.cutouts.length;h++)n(i.cutouts[h]);this.select=function(t,e){if(e){var o=t+"*",h=r[o];if("undefined"==typeof h){h=[];for(var a=t.length,u=0;u<i.cutouts.length;u++){var _=i.cutouts[u];_.name&&_.name.substring(0,a)==t&&h.push(i.cutouts[u])}r[o]=h}if(!h.length)throw"Cutouts not found: '"+i.name+":"+t+"'";for(var u=0;u<h.length;u++)h[u]=s(h[u]);return h}var o=t+"?",c=r[o];if("undefined"==typeof c){for(var u=0;u<i.cutouts.length;u++){var _=i.cutouts[u];if(_.name==t){c=_;break}}!c&&i.factory&&(c=n(i.factory(t))),r[o]=c}if(!c)throw"Cutout not found: '"+i.name+":"+t+"'";return s(c)}},t.Out=function(t,i,e){this.isCutout=!0,this._data=t,this.name=t.name,this._image=i,this._ratio=e||1,this._sx=t.x*this._ratio,this._sy=t.y*this._ratio,this._sw=t.width*this._ratio,this._sh=t.height*this._ratio,this._dx=0,this._dy=0,this._dw=t.width,this._dh=t.height,this._top=t.top||0,this._bottom=t.bottom||0,this._left=t.left||0,this._right=t.right||0},t.Out.prototype.clone=function(){return new t.Out(this._data,this._image,this._ratio)},t.Out.prototype.dWidth=function(t){return arguments.length?(this._dw=t,this):this._dw},t.Out.prototype.dHeight=function(t){return arguments.length?(this._dh=t,this):this._dh},t.Out.prototype.cropX=function(t,i){return i=i||0,t=Math.min(t,this._data.width-i),this._dw=t,this._sw=t*this._ratio,this._sx=(this._data.x+i)*this._ratio,this},t.Out.prototype.cropY=function(t,i){return i=i||0,t=Math.min(t,this._data.height-i),this._dh=t,this._sh=t*this._ratio,this._sy=(this._data.y+i)*this._ratio,this},t.Out.prototype.offset=function(t,i){return this._dx=t,this._dy=i,this},t.Out.prototype.paste=function(i){t._stats.paste++;var e=this._image();try{e&&i.drawImage(e,this._sx,this._sy,this._sw,this._sh,this._dx,this._dy,this._dw,this._dh)}catch(n){this.failed||console.log("Unable to paste: ",this._sx,this._sy,this._sw,this._sh,this._dx,this._dy,this._dw,this._dh,e),this.failed=!0}},t.Out.prototype.toString=function(){return"["+this.name+": "+this._dw+"x"+this._dh+"]"},t.Out.select=function(i,e){if("string"!=typeof i)return i;var n=i.indexOf(":");if(0>n)throw"Invalid selector: '"+i+"'";var s=[i.slice(0,n),i.slice(n+1)],r=t._textures[s[0]];if(null==r)throw"Texture not found: '"+i+"'";return r.select(s[1],e)},t.drawing=function(){return t.image(t.Out.drawing.apply(t.Out,arguments))},t.Out.drawing=function(i,e,n,s,r,o){var h=document.createElement("canvas"),a=h.getContext("2d");return"function"==typeof r||("function"==typeof s?"string"==typeof i?(o=r,r=s,s=1):(o=r,r=s,s=n,n=e,e=i,i=1e3*Math.random()|0):"function"==typeof n&&(o=s,r=n,s=1,n=e,e=i,i=1e3*Math.random()|0)),h.width=Math.ceil(e*s),h.height=Math.ceil(n*s),o||(o={}),o.name||(o.name=i),o.x||(o.x=0),o.y||(o.y=0),o.width||(o.width=e),o.height||(o.height=n),o=new t.Out(o,function(){return h},s),r.call(o,a,s),o},t.Pin=function(i){this._owner=i,this._parent=null,this._relativeMatrix=new t.Matrix,this._absoluteMatrix=new t.Matrix,this.reset()},t.Pin.prototype.reset=function(){this._textureAlpha=1,this._alpha=1,this._width=0,this._height=0,this._scaleX=1,this._scaleY=1,this._skewX=0,this._skewY=0,this._rotation=0,this._pivoted=!1,this._pivotX=null,this._pivotY=null,this._handled=!1,this._handleX=0,this._handleY=0,this._aligned=!1,this._alignX=0,this._alignY=0,this._offsetX=0,this._offsetY=0,this._boxX=0,this._boxY=0,this._boxWidth=this._width,this._boxHeight=this._height,this._ts_translate=t._TS++,this._ts_transform=t._TS++,this._ts_matrix=t._TS++},t.Pin.prototype.tick=function(){return this._parent=this._owner._parent&&this._owner._parent._pin,this._handled&&this._mo_handle!=this._ts_transform&&(this._mo_handle=this._ts_transform,this._ts_translate=t._TS++),this._aligned&&this._parent&&this._mo_align!=this._parent._ts_transform&&(this._mo_align=this._parent._ts_transform,this._ts_translate=t._TS++),this},t.Pin.prototype.toString=function(){return this._owner.id()+" ["+this._alignX+", "+this._alignY+"] ["+this._handleX+", "+this._handleY+"] ["+(this._parent?this._parent._owner.id():null)+"]"},t.Pin.prototype.absoluteMatrix=function(){var i=Math.max(this._ts_transform,this._ts_translate,this._parent?this._parent._ts_matrix:0);if(this._mo_abs==i)return this._absoluteMatrix;this._mo_abs=i;var e=this._absoluteMatrix;return e.copyFrom(this.relativeMatrix()),this._parent&&e.concat(this._parent._absoluteMatrix),this._ts_matrix=t._TS++,e},t.Pin.prototype.relativeMatrix=function(){var t=Math.max(this._ts_transform,this._ts_translate,this._parent?this._parent._ts_transform:0);if(this._mo_rel==t)return this._relativeMatrix;this._mo_rel=t;var i=this._relativeMatrix;if(i.identity(),this._pivoted&&i.translate(-this._pivotX*this._width,-this._pivotY*this._height),i.scale(this._scaleX,this._scaleY),i.skew(this._skewX,this._skewY),i.rotate(this._rotation),this._pivoted&&i.translate(this._pivotX*this._width,this._pivotY*this._height),this._pivoted)this._boxX=0,this._boxY=0,this._boxWidth=this._width,this._boxHeight=this._height;else{var e,n,s=i;s.a>0&&s.c>0||s.a<0&&s.c<0?(e=0,n=s.a*this._width+s.c*this._height):(e=s.a*this._width,n=s.c*this._height),e>n?(this._boxX=n,this._boxWidth=e-n):(this._boxX=e,this._boxWidth=n-e),s.b>0&&s.d>0||s.b<0&&s.d<0?(e=0,n=s.b*this._width+s.d*this._height):(e=s.b*this._width,n=s.d*this._height),e>n?(this._boxY=n,this._boxHeight=e-n):(this._boxY=e,this._boxHeight=n-e)}return this._x=this._offsetX,this._y=this._offsetY,this._x-=this._boxX+this._handleX*this._boxWidth,this._y-=this._boxY+this._handleY*this._boxHeight,this._aligned&&this._parent&&(this._parent.relativeMatrix(),this._x+=this._alignX*this._parent._width,this._y+=this._alignY*this._parent._height),i.translate(this._x,this._y),this._relativeMatrix},t.Pin._SINGLE={},t.Pin.prototype.update=function(){if(1==arguments.length&&"string"==typeof arguments[0])return this["_"+arguments[0]];this._transform_flag=!1,this._translate_flag=!1;var i=null,e=null,n=null;if(2==arguments.length&&"string"==typeof arguments[0]){for(e in t.Pin._SINGLE)delete t.Pin._SINGLE[e];(i=t.Pin._SINGLE)[arguments[0]]=arguments[1]}else 1==arguments.length&&"object"==typeof arguments[0]&&(i=arguments[0]);if(i)for(e in i)"undefined"!=typeof(n=i[e])&&(setter=t.Pin._setters[e])&&setter.call(t.Pin._setters,this,n,i);return this._translate_flag&&(this._translate_flag=!1,this._ts_translate=t._TS++),this._transform_flag&&(this._transform_flag=!1,this._ts_transform=t._TS++),this._owner&&(this._owner._ts_pin=t._TS++,this._owner.touch()),this},t.Pin._setters={alpha:function(t,i){t._alpha=i},textureAlpha:function(t,i){t._textureAlpha=i},width:function(t,i){t._width_=i,t._width=i,t._transform_flag=!0},height:function(t,i){t._height_=i,t._height=i,t._transform_flag=!0},scale:function(t,i){t._scaleX=i,t._scaleY=i,t._transform_flag=!0},scaleX:function(t,i){t._scaleX=i,t._transform_flag=!0},scaleY:function(t,i){t._scaleY=i,t._transform_flag=!0},skew:function(t,i){t._skewX=i,t._skewY=i,t._transform_flag=!0},skewX:function(t,i){t._skewX=i,t._transform_flag=!0},skewY:function(t,i){t._skewY=i,t._transform_flag=!0},rotation:function(t,i){t._rotation=i,t._transform_flag=!0},pivot:function(t,i){t._pivotX=i,t._pivotY=i,t._pivoted=!0,t._transform_flag=!0},pivotX:function(t,i){t._pivotX=i,t._pivoted=!0,t._transform_flag=!0},pivotY:function(t,i){t._pivotY=i,t._pivoted=!0,t._transform_flag=!0},offset:function(t,i){t._offsetX=i,t._offsetY=i,t._translate_flag=!0},offsetX:function(t,i){t._offsetX=i,t._translate_flag=!0},offsetY:function(t,i){t._offsetY=i,t._translate_flag=!0},align:function(){this.alignX.apply(this,arguments),this.alignY.apply(this,arguments)},alignX:function(t,i,e){t._alignX=i,t._aligned=!0,t._translate_flag=!0,this.handleX(t,i,e)},alignY:function(t,i,e){t._alignY=i,t._aligned=!0,t._translate_flag=!0,this.handleY(t,i,e)},handle:function(t,i,e){this.handleX(t,i,e),this.handleY(t,i,e)},handleX:function(t,i){t._handleX=i,t._handled=!0,t._translate_flag=!0},handleY:function(t,i){t._handleY=i,t._handled=!0,t._translate_flag=!0},resizeMode:function(i,e,n){t._isNum(n.resizeWidth)&&t._isNum(n.resizeHeight)&&(this.resizeWidth(i,n.resizeWidth,n,!0),this.resizeHeight(i,n.resizeHeight,n,!0),"out"==e?i._scaleX=i._scaleY=Math.max(i._scaleX,i._scaleY):"in"==e&&(i._scaleX=i._scaleY=Math.min(i._scaleX,i._scaleY)),i._width=n.resizeWidth/i._scaleX,i._height=n.resizeHeight/i._scaleY)},resizeWidth:function(t,i,e,n){(!e.resizeMode||n)&&(t._scaleX=i/t._width_,t._width=t._width_,t._transform_flag=!0)},resizeHeight:function(t,i,e,n){(!e.resizeMode||n)&&(t._scaleY=i/t._height_,t._height=t._height_,t._transform_flag=!0)},scaleMode:function(i,e,n){t._isNum(n.scaleWidth)&&t._isNum(n.scaleHeight)&&(this.scaleWidth(i,n.scaleWidth,n,!0),this.scaleHeight(i,n.scaleHeight,n,!0),"out"==e?i._scaleX=i._scaleY=Math.max(i._scaleX,i._scaleY):"in"==e&&(i._scaleX=i._scaleY=Math.min(i._scaleX,i._scaleY)))},scaleWidth:function(t,i,e,n){(!e.scaleMode||n)&&(t._scaleX=i/t._width_,t._transform_flag=!0)},scaleHeight:function(t,i,e,n){(!e.scaleMode||n)&&(t._scaleY=i/t._height_,t._transform_flag=!0)},matrix:function(t,i,e){this.scaleX(t,i.a,e),this.skewX(t,i.c/i.d,e),this.skewY(t,i.b/i.a,e),this.scaleY(t,i.d,e),this.offsetX(t,i.e,e),this.offsetY(t,i.f,e),this.rotation(t,0,e)}},t.Matrix=function(t,i,e,n,s,r){this.changed=!0,this.a=t||1,this.b=i||0,this.c=e||0,this.d=n||1,this.e=s||0,this.f=r||0},t.Matrix.prototype.toString=function(){return"["+this.a+", "+this.b+", "+this.c+", "+this.d+", "+this.e+", "+this.f+"]"},t.Matrix.prototype.clone=function(){return new t.Matrix(this.a,this.b,this.c,this.d,this.e,this.f)},t.Matrix.prototype.copyTo=function(t){return t.copyFrom(this),this},t.Matrix.prototype.copyFrom=function(t){return this.changed=!0,this.a=t.a,this.b=t.b,this.c=t.c,this.d=t.d,this.e=t.e,this.f=t.f,this},t.Matrix.prototype.identity=function(){return this.changed=!0,this.a=1,this.b=0,this.c=0,this.d=1,this.e=0,this.f=0,this},t.Matrix.prototype.rotate=function(t){if(!t)return this;this.changed=!0;var i=t?Math.cos(t):1,e=t?Math.sin(t):0,n=i*this.a-e*this.b,s=i*this.b+e*this.a,r=i*this.c-e*this.d,o=i*this.d+e*this.c,h=i*this.e-e*this.f,a=i*this.f+e*this.e;return this.a=n,this.b=s,this.c=r,this.d=o,this.e=h,this.f=a,this},t.Matrix.prototype.translate=function(t,i){return t||i?(this.changed=!0,this.e+=t,this.f+=i,this):this},t.Matrix.prototype.scale=function(t,i){return t-1||i-1?(this.changed=!0,this.a*=t,this.b*=i,this.c*=t,this.d*=i,this.e*=t,this.f*=i,this):this},t.Matrix.prototype.skew=function(t,i){if(!t&&!i)return this;this.changed=!0;var e=this.a+this.b*t,n=this.b+this.a*i,s=this.c+this.d*t,r=this.d+this.c*i,o=this.e+this.f*t,h=this.f+this.e*i;return this.a=e,this.b=n,this.c=s,this.d=r,this.e=o,this.f=h,this},t.Matrix.prototype.concat=function(t){this.changed=!0;var i=this,e=i.a*t.a+i.b*t.c,n=i.b*t.d+i.a*t.b,s=i.c*t.a+i.d*t.c,r=i.d*t.d+i.c*t.b,o=i.e*t.a+t.e+i.f*t.c,h=i.f*t.d+t.f+i.e*t.b;return this.a=e,this.b=n,this.c=s,this.d=r,this.e=o,this.f=h,this},t.Matrix.prototype.reverse=function(){if(this.changed){this.changed=!1,this.reversed=this.reversed||new t.Matrix;var i=this.a*this.d-this.b*this.c;this.reversed.a=this.d/i,this.reversed.b=-this.b/i,this.reversed.c=-this.c/i,this.reversed.d=this.a/i,this.reversed.e=(this.c*this.f-this.e*this.d)/i,this.reversed.f=(this.e*this.b-this.a*this.f)/i}return this.reversed},t.Matrix.prototype.map=function(t,i){return i=i||{},i.x=this.a*t.x+this.c*t.y+this.e,i.y=this.b*t.x+this.d*t.y+this.f,i},t.Matrix.prototype.mapX=function(t,i){return this.a*t+this.c*i+this.e},t.Matrix.prototype.mapY=function(t,i){return this.b*t+this.d*i+this.f},t.Math={},t.Math.random=function(t,i){return 0==arguments.length?(i=1,t=0):1==arguments.length&&(i=t,t=0),t==i?t:Math.random()*(i-t)+t},t.Math.rotate=function(t,i,e){return arguments.length<3&&(e=i||0,i=0),e>i?(t=(t-i)%(e-i),t+(0>t?e:i)):(t=(t-e)%(i-e),t+(0>=t?i:e))},t.Math.length=function(t,i){return Math.sqrt(t*t+i*i)},t._TS=0,t._isCut=function(i){return i instanceof t},t._isNum=function(t){return"number"==typeof t},t._isFunc=function(t){return"function"==typeof t},t._isArray="isArray"in Array?Array.isArray:function(t){return"[object Array]"===Object.prototype.toString.call(t)},t._extend=function(t,i,e){if(e)for(var n=0;n<e.length;n++){var s=e[n];t[s]=i[s]}else for(var s in i)t[s]=i[s];return t},t._now=function(){return"undefined"!=typeof performance&&performance.now?function(){return performance.now()}:Date.now?function(){return Date.now()}:function(){return+new Date}}(),t._function=function(t){return"function"==typeof t?t:function(){return t}},t._options=function(t){return t.get=function(t){return"function"==typeof this[t]?this[t]():this[t]},t.extend=function(t){t="object"==typeof t?t:{};for(var i in this)t[i]=i in t?t[i]:this[i];return t},t.mixin=function(t){if("object"==typeof t)for(var i in t)this[i]=t[i];return this},t},t._status=function(i){if(!t._statusbox){var e=t._statusbox=document.createElement("div");e.style.position="absolute",e.style.color="black",e.style.background="white",e.style.zIndex=999,e.style.top="5px",e.style.right="5px",e.style.padding="1px 5px",document.body.appendChild(e)}t._statusbox.innerHTML=i},t.Loader=function(){var t=[],i=[],e=!1;return{load:function(){e?i.push(this.init.apply(this,arguments)):t.push(arguments)},start:function(){e=!0;for(var n;n=t.shift();)i.push(this.init.apply(this,n))},pause:function(){for(var e=t.length-1;e>=0;e--)i[e].pause()},resume:function(){for(var e=t.length-1;e>=0;e--)i[e].resume()}}}(),t.Easing=function(){function t(t){return t}function i(i){if("function"==typeof i)return i;if("string"!=typeof i)return t;var s=/^(\w+)(-(in|out|in-out|out-in))?(\((.*)\))?$/i.exec(i);if(!s||!s.length)return t;var r=s[1]||"",o=s[3]||"in",h=s[5];o=n[o],h=h?h.replace(/\s+/,"").split(","):[];var a=e[r],u=a?a.fn||a.fc.apply(a.fc,h):t;return o?o(u):u}var e={},n={};return i.addMode=function(t){for(var i=t.name.split(/\s+/),e=0;e<i.length;e++)i[e]&&(n[i[e]]=t.fn)},i.add=function(t){for(var i=t.name.split(/\s+/),n=0;n<i.length;n++)i[n]&&(e[i[n]]=t)},i}(),t.Easing.addMode({name:"in",fn:function(t){return function(i){return t(i)}}}),t.Easing.addMode({name:"out",fn:function(t){return function(i){return 1-t(1-i)}}}),t.Easing.addMode({name:"in-out",fn:function(t){return function(i){return.5>i?t(2*i)/2:1-t(2*(1-i))/2}}}),t.Easing.addMode({name:"out-in",fn:function(t){return function(i){return.5>i?1-t(2*(1-i))/2:t(2*i)/2
}}}),t.Easing.add({name:"linear",fn:function(t){return t}}),t.Easing.add({name:"quad",fn:function(t){return t*t}}),t.Easing.add({name:"cubic",fn:function(t){return t*t*t}}),t.Easing.add({name:"quart",fn:function(t){return t*t*t*t}}),t.Easing.add({name:"quint",fn:function(t){return t*t*t*t*t}}),t.Easing.add({name:"sin sine",fn:function(t){return 1-Math.cos(t*Math.PI/2)}}),t.Easing.add({name:"exp",fn:function(t){return 0==t?0:Math.pow(2,10*(t-1))}}),t.Easing.add({name:"circle circ",fn:function(t){return 1-Math.sqrt(1-t*t)}}),t.Easing.add({name:"bounce",fn:function(t){return 1/2.75>t?7.5625*t*t:2/2.75>t?7.5625*(t-=1.5/2.75)*t+.75:2.5/2.75>t?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375}}),t.Easing.add({name:"poly",fc:function(t){return function(i){return Math.pow(i,t)}}}),t.Easing.add({name:"elastic",fc:function(t,i){i=i||.45,t=t||1;var e=i/(2*Math.PI)*Math.asin(1/t);return function(n){return 1+t*Math.pow(2,-10*n)*Math.sin(2*(n-e)*Math.PI/i)}}}),t.Easing.add({name:"back",fc:function(t){return console.log(t),t=arguments.length?t:1.70158,function(i){return i*i*((t+1)*i-t)}}}),DEBUG=("undefined"==typeof DEBUG||DEBUG)&&console,window.addEventListener("load",function(){DEBUG&&console.log("On load."),t.Loader.start()},!1),t.Loader.init=function(i,e){function n(){DEBUG&&console.log("Images loaded."),r=e.getContext("2d");var t=window.devicePixelRatio||1,n=r.webkitBackingStorePixelRatio||r.mozBackingStorePixelRatio||r.msBackingStorePixelRatio||r.oBackingStorePixelRatio||r.backingStorePixelRatio||1;u=t/n,e.resize=s,DEBUG&&console.log("Loading..."),i(_,e),s(),window.addEventListener("resize",s,!1),DEBUG&&console.log("Start playing..."),_.start()}function s(){o?(h=window.innerWidth>0?window.innerWidth:screen.width,a=window.innerHeight>0?window.innerHeight:screen.height,e.style.width=h+"px",e.style.height=a+"px"):(h=e.clientWidth,a=e.clientHeight),h*=u,a*=u,e.width=h,e.height=a,_._ratio=u,DEBUG&&console.log("Resize: "+h+" x "+a+" / "+u),_.visit({start:function(t){var i=!0,e=t.listeners("viewport");if(e)for(var n=0;n<e.length;n++)i&=!e[n].call(t,h,a);return i}})}var r=null,o=!1,h=0,a=0,u=1;DEBUG&&console.log("Creating root...");var _=t.root(requestAnimationFrame,function(){r.setTransform(1,0,0,1,0,0),r.clearRect(0,0,h,a),this.render(r)});if("string"==typeof e&&(e=document.getElementById(e)),e||(e=document.getElementById("cutjs")),!e){o=!0,DEBUG&&console.log("Creating element..."),e=document.createElement("canvas"),e.style.position="absolute";var c=document.body;c.insertBefore(e,c.firstChild)}return DEBUG&&console.log("Loading images..."),t.loadImages(function(t,i,e){var n=new Image;return DEBUG&&console.log("Loading image: "+t),n.onload=i,n.onerror=e,n.src=t,n},n),_},!function(){for(var t=["ms","moz","webkit","o"],i=0;i<t.length&&!window.requestAnimationFrame;i++){var e=t[i];window.requestAnimationFrame=window[e+"RequestAnimationFrame"],window.cancelAnimationFrame=window[e+"CancelAnimationFrame"]||window[e+"CancelRequestAnimationFrame"]}if(!window.requestAnimationFrame){var n=0;window.requestAnimationFrame=function(t){var i=(new Date).getTime();return n=Math.max(n+16,i),window.setTimeout(function(){t(n)},n-i)}}window.cancelAnimationFrame||(window.cancelAnimationFrame=function(t){clearTimeout(t)})}(),DEBUG=!0,t.prototype.spy=function(t){return arguments.length?(this._spy=t?!0:!1,this):this._spy},t.Mouse=function(){t.Mouse.subscribe.apply(t.Mouse,arguments)},t.Mouse.CLICK="click",t.Mouse.START="touchstart mousedown",t.Mouse.MOVE="touchmove mousemove",t.Mouse.END="touchend mouseup",t.Mouse.subscribe=function(t,i,e){function n(t){a(t,i),DEBUG&&console.log("Mouse Start: "+t.type+" "+d),!e&&i.addEventListener(f,r),t.preventDefault(),h(t.type,t),m.x=d.x,m.y=d.y,m.state=1}function s(t){try{DEBUG&&console.log("Mouse End: "+t.type+" "+d),!e&&i.removeEventListener(f,r),t.preventDefault(),h(t.type,t),1==m.state&&m.x==d.x&&m.y==d.y?(DEBUG&&console.log("Mouse Click [+]"),h("click",t),m.state=2):m.state=0}catch(n){console&&console.log(n)}}function r(t){try{a(t,i),t.preventDefault(),h(t.type,t)}catch(e){console&&console.log(e)}}function o(t){try{a(t,i),DEBUG&&console.log("Mouse Click: "+t.type+" "+d),t.preventDefault(),2!=m.state?h(t.type,t):DEBUG&&console.log("Mouse Click [-]")}catch(e){console&&console.log(e)}}function h(i,e){d.type=i,d.event=e,g.x=d.x,g.y=d.y,t.visit(l)}function a(i,e){var n=!1;if(i.touches){if(!i.touches.length)return;n=!0,d.x=i.touches[0].pageX,d.y=i.touches[0].pageY}else d.x=i.clientX,d.y=i.clientY,document.body.scrollLeft||document.body.scrollTop||document.documentElement&&(d.x+=document.documentElement.scrollLeft,d.y+=document.documentElement.scrollTop);d.x-=e.clientLeft||0,d.y-=e.clientTop||0;for(var s=e;s;)d.x-=s.offsetLeft||0,d.y-=s.offsetTop||0,n||(d.x+=s.scrollLeft||0,d.y+=s.scrollTop||0),s=s.offsetParent;d.x*=t._ratio||1,d.y*=t._ratio||1}i=i||document;var u="ontouchstart"in window,_="click",c=u?"touchstart":"mousedown",f=u?"touchmove":"mousemove",p=u?"touchend":"mouseup";i.addEventListener(_,o),i.addEventListener(c,n),i.addEventListener(p,s),e&&i.addEventListener(f,r);var l=null,d={x:0,y:0,toString:function(){return(0|this.x)+"x"+(0|this.y)}},g={x:0,y:0,toString:function(){return d+" / "+(0|this.x)+"x"+(0|this.y)}},m={x:0,y:0,state:0};l={reverse:!0,visible:!0,start:function(i){return!i.spy()&&t!==i&&(i.matrix().reverse().map(d,g),g.x<0||g.x>i._pin._width||g.y<0||g.y>i._pin._height)?!0:void 0},end:function(t){var i=t.listeners(d.type);if(i){t.matrix().reverse().map(d,g);for(var e=0;e<i.length;e++)if(i[e].call(t,d.event,g))return!0}}}},"function"==typeof define&&define.amd?define("Cut",[],function(){return t}):"undefined"!=typeof module?module.exports=t:arguments[0].Cut=t}(this);