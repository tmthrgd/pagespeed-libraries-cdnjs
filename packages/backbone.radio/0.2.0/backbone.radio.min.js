// Backbone.Radio v0.1.0

!function(a,b){if("function"==typeof define&&define.amd)define(["backbone","underscore"],function(a,c){return b(a,c)});else if("undefined"!=typeof exports){var c=require("backbone"),d=require("underscore");module.exports=b(c,d)}else b(a.Backbone,a._)}(this,function(a,b){"use strict";function c(a,c,d){c&&(d=d||this,b.each(c,function(c,e){this[a](e,b.bind(c,d))},this))}var d=a.Radio,e=a.Radio={};e.VERSION="0.1.0",e.noConflict=function(){return a.Radio=d,this},b.extend(e,{_channels:{},DEBUG:!1,channel:function(a){if(!a)throw new Error("You must provide a name for the channel.");return e._getChannel(a)},_getChannel:function(a){var b=e._channels[a];return b||(b=new e.Channel(a),e._channels[a]=b),b}});var f=function(a,b){var c=Array.prototype.slice.call(arguments,2);console.log("["+a+'] "'+b+'"',c)},g={},h=function(a){return g[a]||(g[a]=b.partial(f,a))};b.extend(e,{tuneIn:function(a){var b=e.channel(a);b._tunedIn=!0,b.on("all",h(a))},tuneOut:function(a){var b=e.channel(a);b._tunedIn=!1,b.off("all",h(a)),delete g[a]}}),e.Commands={command:function(a){var b=Array.prototype.slice.call(arguments,1),c=this._channelName?!0:!1;if(c&&this._tunedIn&&f.apply(this,[this._channelName,a].concat(b)),this._commands&&this._commands[a]){var d=this._commands[a],g=d.callback,h=d.context;g.apply(h,b)}else if(e.DEBUG){var i=c?" on the "+this._channelName+" channel":"";console.warn("An unhandled event was fired"+i+': "'+a+'"')}},react:function(a,b,c){return this._commands||(this._commands={}),c=c||this,this._commands[a]={callback:b,context:c},this},reactOnce:function(a,c,d){var e=this,f=b.once(function(){return e.stopReacting(a),c.apply(this,arguments)});return this.command(a,f,d)},stopReacting:function(a){a?delete this._commands[a]:delete this._commands}},e.Requests={request:function(a){var b=Array.prototype.slice.call(arguments,1),c=this._channelName?!0:!1;if(c&&this._tunedIn&&f.apply(this,[this._channelName,a].concat(b)),this._requests&&this._requests[a]){var d=this._requests[a],g=d.callback,h=d.context;return g.apply(h,b)}if(e.DEBUG){var i=c?" on the "+this._channelName+" channel":"";console.warn("An unhandled event was fired"+i+': "'+a+'"')}},respond:function(a,c,d){return this._requests||(this._requests={}),d=d||this,c=b.isFunction(c)?c:b.constant(c),this._requests[a]={callback:c,context:d},this},respondOnce:function(a,c,d){var e=this;c=b.isFunction(c)?c:b.constant(c);var f=b.once(function(){return e.stopResponding(a),c.apply(this,arguments)});return this.request(a,f,d)},stopResponding:function(a){a?delete this._requests[a]:delete this._requests}},e.Channel=function(c){this._channelName=c,b.extend(this,a.Events,e.Commands,e.Requests)},b.extend(e.Channel.prototype,{reset:function(){return this.off(),this.stopListening(),this.stopReacting(),this.stopResponding(),this}});var i={Events:"on",Commands:"react",Requests:"respond"};b.each(i,function(a,d){var f="connect"+d;e.Channel.prototype[f]=b.partial(c,a)});var j,k,l=[a.Events,e.Commands,e.Requests];return b.each(l,function(a){b.each(a,function(a,b){e[b]=function(a){return k=Array.prototype.slice.call(arguments,2),j=this.channel(a),j[b].apply(this,k)}})}),e});
//# sourceMappingURL=backbone.radio.min.map