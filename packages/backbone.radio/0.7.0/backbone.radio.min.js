// Backbone.Radio v0.7.0

!function(a,b){if("function"==typeof define&&define.amd)define(["backbone","underscore"],function(a,c){return b(a,c)});else if("undefined"!=typeof exports){var c=require("backbone"),d=require("underscore");module.exports=b(c,d)}else b(a.Backbone,a._)}(this,function(a,b){"use strict";function c(a,b,c){if(j.DEBUG){var d=c?" on the "+c+" channel":"";console.warn(a+d+': "'+b+'"')}}function d(a,b,c,d){if(!c)return!1;var e=[];if("object"==typeof c){for(var f in c)e.push(a[b].apply(a,[f,c[f]].concat(d)));return e}if(k.test(c)){for(var g=c.split(k),h=0,i=g.length;i>h;h++)e.push(a[b].apply(a,[g[h]].concat(d)));return e}return!1}function e(a,b,c){var d=c[0],e=c[1],f=c[2];switch(c.length){case 0:return a.call(b);case 1:return a.call(b,d);case 2:return a.call(b,d,e);case 3:return a.call(b,d,e,f);default:return a.apply(b,c)}}function f(a){return l[a]||(l[a]=b.partial(j.log,a))}function g(a){return b.isFunction(a)?a:b.constant(a)}var h=Array.prototype.slice,i=a.Radio,j=a.Radio={};j.VERSION="0.7.0",j.noConflict=function(){return a.Radio=i,this},j.DEBUG=!1;var k=/\s+/,l={};b.extend(j,{log:function(a,b){var c=h.call(arguments,2);console.log("["+a+'] "'+b+'"',c)},tuneIn:function(a){var b=j.channel(a);return b._tunedIn=!0,b.on("all",f(a)),this},tuneOut:function(a){var b=j.channel(a);return b._tunedIn=!1,b.off("all",f(a)),delete l[a],this}}),j.Commands={command:function(a){var b=h.call(arguments,1);if(d(this,"command",a,b))return this;var f=this.channelName,g=this._commands;if(f&&this._tunedIn&&j.log.apply(this,[f,a].concat(b)),g&&(g[a]||g["default"])){var i=g[a]||g["default"];b=g[a]?b:arguments,e(i.callback,i.context,b)}else c("An unhandled command was fired",a,f);return this},comply:function(a,b,c){return d(this,"comply",a,[b,c])?this:(this._commands||(this._commands={}),this._commands[a]={callback:b,context:c||this},this)},complyOnce:function(a,c,e){if(d(this,"complyOnce",a,[c,e]))return this;var f=this,g=b.once(function(){return f.stopComplying(a),c.apply(this,arguments)});return this.comply(a,g,e)},stopComplying:function(a){if(d(this,"stopComplying",a))return this;var b=this._commands;return a?b&&b[a]?delete b[a]:c("Attempted to remove the unregistered command",a,this.channelName):delete this._commands,this}},j.Requests={request:function(a){var b=h.call(arguments,1),f=d(this,"request",a,b);if(f)return f;var g=this.channelName,i=this._requests;if(g&&this._tunedIn&&j.log.apply(this,[g,a].concat(b)),i&&(i[a]||i["default"])){var k=i[a]||i["default"];return b=i[a]?b:arguments,e(k.callback,k.context,b)}c("An unhandled request was fired",a,g)},reply:function(a,b,c){return d(this,"reply",a,[b,c])?this:(this._requests||(this._requests={}),this._requests[a]={callback:g(b),context:c||this},this)},replyOnce:function(a,c,e){if(d(this,"replyOnce",a,[c,e]))return this;var f=this,h=b.once(function(){return f.stopReplying(a),g(c).apply(this,arguments)});return this.reply(a,h,e)},stopReplying:function(a){if(d(this,"stopReplying",a))return this;var b=this._requests;return a?b&&b[a]?delete b[a]:c("Attempted to remove the unregistered request",a,this.channelName):delete this._requests,this}},j._channels={},j.channel=function(a){if(!a)throw new Error("You must provide a name for the channel.");return j._channels[a]?j._channels[a]:j._channels[a]=new j.Channel(a)},j.Channel=function(a){this.channelName=a},b.extend(j.Channel.prototype,a.Events,j.Commands,j.Requests,{reset:function(){return this.off(),this.stopListening(),this.stopComplying(),this.stopReplying(),this}});var m,n,o=[a.Events,j.Commands,j.Requests];return b.each(o,function(a){b.each(a,function(a,b){j[b]=function(a){return n=h.call(arguments,1),m=this.channel(a),m[b].apply(m,n)}})}),j});
//# sourceMappingURL=backbone.radio.min.js.map