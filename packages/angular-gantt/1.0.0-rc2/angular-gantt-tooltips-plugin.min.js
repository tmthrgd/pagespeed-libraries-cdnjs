!function(){"use strict";angular.module("gantt.tooltips",["gantt","gantt.tooltips.templates"]).directive("ganttTooltips",["$compile","$document",function(t,e){return{restrict:"E",require:"^gantt",scope:{enabled:"=?",dateFormat:"=?",templateUrl:"=?",template:"=?"},link:function(o,n,a,i){var l=i.gantt.api;if(o.options&&"object"==typeof o.options.tooltips)for(var s in o.options.tooltips)o[s]=o.options[s];void 0===o.enabled&&(o.enabled=!0),void 0===o.dateFormat&&(o.dateFormat="MMM DD, HH:mm"),l.directives.on.new(o,function(n,a,i){if("ganttTask"===n){var l=a.$new();l.pluginScope=o;var s=e[0].createElement("gantt-tooltip");void 0!==o.templateUrl&&angular.element(s).attr("data-template-url",o.templateUrl),void 0!==o.template&&angular.element(s).attr("data-template",o.template),i.append(t(s)(l))}})}}}])}(),function(){"use strict";angular.module("gantt.tooltips").directive("ganttTooltip",["$timeout","$compile","$document","$templateCache","ganttDebounce","ganttSmartEvent",function(t,e,o,n,a,i){return{restrict:"E",templateUrl:function(t,e){var o;return o=void 0===e.templateUrl?"plugins/tooltips/tooltip.tmpl.html":e.templateUrl,void 0!==e.template&&n.put(o,e.template),o},scope:!0,replace:!0,controller:["$scope","$element","ganttUtils",function(e,n,l){var s,r,p=angular.element(o[0].body),c=n.parent();e.css={},e.visible=!1,e.getFromLabel=function(){var t=l.firstProperty([e.task.model.tooltips,e.task.row.model.tooltips],"dateFormat",e.pluginScope.dateFormat);return e.task.model.from.format(t)},e.getToLabel=function(){var t=l.firstProperty([e.task.model.tooltips,e.task.row.model.tooltips],"dateFormat",e.pluginScope.dateFormat);return e.task.model.to.format(t)},e.$watch("isTaskMouseOver",function(o){s&&t.cancel(s);var n=l.firstProperty([e.task.model.tooltips,e.task.row.model.tooltips],"enabled",e.pluginScope.enabled);n&&o===!0?s=t(function(){d(r)},500,!0):e.task.active||g()}),e.task.$element.bind("mousemove",function(t){r=t.clientX}),e.task.$element.bind("mouseenter",function(t){e.mouseEnterX=t.clientX,e.isTaskMouseOver=!0,e.$digest()}),e.task.$element.bind("mouseleave",function(){e.mouseEnterX=void 0,e.isTaskMouseOver=!1,e.$digest()});var m=i(e,p,"mousemove",a(function(t){f(t.clientX)},5,!1));e.$watch("task.isMoving",function(t){t===!0?m.bind():t===!1&&(m.unbind(),g())});var u=function(){var t=o[0];return t.documentElement.clientWidth||t.documentElement.getElementById("body")[0].clientWidth},d=function(o){e.visible=!0,t(function(){f(o),e.css.top=c[0].getBoundingClientRect().top+"px",e.css.marginTop=-n[0].offsetHeight-8+"px",e.css.opacity=1},0,!0)},f=function(t){t+n[0].offsetWidth>u()?(e.css.left=t+20-n[0].offsetWidth+"px",n.addClass("gantt-task-infoArrowR"),n.removeClass("gantt-task-infoArrow")):(e.css.left=t-20+"px",n.addClass("gantt-task-infoArrow"),n.removeClass("gantt-task-infoArrowR"))},g=function(){e.css.opacity=0,e.visible=!1};e.gantt.api.directives.raise.new("ganttTooltip",e,n),e.$on("$destroy",function(){e.gantt.api.directives.raise.destroy("ganttTooltip",e,n)})}]}}])}();