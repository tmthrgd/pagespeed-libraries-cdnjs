angular.module("gantt.bounds.templates",[]).run(["$templateCache",function(t){t.put("plugins/bounds/taskBounds.tmpl.html",'<div ng-show="bounds && isTaskMouseOver && enabled" class="gantt-task-bounds" ng-style="getCss()" ng-class="getClass()"></div>\n')}]),angular.module("gantt.drawtask.templates",[]).run(["$templateCache",function(){}]),angular.module("gantt.history.templates",[]).run(["$templateCache",function(){}]),angular.module("gantt.movable.templates",[]).run(["$templateCache",function(){}]),angular.module("gantt.progress.templates",[]).run(["$templateCache",function(t){t.put("plugins/progress/taskProgress.tmpl.html","<div ng-cloak ng-show='enabled' class='gantt-task-progress' ng-style=\"getCss()\" ng-class=\"getClasses()\"></div>\n")}]),angular.module("gantt.sortable.templates",[]).run(["$templateCache",function(){}]),angular.module("gantt.tooltips.templates",[]).run(["$templateCache",function(t){t.put("plugins/tooltips/tooltip.tmpl.html",'<div ng-show="showTooltips && visible" class="gantt-task-info" ng-cloak ng-style="css">\n    <div class="gantt-task-info-content">\n        {{ task.model.name }}</br>\n        <small>\n            {{\n            task.isMilestone() === true && (getFromLabel()) || (getFromLabel() + \' - \' + getToLabel());\n            }}\n        </small>\n    </div>\n</div>\n')}]),function(){"use strict";angular.module("gantt.bounds",["gantt","gantt.bounds.templates"]).directive("ganttBounds",["moment","$compile","$document",function(t,e,a){return{restrict:"E",require:"^gantt",scope:{enabled:"=?",templateUrl:"=?",template:"=?"},link:function(o,n,s,r){var i=r.gantt.api;if(o.options&&"object"==typeof o.options.bounds)for(var l in o.options.bounds)o[l]=o.options[l];i.directives.on.new(o,function(t,n,s){if("ganttTask"===t){var r=n.$new();r.pluginScope=o;var i=a[0].createElement("gantt-task-bounds");void 0!==o.templateUrl&&angular.element(i).attr("data-template-url",o.templateUrl),void 0!==o.template&&angular.element(i).attr("data-template",o.template),s.append(e(i)(r))}}),i.tasks.on.clean(o,function(e){void 0===e.est||t.isMoment(e.est)||(e.est=t(e.est)),void 0===e.lct||t.isMoment(e.lct)||(e.lct=t(e.lct))})}}}])}(),function(){"use strict";angular.module("gantt.drawtask",["gantt"]).directive("ganttDrawTask",["ganttMouseOffset","moment",function(t,e){return{restrict:"E",require:"^gantt",scope:{enabled:"=?",taskModelFactory:"=taskFactory"},link:function(a,o,n,s){var r=s.gantt.api;r.directives.on.new(a,function(o,n,s){if("ganttRow"===o){var i=function(o){var s=o.target?o.target:o.srcElement;if(a.enabled&&s.className.indexOf("gantt-row")>-1){var i=r.core.getDateByPosition(t.getOffset(o).x),l=e(i),d=a.taskModelFactory();d.from=i,d.to=l;var g=n.row.addTask(d);g.isResizing=!0,g.updatePosAndSize(),n.row.updateVisibleTasks(),n.row.$scope.$digest()}};s.on("mousedown",i),n.drawTaskHandler=i}}),r.directives.on.destroy(a,function(t,e,a){"ganttRow"===t&&(a.off("mousedown",e.drawTaskHandler),delete e.drawTaskHandler)})}}}])}(),function(){"use strict";angular.module("gantt.movable",["gantt"]).directive("ganttMovable",["ganttMouseButton","ganttMouseOffset","ganttSmartEvent","ganttMovableOptions","ganttUtils","$window","$document","$timeout",function(t,e,a,o,n,s,r,i){return{restrict:"E",require:"^gantt",scope:{enabled:"=",allowMoving:"=?",allowResizing:"=?",allowRowSwitching:"=?"},link:function(l,d,g,u){var c=u.gantt.api;if(l.options&&"object"==typeof l.options.movable)for(var m in l.options.movable)l[m]=l.options[m];o.initialize(l),c.registerEvent("tasks","move"),c.registerEvent("tasks","moveBegin"),c.registerEvent("tasks","moveEnd"),c.registerEvent("tasks","resize"),c.registerEvent("tasks","resizeBegin"),c.registerEvent("tasks","resizeEnd"),c.registerEvent("tasks","change");var p,v,f="ontouchstart"in s||s.DocumentTouch&&r[0]instanceof s.DocumentTouch,k="touchstart mousedown",w="touchmove mousemove",b="touchend mouseup",M=5,h=3,$=15,y=5;c.directives.on.new(l,function(o,d,g){if("ganttTask"===o){var c,m=angular.element(s),T=d.row.rowsManager.gantt.body.$element,E=d.row.rowsManager.gantt.scroll.$element,R=!1;g.on(k,function(a){a.preventDefault(),f&&(a=e.getTouch(a));var o=n.firstProperty([d.task.model.movable,d.task.row.model.movable],"enabled",l.enabled);if(o){var s=e.getOffset(a).x,r=U(s);if(""!==r&&1===t.getButton(a)){var i=e.getOffsetForElement(T[0],a).x;x(r,i)}d.$digest()}}),g.on("mousemove",function(t){var a=n.firstProperty([d.task.model.movable,d.task.row.model.movable],"enabled",l.enabled);if(a){var o=e.getOffset(t).x,s=U(o);""===s||!d.task.isMoving&&"M"===s?g.css("cursor",""):g.css("cursor",S(s))}});var C=function(t,e){O(t,e),z(t,e)},O=function(t,a){var o=e.getOffsetForElement(T[0],a),s=o.x;if(d.task.mouseOffsetX=s,"M"===t){var r=n.firstProperty([d.task.model.movable,d.task.row.model.movable],"allowRowSwitching",l.allowRowSwitching);if(r){for(var i,g=E[0].getBoundingClientRect(),c=n.findElementFromPoint(g.left,a.clientY,function(t){return angular.element(t).hasClass("gantt-row")}),m=u.gantt.rowsManager.rows,v=0,f=m.length;f>v;v++)if(c===m[v].$element[0]){i=m[v];break}var k=d.task.row;void 0!==i&&k!==i&&(i.moveTaskToRow(d.task,!0),k.$scope.$digest(),i.$scope.$digest())}var w=n.firstProperty([d.task.model.movable,d.task.row.model.movable],"allowMoving",l.allowMoving);w&&(s-=p,"truncate"!==d.taskOutOfRange&&(0>s?s=0:s+d.task.width>=d.gantt.width&&(s=d.gantt.width-d.task.width)),d.task.moveTo(s),d.$digest(),d.row.rowsManager.gantt.api.tasks.raise.move(d.task))}else"E"===t?("truncate"!==d.taskOutOfRange&&(s<d.task.left?s=d.task.left:s>d.gantt.width&&(s=d.gantt.width)),d.task.setTo(s),d.$digest(),d.row.rowsManager.gantt.api.tasks.raise.resize(d.task)):("truncate"!==d.taskOutOfRange&&(s>d.task.left+d.task.width?s=d.task.left+d.task.width:0>s&&(s=0)),d.task.setFrom(s),d.$digest(),d.row.rowsManager.gantt.api.tasks.raise.resize(d.task));R=!0},z=function(t,a){var o=e.getOffsetForElement(T[0],a),n=E[0].scrollLeft,s=E[0].offsetWidth,r=E[0].scrollWidth,l=n+s,g=!1;o.x<v?n>0&&o.x<=n+y&&(o.x-=$,g=!0,d.row.rowsManager.gantt.api.scroll.left($)):r>l&&o.x>=l-y&&(o.x+=$,g=!0,d.row.rowsManager.gantt.api.scroll.right($)),g&&(c=i(function(){C(t,a)},100,!0))},P=function(){void 0!==c&&(i.cancel(c),c=void 0)},U=function(t){var e=0,a=n.firstProperty([d.task.model.movable,d.task.row.model.movable],"allowResizing",l.allowResizing),o=n.firstProperty([d.task.model.movable,d.task.row.model.movable],"allowRowSwitching",l.allowRowSwitching),s=n.firstProperty([d.task.model.movable,d.task.row.model.movable],"allowMoving",l.allowMoving);return a&&(e=g[0].offsetWidth<10?h:M),a&&t>g[0].offsetWidth-e?"E":a&&e>t?"W":(s||o)&&t>=e&&t<=g[0].offsetWidth-e?"M":""},S=function(t){switch(t){case"E":return"e-resize";case"W":return"w-resize";case"M":return"move"}},x=function(t,o){void 0===d.task.originalModel&&(d.task.originalRow=d.task.row,d.task.originalModel=d.task.model,d.task.model=angular.copy(d.task.originalModel)),"M"===t?(g.addClass("gantt-task-moving"),d.task.isMoving||d.row.rowsManager.gantt.api.tasks.raise.moveBegin(d.task)):(g.addClass("gantt-task-resizing"),d.task.isMoving||d.row.rowsManager.gantt.api.tasks.raise.resizeBegin(d.task)),d.task.isMoving||(v=o,p=o-d.task.modelLeft),R=!1,d.task.moveMode=t,d.task.isMoving=!0,d.task.active=!0;var n=function(a){a.stopImmediatePropagation(),f&&(a=e.getTouch(a)),d.task.isMoving&&(P(),C(t,a))},s=a(d,m,w,n);s.bind(),a(d,m,b,function(t){f&&(t=e.getTouch(t)),s.unbind(),B(t),d.$digest()}).bindOnce(),g.css("cursor",S(t)),angular.element(r[0].body).css({"-moz-user-select":"-moz-none","-webkit-user-select":"none","-ms-user-select":"none","user-select":"none",cursor:S(t)})},B=function(){if(g.removeClass("gantt-task-moving"),g.removeClass("gantt-task-resizing"),void 0!==d.task.originalModel){if(angular.extend(d.task.originalModel,d.task.model),d.task.model=d.task.originalModel,d.task.row.model.id!==d.task.originalRow.model.id){var t=d.task.row;t.removeTask(d.task.model.id,!1,!0),d.task.row=d.task.originalRow,t.moveTaskToRow(d.task,!1)}delete d.task.originalModel,delete d.task.originalRow,d.$apply()}d.task.isMoving=!1,d.task.active=!1,P(),g.css("cursor",""),angular.element(r[0].body).css({"-moz-user-select":"","-webkit-user-select":"","-ms-user-select":"","user-select":"",cursor:""}),"M"===d.task.moveMode?d.row.rowsManager.gantt.api.tasks.raise.moveEnd(d.task):d.row.rowsManager.gantt.api.tasks.raise.resizeEnd(d.task),d.task.moveMode=void 0,R===!0&&(R=!1,d.task.row.sortTasks(),d.row.rowsManager.gantt.api.tasks.raise.change(d.task))};d.task.isResizing?(delete d.task.isResizing,x("E",d.task.mouseOffsetX)):d.task.isMoving&&x("M",d.task.mouseOffsetX)}})}}}])}(),function(){"use strict";angular.module("gantt.progress",["gantt","gantt.progress.templates"]).directive("ganttProgress",["moment","$compile","$document",function(t,e,a){return{restrict:"E",require:"^gantt",scope:{enabled:"=?",templateUrl:"=?",template:"="},link:function(o,n,s,r){var i=r.gantt.api;if(o.options&&"object"==typeof o.options.progress)for(var l in o.options.progress)o[l]=o.options[l];void 0===o.enabled&&(o.enabled=!0),i.directives.on.new(o,function(t,n,s){if("ganttTask"===t){var r=n.$new();r.pluginScope=o;var i=a[0].createElement("gantt-task-progress");angular.element(i).attr("data-ng-if","task.model.progress !== undefined"),void 0!==o.templateUrl&&angular.element(i).attr("data-template-url",o.templateUrl),void 0!==o.template&&angular.element(i).attr("data-template",o.template),s.append(e(i)(r))}}),i.tasks.on.clean(o,function(e){void 0===e.est||t.isMoment(e.est)||(e.est=t(e.est)),void 0===e.lct||t.isMoment(e.lct)||(e.lct=t(e.lct))})}}}])}(),function(){"use strict";angular.module("gantt.sortable",["gantt","ang-drag-drop"]).directive("ganttSortable",["ganttUtils","$compile",function(t,e){return{restrict:"E",require:"^gantt",scope:{enabled:"=?"},link:function(a,o,n,s){var r=s.gantt.api;if(a.options&&"object"==typeof a.options.sortable)for(var i in a.options.sortable)a[i]=a.options[i];void 0===a.enabled&&(a.enabled=!0),r.directives.on.new(a,function(o,n,s){"ganttRowLabel"===o&&(n.checkDraggable=function(){return t.firstProperty([n.row.model.sortable],"enabled",a.enabled)},n.onDropSuccess=function(){n.$evalAsync()},n.onDrop=function(t,e){var a=n.row.rowsManager.rowsMap[e.id];a!==n&&(n.row.rowsManager.moveRow(a,n.row),n.$evalAsync())},s.attr("ui-draggable","{{checkDraggable()}}"),s.attr("drag-channel","'sortable'"),s.attr("ui-on-drop","onDrop($event, $data)"),s.attr("on-drop-success","onDropSuccess()"),s.attr("drop-channel","'sortable'"),s.attr("drag","row.model"),e(s)(n))})}}}])}(),function(){"use strict";angular.module("gantt.tooltips",["gantt","gantt.tooltips.templates"]).directive("ganttTooltips",["$compile","$document",function(t,e){return{restrict:"E",require:"^gantt",scope:{enabled:"=?",dateFormat:"=?",templateUrl:"=?",template:"=?"},link:function(a,o,n,s){var r=s.gantt.api;if(a.options&&"object"==typeof a.options.tooltips)for(var i in a.options.tooltips)a[i]=a.options[i];void 0===a.enabled&&(a.enabled=!0),void 0===a.dateFormat&&(a.dateFormat="MMM DD, HH:mm"),r.directives.on.new(a,function(o,n,s){if("ganttTask"===o){var r=n.$new();r.pluginScope=a;var i=e[0].createElement("gantt-tooltip");void 0!==a.templateUrl&&angular.element(i).attr("data-template-url",a.templateUrl),void 0!==a.template&&angular.element(i).attr("data-template",a.template),s.append(t(i)(r))}})}}}])}(),function(){"use strict";angular.module("gantt.bounds").directive("ganttTaskBounds",["$templateCache",function(t){return{restrict:"E",templateUrl:function(e,a){var o;return o=void 0===a.templateUrl?"plugins/bounds/taskBounds.tmpl.html":a.templateUrl,a.template&&t.put(o,a.template),o},replace:!0,scope:!0,controller:["$scope","$element",function(t,e){var a={};t.$watchGroup(["task.model.est","task.model.lct","task.left","task.width"],function(){void 0!==t.task.model.est&&void 0!==t.task.model.lct?(t.bounds={},t.bounds.left=t.task.rowsManager.gantt.getPositionByDate(t.task.model.est),t.bounds.width=t.task.rowsManager.gantt.getPositionByDate(t.task.model.lct)-t.bounds.left):t.bounds=void 0}),t.task.$element.bind("mouseenter",function(){t.isTaskMouseOver=!0,t.$digest()}),t.task.$element.bind("mouseleave",function(){t.isTaskMouseOver=!1,t.$digest()}),t.getCss=function(){return void 0!==t.bounds&&(a.width=t.bounds.width+"px",a.left=t.task.isMilestone()===!0||0===t.task.width?t.bounds.left-(t.task.left-.3)+"px":t.bounds.left-t.task.left+"px"),a},t.getClass=function(){return void 0===t.task.model.est||void 0===t.task.model.lct?"gantt-task-bounds-in":t.task.model.est>t.task.model.from?"gantt-task-bounds-out":t.task.model.lct<t.task.model.to?"gantt-task-bounds-out":"gantt-task-bounds-in"},t.task.rowsManager.gantt.api.directives.raise.new("ganttBounds",t,e),t.$on("$destroy",function(){t.task.rowsManager.gantt.api.directives.raise.destroy("ganttBounds",t,e)})}]}}])}(),function(){"use strict";angular.module("gantt.movable").factory("ganttMovableOptions",[function(){return{initialize:function(t){return t.enabled=void 0!==t.enabled?!!t.enabled:!0,t.allowMoving=void 0!==t.allowMoving?!!t.allowMoving:!0,t.allowResizing=void 0!==t.allowResizing?!!t.allowResizing:!0,t.allowRowSwitching=void 0!==t.allowRowSwitching?!!t.allowRowSwitching:!0,t}}}])}(),function(){"use strict";angular.module("gantt.progress").directive("ganttTaskProgress",["$templateCache",function(t){return{restrict:"E",requires:"^ganttTask",templateUrl:function(e,a){var o;return o=void 0===a.templateUrl?"plugins/progress/taskProgress.tmpl.html":a.templateUrl,void 0!==a.template&&t.put(o,a.template),o},replace:!0,scope:!0,controller:["$scope","$element",function(t,e){t.getClasses=function(){var e=[];return void 0!==t.task.model.progress&&"object"!=typeof t.task.model.progress&&(e=t.task.model.classes),e},t.getCss=function(){var e,a={};return void 0!==t.task.model.progress&&(e="object"==typeof t.task.model.progress?t.task.model.progress:{percent:t.task.model.progress}),e&&(a["background-color"]=e.color?e.color:"#6BC443",a.width=e.percent+"%"),a},t.task.rowsManager.gantt.api.directives.raise.new("ganttTaskProgress",t,e),t.$on("$destroy",function(){t.task.rowsManager.gantt.api.directives.raise.destroy("ganttTaskProgress",t,e)})}]}}])}(),function(){"use strict";angular.module("gantt.tooltips").directive("ganttTooltip",["$timeout","$compile","$document","$templateCache","ganttDebounce","ganttSmartEvent",function(t,e,a,o,n,s){return{restrict:"E",templateUrl:function(t,e){var a;return a=void 0===e.templateUrl?"plugins/tooltips/tooltip.tmpl.html":e.templateUrl,void 0!==e.template&&o.put(a,e.template),a},scope:!0,replace:!0,controller:["$scope","$element","ganttUtils",function(e,o,r){var i,l,d=angular.element(a[0].body),g=o.parent();e.css={},e.visible=!1,e.getFromLabel=function(){var t=r.firstProperty([e.task.model.tooltips,e.task.row.model.tooltips],"dateFormat",e.pluginScope.dateFormat);return e.task.model.from.format(t)},e.getToLabel=function(){var t=r.firstProperty([e.task.model.tooltips,e.task.row.model.tooltips],"dateFormat",e.pluginScope.dateFormat);return e.task.model.to.format(t)},e.$watch("isTaskMouseOver",function(a){i&&t.cancel(i);var o=r.firstProperty([e.task.model.tooltips,e.task.row.model.tooltips],"enabled",e.pluginScope.enabled);o&&a===!0?i=t(function(){m(l)},500,!0):e.task.active||v()}),e.task.$element.bind("mousemove",function(t){l=t.clientX}),e.task.$element.bind("mouseenter",function(t){e.mouseEnterX=t.clientX,e.isTaskMouseOver=!0,e.$digest()}),e.task.$element.bind("mouseleave",function(){e.mouseEnterX=void 0,e.isTaskMouseOver=!1,e.$digest()});var u=s(e,d,"mousemove",n(function(t){p(t.clientX)},5,!1));e.$watch("task.isMoving",function(t){t===!0?u.bind():t===!1&&(u.unbind(),v())});var c=function(){var t=a[0];return t.documentElement.clientWidth||t.documentElement.getElementById("body")[0].clientWidth},m=function(a){e.visible=!0,t(function(){p(a),e.css.top=g[0].getBoundingClientRect().top+"px",e.css.marginTop=-o[0].offsetHeight-8+"px",e.css.opacity=1},0,!0)},p=function(t){t+o[0].offsetWidth>c()?(e.css.left=t+20-o[0].offsetWidth+"px",o.addClass("gantt-task-infoArrowR"),o.removeClass("gantt-task-infoArrow")):(e.css.left=t-20+"px",o.addClass("gantt-task-infoArrow"),o.removeClass("gantt-task-infoArrowR"))},v=function(){e.css.opacity=0,e.visible=!1};e.gantt.api.directives.raise.new("ganttTooltip",e,o),e.$on("$destroy",function(){e.gantt.api.directives.raise.destroy("ganttTooltip",e,o)})}]}}])}();