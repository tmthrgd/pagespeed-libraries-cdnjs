!function(){"use strict";angular.module("gantt.progress",["gantt","gantt.progress.templates"]).directive("ganttProgress",["moment","$compile",function(e,t){return{restrict:"E",require:"^gantt",scope:{enabled:"=?"},link:function(s,r,o,n){var a=n.gantt.api;if(s.options&&"object"==typeof s.options.progress)for(var i in s.options.progress)s[i]=s.options[i];void 0===s.enabled&&(s.enabled=!0);var c=[];s.$watch("enabled",function(e){angular.forEach(c,function(t){t.enabled=e})}),a.directives.on.new(s,function(e,r,o){if("ganttTask"===e){var n=r.$new();c.push(n),n.enabled=s.enabled,o.append(t('<gantt-task-progress ng-if="task.model.progress !== undefined"></gantt-task-progress>')(n)),n.$on("$destroy",function(){var e=c.indexOf(n);e>-1&&c.splice(e,1)})}}),a.tasks.on.clean(s,function(t){void 0===t.est||e.isMoment(t.est)||(t.est=e(t.est)),void 0===t.lct||e.isMoment(t.lct)||(t.lct=e(t.lct))})}}}])}(),function(){"use strict";angular.module("gantt.progress").directive("ganttTaskProgress",[function(){return{restrict:"E",requires:"^ganttTask",templateUrl:function(e,t){return void 0===t.templateUrl?"plugins/progress/taskProgress.tmpl.html":t.templateUrl},replace:!0,scope:!0,controller:["$scope","$element",function(e,t){e.getClasses=function(){var t=[];return void 0!==e.task.model.progress&&"object"!=typeof e.task.model.progress&&(t=e.task.model.classes),t},e.getCss=function(){var t,s={};return void 0!==e.task.model.progress&&(t="object"==typeof e.task.model.progress?e.task.model.progress:{percent:e.task.model.progress}),t&&(s["background-color"]=t.color?t.color:"#6BC443",s.width=t.percent+"%"),s},e.task.rowsManager.gantt.api.directives.raise.new("ganttTaskProgress",e,t),e.$on("$destroy",function(){e.task.rowsManager.gantt.api.directives.raise.destroy("ganttTaskProgress",e,t)})}]}}])}();