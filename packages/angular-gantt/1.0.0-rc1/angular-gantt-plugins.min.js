angular.module("gantt.bounds.templates",[]).run(["$templateCache",function(t){t.put("plugins/bounds/taskBounds.tmpl.html",'<div ng-show="bounds && isTaskMouseOver && enabled" class="gantt-task-bounds" ng-style="getCss()" ng-class="getClass()"></div>\n')}]),angular.module("gantt.drawtask.templates",[]).run(["$templateCache",function(){}]),angular.module("gantt.history.templates",[]).run(["$templateCache",function(){}]),angular.module("gantt.movable.templates",[]).run(["$templateCache",function(){}]),angular.module("gantt.progress.templates",[]).run(["$templateCache",function(t){t.put("plugins/progress/taskProgress.tmpl.html","<div ng-cloak ng-show='enabled' class='gantt-task-progress' ng-style=\"getCss()\" ng-class=\"getClasses()\"></div>\n")}]),angular.module("gantt.sortable.templates",[]).run(["$templateCache",function(){}]),angular.module("gantt.tooltips.templates",[]).run(["$templateCache",function(t){t.put("plugins/tooltips/tooltip.tmpl.html",'<div ng-show="showTooltips && visible" class="gantt-task-info" ng-cloak ng-style="css">\n    <div class="gantt-task-info-content">\n        {{ task.model.name }}</br>\n        <small>\n            {{\n            task.isMilestone() === true && (getFromLabel()) || (getFromLabel() + \' - \' + getToLabel());\n            }}\n        </small>\n    </div>\n</div>\n')}]),function(){"use strict";angular.module("gantt.bounds",["gantt","gantt.bounds.templates"]).directive("ganttBounds",["moment","$compile",function(t,e){return{restrict:"E",require:"^gantt",scope:{enabled:"=?"},link:function(o,a,n,s){var i=s.gantt.api;if(o.options&&"object"==typeof o.options.bounds)for(var r in o.options.bounds)o[r]=o.options[r];void 0===o.enabled&&(o.enabled=!0);var l=[];o.$watch("enabled",function(t){angular.forEach(l,function(e){e.enabled=t})}),i.directives.on.new(o,function(t,a,n){if("ganttTask"===t){var s=a.$new();l.push(l),s.enabled=o.enabled,n.append(e("<gantt-task-bounds></gantt-bounds>")(s)),s.$on("$destroy",function(){var t=l.indexOf(s);t>-1&&l.splice(t,1)})}}),i.tasks.on.clean(o,function(e){void 0===e.est||t.isMoment(e.est)||(e.est=t(e.est)),void 0===e.lct||t.isMoment(e.lct)||(e.lct=t(e.lct))})}}}])}(),function(){"use strict";angular.module("gantt.drawtask",["gantt"]).directive("ganttDrawTask",["ganttMouseOffset","moment",function(t,e){return{restrict:"E",require:"^gantt",scope:{enabled:"=?",taskModelFactory:"=taskFactory"},link:function(o,a,n,s){var i=s.gantt.api;i.directives.on.new(o,function(a,n,s){if("ganttRow"===a){var r=function(a){var s=a.target?a.target:a.srcElement;if(o.enabled&&s.className.indexOf("gantt-row")>-1){var r=i.core.getDateByPosition(t.getOffset(a).x),l=e(r),d=o.taskModelFactory();d.from=r,d.to=l;var c=n.row.addTask(d);c.isResizing=!0,c.updatePosAndSize(),n.row.updateVisibleTasks(),n.row.$element.scope().$digest()}};s.on("mousedown",r),n.drawTaskHandler=r}}),i.directives.on.destroy(o,function(t,e,o){"ganttRow"===t&&(o.off("mousedown",e.drawTaskHandler),delete e.drawTaskHandler)})}}}])}(),function(){"use strict";angular.module("gantt.movable",["gantt"]).directive("ganttMovable",["ganttMouseButton","ganttMouseOffset","ganttSmartEvent","ganttMovableOptions","ganttUtils","$window","$document","$timeout",function(t,e,o,a,n,s,i,r){return{restrict:"E",require:"^gantt",scope:{enabled:"=",allowMoving:"=?",allowResizing:"=?",allowRowSwitching:"=?"},link:function(l,d,c,g){var u=g.gantt.api;if(l.options&&"object"==typeof l.options.movable)for(var m in l.options.movable)l[m]=l.options[m];a.initialize(l),u.registerEvent("tasks","move"),u.registerEvent("tasks","moveBegin"),u.registerEvent("tasks","moveEnd"),u.registerEvent("tasks","resize"),u.registerEvent("tasks","resizeBegin"),u.registerEvent("tasks","resizeEnd"),u.registerEvent("tasks","change");var f="ontouchstart"in s||s.DocumentTouch&&i[0]instanceof s.DocumentTouch,p="touchstart mousedown",k="touchmove mousemove",v="touchend mouseup";u.directives.on.new(l,function(a,d,c){if("ganttTask"===a){var g,u,m,w=5,b=3,h=15,M=5,$=angular.element(s),y=d.row.rowsManager.gantt.body.$element,T=d.row.rowsManager.gantt.scroll.$element,E=!1;c.on(p,function(o){o.preventDefault(),f&&(o=e.getTouch(o));var a=n.firstProperty([d.task.model.movable,d.task.row.model.movable],"enabled",l.enabled);if(a){var s=e.getOffset(o).x,i=P(s);if(""!==i&&1===t.getButton(o)){var r=e.getOffsetForElement(y[0],o).x;F(i,r)}d.$digest()}}),c.on("mousemove",function(t){var o=n.firstProperty([d.task.model.movable,d.task.row.model.movable],"enabled",l.enabled);if(o){var a=e.getOffset(t).x,s=P(a);""===s||!d.task.isMoving&&"M"===s?c.css("cursor",""):c.css("cursor",x(s))}});var R=function(t,e){O(t,e),z(t,e)},O=function(t,o){var a=e.getOffsetForElement(y[0],o),s=a.x;if(d.task.mouseOffsetX=s,"M"===t){var i=n.firstProperty([d.task.model.movable,d.task.row.model.movable],"allowRowSwitching",l.allowRowSwitching);if(i){var r=T[0].getBoundingClientRect(),c=n.scopeFromPoint(r.left,o.clientY),u=c.row,m=d.task.row;void 0!==u&&m!==u&&(u.moveTaskToRow(d.task,!0),m.$element.scope().$digest(),u.$element.scope().$digest())}var f=n.firstProperty([d.task.model.movable,d.task.row.model.movable],"allowMoving",l.allowMoving);f&&(s-=g,"truncate"!==d.taskOutOfRange&&(0>s?s=0:s+d.task.width>=d.gantt.width&&(s=d.gantt.width-d.task.width)),d.task.moveTo(s),d.$digest(),d.row.rowsManager.gantt.api.tasks.raise.move(d.task))}else"E"===t?("truncate"!==d.taskOutOfRange&&(s<d.task.left?s=d.task.left:s>d.gantt.width&&(s=d.gantt.width)),d.task.setTo(s),d.$digest(),d.row.rowsManager.gantt.api.tasks.raise.resize(d.task)):("truncate"!==d.taskOutOfRange&&(s>d.task.left+d.task.width?s=d.task.left+d.task.width:0>s&&(s=0)),d.task.setFrom(s),d.$digest(),d.row.rowsManager.gantt.api.tasks.raise.resize(d.task));E=!0},z=function(t,o){var a=e.getOffsetForElement(y[0],o),n=T[0].scrollLeft,s=T[0].offsetWidth,i=T[0].scrollWidth,l=n+s,c=!1;a.x<u?n>0&&a.x<=n+M&&(a.x-=h,c=!0,d.row.rowsManager.gantt.api.scroll.left(h)):i>l&&a.x>=l-M&&(a.x+=h,c=!0,d.row.rowsManager.gantt.api.scroll.right(h)),c&&(m=r(function(){R(t,o)},100,!0))},C=function(){void 0!==m&&(r.cancel(m),m=void 0)},P=function(t){var e=0,o=n.firstProperty([d.task.model.movable,d.task.row.model.movable],"allowResizing",l.allowResizing),a=n.firstProperty([d.task.model.movable,d.task.row.model.movable],"allowRowSwitching",l.allowRowSwitching),s=n.firstProperty([d.task.model.movable,d.task.row.model.movable],"allowMoving",l.allowMoving);return o&&(e=c[0].offsetWidth<10?b:w),o&&t>c[0].offsetWidth-e?"E":o&&e>t?"W":(s||a)&&t>=e&&t<=c[0].offsetWidth-e?"M":""},x=function(t){switch(t){case"E":return"e-resize";case"W":return"w-resize";case"M":return"move"}},F=function(t,a){void 0===d.task.originalModel&&(d.task.originalRow=d.task.row,d.task.originalModel=d.task.model,d.task.model=angular.copy(d.task.originalModel)),"M"===t?(c.addClass("gantt-task-moving"),d.task.isMoving||d.row.rowsManager.gantt.api.tasks.raise.moveBegin(d.task)):(c.addClass("gantt-task-resizing"),d.task.isMoving||d.row.rowsManager.gantt.api.tasks.raise.resizeBegin(d.task)),E=!1,d.task.moveMode=t,d.task.isMoving=!0,d.task.active=!0,u=a,g=a-d.task.modelLeft;var n=function(o){o.stopImmediatePropagation(),f&&(o=e.getTouch(o)),d.task.isMoving&&(C(),R(t,o))},s=o(d,$,k,n);s.bind(),o(d,$,v,function(t){f&&(t=e.getTouch(t)),s.unbind(),B(t),d.$digest()}).bindOnce(),c.css("cursor",x(t)),angular.element(i[0].body).css({"-moz-user-select":"-moz-none","-webkit-user-select":"none","-ms-user-select":"none","user-select":"none",cursor:x(t)})},B=function(){if(c.removeClass("gantt-task-moving"),c.removeClass("gantt-task-resizing"),void 0!==d.task.originalModel){if(angular.extend(d.task.originalModel,d.task.model),d.task.model=d.task.originalModel,d.task.row.model.id!==d.task.originalRow.model.id){var t=d.task.row;t.removeTask(d.task.model.id),d.task.row=d.task.originalRow,t.moveTaskToRow(d.task,!1)}delete d.task.originalModel,delete d.task.originalRow,d.$apply()}d.task.isMoving=!1,d.task.active=!1,C(),c.css("cursor",""),angular.element(i[0].body).css({"-moz-user-select":"","-webkit-user-select":"","-ms-user-select":"","user-select":"",cursor:""}),"M"===d.task.moveMode?d.row.rowsManager.gantt.api.tasks.raise.moveEnd(d.task):d.row.rowsManager.gantt.api.tasks.raise.resizeEnd(d.task),d.task.moveMode=void 0,E===!0&&(E=!1,d.task.row.sortTasks(),d.row.rowsManager.gantt.api.tasks.raise.change(d.task))};d.task.isResizing?(delete d.task.isResizing,F("E",d.task.mouseOffsetX)):d.task.isMoving&&F("M",d.task.mouseOffsetX)}})}}}])}(),function(){"use strict";angular.module("gantt.progress",["gantt","gantt.progress.templates"]).directive("ganttProgress",["moment","$compile",function(t,e){return{restrict:"E",require:"^gantt",scope:{enabled:"=?"},link:function(o,a,n,s){var i=s.gantt.api;if(o.options&&"object"==typeof o.options.progress)for(var r in o.options.progress)o[r]=o.options[r];void 0===o.enabled&&(o.enabled=!0);var l=[];o.$watch("enabled",function(t){angular.forEach(l,function(e){e.enabled=t})}),i.directives.on.new(o,function(t,a,n){if("ganttTask"===t){var s=a.$new();l.push(s),s.enabled=o.enabled,n.append(e('<gantt-task-progress ng-if="task.model.progress !== undefined"></gantt-task-progress>')(s)),s.$on("$destroy",function(){var t=l.indexOf(s);t>-1&&l.splice(t,1)})}}),i.tasks.on.clean(o,function(e){void 0===e.est||t.isMoment(e.est)||(e.est=t(e.est)),void 0===e.lct||t.isMoment(e.lct)||(e.lct=t(e.lct))})}}}])}(),function(){"use strict";angular.module("gantt.sortable",["gantt","ang-drag-drop"]).directive("ganttSortable",["ganttUtils","$compile",function(t,e){return{restrict:"E",require:"^gantt",scope:{enabled:"=?"},link:function(o,a,n,s){var i=s.gantt.api;if(o.options&&"object"==typeof o.options.sortable)for(var r in o.options.sortable)o[r]=o.options[r];void 0===o.enabled&&(o.enabled=!0),i.directives.on.new(o,function(a,n,s){"ganttRowLabel"===a&&(n.checkDraggable=function(){return t.firstProperty([n.row.model.sortable],"enabled",o.enabled)},n.onDropSuccess=function(){n.$evalAsync()},n.onDrop=function(t,e){var o=n.row.rowsManager.rowsMap[e.id];o!==n&&(n.row.rowsManager.moveRow(o,n.row),n.$evalAsync())},s.attr("ui-draggable","{{checkDraggable()}}"),s.attr("drag-channel","'sortable'"),s.attr("ui-on-drop","onDrop($event, $data)"),s.attr("on-drop-success","onDropSuccess()"),s.attr("drop-channel","'sortable'"),s.attr("drag","row.model"),e(s)(n))})}}}])}(),function(){"use strict";angular.module("gantt.tooltips",["gantt","gantt.tooltips.templates"]).directive("ganttTooltips",["$compile",function(t){return{restrict:"E",require:"^gantt",scope:{enabled:"=?",dateFormat:"=?"},link:function(e,o,a,n){var s=n.gantt.api;if(e.options&&"object"==typeof e.options.tooltips)for(var i in e.options.tooltips)e[i]=e.options[i];void 0===e.enabled&&(e.enabled=!0),void 0===e.dateFormat&&(e.dateFormat="MMM DD, HH:mm");var r=[];e.$watch("dateFormat",function(t){angular.forEach(r,function(e){e.dateFormat=t})}),e.$watch("enabled",function(t){angular.forEach(r,function(e){e.enabled=t})}),s.directives.on.new(e,function(o,a,n){if("ganttTask"===o){var s=a.$new();r.push(s),s.dateFormat=e.dateFormat,s.enabled=e.enabled,n.append(t('<gantt-tooltip ng-model="task"></gantt-tooltip>')(s)),s.$on("$destroy",function(){var t=r.indexOf(s);t>-1&&r.splice(t,1)})}})}}}])}(),function(){"use strict";angular.module("gantt.bounds").directive("ganttTaskBounds",[function(){return{restrict:"E",templateUrl:function(t,e){return void 0===e.templateUrl?"plugins/bounds/taskBounds.tmpl.html":e.templateUrl},replace:!0,scope:!0,controller:["$scope","$element",function(t,e){var o={};t.$watchGroup(["task.model.est","task.model.lct","task.left","task.width"],function(){void 0!==t.task.model.est&&void 0!==t.task.model.lct?(t.bounds={},t.bounds.left=t.task.rowsManager.gantt.getPositionByDate(t.task.model.est),t.bounds.width=t.task.rowsManager.gantt.getPositionByDate(t.task.model.lct)-t.bounds.left):t.bounds=void 0}),t.task.$element.bind("mouseenter",function(){t.isTaskMouseOver=!0,t.$digest()}),t.task.$element.bind("mouseleave",function(){t.isTaskMouseOver=!1,t.$digest()}),t.getCss=function(){return void 0!==t.bounds&&(o.width=t.bounds.width+"px",o.left=t.task.isMilestone()===!0||0===t.task.width?t.bounds.left-(t.task.left-.3)+"px":t.bounds.left-t.task.left+"px"),o},t.getClass=function(){return void 0===t.task.model.est||void 0===t.task.model.lct?"gantt-task-bounds-in":t.task.model.est>t.task.model.from?"gantt-task-bounds-out":t.task.model.lct<t.task.model.to?"gantt-task-bounds-out":"gantt-task-bounds-in"},t.task.rowsManager.gantt.api.directives.raise.new("ganttBounds",t,e),t.$on("$destroy",function(){t.task.rowsManager.gantt.api.directives.raise.destroy("ganttBounds",t,e)})}]}}])}(),function(){"use strict";angular.module("gantt.movable").factory("ganttMovableOptions",[function(){return{initialize:function(t){return t.enabled=void 0!==t.enabled?!!t.enabled:!0,t.allowMoving=void 0!==t.allowMoving?!!t.allowMoving:!0,t.allowResizing=void 0!==t.allowResizing?!!t.allowResizing:!0,t.allowRowSwitching=void 0!==t.allowRowSwitching?!!t.allowRowSwitching:!0,t}}}])}(),function(){"use strict";angular.module("gantt.progress").directive("ganttTaskProgress",[function(){return{restrict:"E",requires:"^ganttTask",templateUrl:function(t,e){return void 0===e.templateUrl?"plugins/progress/taskProgress.tmpl.html":e.templateUrl},replace:!0,scope:!0,controller:["$scope","$element",function(t,e){t.getClasses=function(){var e=[];return void 0!==t.task.model.progress&&"object"!=typeof t.task.model.progress&&(e=t.task.model.classes),e},t.getCss=function(){var e,o={};return void 0!==t.task.model.progress&&(e="object"==typeof t.task.model.progress?t.task.model.progress:{percent:t.task.model.progress}),e&&(o["background-color"]=e.color?e.color:"#6BC443",o.width=e.percent+"%"),o},t.task.rowsManager.gantt.api.directives.raise.new("ganttTaskProgress",t,e),t.$on("$destroy",function(){t.task.rowsManager.gantt.api.directives.raise.destroy("ganttTaskProgress",t,e)})}]}}])}(),function(){"use strict";angular.module("gantt.tooltips").directive("ganttTooltip",["$timeout","$document","ganttDebounce","ganttSmartEvent",function(t,e,o,a){return{restrict:"E",templateUrl:function(t,e){return void 0===e.templateUrl?"plugins/tooltips/tooltip.tmpl.html":e.templateUrl},scope:!0,replace:!0,controller:["$scope","$element","ganttUtils",function(n,s,i){var r,l,d=angular.element(e[0].body),c=s.parent();n.css={},n.visible=!1,n.getFromLabel=function(){var t=i.firstProperty([n.task.model.tooltips,n.task.row.model.tooltips],"dateFormat",n.dateFormat);return n.task.model.from.format(t)},n.getToLabel=function(){var t=i.firstProperty([n.task.model.tooltips,n.task.row.model.tooltips],"dateFormat",n.dateFormat);return n.task.model.to.format(t)},n.$watch("isTaskMouseOver",function(e){r&&t.cancel(r);var o=i.firstProperty([n.task.model.tooltips,n.task.row.model.tooltips],"enabled",n.enabled);o&&e===!0?r=t(function(){m(l)},500,!0):n.task.active||p()}),n.task.$element.bind("mousemove",function(t){l=t.clientX}),n.task.$element.bind("mouseenter",function(t){n.mouseEnterX=t.clientX,n.isTaskMouseOver=!0,n.$digest()}),n.task.$element.bind("mouseleave",function(){n.mouseEnterX=void 0,n.isTaskMouseOver=!1,n.$digest()});var g=a(n,d,"mousemove",o(function(t){f(t.clientX)},5,!1));n.$watch("task.isMoving",function(t){t===!0?g.bind():t===!1&&(g.unbind(),p())});var u=function(){var t=e[0];return t.documentElement.clientWidth||t.documentElement.getElementById("body")[0].clientWidth},m=function(e){n.visible=!0,t(function(){f(e),n.css.top=c[0].getBoundingClientRect().top+"px",n.css.marginTop=-s[0].offsetHeight-8+"px",n.css.opacity=1},0,!0)},f=function(t){t+s[0].offsetWidth>u()?(n.css.left=t+20-s[0].offsetWidth+"px",s.addClass("gantt-task-infoArrowR"),s.removeClass("gantt-task-infoArrow")):(n.css.left=t-20+"px",s.addClass("gantt-task-infoArrow"),s.removeClass("gantt-task-infoArrowR"))},p=function(){n.css.opacity=0,n.visible=!1};n.gantt.api.directives.raise.new("ganttTooltip",n,s),n.$on("$destroy",function(){n.gantt.api.directives.raise.destroy("ganttTooltip",n,s)})}]}}])}();