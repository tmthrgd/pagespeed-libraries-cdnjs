!function(){"use strict";angular.module("gantt.tooltips",["gantt","gantt.tooltips.templates"]).directive("ganttTooltips",["$compile",function(t){return{restrict:"E",require:"^gantt",scope:{enabled:"=?",dateFormat:"=?"},link:function(e,o,n,a){var i=a.gantt.api;if(e.options&&"object"==typeof e.options.tooltips)for(var s in e.options.tooltips)e[s]=e.options[s];void 0===e.enabled&&(e.enabled=!0),void 0===e.dateFormat&&(e.dateFormat="MMM DD, HH:mm");var r=[];e.$watch("dateFormat",function(t){angular.forEach(r,function(e){e.dateFormat=t})}),e.$watch("enabled",function(t){angular.forEach(r,function(e){e.enabled=t})}),i.directives.on.new(e,function(o,n,a){if("ganttTask"===o){var i=n.$new();r.push(i),i.dateFormat=e.dateFormat,i.enabled=e.enabled,a.append(t('<gantt-tooltip ng-model="task"></gantt-tooltip>')(i)),i.$on("$destroy",function(){var t=r.indexOf(i);t>-1&&r.splice(t,1)})}})}}}])}(),function(){"use strict";angular.module("gantt.tooltips").directive("ganttTooltip",["$timeout","$document","ganttDebounce","ganttSmartEvent",function(t,e,o,n){return{restrict:"E",templateUrl:function(t,e){return void 0===e.templateUrl?"plugins/tooltips/tooltip.tmpl.html":e.templateUrl},scope:!0,replace:!0,controller:["$scope","$element","ganttUtils",function(a,i,s){var r,l,c=angular.element(e[0].body),d=i.parent();a.css={},a.visible=!1,a.getFromLabel=function(){var t=s.firstProperty([a.task.model.tooltips,a.task.row.model.tooltips],"dateFormat",a.dateFormat);return a.task.model.from.format(t)},a.getToLabel=function(){var t=s.firstProperty([a.task.model.tooltips,a.task.row.model.tooltips],"dateFormat",a.dateFormat);return a.task.model.to.format(t)},a.$watch("isTaskMouseOver",function(e){r&&t.cancel(r);var o=s.firstProperty([a.task.model.tooltips,a.task.row.model.tooltips],"enabled",a.enabled);o&&e===!0?r=t(function(){p(l)},500,!0):a.task.active||g()}),a.task.$element.bind("mousemove",function(t){l=t.clientX}),a.task.$element.bind("mouseenter",function(t){a.mouseEnterX=t.clientX,a.isTaskMouseOver=!0,a.$digest()}),a.task.$element.bind("mouseleave",function(){a.mouseEnterX=void 0,a.isTaskMouseOver=!1,a.$digest()});var u=n(a,c,"mousemove",o(function(t){f(t.clientX)},5,!1));a.$watch("task.isMoving",function(t){t===!0?u.bind():t===!1&&(u.unbind(),g())});var m=function(){var t=e[0];return t.documentElement.clientWidth||t.documentElement.getElementById("body")[0].clientWidth},p=function(e){a.visible=!0,t(function(){f(e),a.css.top=d[0].getBoundingClientRect().top+"px",a.css.marginTop=-i[0].offsetHeight-8+"px",a.css.opacity=1},0,!0)},f=function(t){t+i[0].offsetWidth>m()?(a.css.left=t+20-i[0].offsetWidth+"px",i.addClass("gantt-task-infoArrowR"),i.removeClass("gantt-task-infoArrow")):(a.css.left=t-20+"px",i.addClass("gantt-task-infoArrow"),i.removeClass("gantt-task-infoArrowR"))},g=function(){a.css.opacity=0,a.visible=!1};a.gantt.api.directives.raise.new("ganttTooltip",a,i),a.$on("$destroy",function(){a.gantt.api.directives.raise.destroy("ganttTooltip",a,i)})}]}}])}();