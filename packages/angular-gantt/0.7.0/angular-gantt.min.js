"use strict";var gantt=angular.module("gantt",["ganttTemplates","angularMoment"]);gantt.constant("GANTT_EVENTS",{READY:"event:gantt-ready",SCROLL:"event:gantt-scroll",TASK_ADDED:"event:gantt-task-added",TASK_CHANGED:"event:gantt-task-changed",TASK_REMOVED:"event:gantt-task-removed",TASK_MOVED:"event:gantt-task-moved",TASK_MOVE_BEGIN:"event:gantt-task-move-begin",TASK_MOVE:"event:gantt-task-move",TASK_MOVE_END:"event:gantt-task-move-end",TASK_RESIZE_BEGIN:"event:gantt-task-resize-begin",TASK_RESIZE:"event:gantt-task-resize",TASK_RESIZE_END:"event:gantt-task-resize-end",TASK_CLICKED:"event:gantt-task-clicked",TASK_DBL_CLICKED:"event:gantt-task-dblclicked",TASK_CONTEXTMENU:"event:gantt-task-contextmenu",COLUMN_CLICKED:"event:gantt-column-clicked",COLUMN_DBL_CLICKED:"event:gantt-column-dblclicked",COLUMN_CONTEXTMENU:"event:gantt-column-contextmenu",ROW_MOUSEDOWN:"event:gantt-row-mousedown",ROW_MOUSEUP:"event:gantt-row-mouseup",ROW_CLICKED:"event:gantt-row-clicked",ROW_DBL_CLICKED:"event:gantt-row-dblclicked",ROW_CONTEXTMENU:"event:gantt-row-contextmenu",ROW_CHANGED:"event:gantt-row-changed",ROW_ADDED:"event:gantt-row-added",ROW_REMOVED:"event:gantt-row-removed",ROW_ORDER_CHANGED:"event:gantt-row-order-changed",ROW_LABEL_MOUSEDOWN:"event:gantt-row-label-mousedown",ROW_LABEL_MOUSEUP:"event:gantt-row-label-mouseup",ROW_LABEL_CLICKED:"event:gantt-row-label-clicked",ROW_LABEL_DBL_CLICKED:"event:gantt-row-label-dblclicked",ROW_LABEL_CONTEXTMENU:"event:gantt-row-label-contextmenu",ROW_HEADER_MOUSEDOWN:"event:gantt-row-header-mousedown",ROW_HEADER_MOUSEUP:"event:gantt-row-header-mouseup",ROW_HEADER_CLICKED:"event:gantt-row-header-clicked",ROW_HEADER_DBL_CLICKED:"event:gantt-row-header-dblclicked",ROW_HEADER_CONTEXTMENU:"event:gantt-row-header-contextmenu",ROW_LABELS_RESIZED:"event:gantt-row-labels-resized",TIMESPAN_ADDED:"event:gantt-timespan-added",TIMESPAN_CHANGED:"event:gantt-timespan-changed",TASKS_FILTERED:"event:gantt-tasks-filtered",ROWS_FILTERED:"event:gantt-rows-filtered"}),gantt.directive("gantt",["Gantt","GanttCalendar","moment","ganttMouseOffset","ganttDebounce","GanttEvents","ganttEnableNgAnimate","GANTT_EVENTS",function(t,e,n,a,o,r,i,s){return{restrict:"EA",replace:!0,templateUrl:function(t,e){return void 0===e.templateUrl?"template/default.gantt.tmpl.html":e.templateUrl},scope:{sortMode:"=?",filterTask:"=?",filterTaskComparator:"=?",filterRow:"=?",filterRowComparator:"=?",viewScale:"=?",columnWidth:"=?",allowTaskMoving:"=?",allowTaskResizing:"=?",allowTaskRowSwitching:"=?",allowRowSorting:"=?",allowLabelsResizing:"=?",fromDate:"=?",toDate:"=?",currentDateValue:"=?",currentDate:"=?",autoExpand:"=?",taskOutOfRange:"=?",maxHeight:"=?",labelsWidth:"=?",showLabelsColumn:"=?",showTooltips:"=?",headers:"=?",headersFormats:"=?",timeFrames:"=?",dateFrames:"=?",timeFramesWorkingMode:"=?",timeFramesNonWorkingMode:"=?",tooltipDateFormat:"=?",timespans:"=?",columnMagnet:"=?",data:"=?",loadTimespans:"&",loadData:"&",removeData:"&",clearData:"&",centerDate:"&"},controller:["$scope","$element",function(a,o){void 0===a.sortMode&&(a.sortMode="name"),void 0===a.viewScale&&(a.viewScale="day"),void 0===a.columnMagnet&&(a.columnMagnet="15 minutes"),void 0===a.allowTaskMoving&&(a.allowTaskMoving=!0),void 0===a.allowTaskResizing&&(a.allowTaskResizing=!0),void 0===a.allowTaskRowSwitching&&(a.allowTaskRowSwitching=!0),void 0===a.allowRowSorting&&(a.allowRowSorting=!0),void 0===a.allowLabelsResizing&&(a.allowLabelsResizing=!0),void 0===a.currentDateValue&&(a.currentDateValue=n()),void 0===a.currentDate&&(a.currentDate="line"),void 0===a.maxHeight&&(a.maxHeight=0),void 0===a.autoExpand&&(a.autoExpand="none"),void 0===a.taskOutOfRange&&(a.taskOutOfRange="truncate"),void 0===a.labelsWidth&&(a.labelsWidth=0),void 0===a.showLabelsColumn&&(a.showLabelsColumn=!0),void 0===a.showTooltips&&(a.showTooltips=!0),void 0===a.timeFramesWorkingMode&&(a.timeFramesWorkingMode="hidden"),void 0===a.timeFramesNonWorkingMode&&(a.timeFramesNonWorkingMode="visible"),void 0===a.columnMagnet&&(a.columnMagnet="15 minutes"),void 0===a.tooltipDateFormat&&(a.tooltipDateFormat="MMM DD, HH:mm");var r={year:"YYYY",quarter:"[Q]Q YYYY",month:"MMMM YYYY",week:"w",day:"D",hour:"H",minute:"HH:mm"},l={day:"LL",hour:"H",minute:"HH:mm"},d={year:"YYYY",quarter:"[Q]Q",month:"MMMM"};a.getHeaderFormat=function(t){var e;return void 0!==a.headersFormats&&(e=a.headersFormats[t]),void 0===e&&(["millisecond","second","minute","hour"].indexOf(a.viewScale)>-1?e=l[t]:["month","quarter","year"].indexOf(a.viewScale)>-1&&(e=d[t]),void 0===e&&(e=r[t])),e},i(!1,o),a.calendar=new e,a.calendar.registerTimeFrames(a.timeFrames),a.calendar.registerDateFrames(a.dateFrames),a.$watch("timeFrames",function(){a.calendar.clearTimeFrames(),a.calendar.registerTimeFrames(a.timeFrames)}),a.$watch("dateFrames",function(){a.calendar.clearDateFrames(),a.calendar.registerDateFrames(a.dateFrames)}),a.template={},a.gantt=new t(a,o),a.$watch("sortMode",function(t,e){angular.equals(t,e)||a.sortRows()}),a.$watch("timespans",function(t,e){angular.equals(t,e)||(a.removeAllTimespans(),a.setTimespans(t))}),a.$watch("data",function(t,e){angular.equals(t,e)||(a.removeAllData(),a.setData(t))}),a.swapRows=function(t,e){a.gantt.swapRows(t,e),a.$emit(s.ROW_CHANGED,{row:t}),a.$emit(s.ROW_ORDER_CHANGED,{row:t}),a.$emit(s.ROW_CHANGED,{row:e}),a.$emit(s.ROW_ORDER_CHANGED,{row:e}),"custom"!==a.sortMode?a.sortMode="custom":a.sortRows()},a.sortRows=function(){a.gantt.sortRows(a.sortMode)},a.scrollTo=function(t){a.template.scrollable.$element[0].scrollLeft=t,a.template.scrollable.$element.triggerHandler("scroll")},a.scrollToLeft=function(t){a.template.scrollable.$element[0].scrollLeft-=t,a.template.scrollable.$element.triggerHandler("scroll")},a.scrollToRight=function(t){a.template.scrollable.$element[0].scrollLeft+=t,a.template.scrollable.$element.triggerHandler("scroll")},a.scrollToDate=function(t){var e=a.gantt.getPositionByDate(t);void 0!==e&&(a.template.scrollable.$element[0].scrollLeft=e-a.template.scrollable.$element[0].offsetWidth/2)};var c,u=500;a.autoExpandColumns=function(t,e,o){if(!("both"!==a.autoExpand&&a.autoExpand!==!0&&a.autoExpand!==o||Date.now()-c<u)){var r,i,s=1,l=31;"left"===o?(r="hour"===a.viewScale?n(e).add(-s,"day"):n(e).add(-l,"day"),i=e):(r=e,i="hour"===a.viewScale?n(e).add(s,"day"):n(e).add(l,"day")),a.fromDate=r,a.toDate=i,c=Date.now()}},a.setData=function(t){a.gantt.addData(t),a.sortRows()},a.removeData({fn:function(t){a.gantt.removeData(t),a.sortRows()}}),a.removeAllData=function(){a.gantt.removeAllRows(),a.gantt.updateColumns()},a.removeAllTimespans=function(){a.gantt.removeAllTimespans(),a.gantt.updateColumns()},a.setTimespans=function(t){a.gantt.addTimespans(t)},a.loadData({fn:a.setData}),a.loadTimespans({fn:a.setTimespans}),a.clearData({fn:a.removeAllData}),a.centerDate({fn:a.scrollToDate}),a.$emit(s.READY)}]}}]),gantt.factory("GanttCalendar",["$filter",function(t){var e=function(t){var n=this;void 0===t&&(t={}),n.start=t.start,n.end=t.end,n.working=t.working,n.default=t.default,n.cssClass=t.cssClass,n.getDuration=function(){return n.end.diff(n.start,"milliseconds")},n.clone=function(){return new e(n)}},n=function(t){var e=this;e.func=t,e.getTimeFrames=function(t){var n=e.func(t);return n instanceof Array||(n=[n]),n},e.clone=function(){return new n(e.func)}},a=function(t){var e=this;e.evaluator=t.evaluator,t.date?(e.start=moment(t.date).startOf("day"),e.end=moment(t.date).endOf("day")):(e.start=t.start,e.end=t.end),e.targets=t.targets instanceof Array?t.targets:[t.targets],e.default=t.default,e.dateMatch=function(t){return e.evaluator?e.evaluator(t):e.start&&e.end?t>=e.start&&t<=e.end:!1},e.clone=function(){return new a(e)}},o=function(){var o=this;o.timeFrames={},o.timeFrameMappings={},o.dateFrames={},o.clear=function(){o.timeFrames={},o.timeFrameMappings={},o.dateFrames={}},o.registerTimeFrames=function(t){angular.forEach(t,function(t,n){o.timeFrames[n]=new e(t)})},o.removeTimeFrames=function(t){angular.forEach(t,function(t){delete o.timeFrames[t]})},o.clearTimeFrames=function(){o.timeFrames={}},o.registerTimeFrameMappings=function(t){angular.forEach(t,function(t,e){o.timeFrameMappings[e]=new n(t)})},o.removeTimeFrameMappings=function(t){angular.forEach(t,function(t){delete o.timeFrameMappings[t]})},o.clearTimeFrameMappings=function(){o.timeFrameMappings={}},o.registerDateFrames=function(t){angular.forEach(t,function(t,e){o.dateFrames[e]=new a(t)})},o.removeDateFrames=function(t){angular.forEach(t,function(t){delete o.dateFrames[t]})},o.clearDateFrames=function(){o.dateFrames={}};var r=function(t){var e=[];return angular.forEach(o.dateFrames,function(n){n.dateMatch(t)&&e.push(n)}),0===e.length&&angular.forEach(o.dateFrames,function(t){t.default&&e.push(t)}),e};o.getTimeFrames=function(t){var e=[],n=r(t);angular.forEach(n,function(t){void 0!==t&&angular.forEach(t.targets,function(t){var n=o.timeFrameMappings[t];if(void 0!==n)e.push(n.getTimeFrames());else{var a=o.timeFrames[t];void 0!==a&&e.push(a)}})});var a=t.year(),i=t.month(),s=t.date(),l=[];return 0===e.length&&angular.forEach(o.timeFrames,function(t){t.default&&e.push(t)}),angular.forEach(e,function(t){t=t.clone(),void 0!==t.start&&(t.start.year(a),t.start.month(i),t.start.date(s)),void 0!==t.end&&(t.end.year(a),t.end.month(i),t.end.date(s),moment(t.end).startOf("day")===t.end&&t.end.add(1,"day")),l.push(t)}),l},o.solve=function(n,a,o){var r,i,s=0===n.length;angular.forEach(n,function(t){(void 0===r||r>t.start)&&(r=t.start),(void 0===i||i<t.end)&&(i=t.end)}),void 0===a&&(a=r),void 0===o&&(o=i);var l=[new e({start:a,end:o,working:s})],d=t("orderBy")(n,function(t){return-t.getDuration()});return angular.forEach(d,function(t){var e=l.slice(),n=0,a=!1,o=!1;angular.forEach(l,function(r){if(!o){if(t.end>r.start&&t.start<r.end){t=t.clone();var i=r.clone();r.end=moment(t.start),i.start=moment(t.end),e.splice(n+1,0,t.clone(),i),o=!0}else!a&&t.start<r.end?(t=t.clone(),r.end=moment(t.start),e.splice(n+1,0,t),a=!0):a&&t.end>r.start&&(r.start=moment(t.end),a=!1,o=!0);n++}}),l=e}),l=t("filter")(l,function(t){return(void 0===t.start||t.start<o)&&(void 0===t.end||t.end>a)})}};return o}]),gantt.factory("GanttColumn",["moment",function(t){var e=function(n,a,o,r,i,s,l,d,c){var u=this;u.date=n,u.endDate=a,u.left=o,u.width=r,u.calendar=i,u.duration=u.endDate.diff(u.date,"milliseconds"),u.timeFramesWorkingMode=s,u.timeFramesNonWorkingMode=l,u.timeFrames=[],u.visibleTimeFrames=[],u.daysTimeFrames={},u.cropped=!1,u.columnMagnetValue=d,u.columnMagnetUnit=c,u.originalSize={left:u.left,width:u.width};var m=function(t){return t.year()+"-"+t.month()+"-"+t.date()};if(void 0!==u.calendar&&("hidden"!==u.timeFramesNonWorkingMode||"hidden"!==u.timeFramesWorkingMode)){for(var f=function(e,n,a){return function(o){var r=o.start;void 0===r&&(r=n);var i=o.end;void 0===i&&(i=a),r<u.date&&(r=u.date),i>u.endDate&&(i=u.endDate),o=o.clone(),o.start=t(r),o.end=t(i),e.push(o)}},g=u.date,v=t(g).startOf("day"),p=v.add(1,"day");g<u.endDate;){var h=u.calendar.getTimeFrames(g),w=t.min(p,u.endDate);h=u.calendar.solve(h,g,w);var k=[];angular.forEach(h,f(k,g,w)),u.timeFrames=u.timeFrames.concat(k);var b=m(g);u.daysTimeFrames[b]=k,g=w,v=t(g).startOf("day"),p=v.add(1,"day")}if(angular.forEach(u.timeFrames,function(t){var e=t.start.diff(u.date,"milliseconds"),n=e/u.duration*u.width,a=t.end.diff(t.start,"milliseconds"),o=a/u.duration*u.width,r=!1;t.working&&"visible"!==u.timeFramesWorkingMode?r=!0:t.working||"visible"===u.timeFramesNonWorkingMode||(r=!0),r||u.visibleTimeFrames.push(t),t.hidden=r,t.left=n,t.width=o,t.originalSize={left:t.left,width:t.width}}),"cropped"===u.timeFramesNonWorkingMode||"cropped"===u.timeFramesWorkingMode){var E=0;if(angular.forEach(u.timeFrames,function(t){(!t.working&&"cropped"!==u.timeFramesNonWorkingMode||t.working&&"cropped"!==u.timeFramesWorkingMode)&&(E+=t.width)}),E!==u.width){var y=u.width/E,D=0,T=0,M=!0;angular.forEach(u.timeFrames,function(t){!t.working&&"cropped"!==u.timeFramesNonWorkingMode||t.working&&"cropped"!==u.timeFramesWorkingMode?(t.left=(t.left-D)*y,t.width=t.width*y,t.originalSize.left=(t.originalSize.left-T)*y,t.originalSize.width=t.originalSize.width*y,t.cropped=!1,M=!1):(D+=t.width,T+=t.originalSize.width,t.left=void 0,t.width=0,t.originalSize={left:void 0,width:0},t.cropped=!0)}),u.cropped=M}else u.cropped=!1}}u.clone=function(){return new e(t(u.date),t(u.endDate),u.left,u.width,u.calendar)},u.containsDate=function(t){return t>u.date&&t<=u.endDate},u.equals=function(t){return u.date===t.date},u.getMagnetDate=function(e){if(u.columnMagnetValue>0&&void 0!==u.columnMagnetUnit){e=t(e);var n=e.get(u.columnMagnetUnit),a=Math.round(n/u.columnMagnetValue)*u.columnMagnetValue;return e.startOf(u.columnMagnetUnit),e.set(u.columnMagnetUnit,a),e}return e};var R=function(e,n){for(var a=0;a<e.length;a++){var o=e[a];if(!o.cropped&&n>=o.left&&n<=o.left+o.width){var r=o.getDuration()/o.width*(n-o.left),i=t(o.start).add(r,"milliseconds");return i}}};u.getDateByPosition=function(e,n){var a,o;return 0>e&&(e=0),e>u.width&&(e=u.width),("cropped"===u.timeFramesNonWorkingMode||"cropped"===u.timeFramesWorkingMode)&&(o=R(u.timeFrames,e)),void 0===o&&(a=u.duration/u.width*e,o=t(u.date).add(a,"milliseconds")),n?u.getMagnetDate(o):o};var C=function(t){var e=u.daysTimeFrames[m(t)];return void 0===e?[]:e};u.getPositionByDate=function(t){var e,n;if("cropped"===u.timeFramesNonWorkingMode||"cropped"===u.timeFramesWorkingMode)for(var a=t,o=C(a),r=0;r<o.length;r++){var i=o[r];if(a>=i.start&&a<=i.end){if(!i.cropped)return e=a.diff(i.start,"milliseconds"),n=e/i.getDuration()*i.width,u.left+i.left+n;a=o.length>r+1?o[r+1].start:i.end}}return e=t.diff(u.date,"milliseconds"),n=e/u.duration*u.width,0>n&&(n=0),n>u.width&&(n=u.width),u.left+n}};return e}]),gantt.factory("GanttColumnGenerator",["GanttColumn","moment",function(t,e){var n=function(n){var a=this,o=n.columnWidth;void 0===o&&(o=20);var r,i,s=n.viewScale,l=n.calendar,d=n.timeFramesWorkingMode,c=n.timeFramesNonWorkingMode;if(n.columnMagnet){var u=n.columnMagnet.trim().split(" ");u.length>1&&(r=parseInt(u[0]),i=u[u.length-1])}a.generate=function(n,a,u,f,g){if(!a&&!u)throw"to or maximumWidth must be defined";var v=!1;n=e(n).startOf(s),a&&(v=m(a),a=e(a).startOf(s));for(var p=e(n).startOf(s),h=[],w=0;;){if(u&&Math.abs(w)>u+o)break;var k=e(p),b=e(k).add(1,s),E=new t(k,b,f?w+f:w,o,l,d,c,r,i);if(!E.cropped&&(h.push(E),g?w-=o:w+=o,a))if(g){if(v&&a>p||!v&&a>=p)break}else if(v&&p>a||!v&&p>=a)break;p.add(g?-1:1,s)}return g&&(m(n)&&h.shift(),h.reverse()),h};var m=function(t){return e(t).add(1,s).startOf(s)===t}};return n}]),gantt.factory("GanttColumnHeader",["moment","GanttColumn",function(t,e){var n=function(n,a,o,r,i){var s=t(n),l=t(s).add(1,a),d=new e(s,l,o,r);return d.unit=a,d.label=i,d};return n}]),gantt.service("GanttEvents",["ganttMouseOffset",function(t){return{buildTaskEventData:function(e,n,a,o){var r={evt:e,element:n,task:a};if(void 0!==o&&void 0!==e){var i=t.getOffset(e).x;r.column=o.getColumnByPosition(i+a.left),r.date=o.getDateByPosition(i+a.left)}return r},buildRowEventData:function(e,n,a,o){var r={evt:e,element:n,row:a};if(void 0!==o&&void 0!==e){var i=t.getOffset(e).x;r.column=o.getColumnByPosition(i),r.date=o.getDateByPosition(i)}return r},buildColumnEventData:function(t,e,n){var a={evt:t,element:e,column:n};return a}}}]),gantt.factory("Gantt",["$filter","GanttRow","GanttTimespan","GanttColumnGenerator","GanttHeaderGenerator","moment","ganttBinarySearch","ganttLayout","GANTT_EVENTS",function(t,e,n,a,o,r,i,s,l){var d=function(d,c){var u=this;u.$scope=d,u.$element=c,u.rowsMap={},u.rows=[],u.filteredRows=[],u.visibleRows=[],u.timespansMap={},u.timespans=[],u.columns=[],u.visibleColumns=[],u.headers={},u.visibleHeaders={},u.previousColumns=[],u.nextColumns=[],u.width=0,u.from=void 0,u.to=void 0,u.scrollAnchor=void 0,d.$watch("viewScale+width+labelsWidth+columnWidth+timeFramesWorkingMode+timeFramesNonWorkingMode+columnMagnet",function(t,e){angular.equals(t,e)||(u.buildGenerators(),u.clearColumns(),u.updateColumns())}),d.$watch("fromDate+toDate+autoExpand+taskOutOfRange",function(t,e){angular.equals(t,e)||u.updateColumns()}),d.$watch("currentDate+currentDateValue",function(t,e){angular.equals(t,e)||u.setCurrentDate(d.currentDateValue)}),d.$watch("ganttElementWidth+labelsWidth+showLabelsColumn+maxHeight",function(t,e){angular.equals(t,e)||E()});var m=function(){u.visibleColumns=t("ganttColumnLimit")(u.columns,d.scrollLeft,d.scrollWidth),angular.forEach(u.headers,function(e,n){u.headers.hasOwnProperty(n)&&(u.visibleHeaders[n]=t("ganttColumnLimit")(e,d.scrollLeft,d.scrollWidth))})},f=function(){var e=u.filteredRows;u.filteredRows=d.filterRow?t("filter")(u.rows,d.filterRow,d.filterRowComparator):u.rows;var n;angular.equals(e,u.filteredRows)||(n={rows:u.rows,filteredRows:u.filteredRows}),u.visibleRows=u.filteredRows,void 0!==n&&d.$emit(l.ROWS_FILTERED,n)},g=function(){var t=[],e=[],n=[];angular.forEach(u.filteredRows,function(a){t=t.concat(a.filteredTasks),a.updateVisibleTasks(),e=e.concat(a.filteredTasks),n=n.concat(a.tasks)});var a;angular.equals(t,e)||(a={tasks:n,filteredTasks:e}),void 0!==a&&d.$emit(l.TASKS_FILTERED,a)},v=function(){f(),g()};m(),v(),d.$watch("scrollLeft+scrollWidth",function(t,e){angular.equals(t,e)||(m(),g())}),d.$watch("filterTask+filterTaskComparator",function(t,e){angular.equals(t,e)||g()}),d.$watch("filterRow+filterRowComparator",function(t,e){angular.equals(t,e)||f()});var p=function(){if(d.template.scrollable&&d.template.scrollable.$element&&u.columns.length>0){var t=d.template.scrollable.$element[0],e=t.scrollLeft+t.offsetWidth/2;u.scrollAnchor=u.getDateByPosition(e)}},h=function(t){t=t?r(t):t;var e=t;return angular.forEach(u.rows,function(t){(void 0===e||e>t.from)&&(e=t.from)}),e&&(!t||t>e)?e:t},w=function(t){t=t?r(t):t;var e=t;return angular.forEach(u.rows,function(t){(void 0===e||e<t.to)&&(e=t.to)}),e&&(!d.toDate||e>d.toDate)?e:t},k=function(t,e){return(t||(t=T()))&&(e||(e=M()))?u.from===t&&u.to===e?!1:(p(),u.from=t,u.to=e,u.columns=u.columnGenerator.generate(t,e),u.headers=u.headerGenerator.generate(u.columns),u.previousColumns=[],u.nextColumns=[],E(),!0):!1},b=function(t,e,n){if(t&&e&&n){var a=Math.abs(t/e);angular.forEach(n,function(t){t.left=a*t.originalSize.left,t.width=a*t.originalSize.width,angular.forEach(t.timeFrames,function(t){t.left=a*t.originalSize.left,t.width=a*t.originalSize.width})})}},E=function(){var t=u.getLastColumn();if(u.originalWidth=void 0!==t?t.originalSize.left+t.originalSize.width:0,void 0===d.columnWidth){var e=d.ganttElementWidth-(d.showLabelsColumn?d.labelsWidth:0);d.maxHeight>0&&(e-=s.getScrollBarWidth()),b(e,u.originalWidth,u.previousColumns),b(e,u.originalWidth,u.columns),b(e,u.originalWidth,u.nextColumns),angular.forEach(u.headers,function(t){b(e,u.originalWidth,t)})}u.width=void 0!==t?t.left+t.width:0,void 0!==u._currentDate&&u.setCurrentDate(u._currentDate),d.currentDatePosition=u.getPositionByDate(d.currentDateValue),u.updateTasksPosAndSize(),u.updateTimespansPosAndSize(),m(),v()},y=function(t){if(0>t){var e=u.getFirstColumn(),n=e.date,a=u.getFirstColumn(!0);return(!a||a.left>t)&&(u.previousColumns=u.columnGenerator.generate(n,void 0,-t,0,!0)),!0}if(t>u.width){var o=u.getLastColumn(),r=o.getDateByPosition(o.width),i=u.getLastColumn(!0);return(!i||i.left+i.width<t)&&(u.nextColumns=u.columnGenerator.generate(r,void 0,t-u.width,u.width,!1)),!0}return!1},D=function(t){var e,n=u.getFirstColumn();n&&(e=n.date);var a,o=u.getLastColumn();if(o&&(a=o.getDateByPosition(o.width)),e&&e>t){var r=u.getFirstColumn(!0);return(!r||r.date>t)&&(u.previousColumns=u.columnGenerator.generate(e,t,void 0,0,!0)),!0}if(a&&t>a){var i=u.getLastColumn(!0);return(!i||i>a)&&(u.nextColumns=u.columnGenerator.generate(a,t,void 0,u.width,!1)),!0}return!1};u.buildGenerators=function(){u.columnGenerator=new a(d),u.headerGenerator=new o(d)};var T=function(){var t;return angular.forEach(u.timespans,function(e){(void 0===t||e.from<t)&&(t=e.from)}),angular.forEach(u.rows,function(e){(void 0===t||e.from<t)&&(t=e.from)}),t},M=function(){var t;return angular.forEach(u.timespans,function(e){(void 0===t||e.to>t)&&(t=e.to)}),angular.forEach(u.rows,function(e){(void 0===t||e.to>t)&&(t=e.to)}),t};u.updateColumns=function(){var t=d.fromDate,e=d.toDate;"expand"===d.taskOutOfRange&&(t=h(t),e=w(e)),k(t,e)},u.clearColumns=function(){p(),u.from=void 0,u.to=void 0,u.columns=[],u.visibleColumns=[],u.previousColumns=[],u.nextColumns=[],u.visibleHeaders={},u.visibleRows=[]},u.updateTasksPosAndSize=function(){for(var t=0,e=u.rows.length;e>t;t++)u.rows[t].updateTasksPosAndSize()},u.updateTimespansPosAndSize=function(){for(var t=0,e=u.timespans.length;e>t;t++)u.timespans[t].updatePosAndSize()},u.getLastColumn=function(t){var e=u.columns;return t&&(e=u.nextColumns),e&&e.length>0?e[e.length-1]:void 0},u.getFirstColumn=function(t){var e=u.columns;return t&&(e=u.previousColumns),e&&e.length>0?e[0]:void 0},u.getColumnByDate=function(t){D(t);var e=u.previousColumns.concat(u.columns,u.nextColumns),n=i.get(e,t,function(t){return t.date});return void 0!==n[0]?n[0]:n[1]},u.getColumnByPosition=function(t){y(t);var e=u.previousColumns.concat(u.columns,u.nextColumns);return i.get(e,t,function(t){return t.left})[0]},u.getDateByPosition=function(t,e){var n=u.getColumnByPosition(t);return void 0!==n?n.getDateByPosition(t-n.left,e):void 0},u.getPositionByDate=function(t){if(void 0===t)return void 0;r.isMoment(r)||(t=r(t));var e=u.getColumnByDate(t);return void 0!==e?e.getPositionByDate(t):void 0},u.getTasksDateRange=function(){if(0===u.rows.length)return void 0;for(var t,e,n=0,a=u.rows.length;a>n;n++){var o=u.rows[n];(void 0===t||o.from<t)&&(t=o.from),(void 0===e||o.to>e)&&(e=o.to)}return{from:t,to:e}},u.getActiveHeadersCount=function(){var t,e=0;for(t in u.headers)u.headers.hasOwnProperty(t)&&e++;return e},u.addData=function(t){for(var e=0,n=t.length;n>e;e++){var a=t[e];R(a)}u.updateColumns(),u.updateTasksPosAndSize(),v()};var R=function(t){var n,a=!1;if(t.id in u.rowsMap)n=u.rowsMap[t.id],n.copy(t),a=!0,d.$emit(l.ROW_CHANGED,{row:n});else{var o=t.order;void 0===o&&(o=u.highestRowOrder),o>=u.highestRowOrder&&(u.highestRowOrder=o+1),n=new e(t.id,u,t.name,o,t.data),u.rowsMap[t.id]=n,u.rows.push(n),u.filteredRows.push(n),u.visibleRows.push(n),d.$emit(l.ROW_ADDED,{row:n})}if(void 0!==t.tasks&&t.tasks.length>0)for(var r=0,i=t.tasks.length;i>r;r++)n.addTask(t.tasks[r]);return a};u.removeData=function(t){for(var e=0,n=t.length;n>e;e++){var a,o=t[e];if(void 0!==o.tasks&&o.tasks.length>0){if(o.id in u.rowsMap){a=u.rowsMap[o.id];for(var r=0,i=o.tasks.length;i>r;r++)a.removeTask(o.tasks[r].id);d.$emit(l.ROW_CHANGED,{row:a})}}else a=C(o.id)}u.updateColumns(),v()};var C=function(t){if(t in u.rowsMap){delete u.rowsMap[t];for(var e,n,a=u.rows.length-1;a>=0;a--)n=u.rows[a],n.id===t&&(e=n,u.rows.splice(a,1));for(a=u.filteredRows.length-1;a>=0;a--)n=u.filteredRows[a],n.id===t&&u.filteredRows.splice(a,1);for(a=u.visibleRows.length-1;a>=0;a--)n=u.visibleRows[a],n.id===t&&u.visibleRows.splice(a,1);return d.$emit(l.ROW_REMOVED,{row:e}),n}return void 0};u.removeAllRows=function(){u.rowsMap={},u.rows=[],u.filteredRows=[],u.visibleRows=[],u.highestRowOrder=0,u.clearColumns(),u.scrollAnchor=void 0},u.removeAllTimespans=function(){u.timespansMap={},u.timespans=[]},u.swapRows=function(t,e){var n=t.order;t.order=e.order,e.order=n},u.sortRows=function(e){var n=!1;e=e,"-"===e.charAt(0)&&(n=!0,e=e.substr(1));var a=t("orderBy");u.rows="custom"===e?a(u.rows,"order",n):a(u.rows,e,n),f()},u.addTimespans=function(t){for(var e=0,n=t.length;n>e;e++){var a=t[e];$(a);var o=u.timespansMap[a.id];o.updatePosAndSize()}};var $=function(t){var e,a=!1;return t.id in u.timespansMap?(e=u.timespansMap[t.id],e.copy(t),a=!0):(e=new n(t.id,u,t.name,t.color,t.classes,t.priority,t.from,t.to,t.data),u.timespansMap[t.id]=e,u.timespans.push(e),d.$emit(l.TIMESPAN_ADDED,{timespan:e})),a};u.setCurrentDate=function(t){if(u._currentDate=t,void 0!==u._currentDateColumn&&delete u._currentDateColumn,void 0!==u._currentDate){var e=u.getColumnByDate(u._currentDate);void 0!==e&&(e.currentDate=u._currentDate,u._currentDateColumn=e)}d.currentDatePosition=u.getPositionByDate(d.currentDateValue)},u.buildGenerators(),u.clearColumns(),u.updateColumns(),u.setCurrentDate(d.currentDateValue)};return d}]),gantt.factory("GanttHeaderGenerator",["GanttColumnHeader",function(t){var e=function(e,n,a){for(var o,r=[],i=0,s=n.length;s>i;i++){var l=n[i];if(0===i||n[i-1].date.get(a)!==l.date.get(a)){var d=l.date.format(e(a));o=new t(l.date,a,l.originalSize.left,l.originalSize.width,d),o.left=l.left,o.width=l.width,r.push(o)}else o.originalSize.width+=l.originalSize.width,o.width+=l.width}return r};return function(t){this.generate=function(n){var a=[];void 0===t.headers?(a=[],["year","quarter","month"].indexOf(t.viewScale)>-1&&a.push("year"),["quarter"].indexOf(t.viewScale)>-1&&a.push("quarter"),["day","week","month"].indexOf(t.viewScale)>-1&&a.push("month"),["day","week"].indexOf(t.viewScale)>-1&&a.push("week"),["hour","day"].indexOf(t.viewScale)>-1&&a.push("day"),["hour","minute","second"].indexOf(t.viewScale)>-1&&a.push("hour"),["minute","second"].indexOf(t.viewScale)>-1&&a.push("minute"),["second"].indexOf(t.viewScale)>-1&&a.push("second"),0===a.length&&a.push(t.viewScale)):a=t.headers;var o=[];return angular.forEach(a,function(a){o.push(e(t.getHeaderFormat,n,a))}),o}}}]),gantt.factory("GanttRow",["GanttTask","moment","$filter","GANTT_EVENTS",function(t,e,n,a){var o=function(r,i,s,l,d){var c=this;c.id=r,c.gantt=i,c.name=s,c.order=l,c.from=void 0,c.to=void 0,c.tasksMap={},c.tasks=[],c.filteredTasks=[],c.visibleTasks=[],c.data=d,c.addTask=function(e){var n;return e.id in c.tasksMap?(n=c.tasksMap[e.id],n.copy(e)):(n=new t(e.id,c,e.name,e.color,e.classes,e.priority,e.from,e.to,e.data,e.est,e.lct,e.progress),c.tasksMap[e.id]=n,c.tasks.push(n),c.filteredTasks.push(n),c.visibleTasks.push(n)),c.sortTasks(),c.setFromToByTask(n),c.gantt.$scope.$emit(a.TASK_ADDED,{task:n}),n},c.moveTaskToRow=function(t){var e=t.row;e.removeTask(t.id,!0),e.updateVisibleTasks(),c.tasksMap[t.id]=t,c.tasks.push(t),c.filteredTasks.push(t),c.visibleTasks.push(t),t.row=c,c.sortTasks(),c.setFromToByTask(t),t.updatePosAndSize(),c.updateVisibleTasks(),c.gantt.$scope.$emit(a.TASK_MOVED,{oldRow:e,task:t})},c.updateVisibleTasks=function(){c.filteredTasks=i.$scope.filterTask?n("filter")(c.tasks,i.$scope.filterTask,i.$scope.filterTaskComparator):c.tasks,c.visibleTasks=n("ganttTaskLimit")(c.filteredTasks,c.gantt)},c.updateTasksPosAndSize=function(){for(var t=0,e=c.tasks.length;e>t;t++)c.tasks[t].updatePosAndSize()},c.removeTask=function(t,e){if(t in c.tasksMap){delete c.tasksMap[t];for(var n,o,r=c.tasks.length-1;r>=0;r--)n=c.tasks[r],n.id===t&&(o=n,c.tasks.splice(r,1),(c.from-n.from===0||c.to-n.to===0)&&c.setFromTo());for(r=c.filteredTasks.length-1;r>=0;r--)n=c.filteredTasks[r],n.id===t&&c.filteredTasks.splice(r,1);for(r=c.visibleTasks.length-1;r>=0;r--)n=c.visibleTasks[r],n.id===t&&c.visibleTasks.splice(r,1);return e||c.gantt.$scope.$emit(a.TASK_REMOVED,{task:o}),o}},c.setFromTo=function(){c.from=void 0,c.to=void 0;for(var t=0,e=c.tasks.length;e>t;t++)c.setFromToByTask(c.tasks[t])},c.setFromToByTask=function(t){void 0===c.from?c.from=e(t.from):t.from<c.from&&(c.from=e(t.from)),void 0===c.to?c.to=e(t.to):t.to>c.to&&(c.to=e(t.to))},c.sortTasks=function(){c.tasks.sort(function(t,e){return t.left-e.left})},c.copy=function(t){c.name=t.name,c.data=t.data,void 0!==t.order&&(c.order=t.order)},c.clone=function(){for(var t=new o(c.id,c.gantt,c.name,c.order,c.data),e=0,n=c.tasks.length;n>e;e++)t.addTask(c.tasks[e].clone());return t}};return o}]),gantt.factory("GanttScrollable",[function(){var t=function(t){this.$element=t};return t}]),gantt.factory("GanttTask",["moment","GanttTaskProgress",function(t,e){var n=function(a,o,r,i,s,l,d,c,u,m,f,g){var v=this;v.id=a,v.gantt=o.gantt,v.row=o,v.name=r,v.color=i,v.classes=s,v.priority=l,v.from=t(d),v.to=t(c),v.truncatedLeft=!1,v.truncatedRight=!1,v.data=u,void 0!==g&&(v.progress="object"==typeof g?new e(v,g.percent,g.color,g.classes):new e(v,g)),void 0!==m&&void 0!==f&&(v.est=t(m),v.lct=t(f)),v._fromLabel=void 0,v.getFromLabel=function(){return void 0===v._fromLabel&&(v._fromLabel=v.from.format(v.gantt.$scope.tooltipDateFormat)),v._fromLabel},v._toLabel=void 0,v.getToLabel=function(){return void 0===v._toLabel&&(v._toLabel=v.to.format(v.gantt.$scope.tooltipDateFormat)),v._toLabel},v.checkIfMilestone=function(){v.isMilestone=v.from-v.to===0},v.checkIfMilestone(),v.hasBounds=function(){return void 0!==v.bounds},v.updatePosAndSize=function(){v.modelLeft=v.gantt.getPositionByDate(v.from),v.modelWidth=v.gantt.getPositionByDate(v.to)-v.modelLeft,v.outOfRange=v.modelLeft+v.modelWidth<0||v.modelLeft>v.gantt.width,v.left=Math.min(Math.max(v.modelLeft,0),v.gantt.width),v.modelLeft<0?(v.truncatedLeft=!0,v.modelWidth+v.modelLeft>v.gantt.width?(v.truncatedRight=!0,v.width=v.gantt.width):(v.truncatedRight=!1,v.width=v.modelWidth+v.modelLeft)):v.modelWidth+v.modelLeft>v.gantt.width?(v.truncatedRight=!0,v.truncatedLeft=!1,v.width=v.gantt.width-v.modelLeft):(v.truncatedLeft=!1,v.truncatedRight=!1,v.width=v.modelWidth),void 0!==v.est&&void 0!==v.lct&&(v.bounds={},v.bounds.left=v.gantt.getPositionByDate(v.est),v.bounds.width=v.gantt.getPositionByDate(v.lct)-v.bounds.left)},v.setFrom=function(t){v.from=v.gantt.getDateByPosition(t,!0),v._fromLabel=void 0,v.row.setFromToByTask(v),v.updatePosAndSize(),v.checkIfMilestone()},v.setTo=function(t){v.to=v.gantt.getDateByPosition(t,!0),v._toLabel=void 0,v.row.setFromToByTask(v),v.updatePosAndSize(),v.checkIfMilestone()},v.moveTo=function(t){v.from=v.gantt.getDateByPosition(t,!0),v._fromLabel=void 0;var e=v.gantt.getPositionByDate(v.from);v.to=v.gantt.getDateByPosition(e+v.modelWidth,!0),v._toLabel=void 0,v.row.setFromToByTask(v),v.updatePosAndSize()},v.copy=function(e){v.name=e.name,v.color=e.color,v.classes=e.classes,v.priority=e.priority,v.from=t(e.from),v.to=t(e.to),v.est=void 0!==e.est?t(e.est):void 0,v.lct=void 0!==e.lct?t(e.lct):void 0,v.data=e.data,v.isMilestone=e.isMilestone},v.clone=function(){return new n(v.id,v.row,v.name,v.color,v.classes,v.priority,v.from,v.to,v.data,v.est,v.lct,v.progress)}};return n}]),gantt.factory("GanttTaskProgress",[function(){var t=function(e,n,a,o){var r=this;r.task=e,r.percent=n,r.color=a,r.classes=o,r.clone=function(){return new t(r.task,r.percent,r.color,r.classes)}};return t}]),gantt.factory("GanttBody",[function(){var t=function(t){this.$element=t,this.getWidth=function(){return this.$element.width()}};return t}]),gantt.factory("GanttBodyColumns",[function(){var t=function(t){this.$element=t,this.getWidth=function(){return this.$element.width()}};return t}]),gantt.factory("GanttBodyRows",[function(){var t=function(t){this.$element=t,this.getWidth=function(){return this.$element.width()}};return t}]),gantt.factory("GanttHeader",[function(){var t=function(t){this.$element=t,this.getWidth=function(){return this.$element.width()},this.getHeight=function(){return this.$element[0].offsetHeight}};return t}]),gantt.factory("GanttHeaderColumns",[function(){var t=function(t){this.$element=t,this.getWidth=function(){return this.$element.width()}};return t}]),gantt.factory("GanttLabels",[function(){var t=function(t){this.$element=t,this.getWidth=function(){return this.$element.width()}};return t}]),gantt.factory("GanttTimespan",["moment",function(t){var e=function(n,a,o,r,i,s,l,d,c,u,m){var f=this;f.id=n,f.gantt=a,f.name=o,f.color=r,f.classes=i,f.priority=s,f.from=t(l),f.to=t(d),f.data=c,void 0!==u&&void 0!==m&&(f.est=t(u),f.lct=t(m)),f.hasBounds=function(){return void 0!==f.bounds},f.updatePosAndSize=function(){f.left=f.gantt.getPositionByDate(f.from),f.width=f.gantt.getPositionByDate(f.to)-f.left,void 0!==f.est&&void 0!==f.lct&&(f.bounds={},f.bounds.left=f.gantt.getPositionByDate(f.est),f.bounds.width=f.gantt.getPositionByDate(f.lct)-f.bounds.left)},f.setFrom=function(t){f.from=f.gantt.getDateByPosition(t),f.updatePosAndSize()},f.setTo=function(t){f.to=f.gantt.getDateByPosition(t),f.updatePosAndSize()
},f.moveTo=function(t){f.from=f.gantt.getDateByPosition(t),f.to=f.gantt.getDateByPosition(t+f.width),f.updatePosAndSize()},f.copy=function(e){f.name=e.name,f.color=e.color,f.classes=e.classes,f.priority=e.priority,f.from=t(e.from),f.to=t(e.to),f.est=void 0!==e.est?t(e.est):void 0,f.lct=void 0!==e.lct?t(e.lct):void 0,f.data=e.data},f.clone=function(){return new e(f.id,f.gantt,f.name,f.color,f.classes,f.priority,f.from,f.to,f.data,f.est,f.lct)}};return e}]),gantt.service("ganttBinarySearch",[function(){return{getIndicesOnly:function(t,e,n){for(var a=-1,o=t.length;o-a>1;){var r=Math.floor((a+o)/2);n(t[r])<=e?a=r:o=r}return void 0!==t[a]&&n(t[a])===e&&(o=a),[a,o]},get:function(t,e,n){var a=this.getIndicesOnly(t,e,n);return[t[a[0]],t[a[1]]]}}}]),gantt.filter("ganttColumnLimit",["ganttBinarySearch",function(t){return function(e,n,a){var o=function(t){return t.left},r=t.getIndicesOnly(e,n,o)[0],i=t.getIndicesOnly(e,n+a,o)[1];return e.slice(r,i)}}]),gantt.directive("ganttLimitUpdater",["$timeout","ganttDebounce",function(t,e){return{restrict:"A",controller:["$scope","$element",function(t,n){var a=n[0],o=function(){t.scrollLeft=a.scrollLeft,t.scrollWidth=a.offsetWidth};n.bind("scroll",e(function(){o()},5)),t.$watch("gantt.width",e(function(){o()},20))}]}}]),gantt.filter("ganttTaskLimit",[function(){return function(t,e){for(var n=[],a=0,o=t.length;o>a;a++){var r=t[a];if(r.isMoving)n.push(r);else if(r.to>e.getFirstColumn().date&&r.from<e.getLastColumn().endDate){var i=e.$scope.scrollLeft,s=e.$scope.scrollWidth;(r.left>=i&&r.left<=i+s||r.left+r.width>=i&&r.left+r.width<=i+s||r.left<i&&r.left+r.width>i+s)&&n.push(r)}}return n}}]),gantt.directive("ganttLabelsResize",["$document","ganttDebounce","ganttMouseOffset","GANTT_EVENTS",function(t,e,n,a){return{restrict:"A",scope:{enabled:"=ganttLabelsResize",width:"=ganttLabelsResizeWidth",minWidth:"=ganttLabelsResizeMinWidth"},controller:["$scope","$element",function(o,r){var i,s=5,l="ew-resize";r.bind("mousedown",function(t){o.enabled&&c(t)&&(u(t),t.preventDefault())}),r.bind("mousemove",function(t){o.enabled&&(c(t)?r.css("cursor",l):r.css("cursor",""))});var d=function(t){0===o.width&&(o.width=r[0].offsetWidth),o.width+=t-i,o.width<o.minWidth&&(o.width=o.minWidth),i=t},c=function(t){var e=n.getOffset(t).x;return e>r[0].offsetWidth-s},u=function(n){i=n.screenX,angular.element(t[0].body).css({"-moz-user-select":"-moz-none","-webkit-user-select":"none","-ms-user-select":"none","user-select":"none",cursor:l});var a=e(function(t){d(t.screenX)},5);angular.element(t[0].body).bind("mousemove",a),angular.element(t[0].body).one("mouseup",function(){angular.element(t[0].body).unbind("mousemove",a),m()})},m=function(){r.css("cursor",""),angular.element(t[0].body).css({"-moz-user-select":"","-webkit-user-select":"","-ms-user-select":"","user-select":"",cursor:""}),o.$emit(a.ROW_LABELS_RESIZED,{width:o.width})}}]}}]),gantt.directive("ganttRightClick",["$parse",function(t){return{restrict:"A",compile:function(e,n){var a=t(n.ganttRightClick);return function(t,e){e.on("contextmenu",function(e){t.$apply(function(){a(t,{$event:e})})})}}}}]),gantt.directive("ganttRow",["GanttEvents","GANTT_EVENTS",function(t,e){return{restrict:"E",require:"^ganttBody",transclude:!0,replace:!0,templateUrl:function(t,e){return void 0===e.templateUrl?"template/default.row.tmpl.html":e.templateUrl},controller:["$scope","$element",function(n,a){n.row.$element=a,a.bind("mousedown",function(o){n.$emit(e.ROW_MOUSEDOWN,t.buildRowEventData(o,a,n.row,n.gantt))}),a.bind("mouseup",function(o){n.$emit(e.ROW_MOUSEUP,t.buildRowEventData(o,a,n.row,n.gantt))}),a.bind("click",function(o){n.$emit(e.ROW_CLICKED,t.buildRowEventData(o,a,n.row,n.gantt))}),a.bind("dblclick",function(o){n.$emit(e.ROW_DBL_CLICKED,t.buildRowEventData(o,a,n.row,n.gantt))}),a.bind("contextmenu",function(o){n.$emit(e.ROW_CONTEXTMENU,t.buildRowEventData(o,a,n.row,n.gantt))})}]}}]),gantt.directive("ganttRowHeader",["GanttEvents","GANTT_EVENTS",function(t,e){return{restrict:"E",transclude:!0,replace:!0,templateUrl:function(t,e){return void 0===e.templateUrl?"template/default.rowHeader.tmpl.html":e.templateUrl},controller:["$scope","$element",function(t,n){n.bind("mousedown",function(n){t.$emit(e.ROW_HEADER_MOUSEDOWN,{evt:n})}),n.bind("mouseup",function(n){t.$emit(e.ROW_HEADER_MOUSEUP,{evt:n})}),n.bind("click",function(n){t.$emit(e.ROW_HEADER_CLICKED,{evt:n})}),n.bind("dblclick",function(n){t.$emit(e.ROW_HEADER_DBL_CLICKED,{evt:n})}),n.bind("contextmenu",function(n){t.$emit(e.ROW_HEADER_CONTEXTMENU,{evt:n})})}]}}]),gantt.directive("ganttRowLabel",["GanttEvents","GANTT_EVENTS",function(t,e){return{restrict:"E",transclude:!0,replace:!0,templateUrl:function(t,e){return void 0===e.templateUrl?"template/default.rowLabel.tmpl.html":e.templateUrl},controller:["$scope","$element",function(n,a){a.bind("mousedown",function(o){n.$emit(e.ROW_LABEL_MOUSEDOWN,t.buildRowEventData(o,a,n.row,n.gantt))}),a.bind("mouseup",function(o){n.$emit(e.ROW_LABEL_MOUSEUP,t.buildRowEventData(o,a,n.row,n.gantt))}),a.bind("click",function(o){n.$emit(e.ROW_LABEL_CLICKED,t.buildRowEventData(o,a,n.row,n.gantt))}),a.bind("dblclick",function(o){n.$emit(e.ROW_LABEL_DBL_CLICKED,t.buildRowEventData(o,a,n.row,n.gantt))}),a.bind("contextmenu",function(o){n.$emit(e.ROW_LABEL_CONTEXTMENU,t.buildRowEventData(o,a,n.row,n.gantt))})}]}}]),gantt.directive("ganttHorizontalScrollReceiver",function(){return{restrict:"A",require:"^ganttScrollManager",controller:["$scope","$element",function(t,e){t.scrollManager.horizontal.push(e[0])}]}}),gantt.directive("ganttScrollManager",function(){return{restrict:"A",require:"^gantt",controller:["$scope",function(t){t.scrollManager={horizontal:[],vertical:[]}}]}}),gantt.directive("ganttScrollSender",["$timeout","ganttDebounce","GANTT_EVENTS",function(t,e,n){return{restrict:"A",require:"^ganttScrollManager",controller:["$scope","$element",function(a,o){var r=o[0],i=function(){var t,e;for(t=0,e=a.scrollManager.vertical.length;e>t;t++){var n=a.scrollManager.vertical[t];n.style.top!==-r.scrollTop&&(n.style.top=-r.scrollTop+"px",n.style.height=r.scrollHeight+"px")}for(t=0,e=a.scrollManager.horizontal.length;e>t;t++){var o=a.scrollManager.horizontal[t];o.style.left!==-r.scrollLeft&&(o.style.left=-r.scrollLeft+"px",o.style.width=r.scrollWidth+"px")}};o.bind("scroll",i),a.$on(n.ROW_ADDED,e(function(){i()},5)),a.$watch("gantt.width",function(e){0===e&&t(function(){i()},0,!0)})}]}}]),gantt.directive("ganttScrollable",["GanttScrollable","ganttDebounce","ganttLayout","GANTT_EVENTS",function(t,e,n,a){return{restrict:"E",transclude:!0,replace:!0,templateUrl:function(t,e){return void 0===e.templateUrl?"template/default.scrollable.tmpl.html":e.templateUrl},controller:["$scope","$element",function(o,r){o.template.scrollable=new t(r);var i,s=n.getScrollBarWidth();r.bind("scroll",e(function(){var t,e,n=r[0];n.scrollLeft<i&&0===n.scrollLeft?(t="left",e=o.gantt.from):n.scrollLeft>i&&n.offsetWidth+n.scrollLeft>=n.scrollWidth-1&&(t="right",e=o.gantt.to),i=n.scrollLeft,void 0!==e?(o.autoExpandColumns(n,e,t),o.$emit(a.SCROLL,{left:n.scrollLeft,date:e,direction:t})):o.$emit(a.SCROLL,{left:n.scrollLeft})},5)),o.$watch("gantt.columns.length",function(t,e){!angular.equals(t,e)&&t>0&&void 0!==o.gantt.scrollAnchor&&o.$$postDigest(function(){o.scrollToDate(o.gantt.scrollAnchor)})}),o.getScrollableCss=function(){var t={};return o.ganttElementWidth-(o.showLabelsColumn?o.labelsWidth:0)>o.gantt.width+s&&(t.width=o.gantt.width+s+"px"),o.maxHeight>0?(t["max-height"]=o.maxHeight-o.template.header.getHeight()+"px",t["overflow-y"]="auto"):t["overflow-y"]="hidden",t}}]}}]),gantt.directive("ganttVerticalScrollReceiver",function(){return{restrict:"A",require:"^ganttScrollManager",controller:["$scope","$element",function(t,e){t.scrollManager.vertical.push(e[0])}]}}),gantt.directive("ganttElementWidthListener",[function(){return{restrict:"A",controller:["$scope","$element","$attrs",function(t,e,n){var a=n.ganttElementWidthListener;""===a&&(a="ganttElementWidth");for(var o=t;0===a.indexOf("$parent.");)a=a.substring("$parent.".length),o=t.$parent;o.$watch(function(){o[a]=e[0].offsetWidth})}]}}]),gantt.service("ganttSortManager",[function(){return{startRow:void 0}}]),gantt.directive("ganttSortable",["$document","ganttSortManager",function(t,e){return{restrict:"E",template:"<div ng-transclude></div>",replace:!0,transclude:!0,scope:{row:"=ngModel",swap:"&",active:"=?"},controller:["$scope","$element",function(n,a){a.bind("mousedown",function(){if(n.active===!0){r();var e=function(){n.$apply(function(){angular.element(t[0].body).unbind("mouseup",e),i()})};angular.element(t[0].body).bind("mouseup",e)}}),a.bind("mousemove",function(a){if(o()){var r=angular.element(t[0].elementFromPoint(a.clientX,a.clientY)),i=r.controller("ngModel").$modelValue;i.id!==e.startRow.id&&n.$apply(function(){n.swap({a:i,b:e.startRow})})}});var o=function(){return void 0!==e.startRow&&!angular.equals(n.row,e.startRow)},r=function(){e.startRow=n.row,a.css("cursor","move"),angular.element(t[0].body).css({"-moz-user-select":"-moz-none","-webkit-user-select":"none","-ms-user-select":"none","user-select":"none",cursor:"no-drop"})},i=function(){e.startRow=void 0,a.css("cursor","pointer"),angular.element(t[0].body).css({"-moz-user-select":"","-webkit-user-select":"","-ms-user-select":"","user-select":"",cursor:"auto"})}}]}}]),gantt.directive("ganttBounds",[function(){return{restrict:"E",templateUrl:function(t,e){return void 0===e.templateUrl?"template/default.bounds.tmpl.html":e.templateUrl},replace:!0,scope:{task:"=ngModel"},controller:["$scope",function(t){var e={};t.task.hasBounds()||(t.visible=!1),t.getCss=function(){return t.task.hasBounds()&&(e.width=t.task.bounds.width+"px",e.left=t.task.isMilestone===!0||0===t.task.width?t.task.bounds.left-(t.task.left-.3)+"px":t.task.bounds.left-t.task.left+"px"),e},t.getClass=function(){return void 0===t.task.est||void 0===t.task.lct?"gantt-task-bounds-in":t.task.est>t.task.from?"gantt-task-bounds-out":t.task.lct<t.task.to?"gantt-task-bounds-out":"gantt-task-bounds-in"},t.$watch("task.isMouseOver",function(){t.task.hasBounds()&&!t.task.isMoving&&(t.visible=!(void 0===t.task.isMouseOver||t.task.isMouseOver===!1))}),t.$watch("task.isMoving",function(e){t.task.hasBounds()&&(t.visible=e===!0)})}]}}]),gantt.directive("ganttTaskProgress",[function(){return{restrict:"E",templateUrl:function(t,e){return void 0===e.templateUrl?"template/default.taskProgress.tmpl.html":e.templateUrl},replace:!0,scope:{progress:"="},controller:["$scope",function(t){t.getCss=function(){var e={};return e["background-color"]=t.progress.color?t.progress.color:"#6BC443",e.width=t.progress.percent+"%",e}}]}}]),gantt.directive("ganttTask",["$window","$document","$timeout","$filter","ganttSmartEvent","ganttDebounce","ganttMouseOffset","ganttMouseButton","GanttEvents","GANTT_EVENTS",function(t,e,n,a,o,r,i,s,l,d){return{restrict:"E",require:"^ganttRow",templateUrl:function(t,e){return void 0===e.templateUrl?"template/default.task.tmpl.html":e.templateUrl},replace:!0,controller:["$scope","$element",function(a,c){var u,m,f,g=5,v=3,p=15,h=5,w=angular.element(t),k=a.row.$element,b=a.template.body.$element,E=a.template.scrollable.$element,y=!1;c.bind("mousedown",function(t){a.$apply(function(){var e=$(t);if(""!==e&&1===s.getButton(t)){var n=i.getOffsetForElement(b[0],t).x;L(e,n,t)}})}),c.bind("click",function(t){a.$apply(function(){y||a.$emit(d.TASK_CLICKED,l.buildTaskEventData(t,c,a.task,a.gantt)),t.stopPropagation()})}),c.bind("dblclick",function(t){a.$apply(function(){y||a.$emit(d.TASK_DBL_CLICKED,l.buildTaskEventData(t,c,a.task,a.gantt)),t.stopPropagation()})}),c.bind("contextmenu",function(t){a.$apply(function(){y||a.$emit(d.TASK_CONTEXTMENU,l.buildTaskEventData(t,c,a.task,a.gantt)),t.stopPropagation()})}),c.bind("mousemove",r(function(t){var e=$(t);""===e||!a.task.isMoving&&"M"===e?c.css("cursor",""):c.css("cursor",O(e)),a.task.mouseX=t.clientX},5)),c.bind("mouseenter",function(t){a.$apply(function(){a.task.mouseX=t.clientX,a.task.isMouseOver=!0})}),c.bind("mouseleave",function(){a.$apply(function(){a.task.isMouseOver=!1})});var D=function(t,e){a.task.isMoving!==!1&&(T(t,e),M(t,e))},T=function(t,e){var n=i.getOffsetForElement(b[0],e);a.task.mouseOffsetX=n.x;var o=n.x;if("M"===t){if(a.allowTaskRowSwitching){var r=C(n.y);void 0!==r&&a.task.row.id!==r.id&&r.moveTaskToRow(a.task)}a.allowTaskMoving&&(o-=u,"truncate"!==a.taskOutOfRange&&(0>o?o=0:o+a.task.width>=a.gantt.width&&(o=a.gantt.width-a.task.width)),a.task.moveTo(o),a.$emit(d.TASK_MOVE,l.buildTaskEventData(e,c,a.task,a.gantt)))}else"E"===t?("truncate"!==a.taskOutOfRange&&(o<a.task.left?o=a.task.left:o>a.gantt.width&&(o=a.gantt.width)),a.task.setTo(o),a.$emit(d.TASK_RESIZE,l.buildTaskEventData(e,c,a.task,a.gantt))):("truncate"!==a.taskOutOfRange&&(o>a.task.left+a.task.width?o=a.task.left+a.task.width:0>o&&(o=0)),a.task.setFrom(o),a.$emit(d.TASK_RESIZE,l.buildTaskEventData(e,c,a.task,a.gantt)));y=!0},M=function(t,e){var o=i.getOffsetForElement(b[0],e),r=E[0].scrollLeft,s=!1;if(o.x<m)o.x<=r+h&&(o.x-=p,s=!0,a.scrollToLeft(p));else{var l=E[0].offsetWidth,d=r+l;o.x>=d-h&&(o.x+=p,s=!0,a.scrollToRight(p))}s&&(f=n(function(){D(t,e)},100,!0))},R=function(){void 0!==f&&(n.cancel(f),f=void 0)},C=function(t){if(t>=k[0].offsetTop&&t<=k[0].offsetTop+k[0].offsetHeight)return a.task.row;var e=[];angular.forEach(a.task.row.gantt.rows,function(t){t.hidden||e.push(t)});var n=b[0].offsetHeight/e.length,o=Math.floor(t/n);return e[o]},$=function(t){var e=i.getOffset(t).x,n=0;return a.allowTaskResizing&&(n=c[0].offsetWidth<10?v:g),a.allowTaskResizing&&e>c[0].offsetWidth-n?"E":a.allowTaskResizing&&n>e?"W":(a.allowTaskMoving||a.allowTaskRowSwitching)&&e>=n&&e<=c[0].offsetWidth-n?"M":""},O=function(t){switch(t){case"E":return"e-resize";case"W":return"w-resize";case"M":return"move"}},L=function(t,n,i){a.task.isMoving||("M"===t?a.$emit(d.TASK_MOVE_BEGIN,l.buildTaskEventData(i,c,a.task,a.gantt)):a.$emit(d.TASK_RESIZE_BEGIN,l.buildTaskEventData(i,c,a.task,a.gantt))),y=!1,a.task.moveMode=t,a.task.isMoving=!0,m=n,u=n-a.task.modelLeft;var s=r(function(e){a.task.isMoving&&(R(),D(t,e))},5);o(a,w,"mousemove",s).bind(),o(a,w,"mouseup",function(t){a.$apply(function(){w.unbind("mousemove",s),S(t)})}).bindOnce(),c.css("cursor",O(t)),angular.element(e[0].body).css({"-moz-user-select":"-moz-none","-webkit-user-select":"none","-ms-user-select":"none","user-select":"none",cursor:O(t)})},S=function(t){a.task.isMoving=!1,R(),c.css("cursor",""),angular.element(e[0].body).css({"-moz-user-select":"","-webkit-user-select":"","-ms-user-select":"","user-select":"",cursor:""}),"M"===a.task.moveMode?a.$emit(d.TASK_MOVE_END,l.buildTaskEventData(t,c,a.task,a.gantt)):a.$emit(d.TASK_RESIZE_END,l.buildTaskEventData(t,c,a.task,a.gantt)),a.task.moveMode=void 0,y===!0&&(y=!1,a.task.row.sortTasks(),a.$emit(d.TASK_CHANGED,l.buildTaskEventData(t,c,a.task,a.gantt)))};a.task.isCreating?(delete a.task.isCreating,L("E",a.task.mouseOffsetX)):a.task.isMoving&&L("M",a.task.mouseOffsetX)}]}}]),gantt.directive("ganttTooltip",["$timeout","$document","ganttDebounce","ganttSmartEvent",function(t,e,n,a){return{restrict:"E",templateUrl:function(t,e){return void 0===e.templateUrl?"template/default.tooltip.tmpl.html":e.templateUrl},replace:!0,controller:["$scope","$element",function(o,r){var i=angular.element(e[0].body),s=r.parent();o.visible=!1,o.css={},o.$watch("task.isMouseOver",function(t){t===!0?c(o.task.mouseX):t===!1&&o.task.isMoving===!1&&m()});var l=a(o,i,"mousemove",n(function(t){o.visible===!0?u(t.clientX):c(t.clientX)},5,!1));o.$watch("task.isMoving",function(t){t===!0?l.bind():t===!1&&(l.unbind(),m())});var d=function(){var t=e[0];return t.documentElement.clientWidth||t.documentElement.getElementById("body")[0].clientWidth},c=function(e){o.visible=!0,t(function(){u(e),o.css.top=s[0].getBoundingClientRect().top+"px",o.css.marginTop=-r[0].offsetHeight-8+"px",o.css.opacity=1},0,!0)},u=function(t){r.removeClass("gantt-task-infoArrow"),r.removeClass("gantt-task-infoArrowR"),t+r[0].offsetWidth>d()?(o.css.left=t+20-r[0].offsetWidth+"px",r.addClass("gantt-task-infoArrowR")):(o.css.left=t-20+"px",r.addClass("gantt-task-infoArrow"))},m=function(){o.css.opacity=0,o.visible=!1}}]}}]),gantt.directive("ganttBody",[function(){return{restrict:"E",require:"^gantt",transclude:!0,replace:!0,templateUrl:function(t,e){return void 0===e.templateUrl?"template/default.body.tmpl.html":e.templateUrl},controller:["$scope","$element","GanttBody",function(t,e,n){t.template.body=new n(e)}]}}]),gantt.directive("ganttBodyColumns",[function(){return{restrict:"E",require:"^ganttBody",transclude:!0,replace:!0,templateUrl:function(t,e){return void 0===e.templateUrl?"template/default.bodyColumns.tmpl.html":e.templateUrl},controller:["$scope","$element","GanttBodyColumns",function(t,e,n){t.template.body.columns=new n(e)}]}}]),gantt.directive("ganttBodyRows",[function(){return{restrict:"E",require:"^ganttBody",transclude:!0,replace:!0,templateUrl:function(t,e){return void 0===e.templateUrl?"template/default.bodyRows.tmpl.html":e.templateUrl},controller:["$scope","$element","GanttBodyRows",function(t,e,n){t.template.body.rows=new n(e)}]}}]),gantt.directive("ganttColumn",[function(){return{restrict:"E",require:"^ganttBodyColumns",transclude:!0,replace:!0,templateUrl:function(t,e){return void 0===e.templateUrl?"template/default.column.tmpl.html":e.templateUrl},controller:["$scope","$element",function(t,e){t.column.$element=e}]}}]),gantt.directive("ganttColumnHeader",["GanttEvents","GANTT_EVENTS",function(t,e){return{restrict:"E",transclude:!0,replace:!0,templateUrl:function(t,e){return void 0===e.templateUrl?"template/default.columnHeader.tmpl.html":e.templateUrl},controller:["$scope","$element",function(n,a){a.bind("click",function(o){n.$emit(e.COLUMN_CLICKED,t.buildColumnEventData(o,a,n.column))}),a.bind("dblclick",function(o){n.$emit(e.COLUMN_DBL_CLICKED,t.buildColumnEventData(o,a,n.column))}),a.bind("contextmenu",function(o){n.$emit(e.COLUMN_CONTEXTMENU,t.buildColumnEventData(o,a,n.column))})}]}}]),gantt.directive("ganttHeader",[function(){return{restrict:"E",require:"^gantt",transclude:!0,replace:!0,templateUrl:function(t,e){return void 0===e.templateUrl?"template/default.header.tmpl.html":e.templateUrl},controller:["$scope","$element","GanttHeader",function(t,e,n){t.template.header=new n(e),t.getHeaderCss=function(){var e={};return t.ganttElementWidth-(t.showLabelsColumn?t.labelsWidth:0)>t.gantt.width&&(e.width=t.gantt.width+"px"),e}}]}}]),gantt.directive("ganttHeaderColumns",[function(){return{restrict:"E",require:"^ganttHeader",transclude:!0,replace:!0,templateUrl:function(t,e){return void 0===e.templateUrl?"template/default.headerColumns.tmpl.html":e.templateUrl},controller:["$scope","$element","GanttHeaderColumns",function(t,e,n){t.template.header.columns=new n(e)}]}}]),gantt.directive("ganttLabels",[function(){return{restrict:"E",require:"^gantt",transclude:!0,replace:!0,templateUrl:function(t,e){return void 0===e.templateUrl?"template/default.labels.tmpl.html":e.templateUrl},controller:["$scope","$element","GanttLabels",function(t,e,n){t.template.labels=new n(e)}]}}]),gantt.directive("ganttTimeFrame",[function(){return{restrict:"E",require:"^ganttColumn",transclude:!0,replace:!0,templateUrl:function(t,e){return void 0===e.templateUrl?"template/default.timeFrame.tmpl.html":e.templateUrl},controller:["$scope","$element",function(t,e){t.timeFrame.$element=e}]}}]),gantt.factory("ganttDebounce",["$timeout",function(t){function e(e,n,a){var o=0;return function(){var r=this,i=arguments;o++;var s=function(t){return function(){return t===o?e.apply(r,i):void 0}}(o);return t(s,n,void 0===a?!0:a)}}return e}]),gantt.service("ganttEnableNgAnimate",["$injector",function(t){var e;try{e=t.get("$animate")}catch(n){}return void 0!==e?function(t,n){e.enabled(!1,n)}:function(){}}]),gantt.service("ganttLayout",["$document",function(t){return{getScrollBarWidth:function(){var e=t[0].createElement("p");e.style.width="100%",e.style.height="200px";var n=t[0].createElement("div");n.style.position="absolute",n.style.top="0px",n.style.left="0px",n.style.visibility="hidden",n.style.width="200px",n.style.height="150px",n.style.overflow="hidden",n.appendChild(e),t[0].body.appendChild(n);var a=e.offsetWidth;n.style.overflow="scroll";var o=e.offsetWidth;return a===o&&(o=n.clientWidth),t[0].body.removeChild(n),a-o}}}]),gantt.service("ganttMouseButton",[function(){return{getButton:function(t){return t=t||window.event,t.which?t.which:t.button<2?1:4===t.button?2:3}}}]),gantt.service("ganttMouseOffset",[function(){return{getOffset:function(t){return t.offsetX&&t.offsetY?{x:t.offsetX,y:t.offsetY}:t.layerX&&t.layerY?{x:t.layerX,y:t.layerY}:this.getOffsetForElement(t.target,t)},getOffsetForElement:function(t,e){var n=t.getBoundingClientRect();return{x:e.clientX-n.left,y:e.clientY-n.top}}}}]),gantt.factory("ganttSmartEvent",[function(){function t(t,e,n,a){return t.$on("$destroy",function(){e.unbind(n,a)}),{bindOnce:function(){e.one(n,a)},bind:function(){e.bind(n,a)},unbind:function(){e.unbind(n,a)}}}return t}]),angular.module("ganttTemplates",[]).run(["$templateCache",function(t){t.put("template/default.gantt.tmpl.html",'<div class="gantt unselectable" gantt-scroll-manager gantt-element-width-listener>\n    <gantt-labels>\n        <div class="gantt-labels-header">\n            <gantt-row-header></gantt-row-header>\n        </div>\n        <div class="gantt-labels-body"\n             ng-style="(maxHeight > 0 && {\'max-height\': (maxHeight-template.header.getHeight())+\'px\'} || {})"\n             ng-show="gantt.columns.length > 0">\n            <div gantt-vertical-scroll-receiver style="position: relative">\n                <gantt-row-label ng-repeat="row in gantt.visibleRows track by $index">\n                    <gantt-sortable swap="swapRows(a,b)" active="allowRowSorting" ng-model="row">\n                        <span>{{ row.name }}</span>\n                    </gantt-sortable>\n                </gantt-row-label>\n            </div>\n        </div>\n    </gantt-labels>\n    <gantt-header>\n        <gantt-header-columns>\n            <div ng-repeat="header in gantt.visibleHeaders">\n                <div class="gantt-header-row gantt-header-row-bottom">\n                    <gantt-column-header ng-repeat="column in header track by $index">\n                        {{ column.label }}\n                    </gantt-column-header>\n                </div>\n            </div>\n        </gantt-header-columns>\n    </gantt-header>\n    <gantt-scrollable>\n        <gantt-body>\n            <div class="gantt-body-background">\n                <div class="gantt-row-height"\n                     ng-class-odd="\'gantt-background-row\'"\n                     ng-class-even="\'gantt-background-row-alt\'"\n                     ng-repeat="row in gantt.visibleRows track by $index">\n                </div>\n            </div>\n            <div class="gantt-body-foreground">\n                <div class="gantt-current-date-line" ng-if="currentDate === \'line\' && currentDatePosition >= 0 && currentDatePosition <= gantt.width" ng-style="{\'left\': currentDatePosition + \'px\' }"></div>\n            </div>\n            <gantt-body-columns class="gantt-body-columns">\n                <gantt-column ng-repeat="column in gantt.visibleColumns track by $index">\n                    <gantt-time-frame ng-repeat="timeFrame in column.visibleTimeFrames"></gantt-time-frame>\n                </gantt-column>\n            </gantt-body-columns>\n            <gantt-body-rows>\n                <div class="gantt-timespan"\n                     ng-style="{\'left\': ((timespan.left-0.3) || timespan.left)+\'px\', \'width\': timespan.width +\'px\', \'z-index\': (timespan.priority || 0)}"\n                     ng-class="timespan.classes"\n                     ng-repeat="timespan in gantt.timespans">\n                    <gantt-tooltip ng-model="timespan" date-format="\'MMM d\'">\n                        <div class="gantt-task-content"><span>{{ timespan.name }}</span></div>\n                    </gantt-tooltip>\n                </div>\n                <gantt-row ng-repeat="row in gantt.visibleRows track by row.id">\n                    <gantt-task ng-repeat="task in row.visibleTasks track by task.id"></gantt-task>\n                </gantt-row>\n            </gantt-body-rows>\n        </gantt-body>\n    </gantt-scrollable>\n\n\n    <!--\n    ******* Inline templates *******\n    You can specify your own templates by either changing the default ones below or by\n    adding an attribute template-url="<url to your template>" on the specific element.\n    -->\n\n    <!-- Body template -->\n    <script type="text/ng-template" id="template/default.body.tmpl.html">\n        <div ng-transclude class="gantt-body"\n             ng-style="{\'width\': gantt.width +\'px\'}"></div>\n    </script>\n\n    <!-- Header template -->\n    <script type="text/ng-template" id="template/default.header.tmpl.html">\n        <div ng-transclude class="gantt-header"\n             ng-show="gantt.columns.length > 0 && gantt.getActiveHeadersCount() > 0"\n             ng-style="getHeaderCss()"></div>\n    </script>\n\n    <!-- Row label template -->\n    <script type="text/ng-template" id="template/default.rowLabel.tmpl.html">\n        <div ng-transclude class="gantt-labels-row gantt-row-height"\n             ng-class-odd="\'gantt-background-row\'"\n             ng-class-even="\'gantt-background-row-alt\'">\n        </div>\n    </script>\n\n    <!-- Row header template -->\n    <script type="text/ng-template" id="template/default.rowHeader.tmpl.html">\n        <div class="gantt-labels-header-row"\n             ng-show="gantt.columns.length > 0 && gantt.getActiveHeadersCount() > 0"\n             ng-style="{\'margin-top\': ((gantt.getActiveHeadersCount()-1)*2)+\'em\'}">\n            <span>Name</span>\n        </div>\n    </script>\n\n    <!-- Labels template -->\n    <script type="text/ng-template" id="template/default.labels.tmpl.html">\n        <div ng-transclude ng-if="showLabelsColumn" class="gantt-labels"\n             ng-style="(labelsWidth > 0 && {\'width\': labelsWidth+\'px\'} || {})"\n             gantt-labels-resize="$parent.allowLabelsResizing"\n             gantt-labels-resize-width="$parent.labelsWidth"\n             gantt-labels-resize-min-width="50"\n             gantt-element-width-listener="$parent.labelsWidth"></div>\n    </script>\n\n    <!-- Header columns template -->\n    <script type="text/ng-template" id="template/default.headerColumns.tmpl.html">\n        <div ng-transclude class="gantt-header-columns"\n              gantt-horizontal-scroll-receiver></div>\n    </script>\n\n    <script type="text/ng-template" id="template/default.columnHeader.tmpl.html">\n        <div ng-transclude class="gantt-column-header"\n              ng-style="{\'left\': column.left+\'px\', \'width\': column.width+\'px\'}"></div>\n    </script>\n\n    <!-- Body columns template -->\n    <script type="text/ng-template" id="template/default.bodyColumns.tmpl.html">\n        <div ng-transclude class="gantt-body-columns"></div>\n    </script>\n\n    <script type="text/ng-template" id="template/default.column.tmpl.html">\n        <div ng-transclude class="gantt-column"\n             ng-class="(column.currentDate && currentDate === \'column\') && \'gantt-foreground-col-current-date\' || \'gantt-foreground-col\'"\n             ng-style="{\'left\': column.left+\'px\', \'width\': column.width+\'px\'}"></div>\n    </script>\n\n    <script type="text/ng-template" id="template/default.timeFrame.tmpl.html">\n        <div class="gantt-timeframe"\n             ng-class="timeFrame.working && \'gantt-timeframe-working\' || \'gantt-timeframe-non-working\'"\n             ng-style="{\'left\': timeFrame.left + \'px\', \'width\': timeFrame.width + \'px\'}"></div>\n    </script>\n\n    <!-- Scrollable template -->\n    <script type="text/ng-template" id="template/default.scrollable.tmpl.html">\n        <div ng-transclude class="gantt-scrollable" gantt-scroll-sender gantt-limit-updater\n             ng-style="getScrollableCss()"></div>\n    </script>\n\n    <!-- Rows template -->\n    <script type="text/ng-template" id="template/default.bodyRows.tmpl.html">\n        <div ng-transclude class="gantt-body-rows"></div>\n    </script>\n\n    <!-- Task template -->\n    <script type="text/ng-template" id="template/default.task.tmpl.html">\n        <div ng-class="(task.isMilestone === true && [\'gantt-task-milestone\'] || [\'gantt-task\']).concat(task.classes)"\n             ng-style="{\'left\': ((task.isMilestone === true || task.width === 0) && (task.left-0.3) || task.left)+\'px\', \'width\': task.width +\'px\', \'z-index\': (task.isMoving === true && 1  || task.priority || \'\'), \'background-color\': task.color}">\n            <gantt-bounds ng-if="task.bounds !== undefined" ng-model="task"></gantt-bounds>\n            <gantt-tooltip ng-if="showTooltips && (task.isMouseOver || task.isMoving)" ng-model="task"></gantt-tooltip>\n            <div ng-if="task.truncatedLeft" class="gantt-task-truncated-left"><span>&lt;</span></div>\n            <div class="gantt-task-content"><span>{{ (task.isMilestone === true && \'&nbsp;\' || task.name) }}</span></div>\n            <div ng-if="task.truncatedRight" class="gantt-task-truncated-right"><span>&gt;</span></div>\n            <gantt-task-progress ng-if="task.progress !== undefined" progress="task.progress"></gantt-task-progress>\n        </div>\n    </script>\n\n    <!-- Tooltip template -->\n    <script type="text/ng-template" id="template/default.tooltip.tmpl.html">\n        <div class="gantt-task-info" ng-style="css">\n            <div class="gantt-task-info-content">\n                {{ task.name }}</br>\n                <small>\n                    {{\n                    task.isMilestone === true && (task.getFromLabel()) || (task.getFromLabel() + \' - \' + task.getToLabel());\n                    }}\n                </small>\n            </div>\n        </div>\n    </script>\n\n    <!-- Task bounds template -->\n    <script type="text/ng-template" id="template/default.bounds.tmpl.html">\n        <div ng-show=\'visible\' class=\'gantt-task-bounds\'\n             ng-style=\'getCss()\' ng-class=\'getClass()\'></div>\n    </script>\n\n    <!-- Task progress template -->\n    <script type="text/ng-template" id="template/default.taskProgress.tmpl.html">\n        <div class=\'gantt-task-progress\' ng-style="getCss()" ng-class="progress.classes"></div>\n    </script>\n\n    <!-- Row template -->\n    <script type="text/ng-template" id="template/default.row.tmpl.html">\n        <div ng-transclude class="gantt-row gantt-row-height"></div>\n    </script>\n\n</div>\n')}]);