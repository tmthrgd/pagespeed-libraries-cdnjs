angular.module("gantt.bounds.templates",[]).run(["$templateCache",function(t){t.put("plugins/bounds/taskBounds.tmpl.html",'<div ng-cloak class="gantt-task-bounds" ng-style="getCss()" ng-class="getClass()"></div>\n')}]),angular.module("gantt.drawtask.templates",[]).run(["$templateCache",function(){}]),angular.module("gantt.movable.templates",[]).run(["$templateCache",function(){}]),angular.module("gantt.progress.templates",[]).run(["$templateCache",function(t){t.put("plugins/progress/taskProgress.tmpl.html",'<div ng-cloak class="gantt-task-progress" ng-style="getCss()" ng-class="getClasses()"></div>\n')}]),angular.module("gantt.sortable.templates",[]).run(["$templateCache",function(){}]),angular.module("gantt.tooltips.templates",[]).run(["$templateCache",function(t){t.put("plugins/tooltips/tooltip.tmpl.html",'<div ng-cloak class="gantt-task-info">\n    <div class="gantt-task-info-content">\n        {{::task.model.name}}</br>\n        <small>\n            {{::task.isMilestone() === true && (getFromLabel()) || (getFromLabel() + \' - \' + getToLabel());}}\n        </small>\n    </div>\n</div>\n')}]),function(){"use strict";angular.module("gantt.bounds",["gantt","gantt.bounds.templates"]).directive("ganttBounds",["moment","$compile","$document",function(t,e,a){return{restrict:"E",require:"^gantt",scope:{enabled:"=?"},link:function(o,n,s,r){var i=r.gantt.api;if(o.options&&"object"==typeof o.options.bounds)for(var l in o.options.bounds)o[l]=o.options[l];void 0===o.enabled&&(o.enabled=!0),i.directives.on.new(o,function(t,n,r){if("ganttTask"===t){var i=n.$new();i.pluginScope=o;var l=a[0].createElement("div");angular.element(l).attr("data-ng-if","task.model.est && task.model.lct && pluginScope.enabled");var g=a[0].createElement("gantt-task-bounds");void 0!==s.templateUrl&&angular.element(g).attr("data-template-url",s.templateUrl),void 0!==s.template&&angular.element(g).attr("data-template",s.template),angular.element(l).append(g),r.append(e(l)(i))}}),i.tasks.on.clean(o,function(e){void 0===e.est||t.isMoment(e.est)||(e.est=t(e.est)),void 0===e.lct||t.isMoment(e.lct)||(e.lct=t(e.lct))})}}}])}(),function(){"use strict";angular.module("gantt.drawtask",["gantt"]).directive("ganttDrawTask",["ganttMouseOffset","moment",function(t,e){return{restrict:"E",require:"^gantt",scope:{enabled:"=?",taskModelFactory:"=taskFactory"},link:function(a,o,n,s){var r=s.gantt.api;void 0===a.enabled&&(a.enabled=!0),r.directives.on.new(a,function(o,n,s){if("ganttRow"===o){var i=function(o){var s=o.target?o.target:o.srcElement;if(a.enabled&&s.className.indexOf("gantt-row")>-1){var i=r.core.getDateByPosition(t.getOffset(o).x),l=e(i),g=a.taskModelFactory();g.from=i,g.to=l;var d=n.row.addTask(g);d.isResizing=!0,d.updatePosAndSize(),n.row.updateVisibleTasks(),n.row.$scope.$digest()}};s.on("mousedown",i),n.drawTaskHandler=i}}),r.directives.on.destroy(a,function(t,e,a){"ganttRow"===t&&(a.off("mousedown",e.drawTaskHandler),delete e.drawTaskHandler)})}}}])}(),function(){"use strict";angular.module("gantt.movable",["gantt"]).directive("ganttMovable",["ganttMouseButton","ganttMouseOffset","ganttSmartEvent","ganttMovableOptions","ganttUtils","$window","$document","$timeout",function(t,e,a,o,n,s,r,i){return{restrict:"E",require:"^gantt",scope:{enabled:"=?",allowMoving:"=?",allowResizing:"=?",allowRowSwitching:"=?"},link:function(l,g,d,c){var u=c.gantt.api;if(l.options&&"object"==typeof l.options.movable)for(var m in l.options.movable)l[m]=l.options[m];o.initialize(l),u.registerEvent("tasks","move"),u.registerEvent("tasks","moveBegin"),u.registerEvent("tasks","moveEnd"),u.registerEvent("tasks","resize"),u.registerEvent("tasks","resizeBegin"),u.registerEvent("tasks","resizeEnd"),u.registerEvent("tasks","change");var p,f,k="ontouchstart"in s||s.DocumentTouch&&r[0]instanceof s.DocumentTouch,v="touchstart mousedown",w="touchmove mousemove",b="touchend mouseup",M=5,h=3,$=15,y=5;u.directives.on.new(l,function(o,g,d){if("ganttTask"===o){var u,m=angular.element(s),E=g.row.rowsManager.gantt.body.$element,C=g.row.rowsManager.gantt.scroll.$element,T=!1;d.on(v,function(a){a.preventDefault(),k&&(a=e.getTouch(a));var o=n.firstProperty([g.task.model.movable,g.task.row.model.movable],"enabled",l.enabled);if(o){var s=e.getOffset(a).x,r=B(s);if(""!==r&&1===t.getButton(a)){var i=e.getOffsetForElement(E[0],a).x;x(r,i)}g.$digest()}}),d.on("mousemove",function(t){var a=n.firstProperty([g.task.model.movable,g.task.row.model.movable],"enabled",l.enabled);if(a){var o=e.getOffset(t).x,s=B(o);""===s||!g.task.isMoving&&"M"===s?d.css("cursor",""):d.css("cursor",O(s))}});var R=function(t,e){z(t,e),S(t,e)},z=function(t,a){var o=e.getOffsetForElement(E[0],a),s=o.x;if(g.task.mouseOffsetX=s,"M"===t){var r=n.firstProperty([g.task.model.movable,g.task.row.model.movable],"allowRowSwitching",l.allowRowSwitching);if(r){for(var i,d=C[0].getBoundingClientRect(),u=n.findElementFromPoint(d.left,a.clientY,function(t){return angular.element(t).hasClass("gantt-row")}),m=c.gantt.rowsManager.rows,f=0,k=m.length;k>f;f++)if(u===m[f].$element[0]){i=m[f];break}var v=g.task.row;void 0!==i&&v!==i&&(i.moveTaskToRow(g.task,!0),v.$scope.$digest(),i.$scope.$digest())}var w=n.firstProperty([g.task.model.movable,g.task.row.model.movable],"allowMoving",l.allowMoving);w&&(s-=p,"truncate"!==g.taskOutOfRange&&(0>s?s=0:s+g.task.width>=g.gantt.width&&(s=g.gantt.width-g.task.width)),g.task.moveTo(s),g.$digest(),g.row.rowsManager.gantt.api.tasks.raise.move(g.task))}else"E"===t?("truncate"!==g.taskOutOfRange&&(s<g.task.left?s=g.task.left:s>g.gantt.width&&(s=g.gantt.width)),g.task.setTo(s),g.$digest(),g.row.rowsManager.gantt.api.tasks.raise.resize(g.task)):("truncate"!==g.taskOutOfRange&&(s>g.task.left+g.task.width?s=g.task.left+g.task.width:0>s&&(s=0)),g.task.setFrom(s),g.$digest(),g.row.rowsManager.gantt.api.tasks.raise.resize(g.task));T=!0},S=function(t,a){var o=e.getOffsetForElement(E[0],a),n=C[0].scrollLeft,s=C[0].offsetWidth,r=C[0].scrollWidth,l=n+s,d=!1;o.x<f?n>0&&o.x<=n+y&&(o.x-=$,d=!0,g.row.rowsManager.gantt.api.scroll.left($)):r>l&&o.x>=l-y&&(o.x+=$,d=!0,g.row.rowsManager.gantt.api.scroll.right($)),d&&(u=i(function(){R(t,a)},100,!0))},P=function(){void 0!==u&&(i.cancel(u),u=void 0)},B=function(t){var e=0,a=n.firstProperty([g.task.model.movable,g.task.row.model.movable],"allowResizing",l.allowResizing),o=n.firstProperty([g.task.model.movable,g.task.row.model.movable],"allowRowSwitching",l.allowRowSwitching),s=n.firstProperty([g.task.model.movable,g.task.row.model.movable],"allowMoving",l.allowMoving);return a&&(e=d[0].offsetWidth<10?h:M),a&&t>d[0].offsetWidth-e?"E":a&&e>t?"W":(s||o)&&t>=e&&t<=d[0].offsetWidth-e?"M":""},O=function(t){switch(t){case"E":return"e-resize";case"W":return"w-resize";case"M":return"move"}},x=function(t,o){void 0===g.task.originalModel&&(g.task.originalRow=g.task.row,g.task.originalModel=g.task.model,g.task.model=angular.copy(g.task.originalModel)),"M"===t?(d.addClass("gantt-task-moving"),g.task.isMoving||g.row.rowsManager.gantt.api.tasks.raise.moveBegin(g.task)):(d.addClass("gantt-task-resizing"),g.task.isMoving||g.row.rowsManager.gantt.api.tasks.raise.resizeBegin(g.task)),g.task.isMoving||(f=o,p=o-g.task.modelLeft),T=!1,g.task.moveMode=t,g.task.isMoving=!0,g.task.active=!0;var n=function(a){a.stopImmediatePropagation(),k&&(a=e.getTouch(a)),g.task.isMoving&&(P(),R(t,a))},s=a(g,m,w,n);s.bind(),a(g,m,b,function(t){k&&(t=e.getTouch(t)),s.unbind(),F(t),g.$digest()}).bindOnce(),d.css("cursor",O(t)),angular.element(r[0].body).css({"-moz-user-select":"-moz-none","-webkit-user-select":"none","-ms-user-select":"none","user-select":"none",cursor:O(t)})},F=function(){if(d.removeClass("gantt-task-moving"),d.removeClass("gantt-task-resizing"),void 0!==g.task.originalModel){if(angular.extend(g.task.originalModel,g.task.model),g.task.model=g.task.originalModel,g.task.row.model.id!==g.task.originalRow.model.id){var t=g.task.row;t.removeTask(g.task.model.id,!1,!0),g.task.row=g.task.originalRow,t.moveTaskToRow(g.task,!1)}delete g.task.originalModel,delete g.task.originalRow,g.$apply()}g.task.isMoving=!1,g.task.active=!1,P(),d.css("cursor",""),angular.element(r[0].body).css({"-moz-user-select":"","-webkit-user-select":"","-ms-user-select":"","user-select":"",cursor:""}),"M"===g.task.moveMode?g.row.rowsManager.gantt.api.tasks.raise.moveEnd(g.task):g.row.rowsManager.gantt.api.tasks.raise.resizeEnd(g.task),g.task.moveMode=void 0,T===!0&&(T=!1,g.task.row.sortTasks(),g.row.rowsManager.gantt.api.tasks.raise.change(g.task))};g.task.isResizing?(delete g.task.isResizing,x("E",g.task.mouseOffsetX)):g.task.isMoving&&x("M",g.task.mouseOffsetX)}})}}}])}(),function(){"use strict";angular.module("gantt.progress",["gantt","gantt.progress.templates"]).directive("ganttProgress",["moment","$compile","$document",function(t,e,a){return{restrict:"E",require:"^gantt",scope:{enabled:"=?"},link:function(o,n,s,r){var i=r.gantt.api;if(o.options&&"object"==typeof o.options.progress)for(var l in o.options.progress)o[l]=o.options[l];void 0===o.enabled&&(o.enabled=!0),i.directives.on.new(o,function(t,n,r){if("ganttTask"===t){var i=n.$new();i.pluginScope=o;var l=a[0].createElement("div");angular.element(l).attr("data-ng-if","task.model.progress !== undefined && pluginScope.enabled");var g=a[0].createElement("gantt-task-progress");void 0!==s.templateUrl&&angular.element(g).attr("data-template-url",s.templateUrl),void 0!==s.template&&angular.element(g).attr("data-template",s.template),angular.element(l).append(g),r.append(e(l)(i))}}),i.tasks.on.clean(o,function(e){void 0===e.est||t.isMoment(e.est)||(e.est=t(e.est)),void 0===e.lct||t.isMoment(e.lct)||(e.lct=t(e.lct))})}}}])}(),function(){"use strict";angular.module("gantt.sortable",["gantt","ang-drag-drop"]).directive("ganttSortable",["ganttUtils","$compile",function(t,e){return{restrict:"E",require:"^gantt",scope:{enabled:"=?"},link:function(a,o,n,s){var r=s.gantt.api;if(a.options&&"object"==typeof a.options.sortable)for(var i in a.options.sortable)a[i]=a.options[i];void 0===a.enabled&&(a.enabled=!0),r.directives.on.new(a,function(o,n,s){"ganttRowLabel"===o&&(n.checkDraggable=function(){return t.firstProperty([n.row.model.sortable],"enabled",a.enabled)},n.onDropSuccess=function(){n.$evalAsync()},n.onDrop=function(t,e){var a=n.row.rowsManager.rowsMap[e.id];a!==n&&(n.row.rowsManager.moveRow(a,n.row),n.$evalAsync())},s.attr("ui-draggable","{{checkDraggable()}}"),s.attr("drag-channel","'sortable'"),s.attr("ui-on-drop","onDrop($event, $data)"),s.attr("on-drop-success","onDropSuccess()"),s.attr("drop-channel","'sortable'"),s.attr("drag","row.model"),e(s)(n))})}}}])}(),function(){"use strict";angular.module("gantt.tooltips",["gantt","gantt.tooltips.templates"]).directive("ganttTooltips",["$compile","$document",function(t,e){return{restrict:"E",require:"^gantt",scope:{enabled:"=?",dateFormat:"=?"},link:function(a,o,n,s){var r=s.gantt.api;if(a.options&&"object"==typeof a.options.tooltips)for(var i in a.options.tooltips)a[i]=a.options[i];void 0===a.enabled&&(a.enabled=!0),void 0===a.dateFormat&&(a.dateFormat="MMM DD, HH:mm"),a.api=r,r.directives.on.new(a,function(o,s,r){if("ganttTask"===o){var i=s.$new();i.pluginScope=a;var l=e[0].createElement("div");angular.element(l).attr("data-ng-if","pluginScope.enabled");var g=e[0].createElement("gantt-tooltip");void 0!==n.templateUrl&&angular.element(g).attr("data-template-url",n.templateUrl),void 0!==n.template&&angular.element(g).attr("data-template",n.template),angular.element(l).append(g),r.append(t(l)(i))}})}}}])}(),function(){"use strict";angular.module("gantt.bounds").directive("ganttTaskBounds",["$templateCache","moment",function(t,e){return{restrict:"E",templateUrl:function(e,a){var o;return o=void 0===a.templateUrl?"plugins/bounds/taskBounds.tmpl.html":a.templateUrl,a.template&&t.put(o,a.template),o},replace:!0,scope:!0,controller:["$scope","$element",function(t,a){a.toggleClass("ng-hide",!0),t.simplifyMoment=function(t){return e.isMoment(t)?t.unix():t},t.$watchGroup(["simplifyMoment(task.model.est)","simplifyMoment(task.model.lct)","task.left","task.width"],function(){var e=t.task.rowsManager.gantt.getPositionByDate(t.task.model.est),o=t.task.rowsManager.gantt.getPositionByDate(t.task.model.lct);a.css("left",e-t.task.left+"px"),a.css("width",o-e+"px"),a.toggleClass("gantt-task-bounds-in",!1),a.toggleClass("gantt-task-bounds-out",!1),void 0===t.task.model.est||void 0===t.task.model.lct?a.toggleClass("gantt-task-bounds-in",!0):t.task.model.est>t.task.model.from?a.toggleClass("gantt-task-bounds-out",!0):t.task.model.lct<t.task.model.to?a.toggleClass("gantt-task-bounds-out",!0):a.toggleClass("gantt-task-bounds-in",!0)}),t.task.$element.bind("mouseenter",function(){a.toggleClass("ng-hide",!1)}),t.task.$element.bind("mouseleave",function(){a.toggleClass("ng-hide",!0)}),t.task.rowsManager.gantt.api.directives.raise.new("ganttBounds",t,a),t.$on("$destroy",function(){t.task.rowsManager.gantt.api.directives.raise.destroy("ganttBounds",t,a)})}]}}])}(),function(){"use strict";angular.module("gantt.movable").factory("ganttMovableOptions",[function(){return{initialize:function(t){return t.enabled=void 0!==t.enabled?!!t.enabled:!0,t.allowMoving=void 0!==t.allowMoving?!!t.allowMoving:!0,t.allowResizing=void 0!==t.allowResizing?!!t.allowResizing:!0,t.allowRowSwitching=void 0!==t.allowRowSwitching?!!t.allowRowSwitching:!0,t}}}])}(),function(){"use strict";angular.module("gantt.progress").directive("ganttTaskProgress",["$templateCache",function(t){return{restrict:"E",requires:"^ganttTask",templateUrl:function(e,a){var o;return o=void 0===a.templateUrl?"plugins/progress/taskProgress.tmpl.html":a.templateUrl,void 0!==a.template&&t.put(o,a.template),o},replace:!0,scope:!0,controller:["$scope","$element",function(t,e){t.getClasses=function(){var e=[];return"object"==typeof t.task.model.progress&&(e=t.task.model.progress.classes),e},t.getCss=function(){var e,a={};return void 0!==t.task.model.progress&&(e="object"==typeof t.task.model.progress?t.task.model.progress:{percent:t.task.model.progress}),e&&(a["background-color"]=e.color?e.color:"#6BC443",a.width=e.percent+"%"),a},t.task.rowsManager.gantt.api.directives.raise.new("ganttTaskProgress",t,e),t.$on("$destroy",function(){t.task.rowsManager.gantt.api.directives.raise.destroy("ganttTaskProgress",t,e)})}]}}])}(),function(){"use strict";angular.module("gantt.tooltips").directive("ganttTooltip",["$timeout","$compile","$document","$templateCache","ganttDebounce","ganttSmartEvent",function(t,e,a,o,n,s){return{restrict:"E",templateUrl:function(t,e){var a;return a=void 0===e.templateUrl?"plugins/tooltips/tooltip.tmpl.html":e.templateUrl,void 0!==e.template&&o.put(a,e.template),a},scope:!0,replace:!0,controller:["$scope","$element","ganttUtils",function(e,o,r){var i,l,g=angular.element(a[0].body),d=e.task.$element;o.toggleClass("ng-hide",!0),e.getFromLabel=function(){var t=r.firstProperty([e.task.model.tooltips,e.task.row.model.tooltips],"dateFormat",e.pluginScope.dateFormat);return e.task.model.from.format(t)},e.getToLabel=function(){var t=r.firstProperty([e.task.model.tooltips,e.task.row.model.tooltips],"dateFormat",e.pluginScope.dateFormat);return e.task.model.to.format(t)};var c=function(a){i&&t.cancel(i);var o=r.firstProperty([e.task.model.tooltips,e.task.row.model.tooltips],"enabled",e.pluginScope.enabled);o&&a===!0?i=t(function(){p(l)},500,!0):e.task.active||k()};if(e.task.$element.bind("mousemove",function(t){l=t.clientX}),e.task.$element.bind("mouseenter",function(t){e.mouseEnterX=t.clientX,c(!0),e.$digest()}),e.task.$element.bind("mouseleave",function(){e.mouseEnterX=void 0,c(!1),e.$digest()}),e.pluginScope.api.tasks.on.moveBegin){var u=s(e,g,"mousemove",n(function(t){f(t.clientX)},5,!1));e.pluginScope.api.tasks.on.moveBegin(e,function(t){t===e.task&&u.bind()}),e.pluginScope.api.tasks.on.moveEnd(e,function(t){t===e.task&&u.unbind()}),e.pluginScope.api.tasks.on.resizeBegin(e,function(t){t===e.task&&u.bind()}),e.pluginScope.api.tasks.on.resizeEnd(e,function(t){t===e.task&&u.unbind()})}var m=function(){var t=a[0];return t.documentElement.clientWidth||t.documentElement.getElementById("body")[0].clientWidth},p=function(e){o.toggleClass("ng-hide",!1),t(function(){f(e),o.css("top",d[0].getBoundingClientRect().top+"px"),o.css("marginTop",-o[0].offsetHeight-8+"px"),o.css("opacity",1)},0,!0)},f=function(t){t+o[0].offsetWidth>m()?(o.css("left",t+20-o[0].offsetWidth+"px"),o.addClass("gantt-task-infoArrowR"),o.removeClass("gantt-task-infoArrow")):(o.css("left",t-20+"px"),o.addClass("gantt-task-infoArrow"),o.removeClass("gantt-task-infoArrowR"))},k=function(){o.css("opacity",0),o.toggleClass("ng-hide",!0)};e.gantt.api.directives.raise.new("ganttTooltip",e,o),e.$on("$destroy",function(){e.gantt.api.directives.raise.destroy("ganttTooltip",e,o)})}]}}])}();