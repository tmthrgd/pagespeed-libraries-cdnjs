!function(){"use strict";angular.module("gantt.tooltips",["gantt","gantt.tooltips.templates"]).directive("ganttTooltips",["$compile","$document",function(t,e){return{restrict:"E",require:"^gantt",scope:{enabled:"=?",dateFormat:"=?"},link:function(n,o,a,i){var l=i.gantt.api;if(n.options&&"object"==typeof n.options.tooltips)for(var s in n.options.tooltips)n[s]=n.options[s];void 0===n.enabled&&(n.enabled=!0),void 0===n.dateFormat&&(n.dateFormat="MMM DD, HH:mm"),n.api=l,l.directives.on.new(n,function(o,i,l){if("ganttTask"===o){var s=i.$new();s.pluginScope=n;var r=e[0].createElement("div");angular.element(r).attr("data-ng-if","pluginScope.enabled");var p=e[0].createElement("gantt-tooltip");void 0!==a.templateUrl&&angular.element(p).attr("data-template-url",a.templateUrl),void 0!==a.template&&angular.element(p).attr("data-template",a.template),angular.element(r).append(p),l.append(t(r)(s))}})}}}])}(),function(){"use strict";angular.module("gantt.tooltips").directive("ganttTooltip",["$timeout","$compile","$document","$templateCache","ganttDebounce","ganttSmartEvent",function(t,e,n,o,a,i){return{restrict:"E",templateUrl:function(t,e){var n;return n=void 0===e.templateUrl?"plugins/tooltips/tooltip.tmpl.html":e.templateUrl,void 0!==e.template&&o.put(n,e.template),n},scope:!0,replace:!0,controller:["$scope","$element","ganttUtils",function(e,o,l){var s,r,p=angular.element(n[0].body),c=e.task.$element;o.toggleClass("ng-hide",!0),e.getFromLabel=function(){var t=l.firstProperty([e.task.model.tooltips,e.task.row.model.tooltips],"dateFormat",e.pluginScope.dateFormat);return e.task.model.from.format(t)},e.getToLabel=function(){var t=l.firstProperty([e.task.model.tooltips,e.task.row.model.tooltips],"dateFormat",e.pluginScope.dateFormat);return e.task.model.to.format(t)};var m=function(n){s&&t.cancel(s);var o=l.firstProperty([e.task.model.tooltips,e.task.row.model.tooltips],"enabled",e.pluginScope.enabled);o&&n===!0?s=t(function(){g(r)},500,!0):e.task.active||v()};if(e.task.$element.bind("mousemove",function(t){r=t.clientX}),e.task.$element.bind("mouseenter",function(t){e.mouseEnterX=t.clientX,m(!0),e.$digest()}),e.task.$element.bind("mouseleave",function(){e.mouseEnterX=void 0,m(!1),e.$digest()}),e.pluginScope.api.tasks.on.moveBegin){var d=i(e,p,"mousemove",a(function(t){f(t.clientX)},5,!1));e.pluginScope.api.tasks.on.moveBegin(e,function(t){t===e.task&&d.bind()}),e.pluginScope.api.tasks.on.moveEnd(e,function(t){t===e.task&&d.unbind()}),e.pluginScope.api.tasks.on.resizeBegin(e,function(t){t===e.task&&d.bind()}),e.pluginScope.api.tasks.on.resizeEnd(e,function(t){t===e.task&&d.unbind()})}var u=function(){var t=n[0];return t.documentElement.clientWidth||t.documentElement.getElementById("body")[0].clientWidth},g=function(e){o.toggleClass("ng-hide",!1),t(function(){f(e),o.css("top",c[0].getBoundingClientRect().top+"px"),o.css("marginTop",-o[0].offsetHeight-8+"px"),o.css("opacity",1)},0,!0)},f=function(t){t+o[0].offsetWidth>u()?(o.css("left",t+20-o[0].offsetWidth+"px"),o.addClass("gantt-task-infoArrowR"),o.removeClass("gantt-task-infoArrow")):(o.css("left",t-20+"px"),o.addClass("gantt-task-infoArrow"),o.removeClass("gantt-task-infoArrowR"))},v=function(){o.css("opacity",0),o.toggleClass("ng-hide",!0)};e.gantt.api.directives.raise.new("ganttTooltip",e,o),e.$on("$destroy",function(){e.gantt.api.directives.raise.destroy("ganttTooltip",e,o)})}]}}])}();