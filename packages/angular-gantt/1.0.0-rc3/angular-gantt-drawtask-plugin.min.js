!function(){"use strict";angular.module("gantt.drawtask",["gantt"]).directive("ganttDrawTask",["ganttMouseOffset","moment",function(t,e){return{restrict:"E",require:"^gantt",scope:{enabled:"=?",taskModelFactory:"=taskFactory"},link:function(a,n,o,r){var s=r.gantt.api;void 0===a.enabled&&(a.enabled=!0),s.directives.on.new(a,function(n,o,r){if("ganttRow"===n){var i=function(n){var r=n.target?n.target:n.srcElement;if(a.enabled&&r.className.indexOf("gantt-row")>-1){var i=s.core.getDateByPosition(t.getOffset(n).x),d=e(i),c=a.taskModelFactory();c.from=i,c.to=d;var f=o.row.addTask(c);f.isResizing=!0,f.updatePosAndSize(),o.row.updateVisibleTasks(),o.row.$scope.$digest()}};r.on("mousedown",i),o.drawTaskHandler=i}}),s.directives.on.destroy(a,function(t,e,a){"ganttRow"===t&&(a.off("mousedown",e.drawTaskHandler),delete e.drawTaskHandler)})}}}])}();