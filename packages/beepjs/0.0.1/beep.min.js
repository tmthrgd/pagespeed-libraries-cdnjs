!function(t){function n(t){if(!(this instanceof n))return new n(t);if("number"!=typeof t||1>t)return null;this.channels=1,this.bitdepth=16,this.samplerate=t,this.sine=[];for(var r=2*Math.PI/parseFloat(t),e=0;t>e;e++)this.sine.push(Math.sin(e*r))}var r={amplify:function(t){return function(n){return n*t}},ushort:function(t){return String.fromCharCode(255&t,255&t>>8)},ulong:function(t){return String.fromCharCode(255&t,255&t>>8,255&t>>16,255&t>>24)},gcd:function(t,n){for(;n;){var r=t;t=n,n=r%n}return t},lcm:function(t,n){return Math.floor(t*n/r.gcd(t,n))},compose:function(t){return function(n){for(var r=0;r<t.length;r++)n=t[r](n);return n}},map:function(t,n){for(var r=[],e=0;e<n.length;e++)r.push(t.call(this,n[e]));return r},getattr:function(t){return function(n){return n[t]}},zip:function(){if(0==arguments.length)return[];for(var t=Array.prototype.slice.call(arguments),n=[],e=Math.min.apply(null,r.map(r.getattr("length"),t)),i=0;e>i;i++)n.push(r.map(r.getattr(i),t));return n},sum:function(t){return r.foldl(function(t,n){return t+n},t)},bind:function(t,n){return function(){var r=Array.prototype.slice.call(arguments);return n.apply(t,r)}},foldl:function(t,n){if(1==n.length)return n[0];for(var r=t(n[0],n[1]),e=2;e<n.length;e++)r=t(r,n[e]);return r},mulmod:function(t,n,r){return t*n%r},range:function(t){for(var n=[],r=0;t>r;r++)n.push(r);return n}};n.prototype={generate:function(t){t=t instanceof Array?t:[t];var n=r.bind(this,r.map),e=n(function(t){return r.lcm(this.samplerate,t)/t},t),i=r.foldl(r.lcm,e),o=function(t){return function(n){return this.sine[r.mulmod(t,n,this.samplerate)]}};return n(function(e){return r.sum(n(o(e),t))},r.range(i))},encode:function(t,e,i){t=t instanceof Array?t:[t];var o=r.compose((i||[]).concat([r.ushort])),u=r.map(o,this.generate(t)),a=Math.ceil(e*this.samplerate/u.length),s=new Array(a+1).join(u.join("")),h=s.substr(0,this.samplerate*e*2),l=[["f","m","t"," "].join(""),r.ulong(n.PCM_CHUNK_SIZE),r.ushort(n.LINEAR_QUANTIZATION),r.ushort(this.channels),r.ulong(this.samplerate),r.ulong(this.samplerate*this.channels*this.bitdepth/8),r.ushort(this.bitdepth/8),r.ushort(this.bitdepth)].join(""),c=[["d","a","t","a"].join(""),r.ulong(h.length*this.channels*this.bitdepth/8),h].join(""),f=[["R","I","F","F"].join(""),r.ulong(4+(8+l.length)+(8+c.length)),["W","A","V","E"].join("")].join("");return[f,l,c].join("")},play:function(t,n,r){r=r||[];var e=btoa(this.encode(t,n,r)),i=document.createElement("audio");i.src="data:audio/x-wav;base64,"+e,i.play()}},n.LINEAR_QUANTIZATION=1,n.PCM_CHUNK_SIZE=16,n.utils=r,t.Beep=n}(window[window.NS_BEEP]||window);