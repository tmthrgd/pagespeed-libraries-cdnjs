/*!
  * bean.js - copyright @dedfat
  * https://github.com/fat/bean
  * Follow our software http://twitter.com/dedfat
  * MIT License
  * special thanks to:
  * dean edwards: http://dean.edwards.name/
  * dperini: https://github.com/dperini/nwevents
  * the entire mootools team: github.com/mootools/mootools-core
  */
!function(a){function A(a){var b=a.relatedTarget;if(!b)return b==null;return b!=this&&b.prefix!="xul"&&!/document/.test(this.toString())&&!l(this,b)}function y(a){var b={};if(!a)return b;var c=a.type,d=a.target||a.srcElement;b.preventDefault=a.preventDefault||y.preventDefault,b.stopPropagation=a.stopPropagation||y.stopPropagation,b.target=d&&d.nodeType==3?d.parentNode:d;if(c.indexOf("key")!=-1)b.keyCode=a.which||a.keyCode;else if(/click|mouse|menu/i.test(c)){b.rightClick=a.which==3||a.button==2,b.pos={x:0,y:0};if(a.pageX||a.pageY)b.clientX=a.pageX,b.clientY=a.pageY;else if(a.clientX||a.clientY)b.clientX=a.clientX+document.body.scrollLeft+document.documentElement.scrollLeft,b.clientY=a.clientY+document.body.scrollTop+document.documentElement.scrollTop;e.test(c)&&(b.relatedTarget=a.relatedTarget||a[(c=="mouseover"?"from":"to")+"Element"])}for(var f in a)f in b||(b[f]=a[f]);return b}function x(a,b,c){var d=m(b),e,f;e=c?d[c]:d;for(f in e)e.hasOwnProperty(f)&&(c?u:x)(a,c||b,c?e[f]:f);return a}function w(b,c){var d,e,j,k=c.split(" ");for(j=k.length;j--;){c=k[j].replace(g,"");var l=z.indexOf(c)>-1,n=k[j].replace(f,""),o=m(b)[c];if(n){n=n.split(".");for(e=n.length;e--;)o[n[e]]&&o[n[e]]()}else if(b[h])d=document.createEvent(l?"HTMLEvents":"UIEvents"),d[l?"initEvent":"initUIEvent"](c,!0,!0,a,1),b.dispatchEvent(d);else if(b[i])l?b.fireEvent("on"+c,document.createEventObject()):b["_on"+c]++;else for(e in o)o.hasOwnProperty(e)&&o[e]()}return b}function v(a,b,c){var d,e,h,i=typeof b=="string",j=i&&b.replace(f,""),k=s,l=m(a);if(i&&/\s/.test(b)){b=b.split(" ");var n=b.length-1;while(v(a,b[n])&&n--);return a}h=i?b.replace(g,""):b;if(!l||i&&!l[h])return a;if(typeof c=="function")k(a,h,c);else if(j)k(a,b);else{k=h?k:v,e=i&&h,h=h?c||l[h]||h:l;for(d in h)h.hasOwnProperty(d)&&k(a,e||d,h[d])}return a}function u(a,b,c,d,e){if(typeof b=="object"&&!c)for(var f in b)b.hasOwnProperty(f)&&u(a,f,b[f]);else{var g=typeof c=="string",h=(g?c:b).split(" ");c=g?t(b,d,e):c;for(var i=h.length;i--;)r(a,h[i],c,Array.prototype.slice.call(arguments,g?4:3))}return a}function t(a,b,c){return function(d){var e=typeof a=="string"?c(a,this):a;for(var f=d.target;f&&f!=this;f=f.parentNode)for(var g=e.length;g--;)if(e[g]==f)return b.apply(f,arguments)}}function s(a,b,c){var d,e,i,j,k=m(a),l=b.replace(g,"");if(!k||!k[l])return a;e=b.replace(f,""),i=e?e.split("."):[c.__uid];for(j=i.length;j--;){d=i[j],c=k[l][d],delete k[l][d],l=B[l]?B[l].base:l;var n=a[h]||z.indexOf(l)>-1;o(a,n?l:"propertychange",c,!1,!n&&l)}return a}function r(b,c,e,i){var j=c.replace(g,""),k=m(b),l=k[j]||(k[j]={}),r=n(e,c.replace(f,""));if(l[r])return b;var t=B[j];e=t&&t.condition?q(b,e,j,t.condition):e,j=t&&t.base||j;var u=a[h]||z.indexOf(j)>-1;e=u?p(b,e,i):q(b,e,j,!1,i);if(j=="unload"){var v=e;e=function(){s(b,j,e)&&v()}}o(b,u?j:"propertychange",e,!0,!u&&!0),l[r]=e,e.__uid=r;return j=="unload"?b:d[n(b)]=b}function q(a,b,c,d,e){return function(f){(d?d.call(this,f):f&&f.propertyName=="_on"+c||!f)&&b.apply(a,[f].concat(e))}}function p(b,c,d){return function(e){e=y(e||((this.ownerDocument||this.document||this).parentWindow||a).event);return c.apply(b,[e].concat(d))}}function o(a,b,c,d,e){a[h]?a[d?h:j](b,c,!1):a[i]&&(e&&d&&(a["_on"+e]=a["_on"+e]||0),a[d?i:k]("on"+b,c))}function n(a,c){return a.__uid=c||a.__uid||b++}function m(a){var b=n(a);return c[b]=c[b]||{}}function l(a,b){var c=b.parentNode;while(c!=null){if(c==a)return!0;c=c.parentNode}}var b=1,c={},d={},e=/over|out/,f=/[^\.]*(?=\..*)\.|.*/,g=/\..*/,h="addEventListener",i="attachEvent",j="removeEventListener",k="detachEvent";y.preventDefault=function(){this.returnValue=!1},y.stopPropagation=function(){this.cancelBubble=!0};var z="click,dblclick,mouseup,mousedown,contextmenu,mousewheel,DOMMouseScroll,mouseover,mouseout,mousemove,selectstart,selectend,keydown,keypress,keyup,orientationchange,touchstart,touchmove,touchend,touchcancel,gesturestart,gesturechange,gestureend,focus,blur,change,reset,select,submit,load,unload,beforeunload,resize,move,DOMContentLoaded,readystatechange,"+"error,abort,scroll".split(","),B={mouseenter:{base:"mouseover",condition:A},mouseleave:{base:"mouseout",condition:A},mousewheel:{base:/Firefox/.test(navigator.userAgent)?"DOMMouseScroll":"mousewheel"}},C={add:u,remove:v,clone:x,fire:w},D=function(a){var b=v(a).__uid;b&&(delete d[b],delete c[b])};a[i]&&u(a,"unload",function(){for(var b in d)d.hasOwnProperty(b)&&D(d[b]);a.CollectGarbage&&CollectGarbage()});var E=a.bean;C.noConflict=function(){a.bean=E;return this},typeof module!="undefined"&&module.exports?module.exports=C:a.bean=C}(this)