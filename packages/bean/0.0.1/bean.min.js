/*!
  * event.js - copyright @dedfat
  * https://github.com/fat/bean
  * Follow our software http://twitter.com/dedfat
  * MIT License
  * cheers to the entire mootools team, dean edwards, and dperini
  */
!function(a){function z(a){var b=a.relatedTarget;if(b==null)return!0;if(!b)return!1;return b!=this&&b.prefix!="xul"&&!/document/.test(this.toString())&&!j(this,b)}function x(a){if(!a)return{};var b=a.type;a.preventDefault=a.preventDefault||x.preventDefault,a.stopPropagation=a.stopPropagation||x.stopPropagation,a.target=a.target||a.srcElement,a.target.nodeType==3&&(a.target=a.target.parentNode);if(b.indexOf("key")!=-1)a.which&&(a.keyCode=a.which);else if(/click|mouse|menu/i.test(b)){a.rightClick=a.which==3||a.button==2,a.pos={x:0,y:0};if(a.pageX||a.pageY)a.pos.x=a.pageX,a.pos.y=a.pageY;else if(a.clientX||a.clientY)a.pos.x=a.clientX+document.body.scrollLeft+document.documentElement.scrollLeft,a.pos.y=a.clientY+document.body.scrollTop+document.documentElement.scrollTop;e.test(b)&&(a.relatedTarget=a.relatedTarget||a[(b=="mouseover"?"from":"to")+"Element"])}return a}function w(a,b,c){var d=l(b),e,f,g,h;if(!d)return a;f=c?d[c]:d,g=c?t:w;for(h in f)f.hasOwnProperty(h)&&g(a,c||b,c?f[h]:h);return a}function v(a,b){var c,d,e,g=b.split(" ");for(e=g.length;e--;){b=g[e];if(!k(a)){var h=l(a)[b];for(d in h)h.hasOwnProperty(d)&&h[d]()}y.indexOf(b)>-1?a[f]?(c=document.createEvent("HTMLEvents"),c.initEvent(b,!0,!0),a.dispatchEvent(c)):(c=document.createEventObject(),a.fireEvent("on"+b,c)):a[f]?(c=document.createEvent("UIEvents"),c.initUIEvent(b,!0,!0,window,1),a.dispatchEvent(c)):a["_on"+b]++}return a}function u(a,b,c){var d,e,f=typeof b=="string",g=r,h=l(a);if(f&&/\s/.test(b)){b=b.split(" ");for(var i=b.length;i--;)u(a,b[i]);return a}if(!h||f&&!h[b])return a;if(typeof c=="function")g(a,b,c);else{b?(e=f&&b,b=c||h[b]||b):(b=h,g=u);for(d in b)b.hasOwnProperty(d)&&g(a,e||d,b[d])}return a}function t(a,b,c,d,e){if(typeof b=="object"&&!c)for(var f in b)b.hasOwnProperty(f)&&q(a,f,b[f]);else{var g=typeof c=="string",h=(g?c:b).split(" ");for(var i=h.length;i--;)q(a,h[i],g?s(b,d,e):c,Array.prototype.slice.call(arguments,g?4:3))}return a}function s(a,b,c){return function(d){var e=typeof a=="string"?c(a,this):a;for(var f=d.target;f&&f!=this;f=f.parentNode)for(var g=e.length;g--;)if(e[g]==f)return b.apply(f,arguments)}}function r(a,b,c){var d=l(a);if(!d||!d[b])return a;c=d[b][c._uid],delete d[b][c._uid],b=A[b]?A[b].base:b,a[f]||y.indexOf(b)>-1?n(a,b,c,!1):n(a,"propertychange",c,!1,b);return a}function q(a,b,c,e){var g=l(a),h=g[b];h||(h=g[b]={},a["on"+b]&&(h[0]=a["on"+b]));var i=m(c);if(h[i])return a;var j=A[b];j&&(j.condition&&(c=p(a,c,b,j.condition)),b=j.base||b);if(window[f]||y.indexOf(b)>-1){c=o(a,c,e);if(b=="unload"){var k=c;c=function(){r(a,"unload",c),k()}}n(a,b,c,!0)}else c=p(a,c,b,!1,e),n(a,"propertychange",c,!0,b);h[i]=c,c._uid=i;return b=="unload"?a:d[m(a)]=a}function p(a,b,c,d,e){return function(f){(d?d.call(this,f):f&&f.propertyName=="_on"+c||!f)&&b.apply(a,[f].concat(e));return!0}}function o(a,b,c){return function(d){d=x(d||((this.ownerDocument||this.document||this).parentWindow||window).event),b.apply(a,[d].concat(c))===!1&&d&&(d.preventDefault(),d.stopPropagation())}}function n(a,b,c,d,e){if(!!k(a)){if(a[f])return a[d?f:h](b,c,!1);e&&d&&(a["_on"+e]=a["_on"+e]||0),a[d?g:i]("on"+b,c)}}function m(a){return a._uid=a._uid||b++}function l(a){var b=m(a);return c[b]=c[b]||{}}function k(a){return!!a.nodeName}function j(a,b){var c=b.parentNode;while(c!=null){if(c==a)return!0;c=c.parentNode}return!1}var b=1,c={},d={},e=/over|out/,f="addEventListener",g="attachEvent",h="removeEventListener",i="detachEvent";x.preventDefault=function(){this.returnValue=!1},x.stopPropagation=function(){this.cancelBubble=!0};var y="click,dblclick,mouseup,mousedown,contextmenu,mousewheel,DOMMouseScroll,mouseover,mouseout,mousemove,selectstart,selectend,keydown,keypress,keyup,orientationchange,touchstart,touchmove,touchend,touchcancel,gesturestart,gesturechange,gestureend,focus,blur,change,reset,select,submit,load,unload,beforeunload,resize,move,DOMContentLoaded,readystatechange,"+"error,abort,scroll".split(","),A={mouseenter:{base:"mouseover",condition:z},mouseleave:{base:"mouseout",condition:z}},B={add:t,remove:u,clone:w,fire:v},C=function(a){var b=a._uid;u(a),b&&(delete d[b],delete c[b])};window[g]&&t(window,"unload",function(){for(var a in d)d.hasOwnProperty(a)&&C(d[a]);window.CollectGarbage&&CollectGarbage()});var D=a.evnt;B.noConflict=function(){a.evnt=D;return this},typeof module!="undefined"&&module.exports?module.exports=B:a.evnt=B}(this)