/*! angular-poller v0.2.4 24-07-2014 */
!function(a,b,c){"use strict";b.module("emguo.poller",[]).constant("pollerConfig",{stopOnRouteChange:!1,stopOnStateChange:!1}).run(["$rootScope","poller","pollerConfig",function(a,b,c){c.stopOnRouteChange?a.$on("$routeChangeStart",function(){b.stopAll()}):c.stopOnStateChange&&a.$on("$stateChangeStart",function(){b.stopAll()})}]).factory("poller",["$interval","$q",function(a,d){var e=[],f={action:"query",delay:5e3,params:{},smart:!1},g=function(a,b){this.resource=a,this.set(b)},h=function(a){var c=null;return b.forEach(e,function(d){b.equals(d.resource,a)&&(c=d)}),c};return b.extend(g.prototype,{set:function(a){b.forEach(["action","delay","params","smart"],function(b){a&&a[b]?this[b]=a[b]:this[b]||(this[b]=f[b])},this)},start:function(){function c(){k&&b.isDefined(e)&&!e.$resolved||(f=new Date,e=g[h](j,function(a){(!b.isDefined(l.stopTimestamp)||f>=l.stopTimestamp)&&l.deferred.notify(a)}))}var e,f,g=this.resource,h=this.action,i=this.delay,j=this.params,k=this.smart,l=this;this.deferred||(this.deferred=d.defer()),c(),this.interval=a(c,i),this.promise=this.deferred.promise},stop:function(){b.isDefined(this.interval)&&(a.cancel(this.interval),this.interval=c,this.stopTimestamp=new Date)},restart:function(){this.stop(),this.start()}}),{get:function(a,b){var c=h(a);return c?(c.set(b),c.restart()):(c=new g(a,b),e.push(c),c.start()),c},size:function(){return e.length},stopAll:function(){b.forEach(e,function(a){a.stop()})},restartAll:function(){b.forEach(e,function(a){a.restart()})},reset:function(){this.stopAll(),e=[]}}}])}(window,window.angular);