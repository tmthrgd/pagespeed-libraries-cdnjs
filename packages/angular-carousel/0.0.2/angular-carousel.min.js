/**
 * Angular Carousel - Mobile friendly touch carousel for AngularJS
 * @version v0.0.1 - 2013-04-24
 * @link http://revolunet.com.github.com/angular-carousel
 * @author Julien Bouquillon <julien@revolunet.com>
 * @license MIT License, http://www.opensource.org/licenses/MIT
 */
"use strict";angular.module("angular-carousel",[]).directive("carousel",["$document",function(e){var t=0;return{restrict:"A",scope:!0,controller:["$scope","$element","$attrs",function(e,t){var n=0,i=0;this.addElement=function(e){n++,1===n&&(i=e[0].getBoundingClientRect().width,t.parent().css("width",this.getWidth()-2+"px"))},this.removeElement=function(){n--},this.getWidth=function(){return i}}],compile:function(n){return n.addClass("carousel-slides"),n.find("li").attr("slide-announcer",!0),function(n,i,o,r){t++;var a="carousel-"+t,s=0,c=0,u=0,l=0,d=0,h=.1,f=i.wrap("<div id='"+a+"' class='carousel-container'></div>"),m=f.parent();m.getWidth=r.getWidth;var v=function(){return f.find("li")},g=function(){return v().length},p=function(e){return e.originalEvent!==void 0&&e.originalEvent.touches>0?e=e.originalEvent.touches[0]:e.touches!==void 0&&e.touches.length>0?e=e.touches[0]:e.changedTouches!==void 0&&e.changedTouches.length>0&&(e=e.changedTouches[0]),e},b=function(t){t=p(t),0===s&&(s=1,c=t.clientX),e.bind("mouseup",w)},E=function(e){if(0!==s){e.preventDefault(),e=p(e);var t=e.clientX-c;if(1===s&&0!==t)s=2,u=l;else if(2===s){var n=g(),i=1;(0===d&&e.clientX>c||d===n-1&&c>e.clientX)&&(i=3),l=u+t/i,f.css({"-webkit-transform":"translate3d("+l+"px,0,0)"}).removeClass().addClass("carousel-noanimate")}}},w=function(t){e.unbind("mouseup",w),t=p(t);var n=g(),i=d;if(s>0){s=0,d=u>l?d+1:d-1,d=Math.min(Math.max(d,0),n-1);var o=m.getWidth(),r=t.clientX-c;o*h>=Math.abs(r)&&(d=i),l=d*-o,f.removeClass("carousel-noanimate").addClass("carousel-animate").css("-webkit-transform","translate3d("+l+"px,0,0)")}};m.bind("mousedown touchstart",b),m.bind("mousemove touchmove",E),m.bind("mouseup touchend",w),n.destroy=function(){}}}}}]).directive("slideAnnouncer",function(){return{restrict:"A",require:"^carousel",link:function(e,t,n,i){i&&(i.addElement(t),e.$on("$destroy",function(){i.removeElement(t)}))}}});