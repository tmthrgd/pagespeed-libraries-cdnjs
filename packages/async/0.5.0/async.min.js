(function(){var e={};var q,l;q=this;if(q!=null){l=q.async}e.noConflict=function(){q.async=l;return e};function s(w){var x=false;return function(){if(x){throw new Error("Callback was already called.")}x=true;w.apply(q,arguments)}}var h=Array.isArray||function(w){return toString.call(w)==="[object Array]"};var t=function(w,y){if(w.forEach){return w.forEach(y)}for(var x=0;x<w.length;x+=1){y(w[x],x,w)}};var a=function(w,y){if(w.map){return w.map(y)}var x=[];t(w,function(z,B,A){x.push(y(z,B,A))});return x};var v=function(w,y,x){if(w.reduce){return w.reduce(y,x)}t(w,function(z,B,A){x=y(x,z,B,A)});return x};var c=function(y){if(Object.keys){return Object.keys(y)}var x=[];for(var w in y){if(y.hasOwnProperty(w)){x.push(w)}}return x};if(typeof process==="undefined"||!(process.nextTick)){if(typeof setImmediate==="function"){e.nextTick=function(w){setImmediate(w)};e.setImmediate=e.nextTick}else{e.nextTick=function(w){setTimeout(w,0)};e.setImmediate=e.nextTick}}else{e.nextTick=process.nextTick;if(typeof setImmediate!=="undefined"){e.setImmediate=function(w){setImmediate(w)}}else{e.setImmediate=e.nextTick}}e.each=function(w,z,A){A=A||function(){};if(!w.length){return A()}var y=0;t(w,function(B){z(B,s(x))});function x(B){if(B){A(B);A=function(){}}else{y+=1;if(y>=w.length){A(null)}}}};e.forEach=e.each;e.eachSeries=function(w,z,A){A=A||function(){};if(!w.length){return A()}var y=0;var x=function(){z(w[y],function(B){if(B){A(B);A=function(){}}else{y+=1;if(y>=w.length){A(null)}else{x()}}})};x()};e.forEachSeries=e.eachSeries;e.eachLimit=function(w,x,z,A){var y=g(x);y.apply(null,[w,z,A])};e.forEachLimit=e.eachLimit;var g=function(w){return function(x,B,D){D=D||function(){};if(!x.length||w<=0){return D()}var A=0;var y=0;var z=0;(function C(){if(A>=x.length){return D()}while(z<w&&y<x.length){y+=1;z+=1;B(x[y-1],function(E){if(E){D(E);D=function(){}}else{A+=1;z-=1;if(A>=x.length){D()}else{C()}}})}})()}};var r=function(w){return function(){var x=Array.prototype.slice.call(arguments);return w.apply(null,[e.each].concat(x))}};var p=function(w,x){return function(){var y=Array.prototype.slice.call(arguments);return x.apply(null,[g(w)].concat(y))}};var n=function(w){return function(){var x=Array.prototype.slice.call(arguments);return w.apply(null,[e.eachSeries].concat(x))}};var i=function(z,w,y,A){var x=[];w=a(w,function(B,C){return{index:C,value:B}});z(w,function(B,C){y(B.value,function(E,D){x[B.index]=D;C(E)})},function(B){A(B,x)})};e.map=r(i);e.mapSeries=n(i);e.mapLimit=function(w,x,y,z){return d(x)(w,y,z)};var d=function(w){return p(w,i)};e.reduce=function(w,x,y,z){e.eachSeries(w,function(A,B){y(x,A,function(D,C){x=C;B(D)})},function(A){z(A,x)})};e.inject=e.reduce;e.foldl=e.reduce;e.reduceRight=function(w,x,y,A){var z=a(w,function(B){return B}).reverse();e.reduce(z,x,y,A)};e.foldr=e.reduceRight;var u=function(z,w,y,A){var x=[];w=a(w,function(B,C){return{index:C,value:B}});z(w,function(B,C){y(B.value,function(D){if(D){x.push(B)}C()})},function(B){A(a(x.sort(function(D,C){return D.index-C.index}),function(C){return C.value}))})};e.filter=r(u);e.filterSeries=n(u);e.select=e.filter;e.selectSeries=e.filterSeries;var m=function(z,w,y,A){var x=[];w=a(w,function(B,C){return{index:C,value:B}});z(w,function(B,C){y(B.value,function(D){if(!D){x.push(B)}C()})},function(B){A(a(x.sort(function(D,C){return D.index-C.index}),function(C){return C.value}))})};e.reject=r(m);e.rejectSeries=n(m);var f=function(y,w,x,z){y(w,function(A,B){x(A,function(C){if(C){z(A);z=function(){}}else{B()}})},function(A){z()})};e.detect=r(f);e.detectSeries=n(f);e.some=function(w,x,y){e.each(w,function(z,A){x(z,function(B){if(B){y(true);y=function(){}}A()})},function(z){y(false)})};e.any=e.some;e.every=function(w,x,y){e.each(w,function(z,A){x(z,function(B){if(!B){y(false);y=function(){}}A()})},function(z){y(true)})};e.all=e.every;e.sortBy=function(w,x,y){e.map(w,function(z,A){x(z,function(B,C){if(B){A(B)}else{A(null,{value:z,criteria:C})}})},function(B,z){if(B){return y(B)}else{var A=function(F,E){var D=F.criteria,C=E.criteria;return D<C?-1:D>C?1:0};y(null,a(z.sort(A),function(C){return C.value}))}})};e.auto=function(y,D){D=D||function(){};var E=c(y);var x=E.length;if(!x){return D(null)}var A={};var C=[];var w=function(F){C.unshift(F)};var z=function(G){for(var F=0;F<C.length;F+=1){if(C[F]===G){C.splice(F,1);return}}};var B=function(){x--;t(C.slice(0),function(F){F()})};w(function(){if(!x){var F=D;D=function(){};F(null,A)}});t(E,function(G){var F=(y[G] instanceof Function)?[y[G]]:y[G];var K=function(N){var L=Array.prototype.slice.call(arguments,1);if(L.length<=1){L=L[0]}if(N){var M={};t(c(A),function(O){M[O]=A[O]});M[G]=L;D(N,M);D=function(){}}else{A[G]=L;e.setImmediate(B)}};var I=F.slice(0,Math.abs(F.length-1))||[];var H=function(){return v(I,function(M,L){return(M&&A.hasOwnProperty(L))},true)&&!A.hasOwnProperty(G)};if(H()){F[F.length-1](K,A)}else{var J=function(){if(H()){z(J);F[F.length-1](K,A)}};w(J)}})};e.waterfall=function(z,y){y=y||function(){};if(!h(z)){var w=new Error("First argument to waterfall must be an array of functions");return y(w)}if(!z.length){return y()}var x=function(A){return function(D){if(D){y.apply(null,arguments);y=function(){}}else{var B=Array.prototype.slice.call(arguments,1);var C=A.next();if(C){B.push(x(C))}else{B.push(y)}e.setImmediate(function(){A.apply(null,B)})}}};x(e.iterator(z))()};var b=function(x,z,y){y=y||function(){};if(h(z)){x.map(z,function(A,B){if(A){A(function(D){var C=Array.prototype.slice.call(arguments,1);if(C.length<=1){C=C[0]}B.call(null,D,C)})}},y)}else{var w={};x.each(c(z),function(A,B){z[A](function(D){var C=Array.prototype.slice.call(arguments,1);if(C.length<=1){C=C[0]}w[A]=C;B(D)})},function(A){y(A,w)})}};e.parallel=function(x,w){b({map:e.map,each:e.each},x,w)};e.parallelLimit=function(y,w,x){b({map:d(w),each:g(w)},y,x)};e.series=function(y,x){x=x||function(){};if(h(y)){e.mapSeries(y,function(z,A){if(z){z(function(C){var B=Array.prototype.slice.call(arguments,1);if(B.length<=1){B=B[0]}A.call(null,C,B)})}},x)}else{var w={};e.eachSeries(c(y),function(z,A){y[z](function(C){var B=Array.prototype.slice.call(arguments,1);if(B.length<=1){B=B[0]}w[z]=B;A(C)})},function(z){x(z,w)})}};e.iterator=function(x){var w=function(y){var z=function(){if(x.length){x[y].apply(null,arguments)}return z.next()};z.next=function(){return(y<x.length-1)?w(y+1):null};return z};return w(0)};e.apply=function(x){var w=Array.prototype.slice.call(arguments,1);return function(){return x.apply(null,w.concat(Array.prototype.slice.call(arguments)))}};var o=function(z,w,x,A){var y=[];z(w,function(C,B){x(C,function(D,E){y=y.concat(E||[]);B(D)})},function(B){A(B,y)})};e.concat=r(o);e.concatSeries=n(o);e.whilst=function(y,w,x){if(y()){w(function(z){if(z){return x(z)}e.whilst(y,w,x)})}else{x()}};e.doWhilst=function(w,y,x){w(function(A){if(A){return x(A)}var z=Array.prototype.slice.call(arguments,1);if(y.apply(null,z)){e.doWhilst(w,y,x)}else{x()}})};e.until=function(y,w,x){if(!y()){w(function(z){if(z){return x(z)}e.until(y,w,x)})}else{x()}};e.doUntil=function(w,y,x){w(function(A){if(A){return x(A)}var z=Array.prototype.slice.call(arguments,1);if(!y.apply(null,z)){e.doUntil(w,y,x)}else{x()}})};e.queue=function(A,y){if(y===undefined){y=1}function w(C,B,E,D){if(!h(B)){B=[B]}if(B.length==0){return e.setImmediate(function(){if(C.drain){C.drain()}})}t(B,function(F){var G={data:F,callback:typeof D==="function"?D:null};if(E){C.tasks.unshift(G)}else{C.tasks.push(G)}if(C.saturated&&C.tasks.length===C.concurrency){C.saturated()}e.setImmediate(C.process)})}var x=0;var z={tasks:[],concurrency:y,saturated:null,empty:null,drain:null,paused:false,push:function(B,C){w(z,B,false,C)},unshift:function(B,C){w(z,B,true,C)},process:function(){if(!z.paused&&x<z.concurrency&&z.tasks.length){var C=z.tasks.shift();if(z.empty&&z.tasks.length===0){z.empty()}x+=1;var D=function(){x-=1;if(C.callback){C.callback.apply(C,arguments)}if(z.drain&&z.tasks.length+x===0){z.drain()}z.process()};var B=s(D);A(C.data,B)}},length:function(){return z.tasks.length},running:function(){return x},idle:function(){return z.tasks.length+x===0},pause:function(){if(z.paused===true){return}z.paused=true;z.process()},resume:function(){if(z.paused===false){return}z.paused=false;z.process()}};return z};e.cargo=function(A,z){var w=false,B=[];var x={tasks:B,payload:z,saturated:null,empty:null,drain:null,drained:true,push:function(C,D){if(!h(C)){C=[C]}t(C,function(E){B.push({data:E,callback:typeof D==="function"?D:null});x.drained=false;if(x.saturated&&B.length===z){x.saturated()}});e.setImmediate(x.process)},process:function y(){if(w){return}if(B.length===0){if(x.drain&&!x.drained){x.drain()}x.drained=true;return}var C=typeof z==="number"?B.splice(0,z):B.splice(0,B.length);var D=a(C,function(E){return E.data});if(x.empty){x.empty()}w=true;A(D,function(){w=false;var E=arguments;t(C,function(F){if(F.callback){F.callback.apply(null,E)}});y()})},length:function(){return B.length},running:function(){return w}};return x};var j=function(w){return function(y){var x=Array.prototype.slice.call(arguments,1);y.apply(null,x.concat([function(A){var z=Array.prototype.slice.call(arguments,1);if(typeof console!=="undefined"){if(A){if(console.error){console.error(A)}}else{if(console[w]){t(z,function(B){console[w](B)})}}}}]))}};e.log=j("log");e.dir=j("dir");e.memoize=function(A,y){var x={};var z={};y=y||function(B){return B};var w=function(){var B=Array.prototype.slice.call(arguments);var D=B.pop();var C=y.apply(null,B);if(C in x){e.nextTick(function(){D.apply(null,x[C])})}else{if(C in z){z[C].push(D)}else{z[C]=[D];A.apply(null,B.concat([function(){x[C]=arguments;var G=z[C];delete z[C];for(var F=0,E=G.length;F<E;F++){G[F].apply(null,arguments)}}]))}}};w.memo=x;w.unmemoized=A;return w};e.unmemoize=function(w){return function(){return(w.unmemoized||w).apply(null,arguments)}};e.times=function(z,y,A){var w=[];for(var x=0;x<z;x++){w.push(x)}return e.map(w,y,A)};e.timesSeries=function(z,y,A){var w=[];for(var x=0;x<z;x++){w.push(x)}return e.mapSeries(w,y,A)};e.seq=function(){var w=arguments;return function(){var y=this;var x=Array.prototype.slice.call(arguments);var z=x.pop();e.reduce(w,x,function(B,C,A){C.apply(y,B.concat([function(){var E=arguments[0];var D=Array.prototype.slice.call(arguments,1);A(E,D)}]))},function(B,A){z.apply(y,[B].concat(A))})}};e.compose=function(){return e.seq.apply(null,Array.prototype.reverse.call(arguments))};var k=function(z,x){var y=function(){var B=this;var A=Array.prototype.slice.call(arguments);var C=A.pop();return z(x,function(E,D){E.apply(B,A.concat([D]))},C)};if(arguments.length>2){var w=Array.prototype.slice.call(arguments,2);return y.apply(this,w)}else{return y}};e.applyEach=r(k);e.applyEachSeries=n(k);e.forever=function(x,y){function w(z){if(z){if(y){return y(z)}throw z}x(w)}w()};if(typeof module!=="undefined"&&module.exports){module.exports=e}else{if(typeof define!=="undefined"&&define.amd){define([],function(){return e})}else{q.async=e}}}());