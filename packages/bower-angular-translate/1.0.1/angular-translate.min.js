angular.module("pascalprecht.translate",["ng"]).run(["$translate",function(a){var b=a.storageKey(),c=a.storage();c?c.get(b)?a.uses(c.get(b)):angular.isString(a.preferredLanguage())?a.uses(a.preferredLanguage()):c.set(b,a.uses()):(angular.isString(a.fallbackLanguage())&&a.fallbackLanguage()!==a.preferredLanguage()&&a.load(a.fallbackLanguage()),angular.isString(a.preferredLanguage())&&a.uses(a.preferredLanguage()))}]),angular.module("pascalprecht.translate").constant("$STORAGE_KEY","NG_TRANSLATE_LANG_KEY"),angular.module("pascalprecht.translate").factory("$translateDefaultInterpolation",["$interpolate",function(a){var b,c={},d="default";return c.setLocale=function(a){b=a},c.getInterpolationIdentifier=function(){return d},c.interpolate=function(b,c){return a(b)(c)},c}]),angular.module("pascalprecht.translate").provider("$translate",["$STORAGE_KEY",function(a){var b,c,d,e,f,g,h,i,j,k,l,m,n={},o=a,p=[],q=".",r=function(a,b){if(!a&&!b)return n;if(a&&!b){if(angular.isString(a))return n[a];angular.extend(n,s(a))}else angular.isObject(n[a])||(n[a]={}),angular.extend(n[a],s(b))},s=function(a,b,c){var d,e,f;b||(b=[]),c||(c={});for(d in a)a.hasOwnProperty(d)&&(f=a[d],angular.isObject(f)?s(f,b.concat(d),c):(e=b.length?""+b.join(q)+q+d:d,c[e]=f));return c};this.translations=r,this.addInterpolation=function(a){p.push(a)},this.useMessageFormatInterpolation=function(){this.useInterpolation("$translateMessageFormatInterpolation")},this.useInterpolation=function(a){i=a},this.preferredLanguage=function(a){return a?(b=a,void 0):b},this.translationNotFoundIndicator=function(a){this.translationNotFoundIndicatorLeft(a),this.translationNotFoundIndicatorRight(a)},this.translationNotFoundIndicatorLeft=function(a){return a?(l=a,void 0):l},this.translationNotFoundIndicatorRight=function(a){return a?(m=a,void 0):m},this.fallbackLanguage=function(a){return a?(c=a,void 0):c},this.uses=function(a){if(!a)return d;if(!n[a]&&!j)throw new Error("$translateProvider couldn't find translationTable for langKey: '"+a+"'");d=a};var t=function(a){return a?(o=a,void 0):g?g+o:o};this.storageKey=t,this.useUrlLoader=function(a){this.useLoader("$translateUrlLoader",{url:a})},this.useStaticFilesLoader=function(a){this.useLoader("$translateStaticFilesLoader",a)},this.useLoader=function(a,b){j=a,k=b||{}},this.useLocalStorage=function(){this.useStorage("$translateLocalStorage")},this.useCookieStorage=function(){this.useStorage("$translateCookieStorage")},this.useStorage=function(a){f=a},this.storagePrefix=function(a){return a?(g=a,void 0):a},this.useMissingTranslationHandlerLog=function(){this.useMissingTranslationHandler("$translateMissingTranslationHandlerLog")},this.useMissingTranslationHandler=function(a){h=a},this.$get=["$log","$injector","$rootScope","$q",function(a,g,o,q){var s,u=g.get(i||"$translateDefaultInterpolation");if(pendingLoader=!1,interpolatorHashMap={},f&&(s=g.get(f),!s.get||!s.set))throw new Error("Couldn't use storage '"+f+"', missing get() or set() method!");p.length>0&&angular.forEach(p,function(a){var c=g.get(a);c.setLocale(b||d),interpolatorHashMap[c.getInterpolationIdentifier()]=c});var v=function(a,b,e){var f=d?n[d]:n,i=e?interpolatorHashMap[e]:u;if(f&&f.hasOwnProperty(a))return i.interpolate(f[a],b);if(h&&!pendingLoader&&g.get(h)(a,d),d&&c&&d!==c){var j=n[c][a];if(j){var k;return i.setLocale(c),k=i.interpolate(j,b),i.setLocale(d),k}}return l&&(a=[l,a].join(" ")),m&&(a=[a,m].join(" ")),a};return v.preferredLanguage=function(){return b},v.fallbackLanguage=function(){return c},v.proposedLanguage=function(){return e},v.storage=function(){return s},v.uses=function(a){if(!a)return d;var b=function(){d=a,f&&s.set(v.storageKey(),d),u.setLocale(d),angular.forEach(interpolatorHashMap,function(a,b){interpolatorHashMap[b].setLocale(d)}),o.$broadcast("translationChangeSuccess")},c=function(){o.$broadcast("translationChangeError")};return v.load(a,b,c)},v.load=function(a,b,c){if(!a)throw"No language key specified for loading.";var d=q.defer();return n[a]?(angular.isFunction(b)&&b(),d.resolve(a),d.promise):(pendingLoader=!0,e=a,g.get(j)(angular.extend(k,{key:a})).then(function(c){var e={};angular.isArray(c)?angular.forEach(c,function(a){angular.extend(e,a)}):angular.extend(e,c),r(a,e),angular.isFunction(b)&&b(),pendingLoader=!1,d.resolve(a)},function(a){angular.isFunction(c)&&c(),d.reject(a)}),d.promise)},v.storageKey=function(){return t()},j&&angular.equals(n,{})&&v.uses(v.uses()),v}]}]),angular.module("pascalprecht.translate").directive("translate",["$filter","$interpolate",function(a,b){var c=a("translate");return{restrict:"A",scope:!0,link:function(a,d,e){e.translateInterpolation&&(a.interpolation=e.translateInterpolation),e.$observe("translate",function(c){a.translationId=angular.equals(c,"")?b(d.text().replace(/^\s+|\s+$/g,""))(a.$parent):c}),e.$observe("translateValues",function(b){a.interpolateParams=b}),a.$on("translationChangeSuccess",function(){d.html(c(a.translationId,a.interpolateParams,a.interpolation))}),a.$watch("translationId + interpolateParams",function(b){b&&d.html(c(a.translationId,a.interpolateParams,a.interpolation))})}}}]),angular.module("pascalprecht.translate").filter("translate",["$parse","$translate",function(a,b){return function(c,d,e){return angular.isObject(d)||(d=a(d)()),b(c,d,e)}}]);