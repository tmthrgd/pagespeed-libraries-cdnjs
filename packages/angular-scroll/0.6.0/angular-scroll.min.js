var duScrollDefaultEasing=function(e){return.5>e?Math.pow(2*e,2)/2:1-Math.pow(2*(1-e),2)/2};angular.module("duScroll",["duScroll.scrollspy","duScroll.requestAnimation","duScroll.smoothScroll","duScroll.scrollContainer","duScroll.scrollHelpers"]).value("duScrollDuration",350).value("duScrollGreedy",!1).value("duScrollEasing",duScrollDefaultEasing),angular.module("duScroll.scrollHelpers",[]).run(["$window","$q","cancelAnimation","requestAnimation","duScrollEasing",function(e,n,t,r,o){var l=angular.element.prototype;this.$get=function(){return l};var i=function(e){return"undefined"!=typeof HTMLDocument&&e instanceof HTMLDocument||e.nodeType&&e.nodeType===e.DOCUMENT_NODE},u=function(e){return"undefined"!=typeof HTMLElement&&e instanceof HTMLElement||e.nodeType&&e.nodeType===e.ELEMENT_NODE},c=function(e){return u(e)||i(e)?e:e[0]};l.scrollTo=function(n,t,r){var o;if(angular.isElement(n)?o=this.scrollToElement:r&&(o=this.scrollToAnimated),o)return o.apply(this,arguments);var l=c(this);return i(l)?e.scrollTo(n,t):(l.scrollLeft=n,void(l.scrollTop=t))};var a,s;l.scrollToAnimated=function(e,l,i,u){i&&!u&&(u=o);var c=this.scrollLeft(),d=this.scrollTop(),f=Math.round(e-c),p=Math.round(l-d),m=null,g=this,v="scroll mousedown mousewheel touchmove keydown",h=function(e){(!e||e.which>0)&&(g.unbind(v,h),t(a),s.reject(),a=null)};if(a&&h(),s=n.defer(),!f&&!p)return s.resolve(),s.promise;var y=function(e){null===m&&(m=e);var n=e-m,t=n>=i?1:u(n/i);g.scrollTo(c+Math.ceil(f*t),d+Math.ceil(p*t)),1>t?a=r(y):(g.unbind(v,h),a=null,s.resolve())};return g.scrollTo(c,d),g.bind(v,h),a=r(y),s.promise},l.scrollToElement=function(e,n,t,r){var o=c(this),l=this.scrollTop()+c(e).getBoundingClientRect().top-n;return u(o)&&(l-=o.getBoundingClientRect().top),this.scrollTo(0,l,t,r)};var d={scrollLeft:function(n,t,r){if(angular.isNumber(n))return this.scrollTo(n,this.scrollTop(),t,r);var o=c(this);return i(o)?e.scrollX||document.documentElement.scrollLeft||document.body.scrollLeft:o.scrollLeft},scrollTop:function(n,t,r){if(angular.isNumber(n))return this.scrollTo(this.scrollTop(),n,t,r);var o=c(this);return i(o)?e.scrollY||document.documentElement.scrollTop||document.body.scrollTop:o.scrollTop}},f=function(e,n){return function(t,r){return r?n.apply(this,arguments):e.apply(this,arguments)}};for(var p in d)l[p]=l[p]?f(l[p],d[p]):d[p]}]),angular.module("duScroll.polyfill",[]).factory("polyfill",["$window",function(e){var n=["webkit","moz","o","ms"];return function(t,r){if(e[t])return e[t];for(var o,l=t.substr(0,1).toUpperCase()+t.substr(1),i=0;i<n.length;i++)if(o=n[i]+l,e[o])return e[o];return r}}]),angular.module("duScroll.requestAnimation",["duScroll.polyfill"]).factory("requestAnimation",["polyfill","$timeout",function(e,n){var t=0,r=function(e){var r=(new Date).getTime(),o=Math.max(0,16-(r-t)),l=n(function(){e(r+o)},o);return t=r+o,l};return e("requestAnimationFrame",r)}]).factory("cancelAnimation",["polyfill","$timeout",function(e,n){var t=function(e){n.cancel(e)};return e("cancelAnimationFrame",t)}]),angular.module("duScroll.spyAPI",["duScroll.scrollContainerAPI"]).factory("spyAPI",["$rootScope","scrollContainerAPI","duScrollGreedy",function(e,n,t){var r=function(n){return function(){var r=n.container,o=r[0],l=0;("undefined"!=typeof HTMLElement&&o instanceof HTMLElement||o.nodeType&&o.nodeType===o.ELEMENT_NODE)&&(l=o.getBoundingClientRect().top);var i,u,c,a,s,d;for(a=n.spies,u=n.currentlyActive,c=void 0,i=0;i<a.length;i++)s=a[i],d=s.getTargetPosition(),d&&d.top+s.offset-l<20&&-1*d.top+l<d.height&&(!c||c.top<d.top)&&(c={top:d.top,spy:s});c&&(c=c.spy),u===c||t&&!c||(u&&(u.$element.removeClass("active"),e.$broadcast("duScrollspy:becameInactive",u.$element)),c&&(c.$element.addClass("active"),e.$broadcast("duScrollspy:becameActive",c.$element)),n.currentlyActive=c)}},o={},l=function(e){var n=e.$id,t={spies:[]};return t.handler=r(t),o[n]=t,e.$on("$destroy",function(){i(e)}),n},i=function(e){var n=e.$id,t=o[n],r=t.container;r&&r.off("scroll",t.handler),delete o[n]},u=l(e),c=function(e){return o[e.$id]?o[e.$id]:e.$parent?c(e.$parent):o[u]},a=function(e){var n,t,r=e.$element.scope();if(r)return c(r);for(t in o)if(n=o[t],-1!==n.spies.indexOf(e))return n},s=function(e){for(;e.parentNode;)if(e=e.parentNode,e===document)return!0;return!1},d=function(e){var t=a(e);a(e).spies.push(e),t.container&&s(t.container)||(t.container&&t.container.off("scroll",t.handler),t.container=n.getContainer(e.$element.scope()),t.container.on("scroll",t.handler).triggerHandler("scroll"))},f=function(e){var n=a(e);e===n.currentlyActive&&(n.currentlyActive=null);var t=n.spies.indexOf(e);-1!==t&&n.spies.splice(t,1)};return{addSpy:d,removeSpy:f,createContext:l,destroyContext:i,getContextForScope:c}}]),angular.module("duScroll.scrollContainerAPI",[]).factory("scrollContainerAPI",["$document",function(e){var n={},t=function(e,t){var r=e.$id;return n[r]=t,r},r=function(e){return n[e.$id]?e.$id:e.$parent?r(e.$parent):void 0},o=function(t){var o=r(t);return o?n[o]:e},l=function(e){var t=r(e);t&&delete n[t]};return{getContainerId:r,getContainer:o,setContainer:t,removeContainer:l}}]),angular.module("duScroll.smoothScroll",["duScroll.scrollHelpers","duScroll.scrollContainerAPI"]).directive("duSmoothScroll",["duScrollDuration","scrollContainerAPI",function(e,n){return{link:function(t,r,o){r.on("click",function(r){if(o.href&&-1!==o.href.indexOf("#")){var l=document.getElementById(o.href.replace(/.*(?=#[^\s]+$)/,"").substring(1));if(l&&l.getBoundingClientRect){r.stopPropagation&&r.stopPropagation(),r.preventDefault&&r.preventDefault();var i=o.offset?parseInt(o.offset,10):0,u=o.duration?parseInt(o.duration,10):e,c=n.getContainer(t);c.scrollToElement(angular.element(l),isNaN(i)?0:i,isNaN(u)?0:u)}}})}}}]),angular.module("duScroll.spyContext",["duScroll.spyAPI"]).directive("duSpyContext",["spyAPI",function(e){return{restrict:"A",scope:!0,compile:function(){return{pre:function(n){e.createContext(n)}}}}}]),angular.module("duScroll.scrollContainer",["duScroll.scrollContainerAPI"]).directive("duScrollContainer",["scrollContainerAPI",function(e){return{restrict:"A",scope:!0,compile:function(){return{pre:function(n,t,r){r.$observe("duScrollContainer",function(r){angular.isString(r)&&(r=document.getElementById(r)),r=angular.isElement(r)?angular.element(r):t,e.setContainer(n,r),n.$on("$destroy",function(){e.removeContainer(n)})})}}}}}]),angular.module("duScroll.scrollspy",["duScroll.spyAPI"]).directive("duScrollspy",["spyAPI","$timeout","$rootScope",function(e,n,t){var r=function(e,n,t){angular.isElement(e)?this.target=e:angular.isString(e)&&(this.targetId=e),this.$element=n,this.offset=t};return r.prototype.getTargetElement=function(){return!this.target&&this.targetId&&(this.target=document.getElementById(this.targetId)),this.target},r.prototype.getTargetPosition=function(){var e=this.getTargetElement();return e?e.getBoundingClientRect():void 0},r.prototype.flushTargetCache=function(){this.targetId&&(this.target=void 0)},{link:function(o,l,i){var u,c=i.ngHref||i.href;c&&-1!==c.indexOf("#")?u=c.replace(/.*(?=#[^\s]+$)/,"").substring(1):i.duScrollspy&&(u=i.duScrollspy),u&&n(function(){var n=new r(u,l,-(i.offset?parseInt(i.offset,10):0));e.addSpy(n),o.$on("$destroy",function(){e.removeSpy(n)}),o.$on("$locationChangeSuccess",n.flushTargetCache.bind(n)),t.$on("$stateChangeSuccess",n.flushTargetCache.bind(n))},0)}}}]);
//# sourceMappingURL=angular-scroll.min.js.map