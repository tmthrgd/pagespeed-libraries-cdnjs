(function(){var af,B,an,i,o,Q,ae,e,q,U,al,ad,ak,k,g,r,ac,M,ah,J,a,R,j,t,d,L,w,F,O,A,T,aj,y,Y,z,p,K,am,C,n,v,ag,H,ab,aa,ai,u,x,P,f,Z,S,m,X,G,ao,s,E,W,I,D,b,c,aq,V,N=[].slice,ap={}.hasOwnProperty,l=function(av,at){for(var ar in at){if(ap.call(at,ar)){av[ar]=at[ar]}}function au(){this.constructor=av}au.prototype=at.prototype;av.prototype=new au();av.__super__=at.prototype;return av},h=function(ar,at){return function(){return ar.apply(at,arguments)}};af={toString:function(){return"Bacon"}};af.version="0.7.12";af.fromBinder=function(ar,at){if(at==null){at=aq.id}return new al(aj(af,"fromBinder",ar,at),function(av){var au;return au=ar(function(){var ax,az,ay,aB,aA,aw;ax=1<=arguments.length?N.call(arguments,0):[];aB=at.apply(null,ax);if(!(C(aB)&&aq.last(aB) instanceof U)){aB=[aB]}ay=af.more;for(aA=0,aw=aB.length;aA<aw;aA++){az=aB[aA];ay=av(az=s(az));if(ay===af.noMore||az.isEnd()){if(au!=null){au()}else{af.scheduler.setTimeout((function(){return au()}),0)}return ay}}return ay})})};af.$={asEventStream:function(at,ar,au){var av;if(v(ar)){av=[ar,null],au=av[0],ar=av[1]}return b(this.selector||this,"asEventStream",at,af.fromBinder((function(aw){return function(ax){aw.on(at,ar,ax);return function(){return aw.off(at,ar,ax)}}})(this),au))}};if((V=typeof jQuery!=="undefined"&&jQuery!==null?jQuery:typeof Zepto!=="undefined"&&Zepto!==null?Zepto:null)!=null){V.fn.asEventStream=af.$.asEventStream}af.fromEventTarget=function(aA,az,at){var ar,au,ay,ax,aw,av;ar=(ay=aA.addEventListener)!=null?ay:(ax=aA.addListener)!=null?ax:aA.bind;au=(aw=aA.removeEventListener)!=null?aw:(av=aA.removeListener)!=null?av:aA.unbind;return b(af,"fromEventTarget",aA,az,af.fromBinder(function(aB){ar.call(aA,az,aB);return function(){return au.call(aA,az,aB)}},at))};af.fromPromise=function(ar,at){return b(af,"fromPromise",ar,af.fromBinder(function(au){ar.then(au,function(av){return au(new q(av))});return function(){if(at){return typeof ar.abort==="function"?ar.abort():void 0}}},(function(au){return[au,y()]})))};af.noMore=["<no-more>"];af.more=["<more>"];af.later=function(ar,at){return b(af,"later",ar,at,af.sequentially(ar,[at]))};af.sequentially=function(au,ar){var at;at=0;return b(af,"sequentially",au,ar,af.fromPoll(au,function(){var av;av=ar[at++];if(at<ar.length){return av}else{if(at===ar.length){return[av,y()]}else{return y()}}}))};af.repeatedly=function(au,ar){var at;at=0;return b(af,"repeatedly",au,ar,af.fromPoll(au,function(){return ar[at++%ar.length]}))};af.spy=function(ar){return G.push(ar)};G=[];X=function(aw){var au,av,at,ar;if(G.length){if(!X.running){try{X.running=true;ar=[];for(av=0,at=G.length;av<at;av++){au=G[av];ar.push(au(aw))}return ar}finally{delete X.running}}}};c=function(ar){return function(){var au,av,aw,at;aw=arguments[0],au=2<=arguments.length?N.call(arguments,1):[];if(typeof aw==="object"&&au.length){av=aw;at=au[0];aw=function(){return av[at].apply(av,arguments)};au=au.slice(1)}return ar.apply(null,[aw].concat(N.call(au)))}};ab=function(at,ar){return c(function(){var au,av,aw;av=arguments[0],au=2<=arguments.length?N.call(arguments,1):[];aw=S(ar,[function(ax,ay){return av.apply(null,N.call(ax).concat([ay]))}]);return b.apply(null,[af,at,av].concat(N.call(au),[af.combineAsArray(au).flatMap(aw)]))})};af.fromCallback=ab("fromCallback",function(){var ar,at;at=arguments[0],ar=2<=arguments.length?N.call(arguments,1):[];return af.fromBinder(function(au){aa(at,ar)(au);return Z},(function(au){return[au,y()]}))});af.fromNodeCallback=ab("fromNodeCallback",function(){var ar,at;at=arguments[0],ar=2<=arguments.length?N.call(arguments,1):[];return af.fromBinder(function(au){aa(at,ar)(au);return Z},function(au,av){if(au){return[new q(au),y()]}return[av,y()]})});af.fromPoll=function(ar,at){return b(af,"fromPoll",ar,at,af.fromBinder((function(au){var av;av=af.scheduler.setInterval(au,ar);return function(){return af.scheduler.clearInterval(av)}}),at))};af.interval=function(ar,at){if(at==null){at={}}return b(af,"interval",ar,at,af.fromPoll(ar,function(){return f(at)}))};af.constant=function(ar){return new r(aj(af,"constant",ar),function(at){at(am(ar));at(y());return Z})};af.never=function(){return b(af,"never",af.fromArray([]))};af.once=function(ar){return b(af,"once",ar,af.fromArray([ar]))};af.fromArray=function(ar){j(ar);ar=F(ar);return new al(aj(af,"fromArray",ar),function(au){var av,at;at=false;av=function(){var aw,ax;if(aq.empty(ar)){return au(y())}else{ax=ar.splice(0,1)[0];aw=au(s(ax));if((aw!==af.noMore)&&!at){return av()}}};av();return function(){return at=true}})};af.mergeAll=function(){var ar;ar=1<=arguments.length?N.call(arguments,0):[];if(C(ar[0])){ar=ar[0]}if(ar.length){return new al(aj.apply(null,[af,"mergeAll"].concat(N.call(ar))),function(aw){var au,at,av;au=0;av=function(ax){return function(ay){return ax.subscribeInternal(function(aA){var az;if(aA.isEnd()){au++;if(au===ar.length){return aw(y())}else{return af.more}}else{az=aw(aA);if(az===af.noMore){ay()}return az}})}};at=aq.map(av,ar);return O.apply(null,at)})}else{return af.never()}};af.zipAsArray=function(){var ar;ar=1<=arguments.length?N.call(arguments,0):[];if(C(ar[0])){ar=ar[0]}return b.apply(null,[af,"zipAsArray"].concat(N.call(ar),[af.zipWith(ar,function(){var at;at=1<=arguments.length?N.call(arguments,0):[];return at})]))};af.zipWith=function(){var at,au,ar;at=arguments[0],au=2<=arguments.length?N.call(arguments,1):[];if(!v(at)){ar=[at,au[0]],au=ar[0],at=ar[1]}au=aq.map((function(av){return av.toEventStream()}),au);return b.apply(null,[af,"zipWith",at].concat(N.call(au),[af.when(au,at)]))};af.groupSimultaneous=function(){var at,ar,au;au=1<=arguments.length?N.call(arguments,0):[];if(au.length===1&&C(au[0])){au=au[0]}ar=(function(){var ax,aw,av;av=[];for(ax=0,aw=au.length;ax<aw;ax++){at=au[ax];av.push(new B(at))}return av})();return b.apply(null,[af,"groupSimultaneous"].concat(N.call(au),[af.when(ar,(function(){var av;av=1<=arguments.length?N.call(arguments,0):[];return av}))]))};af.combineAsArray=function(){var au,av,at,ax,ay,aw,ar;ay=1<=arguments.length?N.call(arguments,0):[];if(ay.length===1&&C(ay[0])){ay=ay[0]}for(au=aw=0,ar=ay.length;aw<ar;au=++aw){ax=ay[au];if(!(ag(ax))){ay[au]=af.constant(ax)}}if(ay.length){at=(function(){var aB,aA,az;az=[];for(aB=0,aA=ay.length;aB<aA;aB++){av=ay[aB];az.push(new ah(av,true,av.subscribeInternal))}return az})();return b.apply(null,[af,"combineAsArray"].concat(N.call(ay),[af.when(at,(function(){var az;az=1<=arguments.length?N.call(arguments,0):[];return az})).toProperty()]))}else{return af.constant([])}};af.onValues=function(){var at,au,ar;au=2<=arguments.length?N.call(arguments,0,ar=arguments.length-1):(ar=0,[]),at=arguments[ar++];return af.combineAsArray(au).onValues(at)};af.combineWith=function(){var ar,at;ar=arguments[0],at=2<=arguments.length?N.call(arguments,1):[];return b.apply(null,[af,"combineWith",ar].concat(N.call(at),[af.combineAsArray(at).map(function(au){return ar.apply(null,au)})]))};af.combineTemplate=function(az){var au,av,aB,aA,at,ax,ar,ay,aw,aC;ar=[];aC=[];ax=function(aD){return aD[aD.length-1]};aw=function(aD,aE,aF){return ax(aD)[aE]=aF};au=function(aE,aD){return function(aG,aF){return aw(aG,aE,aF[aD])}};at=function(aD,aE){return function(aF){return aw(aF,aD,aE)}};ay=function(aD){if(C(aD)){return[]}else{return{}}};aB=function(aE,aF){var aG,aD;if(ag(aF)){aC.push(aF);return ar.push(au(aE,aC.length-1))}else{if(aF===Object(aF)&&typeof aF!=="function"&&!(aF instanceof RegExp)&&!(aF instanceof Date)){aD=function(aH){return function(aI){var aJ;aJ=ay(aF);aw(aI,aH,aJ);return aI.push(aJ)}};aG=function(aH){return aH.pop()};ar.push(aD(aE));aA(aF);return ar.push(aG)}else{return ar.push(at(aE,aF))}}};aA=function(aD){return aq.each(aD,aB)};aA(az);av=function(aG){var aF,aI,aD,aH,aE;aD=ay(az);aF=[aD];for(aH=0,aE=ar.length;aH<aE;aH++){aI=ar[aH];aI(aF,aG)}return aD};return b(af,"combineTemplate",az,af.combineAsArray(aC).map(av))};af.retry=function(av){var au,ax,ay,at,ar,aw;if(!v(av.source)){throw"'source' option has to be a function"}aw=av.source;at=av.retries||0;ay=av.maxRetries||at;au=av.interval||function(){return 0};ax=av.isRetryable||function(){return true};ar=function(aA){var az;az={source:aw,retries:at-1,maxRetries:ay,interval:au,isRetryable:ax};return af.later(au(aA)).filter(false).concat(af.retry(az))};return b(af,"retry",av,aw().flatMapError(function(az){if(ax(az)&&at>0){return ar({error:az,retriesDone:ay-at})}else{return af.once(new af.Error(az))}}))};Y=0;U=(function(){function ar(){this.id=++Y}ar.prototype.isEvent=function(){return true};ar.prototype.isEnd=function(){return false};ar.prototype.isInitial=function(){return false};ar.prototype.isNext=function(){return false};ar.prototype.isError=function(){return false};ar.prototype.hasValue=function(){return false};ar.prototype.filter=function(){return true};ar.prototype.inspect=function(){return this.toString()};ar.prototype.log=function(){return this.toString()};return ar})();ak=(function(at){l(ar,at);function ar(au){ar.__super__.constructor.call(this);if(v(au)){this.value=aq.cached(au)}else{this.value=aq.always(au)}}ar.prototype.isNext=function(){return true};ar.prototype.hasValue=function(){return true};ar.prototype.fmap=function(av){var au;au=this.value;return this.apply(function(){return av(au())})};ar.prototype.apply=function(au){return new ar(au)};ar.prototype.filter=function(au){return au(this.value())};ar.prototype.toString=function(){return aq.toString(this.value())};ar.prototype.log=function(){return this.value()};return ar})(U);ad=(function(at){l(ar,at);function ar(){return ar.__super__.constructor.apply(this,arguments)}ar.prototype.isInitial=function(){return true};ar.prototype.isNext=function(){return false};ar.prototype.apply=function(au){return new ar(au)};ar.prototype.toNext=function(){return new ak(this.value)};return ar})(ak);e=(function(ar){l(at,ar);function at(){return at.__super__.constructor.apply(this,arguments)}at.prototype.isEnd=function(){return true};at.prototype.fmap=function(){return this};at.prototype.apply=function(){return this};at.prototype.toString=function(){return"<end>"};return at})(U);q=(function(ar){l(at,ar);function at(au){this.error=au}at.prototype.isError=function(){return true};at.prototype.fmap=function(){return this};at.prototype.apply=function(){return this};at.prototype.toString=function(){return"<error> "+aq.toString(this.error)};return at})(U);K=0;g=(function(){function ar(at){this.flatMapError=h(this.flatMapError,this);this.id=++K;b(at,this)}ar.prototype.onValue=function(){var at;at=ai(arguments);return this.subscribe(function(au){if(au.hasValue()){return at(au.value())}})};ar.prototype.onValues=function(at){return this.onValue(function(au){return at.apply(null,au)})};ar.prototype.onError=function(){var at;at=ai(arguments);return this.subscribe(function(au){if(au.isError()){return at(au.error)}})};ar.prototype.onEnd=function(){var at;at=ai(arguments);return this.subscribe(function(au){if(au.isEnd()){return at()}})};ar.prototype.errors=function(){return b(this,"errors",this.filter(function(){return false}))};ar.prototype.filter=function(){var at,au;au=arguments[0],at=2<=arguments.length?N.call(arguments,1):[];return T(this,au,at,function(av){return b(this,"filter",av,this.withHandler(function(aw){if(aw.filter(av)){return this.push(aw)}else{return af.more}}))})};ar.prototype.takeWhile=function(){var at,au;au=arguments[0],at=2<=arguments.length?N.call(arguments,1):[];return T(this,au,at,function(av){return b(this,"takeWhile",av,this.withHandler(function(aw){if(aw.filter(av)){return this.push(aw)}else{this.push(y());return af.noMore}}))})};ar.prototype.endOnError=function(){var at,au;au=arguments[0],at=2<=arguments.length?N.call(arguments,1):[];if(au==null){au=true}return T(this,au,at,function(av){return b(this,"endOnError",this.withHandler(function(aw){if(aw.isError()&&av(aw.error)){this.push(aw);return this.push(y())}else{return this.push(aw)}}))})};ar.prototype.take=function(at){if(at<=0){return af.never()}return b(this,"take",at,this.withHandler(function(au){if(!au.hasValue()){return this.push(au)}else{at--;if(at>0){return this.push(au)}else{if(at===0){this.push(au)}this.push(y());return af.noMore}}}))};ar.prototype.map=function(){var at,au;au=arguments[0],at=2<=arguments.length?N.call(arguments,1):[];if(au instanceof r){return au.sampledBy(this,p)}else{return T(this,au,at,function(av){return b(this,"map",av,this.withHandler(function(aw){return this.push(aw.fmap(av))}))})}};ar.prototype.mapError=function(){var at;at=ai(arguments);return b(this,"mapError",at,this.withHandler(function(au){if(au.isError()){return this.push(f(at(au.error)))}else{return this.push(au)}}))};ar.prototype.mapEnd=function(){var at;at=ai(arguments);return b(this,"mapEnd",at,this.withHandler(function(au){if(au.isEnd()){this.push(f(at(au)));this.push(y());return af.noMore}else{return this.push(au)}}))};ar.prototype.doAction=function(){var at;at=ai(arguments);return b(this,"doAction",at,this.withHandler(function(au){if(au.hasValue()){at(au.value())}return this.push(au)}))};ar.prototype.skip=function(at){return b(this,"skip",at,this.withHandler(function(au){if(!au.hasValue()){return this.push(au)}else{if(at>0){at--;return af.more}else{return this.push(au)}}}))};ar.prototype.skipDuplicates=function(at){if(at==null){at=function(av,au){return av===au}}return b(this,"skipDuplicates",this.withStateMachine(k,function(av,au){if(!au.hasValue()){return[av,[au]]}else{if(au.isInitial()||av===k||!at(av.get(),au.value())){return[new M(au.value()),[au]]}else{return[av,[]]}}}))};ar.prototype.skipErrors=function(){return b(this,"skipErrors",this.withHandler(function(at){if(at.isError()){return af.more}else{return this.push(at)}}))};ar.prototype.withStateMachine=function(at,av){var au;au=at;return b(this,"withStateMachine",at,av,this.withHandler(function(aA){var az,aC,ax,aD,ay,aB,aw;az=av(au,aA);aC=az[0],aD=az[1];au=aC;ay=af.more;for(aB=0,aw=aD.length;aB<aw;aB++){ax=aD[aB];ay=this.push(ax);if(ay===af.noMore){return ay}}return ay}))};ar.prototype.scan=function(au,ax,aw){var av,ay,az,at;ay=ao(ax);ax=aw?ay:function(aA,aB){return ay(aA(),aB())};av=I(au).map(function(aA){return aq.always(aA)});at=(function(aA){return function(aF){var aE,aD,aC,aB;aE=false;aB=Z;aD=af.more;aC=function(){if(!aE){return av.forEach(function(aG){aE=true;aD=aF(new ad(aG));if(aD===af.noMore){aB();return aB=Z}})}};aB=aA.subscribeInternal(function(aI){var aG,aH;if(aI.hasValue()){if(aE&&aI.isInitial()){return af.more}else{if(!aI.isInitial()){aC()}aE=true;aH=av.getOrElse(function(){return void 0});aG=aq.cached(function(){return ax(aH,aI.value)});av=new M(aG);return aF(aI.apply(aG))}}else{if(aI.isEnd()){aD=aC()}if(aD!==af.noMore){return aF(aI)}}});J.whenDoneWith(az,aC);return aB}})(this);return az=new r(aj(this,"scan",au,ax),at)};ar.prototype.fold=function(at,au){return b(this,"fold",at,au,this.scan(at,au).sampledBy(this.filter(false).mapEnd().toProperty()))};ar.prototype.zip=function(at,au){if(au==null){au=Array}return b(this,"zip",at,af.zipWith([this,at],au))};ar.prototype.diff=function(au,at){at=ao(at);return b(this,"diff",au,at,this.scan([au],function(av,aw){return[aw,at(av[0],aw)]}).filter(function(av){return av.length===2}).map(function(av){return av[1]}))};ar.prototype.flatMap=function(){return z(this,P(arguments))};ar.prototype.flatMapFirst=function(){return z(this,P(arguments),true)};ar.prototype.flatMapLatest=function(){var at,au;at=P(arguments);au=this.toEventStream();return b(this,"flatMapLatest",at,au.flatMap(function(av){return x(at(av)).takeUntil(au)}))};ar.prototype.flatMapError=function(at){return b(this,"flatMapError",at,this.mapError(function(au){return new af.Error(au)}).flatMap(function(au){if(au instanceof af.Error){return at(au.error)}else{return af.once(au)}}))};ar.prototype.not=function(){return b(this,"not",this.map(function(at){return !at}))};ar.prototype.log=function(){var at;at=1<=arguments.length?N.call(arguments,0):[];this.subscribe(function(au){return typeof console!=="undefined"&&console!==null?typeof console.log==="function"?console.log.apply(console,N.call(at).concat([au.log()])):void 0:void 0});return this};ar.prototype.slidingWindow=function(au,at){if(at==null){at=0}return b(this,"slidingWindow",au,at,this.scan([],(function(av,aw){return av.concat([aw]).slice(-au)})).filter((function(av){return av.length>=at})))};ar.prototype.combine=function(at,av){var au;au=ao(av);return b(this,"combine",at,av,af.combineAsArray(this,at).map(function(aw){return au(aw[0],aw[1])}))};ar.prototype.decode=function(at){return b(this,"decode",at,this.combine(af.combineTemplate(at),function(av,au){return au[av]}))};ar.prototype.awaiting=function(at){return b(this,"awaiting",at,af.groupSimultaneous(this,at).map(function(au){var av,aw;av=au[0],aw=au[1];return aw.length===0}).toProperty(false).skipDuplicates())};ar.prototype.name=function(at){this.toString=function(){return at};return this};ar.prototype.withDescription=function(){return aj.apply(null,arguments).apply(this)};return ar})();g.prototype.reduce=g.prototype.fold;g.prototype.assign=g.prototype.onValue;z=function(ar,au,at){return new al(aj(ar,"flatMap"+(at?"First":""),au),function(av){var aw,ax;ax=new i();aw=function(ay){ay();if(ax.empty()){return av(y())}};ax.add(function(az,ay){return ar.subscribeInternal(function(aA){var aB;if(aA.isEnd()){return aw(ay)}else{if(aA.isError()){return av(aA)}else{if(at&&ax.count()>1){return af.more}else{if(ax.unsubscribed){return af.noMore}aB=x(au(aA.value()));return ax.add(function(aD,aC){return aB.subscribeInternal(function(aF){var aE;if(aF.isEnd()){aw(aC);return af.noMore}else{if(aF instanceof ad){aF=aF.toNext()}aE=av(aF);if(aE===af.noMore){aD()}return aE}})})}}}})});return ax.unsubscribe})};al=(function(at){l(ar,at);function ar(aw,au){var av;if(v(aw)){au=aw;aw=[]}ar.__super__.constructor.call(this,aw);d(au);av=new ae(au);this.subscribeInternal=av.subscribe;this.subscribe=J.wrappedSubscribe(this);this.hasSubscribers=av.hasSubscribers;X(this)}ar.prototype.delay=function(au){return b(this,"delay",au,this.flatMap(function(av){return af.later(au,av)}))};ar.prototype.debounce=function(au){return b(this,"debounce",au,this.flatMapLatest(function(av){return af.later(au,av)}))};ar.prototype.debounceImmediate=function(au){return b(this,"debounceImmediate",au,this.flatMapFirst(function(av){return af.once(av).concat(af.later(au).filter(false))}))};ar.prototype.throttle=function(au){return b(this,"throttle",au,this.bufferWithTime(au).map(function(av){return av[av.length-1]}))};ar.prototype.bufferWithTime=function(au){return b(this,"bufferWithTime",au,this.bufferWithTimeOrCount(au,Number.MAX_VALUE))};ar.prototype.bufferWithCount=function(au){return b(this,"bufferWithCount",au,this.bufferWithTimeOrCount(void 0,au))};ar.prototype.bufferWithTimeOrCount=function(au,av){var aw;aw=function(ax){if(ax.values.length===av){return ax.flush()}else{if(au!==void 0){return ax.schedule()}}};return b(this,"bufferWithTimeOrCount",au,av,this.buffer(au,aw,aw))};ar.prototype.buffer=function(aw,ay,av){var au,az,ax;if(ay==null){ay=(function(){})}if(av==null){av=(function(){})}au={scheduled:false,end:null,values:[],flush:function(){var aA;this.scheduled=false;if(this.values.length>0){aA=this.push(f(this.values));this.values=[];if(this.end!=null){return this.push(this.end)}else{if(aA!==af.noMore){return av(this)}}}else{if(this.end!=null){return this.push(this.end)}}},schedule:function(){if(!this.scheduled){this.scheduled=true;return aw((function(aA){return function(){return aA.flush()}})(this))}}};ax=af.more;if(!v(aw)){az=aw;aw=function(aA){return af.scheduler.setTimeout(aA,az)}}return b(this,"buffer",this.withHandler(function(aA){au.push=this.push;if(aA.isError()){ax=this.push(aA)}else{if(aA.isEnd()){au.end=aA;if(!au.scheduled){au.flush()}}else{au.values.push(aA.value());ay(au)}}return ax}))};ar.prototype.merge=function(au){var av;t(au);av=this;return b(av,"merge",au,af.mergeAll(this,au))};ar.prototype.toProperty=function(au){if(arguments.length===0){au=k}return b(this,"toProperty",au,this.scan(au,H,true))};ar.prototype.toEventStream=function(){return this};ar.prototype.sampledBy=function(au,av){return b(this,"sampledBy",au,av,this.toProperty().sampledBy(au,av))};ar.prototype.concat=function(au){var av;av=this;return new ar(aj(av,"concat",au),function(ax){var ay,aw;aw=Z;ay=av.subscribeInternal(function(az){if(az.isEnd()){return aw=au.subscribeInternal(ax)}else{return ax(az)}});return function(){ay();return aw()}})};ar.prototype.takeUntil=function(au){var av;av={};return b(this,"takeUntil",au,af.groupSimultaneous(this.mapEnd(av),au.skipErrors()).withHandler(function(az){var aC,ay,aB,aA,ax,aw;if(!az.hasValue()){return this.push(az)}else{aw=az.value(),aC=aw[0],au=aw[1];if(au.length){return this.push(y())}else{ay=af.more;for(aA=0,ax=aC.length;aA<ax;aA++){aB=aC[aA];if(aB===av){ay=this.push(y())}else{ay=this.push(f(aB))}}return ay}}}))};ar.prototype.skipUntil=function(av){var au;au=av.take(1).map(true).toProperty(false);return b(this,"skipUntil",av,this.filter(au))};ar.prototype.skipWhile=function(){var au,aw,av;aw=arguments[0],au=2<=arguments.length?N.call(arguments,1):[];av=false;return T(this,aw,au,function(ax){return b(this,"skipWhile",ax,this.withHandler(function(ay){if(av||!ay.hasValue()||!ax(ay.value())){if(ay.hasValue()){av=true}return this.push(ay)}else{return af.more}}))})};ar.prototype.startWith=function(au){return b(this,"startWith",au,af.once(au).concat(this))};ar.prototype.withHandler=function(av){var au;au=new ae(this.subscribeInternal,av);return new ar(aj(this,"withHandler",av),au.subscribe)};return ar})(g);r=(function(ar){l(at,ar);function at(aw,au,av){if(v(aw)){av=au;au=aw;aw=[]}at.__super__.constructor.call(this,aw);d(au);if(av===true){this.subscribeInternal=au}else{this.subscribeInternal=new ac(this,au,av).subscribe}this.subscribe=J.wrappedSubscribe(this);X(this)}at.prototype.sampledBy=function(aw,az){var av,au,ax,aA,ay;if(az!=null){az=ao(az)}else{av=true;az=function(aB){return aB()}}ay=new ah(this,false,this.subscribeInternal,av);ax=new ah(aw,true,aw.subscribeInternal,av);aA=af.when([ay,ax],az);au=aw instanceof at?aA.toProperty():aA;return b(this,"sampledBy",aw,az,au)};at.prototype.sample=function(au){return b(this,"sample",au,this.sampledBy(af.interval(au,{})))};at.prototype.changes=function(){return new al(aj(this,"changes"),(function(au){return function(av){return au.subscribeInternal(function(aw){if(!aw.isInitial()){return av(aw)}})}})(this))};at.prototype.withHandler=function(au){return new at(aj(this,"withHandler",au),this.subscribeInternal,au)};at.prototype.toProperty=function(){L(arguments);return this};at.prototype.toEventStream=function(){return new al(aj(this,"toEventStream"),(function(au){return function(av){return au.subscribeInternal(function(aw){if(aw.isInitial()){aw=aw.toNext()}return av(aw)})}})(this))};at.prototype.and=function(au){return b(this,"and",au,this.combine(au,function(av,aw){return av&&aw}))};at.prototype.or=function(au){return b(this,"or",au,this.combine(au,function(av,aw){return av||aw}))};at.prototype.delay=function(au){return this.delayChanges("delay",au,function(av){return av.delay(au)})};at.prototype.debounce=function(au){return this.delayChanges("debounce",au,function(av){return av.debounce(au)})};at.prototype.throttle=function(au){return this.delayChanges("throttle",au,function(av){return av.throttle(au)})};at.prototype.delayChanges=function(){var aw,av,au;aw=2<=arguments.length?N.call(arguments,0,au=arguments.length-1):(au=0,[]),av=arguments[au++];return b.apply(null,[this].concat(N.call(aw),[a(this,av(this.changes()))]))};at.prototype.takeUntil=function(av){var au;au=this.changes().takeUntil(av);return b(this,"takeUntil",av,a(this,au))};at.prototype.startWith=function(au){return b(this,"startWith",au,this.scan(au,function(aw,av){return av}))};return at})(g);T=function(aw,au,ar,av){var at;if(au instanceof r){at=au.sampledBy(aw,function(ay,ax){return[ay,ax]});return av.apply(at,[function(ax){var az,ay;az=ax[0],ay=ax[1];return az}]).map(function(ax){var az,ay;az=ax[0],ay=ax[1];return ay})}else{au=aa(au,ar);return av.apply(aw,[au])}};a=function(at,au){var ar;ar=new al(aj(at,"justInitValue"),function(ax){var av,aw;aw=null;av=at.subscribeInternal(function(ay){if(ay.hasValue()){aw=ay}return af.noMore});J.whenDoneWith(ar,function(){if(aw!=null){ax(aw)}return ax(y())});return av});return ar.concat(au).toProperty()};ae=(function(){function ar(aw,aC){var ay,aD,az,ax,aA,aB,aE,at,av,au;if(aw==null){aw=function(){return Z}}at=[];aB=[];aA=false;aD=false;this.hasSubscribers=function(){return at.length>0};az=null;av=Z;aE=function(aF){return at=aq.without(aF,at)};au=null;ay=function(){var aI,aH,aJ,aG,aF;if(au!=null){aH=au;au=null;aF=[];for(aJ=0,aG=aH.length;aJ<aG;aJ++){aI=aH[aJ];aF.push(aI())}return aF}};ax=function(aJ){var aI,aH,aL,aG,aK,aF;if(!aA){if(aJ===az){return}if(aJ.isError()){az=aJ}aL=false;try{aA=true;aG=at;for(aK=0,aF=aG.length;aK<aF;aK++){aH=aG[aK];aI=aH.sink(aJ);if(aI===af.noMore||aJ.isEnd()){aE(aH)}}aL=true}finally{aA=false;if(!aL){aB=[]}}aL=true;while(aB.length){aJ=aB.shift();this.push(aJ)}ay(aJ);if(this.hasSubscribers()){return af.more}else{av();return af.noMore}}else{aB.push(aJ);return af.more}};this.push=(function(aF){return function(aG){return J.inTransaction(aG,aF,ax,[aG])}})(this);if(aC==null){aC=function(aF){return this.push(aF)}}this.handleEvent=(function(aF){return function(aG){if(aG.isEnd()){aD=true}return aC.apply(aF,[aG])}})(this);this.subscribe=(function(aF){return function(aI){var aH,aG;if(aD){aI(y());return Z}else{d(aI);aH={sink:aI};at.push(aH);if(at.length===1){aG=aw(aF.handleEvent);av=function(){aG();return av=Z}}d(av);return function(){aE(aH);if(!aF.hasSubscribers()){return av()}}}}})(this)}return ar})();ac=(function(ar){l(at,ar);function at(az,au,aw){var ay,av,aA,ax;at.__super__.constructor.call(this,au,aw);ay=k;av=void 0;ax=this.push;au=this.subscribe;aA=false;this.push=(function(aB){return function(aC){if(aC.isEnd()){aA=true}if(aC.hasValue()){ay=new M(aC);av=J.currentEventId()}return ax.apply(aB,[aC])}})(this);this.subscribe=(function(aB){return function(aF){var aH,aE,aD,aC,aG;aE=false;aC=af.more;aD=function(){if(aC===af.noMore){return Z}else{if(aA){aF(y());return Z}else{return au.apply(this,[aF])}}};if(ay.isDefined&&(aB.hasSubscribers()||aA)){aH=J.currentEventId();aG=av;if(!aA&&aG&&aH&&aH!==aG){J.whenDoneWith(az,function(){if(av===aG){return aF(am(ay.get().value()))}});return aD()}else{J.inTransaction(void 0,aB,(function(){return aC=aF(am(ay.get().value()))}),[]);return aD()}}else{return aD()}}})(this)}return at})(ae);an=(function(ar){l(at,ar);function at(){var aB,ax,az,aw,ay,aA,av,au;az=void 0;aA=[];aB=false;ax=(function(aC){return function(aD){return function(aE){if(aE.isEnd()){au(aD);return af.noMore}else{return az(aE)}}}})(this);av=function(){var aE,aF,aD,aC;aC=[];for(aF=0,aD=aA.length;aF<aD;aF++){aE=aA[aF];aC.push(typeof aE.unsub==="function"?aE.unsub():void 0)}return aC};ay=function(aC){return aC.unsub=aC.input.subscribeInternal(ax(aC.input))};au=function(aD){var aE,aF,aG,aC;for(aE=aG=0,aC=aA.length;aG<aC;aE=++aG){aF=aA[aE];if(aF.input===aD){if(typeof aF.unsub==="function"){aF.unsub()}aA.splice(aE,1);return}}};aw=(function(aC){return function(aF){var aG,aH,aE,aD;az=aF;aD=F(aA);for(aH=0,aE=aD.length;aH<aE;aH++){aG=aD[aH];ay(aG)}return av}})(this);at.__super__.constructor.call(this,aj(af,"Bus"),aw);this.plug=(function(aC){return function(aD){var aE;if(aB){return}aE={input:aD};aA.push(aE);if((az!=null)){ay(aE)}return function(){return au(aD)}}})(this);this.push=(function(aC){return function(aD){return typeof az==="function"?az(f(aD)):void 0}})(this);this.error=(function(aC){return function(aD){return typeof az==="function"?az(new q(aD)):void 0}})(this);this.end=(function(aC){return function(){aB=true;av();return typeof az==="function"?az(y()):void 0}})(this)}return at})(al);ah=(function(){function ar(aw,av,at,au){this.obs=aw;this.sync=av;this.subscribe=at;this.lazy=au!=null?au:false;this.queue=[];if(this.subscribe==null){this.subscribe=this.obs.subscribeInternal}this.toString=this.obs.toString}ar.prototype.markEnded=function(){return this.ended=true};ar.prototype.consume=function(){if(this.lazy){return aq.always(this.queue[0])}else{return this.queue[0]}};ar.prototype.push=function(at){return this.queue=[at]};ar.prototype.mayHave=function(){return true};ar.prototype.hasAtLeast=function(){return this.queue.length};ar.prototype.flatten=true;return ar})();o=(function(ar){l(at,ar);function at(){return at.__super__.constructor.apply(this,arguments)}at.prototype.consume=function(){return this.queue.shift()};at.prototype.push=function(au){return this.queue.push(au)};at.prototype.mayHave=function(au){return !this.ended||this.queue.length>=au};at.prototype.hasAtLeast=function(au){return this.queue.length>=au};at.prototype.flatten=false;return at})(ah);B=(function(ar){l(at,ar);function at(au){this.obs=au;at.__super__.constructor.call(this,this.obs,true,this.obs.subscribeInternal)}at.prototype.consume=function(){var au;au=this.queue;this.queue=[];return function(){return au}};at.prototype.push=function(au){return this.queue.push(au())};at.prototype.hasAtLeast=function(){return true};return at})(ah);ah.isTrigger=function(ar){if(ar instanceof ah){return ar.sync}else{return ar instanceof al}};ah.fromObservable=function(ar){if(ar instanceof ah){return ar}else{if(ar instanceof r){return new ah(ar,false)}else{return new o(ar,true)}}};aj=function(){var ar,at,au;at=arguments[0],au=arguments[1],ar=3<=arguments.length?N.call(arguments,2):[];if((at||au) instanceof Q){return at||au}else{return new Q(at,au,ar)}};Q=(function(){function ar(aw,az,au){var ax,at,ay,av;ay=function(aA){if(C(aA)){return aq.flatMap(ay,aA)}else{if(ag(aA)){return[aA]}else{if(aA instanceof ah){return[aA.obs]}else{return[]}}}};av=null;ax=function(aF){var aD,aE,aC,aB,aA;aE=aF.internalDeps();aA=[];for(aC=0,aB=aE.length;aC<aB;aC++){aD=aE[aC];av[aD.id]=true;aA.push(ax(aD))}return aA};at=function(aA){if(av==null){av={};ax(this)}return av[aA.id]};this.apply=function(aB){var aA;aA=aq.cached((function(){return ay([aw].concat(au))}));aB.internalDeps=aB.internalDeps||aA;aB.dependsOn=at;aB.deps=aA;aB.toString=function(){return aq.toString(aw)+"."+aq.toString(az)+"("+aq.map(aq.toString,au)+")"};aB.inspect=function(){return aB.toString()};aB.desc=function(){return{context:aw,method:az,args:au}};return aB}}return ar})();b=function(){var at,au,ar;at=2<=arguments.length?N.call(arguments,0,ar=arguments.length-1):(ar=0,[]),au=arguments[ar++];return aj.apply(null,at).apply(au)};af.when=function(){var aG,aE,az,ay,aF,aw,aC,aB,aA,av,aK,aD,ar,aH,aI,au,at,aJ,aL,ax;av=1<=arguments.length?N.call(arguments,0):[];if(av.length===0){return af.never()}aF=av.length;aI="when: expecting arguments in the form (Observable+,function)+";R(aI,aF%2===0);ar=[];aA=[];aE=0;while(aE<aF){aB=aq.toArray(av[aE]);aG=av[aE+1];aC={f:(v(aG)?aG:(function(){return aG})),ixs:[]};aH=false;for(au=0,aJ=aB.length;au<aJ;au++){aD=aB[au];az=aq.indexOf(ar,aD);if(!aH){aH=ah.isTrigger(aD)}if(az<0){ar.push(aD);az=ar.length-1}ax=aC.ixs;for(at=0,aL=ax.length;at<aL;at++){ay=ax[at];if(ay.index===az){ay.count++}}aC.ixs.push({index:az,count:1})}R("At least one EventStream required",aH||(!aB.length));if(aB.length>0){aA.push(aC)}aE=aE+2}if(!ar.length){return af.never()}ar=aq.map(ah.fromObservable,ar);aw=(aq.any(ar,function(aM){return aM.flatten}))&&(A(aq.map((function(aM){return aM.obs}),ar)));return aK=new al(aj.apply(null,[af,"when"].concat(N.call(av))),function(aT){var aS,aR,aM,aO,aQ,aN,aP;aP=[];aM=false;aO=function(aW){var aV,aU,aX;aX=aW.ixs;for(aV=0,aU=aX.length;aV<aU;aV++){aE=aX[aV];if(!ar[aE.index].hasAtLeast(aE.count)){return false}}return true};aR=function(aU){return !aU.sync||aU.ended};aS=function(aW){var aV,aU,aX;aX=aW.ixs;for(aV=0,aU=aX.length;aV<aU;aV++){aE=aX[aV];if(!ar[aE.index].mayHave(aE.count)){return true}}};aQ=function(aU){return !aU.source.flatten};aN=function(aU){return function(aW){var aV,aY,aX;aY=function(){return J.whenDoneWith(aK,aV)};aX=function(){var a4,a3,a2,a0,a1,aZ;if(aP.length>0){a2=af.more;a0=aP.pop();for(a1=0,aZ=aA.length;a1<aZ;a1++){a3=aA[a1];if(aO(a3)){a4=(function(){var a6,a8,a7,a5;a7=a3.ixs;a5=[];for(a6=0,a8=a7.length;a6<a8;a6++){aE=a7[a6];a5.push(ar[aE.index].consume())}return a5})();a2=aT(a0.e.apply(function(){var a5,a6;a6=(function(){var a8,a9,a7;a7=[];for(a8=0,a9=a4.length;a8<a9;a8++){a5=a4[a8];a7.push(a5())}return a7})();return a3.f.apply(a3,a6)}));if(aP.length&&aw){aP=aq.filter(aQ,aP)}if(a2===af.noMore){return a2}else{return aX()}}}}else{return af.more}};aV=function(){var aZ;aZ=aX();if(aM){aM=false;if(aq.all(ar,aR)||aq.all(aA,aS)){aZ=af.noMore;aT(y())}}if(aZ===af.noMore){aW()}return aZ};return aU.subscribe(function(a0){var aZ;if(a0.isEnd()){aM=true;aU.markEnded();aY()}else{if(a0.isError()){aZ=aT(a0)}else{aU.push(a0.value);if(aU.sync){aP.push({source:aU,e:a0});if(aw){aY()}else{aV()}}}}if(aZ===af.noMore){aW()}return aZ||af.more})}};return O.apply(null,(function(){var aW,aU,aV;aV=[];for(aW=0,aU=ar.length;aW<aU;aW++){aD=ar[aW];aV.push(aN(aD))}return aV})())})};A=function(au,at){var ar;if(at==null){at=[]}ar=function(aw){var av;if(af._.contains(at,aw)){return true}else{av=aw.internalDeps();if(av.length){at.push(aw);return af._.any(av,ar)}else{at.push(aw);return false}}};return af._.any(au,ar)};af.update=function(){var au,at,ar,av;at=arguments[0],av=2<=arguments.length?N.call(arguments,1):[];ar=function(aw){return function(){var ax;ax=1<=arguments.length?N.call(arguments,0):[];return function(ay){return aw.apply(null,[ay].concat(ax))}}};au=av.length-1;while(au>0){if(!(av[au] instanceof Function)){av[au]=(function(aw){return function(){return aw}})(av[au])}av[au]=ar(av[au]);au=au-2}return b.apply(null,[af,"update",at].concat(N.call(av),[af.when.apply(af,av).scan(at,(function(aw,ax){return ax(aw)}))]))};O=function(){var ar;ar=1<=arguments.length?N.call(arguments,0):[];return new i(ar).unsubscribe};i=(function(){function ar(au){var av,aw,at;if(au==null){au=[]}this.unsubscribe=h(this.unsubscribe,this);this.unsubscribed=false;this.subscriptions=[];this.starting=[];for(aw=0,at=au.length;aw<at;aw++){av=au[aw];this.add(av)}}ar.prototype.add=function(av){var aw,au,at;if(this.unsubscribed){return}aw=false;au=Z;this.starting.push(av);at=(function(ax){return function(){if(ax.unsubscribed){return}aw=true;ax.remove(au);return aq.remove(av,ax.starting)}})(this);au=av(this.unsubscribe,at);if(!(this.unsubscribed||aw)){this.subscriptions.push(au)}aq.remove(av,this.starting);return au};ar.prototype.remove=function(at){if(this.unsubscribed){return}if((aq.remove(at,this.subscriptions))!==void 0){return at()}};ar.prototype.unsubscribe=function(){var av,aw,au,at;if(this.unsubscribed){return}this.unsubscribed=true;at=this.subscriptions;for(aw=0,au=at.length;aw<au;aw++){av=at[aw];av()}this.subscriptions=[];return this.starting=[]};ar.prototype.count=function(){if(this.unsubscribed){return 0}return this.subscriptions.length+this.starting.length};ar.prototype.empty=function(){return this.count()===0};return ar})();af.CompositeUnsubscribe=i;M=(function(){function ar(at){this.value=at}ar.prototype.getOrElse=function(){return this.value};ar.prototype.get=function(){return this.value};ar.prototype.filter=function(at){if(at(this.value)){return new ar(this.value)}else{return k}};ar.prototype.map=function(at){return new ar(at(this.value))};ar.prototype.forEach=function(at){return at(this.value)};ar.prototype.isDefined=true;ar.prototype.toArray=function(){return[this.value]};ar.prototype.inspect=function(){return"Some("+this.value+")"};ar.prototype.toString=function(){return this.inspect()};return ar})();k={getOrElse:function(ar){return ar},filter:function(){return k},map:function(){return k},forEach:function(){},isDefined:false,toArray:function(){return[]},inspect:function(){return"None"},toString:function(){return this.inspect()}};J=(function(){var av,aC,at,ax,aB,aA,az,ar,au,aw,ay;ar=void 0;au=[];aC=[];av=function(aD){if(ar){return aC.push(aD)}else{return aD()}};az=function(aD){return !aq.any(au,(function(aE){return aD.obs.dependsOn(aE.obs)}))};aw=function(aE,aD){if(ar){return au.push({obs:aE,f:aD})}else{return aD()}};ax=function(){while(!az(au[0])){au.push(au.splice(0,1)[0])}return au.splice(0,1)[0]};aB=function(){var aD;aD=[];while(au.length){aD.push(ax().f())}return aD};aA=function(aG,aF,aH,aE){var aD;if(ar){return aH.apply(aF,aE)}else{ar=aG;try{aD=aH.apply(aF,aE);aB()}finally{ar=void 0;while(aC.length){aH=aC.splice(0,1)[0];aH()}}return aD}};at=function(){if(ar){return ar.id}else{return void 0}};ay=function(aD){return function(aH){var aG,aF,aE;aE=false;aG=function(){};aF=function(){aE=true;return aG()};if(!aE){aG=aD.subscribeInternal(function(aI){return av(function(){var aJ;if(!aE){aJ=aH(aI);if(aJ===af.noMore){return aF()}}})})}return aF}};return{whenDoneWith:aw,inTransaction:aA,currentEventId:at,wrappedSubscribe:ay}})();af.EventStream=al;af.Property=r;af.Observable=g;af.Bus=an;af.Initial=ad;af.Next=ak;af.End=e;af.Error=q;Z=function(){};H=function(at,ar){return ar()};p=function(ar,at){return ar};am=function(ar){return new ad(aq.always(ar))};f=function(ar){return new ak(aq.always(ar))};y=function(){return new e()};s=function(ar){if(ar instanceof U){return ar}else{return f(ar)}};F=function(ar){return ar.slice(0)};R=function(ar,at){if(!at){throw ar}};t=function(ar){if(!(ar instanceof al)){throw"not an EventStream : "+ar}};d=function(ar){return R("not a function : "+ar,v(ar))};v=function(ar){return typeof ar==="function"};C=function(ar){return ar instanceof Array};ag=function(ar){return ar instanceof g};j=function(ar){if(!C(ar)){throw"not an array : "+ar}};L=function(ar){return R("no arguments supported",ar.length===0)};w=function(ar){if(typeof ar!=="string"){throw"not a string : "+ar}};S=function(at,ar){return function(){var au;au=1<=arguments.length?N.call(arguments,0):[];return at.apply(null,ar.concat(au))}};P=function(ar){if(ar.length===1&&ag(ar[0])){return aq.always(ar[0])}else{return ai(ar)}};ai=function(ar){ar=Array.prototype.slice.call(ar);return u.apply(null,ar)};u=c(function(){var ar,at;at=arguments[0],ar=2<=arguments.length?N.call(arguments,1):[];if(v(at)){if(ar.length){return S(at,ar)}else{return at}}else{if(n(at)){return E(at,ar)}else{return aq.always(at)}}});aa=function(at,ar){return u.apply(null,[at].concat(N.call(ar)))};x=function(ar){if(ag(ar)){return ar}else{return af.once(ar)}};n=function(ar){return(typeof ar==="string")&&ar.length>1&&ar.charAt(0)==="."};af.isFieldKey=n;E=function(au,ar){var at,av;av=au.slice(1).split(".");at=aq.map(D(ar),av);return function(ay){var ax,aw;for(ax=0,aw=at.length;ax<aw;ax++){au=at[ax];ay=au(ay)}return ay}};D=function(ar){return function(at){return function(av){var au;if(av==null){return void 0}else{au=av[at];if(v(au)){return au.apply(av,ar)}else{return au}}}}};W=function(ar){return ar.slice(1)};ao=function(at){var ar;if(v(at)){return at}else{if(n(at)){ar=W(at);return function(av,au){return av[ar](au)}}else{return R("not a function or a field key: "+at,false)}}};I=function(ar){if(ar instanceof M||ar===k){return ar}else{return new M(ar)}};aq={indexOf:Array.prototype.indexOf?function(at,ar){return at.indexOf(ar)}:function(au,ar){var av,ax,aw,at;for(av=aw=0,at=au.length;aw<at;av=++aw){ax=au[av];if(ar===ax){return av}}return -1},indexWhere:function(at,aw){var au,ax,av,ar;for(au=av=0,ar=at.length;av<ar;au=++av){ax=at[au];if(aw(ax)){return au}}return -1},head:function(ar){return ar[0]},always:function(ar){return function(){return ar}},negate:function(ar){return function(at){return !ar(at)}},empty:function(ar){return ar.length===0},tail:function(ar){return ar.slice(1,ar.length)},filter:function(ax,av){var au,ar,aw,at;au=[];for(aw=0,at=av.length;aw<at;aw++){ar=av[aw];if(ax(ar)){au.push(ar)}}return au},map:function(ax,av){var ar,aw,au,at;at=[];for(aw=0,au=av.length;aw<au;aw++){ar=av[aw];at.push(ax(ar))}return at},each:function(at,aw){var au,av,ar;ar=[];for(au in at){av=at[au];ar.push(aw(au,av))}return ar},toArray:function(ar){if(C(ar)){return ar}else{return[ar]}},contains:function(at,ar){return aq.indexOf(at,ar)!==-1},id:function(ar){return ar},last:function(ar){return ar[ar.length-1]},all:function(au,aw){var ar,av,at;if(aw==null){aw=aq.id}for(av=0,at=au.length;av<at;av++){ar=au[av];if(!aw(ar)){return false}}return true},any:function(au,aw){var ar,av,at;if(aw==null){aw=aq.id}for(av=0,at=au.length;av<at;av++){ar=au[av];if(aw(ar)){return true}}return false},without:function(ar,at){return aq.filter((function(au){return au!==ar}),at)},remove:function(ar,at){var au;au=aq.indexOf(at,ar);if(au>=0){return at.splice(au,1)}},fold:function(av,au,ax){var ar,aw,at;for(aw=0,at=av.length;aw<at;aw++){ar=av[aw];au=ax(au,ar)}return au},flatMap:function(at,ar){return aq.fold(ar,[],(function(av,au){return av.concat(at(au))}))},cached:function(at){var ar;ar=k;return function(){if(ar===k){ar=at();at=null}return ar}},toString:function(aw){var at,au,ar,av;try{m++;if(aw==null){return"undefined"}else{if(v(aw)){return"function"}else{if(C(aw)){if(m>5){return"[..]"}return"["+aq.map(aq.toString,aw).toString()+"]"}else{if(((aw!=null?aw.toString:void 0)!=null)&&aw.toString!==Object.prototype.toString){return aw.toString()}else{if(typeof aw==="object"){if(m>5){return"{..}"}au=(function(){var ax;ax=[];for(ar in aw){if(!ap.call(aw,ar)){continue}av=(function(){try{return aw[ar]}catch(ay){at=ay;return at}})();ax.push(aq.toString(ar)+":"+aq.toString(av))}return ax})();return"{"+au+"}"}else{return aw}}}}}}finally{m--}}};m=0;af._=aq;af.scheduler={setTimeout:function(ar,at){return setTimeout(ar,at)},setInterval:function(at,ar){return setInterval(at,ar)},clearInterval:function(ar){return clearInterval(ar)},now:function(){return new Date().getTime()}};if((typeof define!=="undefined"&&define!==null)&&(define.amd!=null)){define([],function(){return af});this.Bacon=af}else{if(typeof module!=="undefined"&&module!==null){module.exports=af;af.Bacon=af}else{this.Bacon=af}}}).call(this);