// ==========================================================================
// Project:   Ember Data Django Rest Adapter
// Copyright: 
// License:   
// ==========================================================================



// Version: 0.13
// Last commit: 18cd8a2 (2013-06-16 07:12:38 -0700)


!function(){var e,t;!function(){var n={},r={};e=function(e,t,r){n[e]={deps:t,callback:r}},t=function(e){if(r[e])return r[e];r[e]={};var i,o,a,s,u;if(i=n[e],!i)throw new Error("Module '"+e+"' not found.");o=i.deps,a=i.callback,s=[];for(var h=0,d=o.length;d>h;h++)"exports"===o[h]?s.push(u={}):s.push(t(o[h]));var l=a.apply(this,s);return r[e]=u||l}}(),function(){Ember.get,DS.DjangoRESTSerializer=DS.RESTSerializer.extend({patchInJSONRoot:function(e,t,n){var r,i;return i=this.rootForType(t),n===!0&&(i=this.pluralize(i)),r={},r[i]=e,r},keyForHasMany:function(e,t){return this.keyForAttributeName(e,t)},keyForBelongsTo:function(e,t){return this.keyForAttributeName(e,t)},extract:function(e,t,n,r){t=this.patchInJSONRoot(t,n,!1),this._super(e,t,n,r)},extractMany:function(e,t,n,r){t=this.patchInJSONRoot(t,n,!0),this._super(e,t,n,r)}})}(),function(){function e(e){throw Ember.Logger.error(e,e.message),e}var t=Ember.get;Ember.set,DS.DjangoRESTAdapter=DS.RESTAdapter.extend({bulkCommit:!1,serializer:DS.DjangoRESTSerializer,createRecord:function(t,n,r){var i,o,a;return i=this.rootForType(n),o=this,a=this.serialize(r),this.ajax(this.buildURL(i),"POST",{data:a}).then(function(e){o.didCreateRecord(t,n,r,e)},function(e){throw o.didError(t,n,r,e),e}).then(null,e)},updateRecord:function(n,r,i){var o,a,s,u;return o=t(i,"id"),a=this.rootForType(r),s=this,u=this.serialize(i),this.ajax(this.buildURL(a,o),"PUT",{data:u}).then(function(e){s.didUpdateRecord(n,r,i,e)},function(e){throw s.didError(n,r,i,e),e}).then(null,e)},findMany:function(t,n,r,i){var o,a,s;return o=this,i?s=this.buildFindManyUrlWithParent(n,i):(a=this.rootForType(n),s=this.buildURL(a)),this.ajax(s,"GET",{}).then(function(e){o.didFindMany(t,n,e)}).then(null,e)},ajax:function(e,t,n){return n=n||{},n.cache=!1,this._super(e,t,n)},buildURL:function(e,t){var n=this._super(e,t);return"/"!==n.charAt(n.length-1)&&(n+="/"),n},buildFindManyUrlWithParent:function(e,t){var n,r,i,o,a;return i=t.get("findManyKey"),o=t.get("findManyType"),"string"!=typeof i&&t.eachRelationship(function(t,n){"hasMany"===n.kind&&n.type===e&&(i=n.key,o=n.parentType)}),i=this.serializer.keyForAttributeName(o,i),a=t.get("id"),n=this.rootForType(o),r=this.buildURL(n,a),r+i+"/"},didError:function(e,t,n,r){if(400===r.status){var i=JSON.parse(r.responseText),o={};n.eachAttribute(function(e){var n=this.serializer.keyForAttributeName(t,e);n in i&&(o[e]=i[n])},this),n.eachRelationship(function(e,n){var r=null;r="belongsTo"===n.kind?this.serializer.keyForBelongsTo(t,e):this.serializer.keyForHasMany(t,e),r in i&&(o[e]=i[r])},this),e.recordWasInvalid(n,o)}else this._super.apply(this,arguments)}})}(),function(){DS.DjangoRESTStore=DS.Store.extend({findMany:function(e,t,n,r){var i;return"object"==typeof r&&"hasMany"===r.kind&&(n.set("findManyKey",r.key),n.set("findManyType",r.parentType)),i=this._super(e,t,n,r),n.set("findManyKey",null),n.set("findManyType",null),i}})}()}(),"undefined"==typeof location||"localhost"!==location.hostname&&"127.0.0.1"!==location.hostname||Ember.Logger.warn("You are running a production build of Ember on localhost and won't receive detailed error messages. If you want full error messages please use the non-minified build provided on the Ember website.");