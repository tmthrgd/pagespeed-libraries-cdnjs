(function(){function t(e,n,r){var i=t.resolve(e);if(null==i){r=r||e,n=n||"root";var s=new Error('Failed to require "'+r+'" from "'+n+'"');throw s.path=r,s.parent=n,s.require=!0,s}var o=t.modules[i];return o.exports||(o.exports={},o.client=o.component=!0,o.call(this,o.exports,t.relative(i),o)),o.exports}var e=Object.prototype.hasOwnProperty;t.modules={},t.aliases={},t.resolve=function(n){n.charAt(0)==="/"&&(n=n.slice(1));var r=n+"/index.js",i=[n,n+".js",n+".json",n+"/index.js",n+"/index.json"];for(var s=0;s<i.length;s++){var n=i[s];if(e.call(t.modules,n))return n}if(e.call(t.aliases,r))return t.aliases[r]},t.normalize=function(e,t){var n=[];if("."!=t.charAt(0))return t;e=e.split("/"),t=t.split("/");for(var r=0;r<t.length;++r)".."==t[r]?e.pop():"."!=t[r]&&""!=t[r]&&n.push(t[r]);return e.concat(n).join("/")},t.register=function(e,n){t.modules[e]=n},t.alias=function(n,r){if(!e.call(t.modules,n))throw new Error('Failed to alias "'+n+'", it does not exist');t.aliases[r]=n},t.relative=function(n){function i(e,t){var n=e.length;while(n--)if(e[n]===t)return n;return-1}function s(e){var r=s.resolve(e);return t(r,n,e)}var r=t.normalize(n,"..");return s.resolve=function(e){var s=e.charAt(0);if("/"==s)return e.slice(1);if("."==s)return t.normalize(r,e);var o=n.split("/"),u=i(o,"deps")+1;return u||(u=0),e=o.slice(0,u+1).join("/")+"/deps/"+e,e},s.exists=function(n){return e.call(t.modules,s.resolve(n))},s},t.register("component-emitter/index.js",function(e,t,n){function r(e){if(e)return i(e)}function i(e){for(var t in r.prototype)e[t]=r.prototype[t];return e}n.exports=r,r.prototype.on=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks[e]=this._callbacks[e]||[]).push(t),this},r.prototype.once=function(e,t){function r(){n.off(e,r),t.apply(this,arguments)}var n=this;return this._callbacks=this._callbacks||{},t._off=r,this.on(e,r),this},r.prototype.off=r.prototype.removeListener=r.prototype.removeAllListeners=function(e,t){this._callbacks=this._callbacks||{};var n=this._callbacks[e];if(!n)return this;if(1==arguments.length)return delete this._callbacks[e],this;var r=n.indexOf(t._off||t);return~r&&n.splice(r,1),this},r.prototype.emit=function(e){this._callbacks=this._callbacks||{};var t=[].slice.call(arguments,1),n=this._callbacks[e];if(n){n=n.slice(0);for(var r=0,i=n.length;r<i;++r)n[r].apply(this,t)}return this},r.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks[e]||[]},r.prototype.hasListeners=function(e){return!!this.listeners(e).length}}),t.register("dropzone/index.js",function(e,t,n){n.exports=t("./lib/dropzone.js")}),t.register("dropzone/lib/dropzone.js",function(e,t,n){(function(){var e,r,i,s,o,u,a,f={}.hasOwnProperty,l=function(e,t){function r(){this.constructor=e}for(var n in t)f.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},c=[].slice;r=typeof Emitter!="undefined"&&Emitter!==null?Emitter:t("emitter"),u=function(){},e=function(e){function t(e,n){var r,s,o,u,a;this.element=e,this.version=t.version,this.defaultOptions.previewTemplate=this.defaultOptions.previewTemplate.replace(/\n*/g,""),typeof this.element=="string"&&(this.element=document.querySelector(this.element));if(!this.element||this.element.nodeType==null)throw new Error("Invalid dropzone element.");if(t.forElement(this.element))throw new Error("Dropzone already attached.");t.instances.push(this),r=this.element.id,s=(a=r?t.options[i(r)]:void 0)!=null?a:{},o=function(){var e,t,n,r,i,s,o;r=arguments[0],n=2<=arguments.length?c.call(arguments,1):[];for(s=0,o=n.length;s<o;s++){t=n[s];for(e in t)i=t[e],r[e]=i}return r},this.options=o({},this.defaultOptions,s,n!=null?n:{}),this.options.url==null&&(this.options.url=this.element.action);if(!this.options.url)throw new Error("No URL provided.");if(!t.isBrowserSupported())return this.options.fallback.call(this);(u=this.getExistingFallback())&&u.parentNode&&u.parentNode.removeChild(u);if(this.options.previewsContainer){typeof this.options.previewsContainer=="string"?this.previewsContainer=document.querySelector(this.options.previewsContainer):this.options.previewsContainer.nodeType!=null&&(this.previewsContainer=this.options.previewsContainer);if(this.previewsContainer==null)throw new Error("Invalid `previewsContainer` option provided. Please provide a CSS selector or a plain HTML element.")}else this.previewsContainer=this.element;this.init()}return l(t,e),t.prototype.events=["drop","dragstart","dragend","dragenter","dragover","dragleave","selectedfiles","addedfile","removedfile","thumbnail","error","processingfile","uploadprogress","sending","success","complete","reset"],t.prototype.defaultOptions={url:null,parallelUploads:2,maxFilesize:256,paramName:"file",createImageThumbnails:!0,maxThumbnailFilesize:2,thumbnailWidth:100,thumbnailHeight:100,params:{},clickable:!0,enqueueForUpload:!0,previewsContainer:null,dictDefaultMessage:"Drop files here to upload",dictFallbackMessage:"Your browser does not support drag'n'drop file uploads.",dictFallbackText:"Please use the fallback form below to upload your files like in the olden days.",accept:function(e,t){return t()},init:function(){return u},fallback:function(){var e,t,n,r,i,s;this.element.className=""+this.element.className+" browser-not-supported",s=this.element.getElementsByTagName("div");for(r=0,i=s.length;r<i;r++){e=s[r];if(/(^| )message($| )/.test(e.className)){t=e,e.className="message";continue}}return t||(t=o('<div class="message"><span></span></div>'),this.element.appendChild(t)),n=t.getElementsByTagName("span")[0],n&&(n.textContent=this.options.dictFallbackMessage),this.element.appendChild(this.getFallbackForm())},drop:function(e){return this.element.classList.remove("drag-hover")},dragstart:u,dragend:function(e){return this.element.classList.remove("drag-hover")},dragenter:function(e){return this.element.classList.add("drag-hover")},dragover:function(e){return this.element.classList.add("drag-hover")},dragleave:function(e){return this.element.classList.remove("drag-hover")},selectedfiles:function(e){if(this.element===this.previewsContainer)return this.element.classList.add("started")},reset:function(){return this.element.classList.remove("started")},addedfile:function(e){return e.previewTemplate=o(this.options.previewTemplate),this.previewsContainer.appendChild(e.previewTemplate),e.previewTemplate.querySelector(".filename span").textContent=e.name,e.previewTemplate.querySelector(".details").appendChild(o('<div class="size">'+this.filesize(e.size)+"</div>"))},removedfile:function(e){return e.previewTemplate.parentNode.removeChild(e.previewTemplate)},thumbnail:function(e,t){return e.previewTemplate.classList.remove("file-preview"),e.previewTemplate.classList.add("image-preview"),e.previewTemplate.querySelector(".details").appendChild(o('<img alt="'+e.name+'" src="'+t+'"/>'))},error:function(e,t){return e.previewTemplate.classList.add("error"),e.previewTemplate.querySelector(".error-message span").textContent=t},processingfile:function(e){return e.previewTemplate.classList.add("processing")},uploadprogress:function(e,t){return e.previewTemplate.querySelector(".progress .upload").style.width=""+t+"%"},sending:u,success:function(e){return e.previewTemplate.classList.add("success")},complete:u,previewTemplate:'<div class="preview file-preview">\n  <div class="details">\n   <div class="filename"><span></span></div>\n  </div>\n  <div class="progress"><span class="upload"></span></div>\n  <div class="success-mark"><span>✔</span></div>\n  <div class="error-mark"><span>✘</span></div>\n  <div class="error-message"><span></span></div>\n</div>'},t.prototype.init=function(){var e,t,n,r,i,s,u=this;this.element.tagName==="form"&&this.element.setAttribute("enctype","multipart/form-data"),this.element.classList.contains("dropzone")&&!this.element.querySelector(".message")&&this.element.appendChild(o('<div class="default message"><span>'+this.options.dictDefaultMessage+"</span></div>")),this.options.clickable&&(this.hiddenFileInput=document.createElement("input"),this.hiddenFileInput.setAttribute("type","file"),this.hiddenFileInput.setAttribute("multiple","multiple"),this.hiddenFileInput.style.display="none",document.body.appendChild(this.hiddenFileInput),this.hiddenFileInput.addEventListener("change",function(){var e;e=u.hiddenFileInput.files;if(e.length)return u.emit("selectedfiles",e),u.handleFiles(e)})),this.files=[],this.filesQueue=[],this.filesProcessing=[],this.URL=(i=window.URL)!=null?i:window.webkitURL,s=this.events;for(n=0,r=s.length;n<r;n++)e=s[n],this.on(e,this.options[e]);return t=function(e){return e.stopPropagation(),e.preventDefault?e.preventDefault():e.returnValue=!1},this.listeners={dragstart:function(e){return u.emit("dragstart",e)},dragenter:function(e){return t(e),u.emit("dragenter",e)},dragover:function(e){return t(e),u.emit("dragover",e)},dragleave:function(e){return u.emit("dragleave",e)},drop:function(e){return t(e),u.drop(e),u.emit("drop",e)},dragend:function(e){return u.emit("dragend",e)},click:function(e){if(!u.options.clickable)return;if(e.target===u.element||e.target===u.element.querySelector(".message"))return u.hiddenFileInput.click()}},this.enable(),this.options.init.call(this)},t.prototype.getFallbackForm=function(){var e,t,n,r;return(e=this.getExistingFallback())?e:(n='<div class="fallback">',this.options.dictFallbackText&&(n+="<p>"+this.options.dictFallbackText+"</p>"),n+='<input type="file" name="'+this.options.paramName+'" multiple="multiple" /><button type="submit">Upload!</button></div>',t=o(n),this.element.tagName!=="FORM"?(r=o('<form action="'+this.options.url+'" enctype="multipart/form-data" method="post"></form>'),r.appendChild(t)):(this.element.setAttribute("enctype","multipart/form-data"),this.element.setAttribute("method","post")),r!=null?r:t)},t.prototype.getExistingFallback=function(){var e,t,n,r,i,s;t=function(e){var t,n,r;for(n=0,r=e.length;n<r;n++){t=e[n];if(/(^| )fallback($| )/.test(t.className))return t}},s=["div","form"];for(r=0,i=s.length;r<i;r++){n=s[r];if(e=t(this.element.getElementsByTagName("div")))return e}},t.prototype.setupEventListeners=function(){var e,t,n,r;n=this.listeners,r=[];for(e in n)t=n[e],r.push(this.element.addEventListener(e,t,!1));return r},t.prototype.removeEventListeners=function(){var e,t,n,r;n=this.listeners,r=[];for(e in n)t=n[e],r.push(this.element.removeEventListener(e,t,!1));return r},t.prototype.disable=function(){return this.options.clickable&&this.element.classList.remove("clickable"),this.removeEventListeners(),this.filesProcessing=[],this.filesQueue=[]},t.prototype.enable=function(){return this.options.clickable&&this.element.classList.add("clickable"),this.setupEventListeners()},t.prototype.filesize=function(e){var t;return e>=1e11?(e/=1e11,t="TB"):e>=1e8?(e/=1e8,t="GB"):e>=1e5?(e/=1e5,t="MB"):e>=100?(e/=100,t="KB"):(e*=10,t="b"),"<strong>"+Math.round(e)/10+"</strong> "+t},t.prototype.drop=function(e){var t;if(!e.dataTransfer)return;t=e.dataTransfer.files,this.emit("selectedfiles",t);if(t.length)return this.handleFiles(t)},t.prototype.handleFiles=function(e){var t,n,r,i;i=[];for(n=0,r=e.length;n<r;n++)t=e[n],i.push(this.addFile(t));return i},t.prototype.accept=function(e,t){return e.size>this.options.maxFilesize*1024*1024?t("File is too big ("+Math.round(e.size/1024/10.24)/100+"MB). Max filesize: "+this.options.maxFilesize+"MB"):this.options.accept.call(this,e,t)},t.prototype.addFile=function(e){var t=this;return this.files.push(e),this.emit("addedfile",e),this.options.createImageThumbnails&&e.type.match(/image.*/)&&e.size<=this.options.maxThumbnailFilesize*1024*1024&&this.createThumbnail(e),this.accept(e,function(n){if(n)return t.errorProcessing(e,n);if(t.options.enqueueForUpload)return t.filesQueue.push(e),t.processQueue()})},t.prototype.removeFile=function(e){if(e.processing)throw new Error("Can't remove file currently processing");this.files=a(this.files,e),this.filesQueue=a(this.filesQueue,e),this.emit("removedfile",e);if(this.files.length===0)return this.emit("reset")},t.prototype.createThumbnail=function(e){var t,n=this;return t=new FileReader,t.onload=function(){var r;return r=new Image,r.onload=function(){var t,i,s,o,u,a,f,l,c,h,p,d,v;return t=document.createElement("canvas"),i=t.getContext("2d"),a=0,f=0,u=r.width,s=r.height,t.width=n.options.thumbnailWidth,t.height=n.options.thumbnailHeight,d=0,v=0,p=t.width,c=t.height,o=r.width/r.height,h=t.width/t.height,r.height<t.height||r.width<t.width?(c=s,p=u):o>h?(s=r.height,u=s*h):(u=r.width,s=u/h),a=(r.width-u)/2,f=(r.height-s)/2,v=(t.height-c)/2,d=(t.width-p)/2,i.drawImage(r,a,f,u,s,d,v,p,c),l=t.toDataURL("image/png"),n.emit("thumbnail",e,l)},r.src=t.result},t.readAsDataURL(e)},t.prototype.processQueue=function(){var e,t,n;t=this.options.parallelUploads,n=this.filesProcessing.length,e=n;while(e<t){if(!this.filesQueue.length)return;this.processFile(this.filesQueue.shift()),e++}},t.prototype.processFile=function(e){return this.filesProcessing.push(e),e.processing=!0,this.emit("processingfile",e),this.uploadFile(e)},t.prototype.uploadFile=function(e){var t,n,r,i,s,o,u,a,f,l,c,h,p,d,v=this;f=new XMLHttpRequest,f.open("POST",this.options.url,!0),n=function(){return v.errorProcessing(e,f.responseText||"Server responded with "+f.status+" code.")},f.onload=function(t){var r,i;return 200<=(i=f.status)&&i<300?(v.emit("uploadprogress",e,100),r=f.responseText,f.getResponseHeader("content-type")&&~f.getResponseHeader("content-type").indexOf("application/json")&&(r=JSON.parse(r)),v.finished(e,r,t)):n()},f.onerror=function(){return n()},u=(h=f.upload)!=null?h:f,u.onprogress=function(t){return v.emit("uploadprogress",e,Math.max(0,Math.min(100,t.loaded/t.total*100)))},f.setRequestHeader("Accept","application/json"),f.setRequestHeader("Cache-Control","no-cache"),f.setRequestHeader("X-Requested-With","XMLHttpRequest"),f.setRequestHeader("X-File-Name",e.name),t=new FormData;if(this.options.params){p=this.options.params;for(o in p)a=p[o],t.append(o,a)}if(this.element.tagName="FORM"){d=this.element.querySelectorAll("input, textarea, select, button");for(l=0,c=d.length;l<c;l++)r=d[l],i=r.getAttribute("name"),s=r.getAttribute("type"),(!s||s.toLowerCase()!=="checkbox"||r.checked)&&t.append(i,r.value)}return this.emit("sending",e,f,t),t.append(this.options.paramName,e),f.send(t)},t.prototype.finished=function(e,t,n){return this.filesProcessing=a(this.filesProcessing,e),e.processing=!1,this.processQueue(),this.emit("success",e,t,n),this.emit("finished",e,t,n),this.emit("complete",e)},t.prototype.errorProcessing=function(e,t){return this.filesProcessing=a(this.filesProcessing,e),e.processing=!1,this.processQueue(),this.emit("error",e,t),this.emit("complete",e)},t}(r),e.version="2.0.5-dev",e.options={},e.instances=[],e.forElement=function(t){var n,r,i,s;typeof t=="string"&&(t=document.querySelector(t)),s=e.instances;for(r=0,i=s.length;r<i;r++){n=s[r];if(n.element===t)return n}return null},e.blacklistedBrowsers=[/opera.*Macintosh.*version\/12/i],e.isBrowserSupported=function(){var t,n,r,i,s;t=!0;if(window.File&&window.FileReader&&window.FileList&&window.Blob&&window.FormData&&document.querySelector)if("classList"in document.createElement("a")){s=e.blacklistedBrowsers;for(r=0,i=s.length;r<i;r++){n=s[r];if(n.test(navigator.userAgent)){t=!1;continue}}}else t=!1;else t=!1;return t},a=function(e,t){var n,r,i,s;s=[];for(r=0,i=e.length;r<i;r++)n=e[r],n!==t&&s.push(n);return s},i=function(e){return e.replace(/[\-_](\w)/g,function(e){return e[1].toUpperCase()})},o=function(e){var t;return t=document.createElement("div"),t.innerHTML=e,t.childNodes[0]},typeof jQuery!="undefined"&&jQuery!==null&&(jQuery.fn.dropzone=function(t){return this.each(function(){return new e(this,t)})}),typeof n!="undefined"&&n!==null?n.exports=e:window.Dropzone=e,s=function(e,t){var n,r,i,s,o,u,a,f,l;i=!1,l=!0,r=e.document,f=r.documentElement,n=r.addEventListener?"addEventListener":"attachEvent",a=r.addEventListener?"removeEventListener":"detachEvent",u=r.addEventListener?"":"on",s=function(n){if(n.type==="readystatechange"&&r.readyState!=="complete")return;(n.type==="load"?e:r)[a](u+n.type,s,!1);if(!i&&(i=!0))return t.call(e,n.type||n)},o=function(){try{f.doScroll("left")}catch(e){setTimeout(o,50);return}return s("poll")};if(r.readyState!=="complete"){if(r.createEventObject&&f.doScroll){try{l=!e.frameElement}catch(c){}l&&o()}return r[n](u+"DOMContentLoaded",s,!1),r[n](u+"readystatechange",s,!1),e[n](u+"load",s,!1)}},s(window,function(){var t,n,r,i,s,o;r=[],t=function(e){var t,n,i,s;s=[];for(n=0,i=e.length;n<i;n++)t=e[n],/(^| )dropzone($| )/.test(t.className)?s.push(r.push(t)):s.push(void 0);return s},t(document.getElementsByTagName("div")),t(document.getElementsByTagName("form")),o=[];for(i=0,s=r.length;i<s;i++)n=r[i],o.push(new e(n));return o})}).call(this)}),t.alias("component-emitter/index.js","dropzone/deps/emitter/index.js"),typeof exports=="object"?module.exports=t("dropzone"):typeof define=="function"&&define.amd?define(function(){return t("dropzone")}):window.Dropzone=t("dropzone")})();