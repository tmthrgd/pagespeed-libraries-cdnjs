var __extends=this.__extends||function(a,b){function d(){this.constructor=a}for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c]);d.prototype=b.prototype,a.prototype=new d},dragonBones;!function(a){!function(a){var b=function(){function a(a,b){"undefined"==typeof a&&(a=0),"undefined"==typeof b&&(b=0),this.x=a,this.y=b}return a.prototype.toString=function(){return"[Point (x="+this.x+" y="+this.y+")]"},a}();a.Point=b;var c=function(){function a(a,b,c,d){"undefined"==typeof a&&(a=0),"undefined"==typeof b&&(b=0),"undefined"==typeof c&&(c=0),"undefined"==typeof d&&(d=0),this.x=a,this.y=b,this.width=c,this.height=d}return a}();a.Rectangle=c;var d=function(){function a(){this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0}return a.prototype.invert=function(){var a=this.a,b=this.b,c=this.c,d=this.d,e=this.tx,f=a*d-b*c;this.a=d/f,this.b=-b/f,this.c=-c/f,this.d=a/f,this.tx=(c*this.ty-d*e)/f,this.ty=-(a*this.ty-b*e)/f},a}();a.Matrix=d;var e=function(){function a(){this.alphaMultiplier=0,this.alphaOffset=0,this.blueMultiplier=0,this.blueOffset=0,this.greenMultiplier=0,this.greenOffset=0,this.redMultiplier=0,this.redOffset=0}return a}();a.ColorTransform=e}(a.geom||(a.geom={}));var b=a.geom;!function(a){var b=function(){function a(a){this.type=a}return a}();a.Event=b;var c=function(a){function b(b){a.call(this,b)}return __extends(b,a),b.FADE_IN="fadeIn",b.FADE_OUT="fadeOut",b.START="start",b.COMPLETE="complete",b.LOOP_COMPLETE="loopComplete",b.FADE_IN_COMPLETE="fadeInComplete",b.FADE_OUT_COMPLETE="fadeOutComplete",b}(b);a.AnimationEvent=c;var d=function(a){function b(b){a.call(this,b)}return __extends(b,a),b.Z_ORDER_UPDATED="zOrderUpdated",b}(b);a.ArmatureEvent=d;var e=function(a){function b(b){a.call(this,b)}return __extends(b,a),b.ANIMATION_FRAME_EVENT="animationFrameEvent",b.BONE_FRAME_EVENT="boneFrameEvent",b}(b);a.FrameEvent=e;var f=function(a){function b(b){a.call(this,b)}return __extends(b,a),b.SOUND="sound",b.BONE_FRAME_EVENT="boneFrameEvent",b}(b);a.SoundEvent=f;var g=function(){function a(){}return a.prototype.hasEventListener=function(a){return this._listenersMap&&this._listenersMap[a]?!0:!1},a.prototype.addEventListener=function(a,b){if(a&&b){this._listenersMap||(this._listenersMap={});var c=this._listenersMap[a];c&&this.removeEventListener(a,b),c?c.push(b):this._listenersMap[a]=[b]}},a.prototype.removeEventListener=function(a,b){if(this._listenersMap&&a&&b){var c=this._listenersMap[a];if(c)for(var d=c.length,e=0;d>e;e++)c[e]==b&&(1==d?(c.length=0,delete this._listenersMap[a]):c.splice(e,1))}},a.prototype.removeAllEventListeners=function(a){a?delete this._listenersMap[a]:this._listenersMap=null},a.prototype.dispatchEvent=function(a){if(a){var b=this._listenersMap[a.type];if(b){a.target=this;for(var c=b.concat(),d=b.length,e=0;d>e;e++)c[e](a)}}},a}();a.EventDispatcher=g;var h=function(a){function b(){if(a.call(this),b._instance)throw new Error("Singleton already constructed!")}return __extends(b,a),b.getInstance=function(){return b._instance||(b._instance=new b),b._instance},b}(g);a.SoundEventManager=h}(a.events||(a.events={}));var c=a.events;!function(a){var d=function(){function a(){this.timeScale=1,this.time=.001*(new Date).getTime(),this._animatableList=[]}return a.prototype.contains=function(a){return this._animatableList.indexOf(a)>=0},a.prototype.add=function(a){a&&-1==this._animatableList.indexOf(a)&&this._animatableList.push(a)},a.prototype.remove=function(a){var b=this._animatableList.indexOf(a);b>=0&&(this._animatableList[b]=null)},a.prototype.clear=function(){this._animatableList.length=0},a.prototype.advanceTime=function(a){if(0>a){var b=.001*(new Date).getTime();a=b-this.time,this.time=b}a*=this.timeScale;var c=this._animatableList.length;if(0!=c){for(var d=0,e=0;c>e;e++){var f=this._animatableList[e];f&&(d!=e&&(this._animatableList[d]=f,this._animatableList[e]=null),f.advanceTime(a),d++)}if(d!=e){for(c=this._animatableList.length;c>e;)this._animatableList[d++]=this._animatableList[e++];this._animatableList.length=d}}},a.clock=new a,a}();a.WorldClock=d;var f=function(){function a(){this.transform=new e.DBTransform,this.pivot=new b.Point,this._durationTransform=new e.DBTransform,this._durationPivot=new b.Point,this._durationColor=new b.ColorTransform}return a._borrowObject=function(){return 0==a._pool.length?new a:a._pool.pop()},a._returnObject=function(b){a._pool.indexOf(b)<0&&(a._pool[a._pool.length]=b),b.clear()},a._clear=function(){for(var b=a._pool.length;b--;)a._pool[b].clear();a._pool.length=0},a.getEaseValue=function(b,c){if(c>1){var d=.5*(1-Math.cos(b*Math.PI))-b;c-=1}else c>0?d=Math.sin(b*a.HALF_PI)-b:0>c&&(d=1-Math.cos(b*a.HALF_PI)-b,c*=-1);return d*c+b},a.prototype.fadeIn=function(a,b,c){switch(this._bone=a,this._animationState=b,this._timeline=c,this._originTransform=this._timeline.originTransform,this._originPivot=this._timeline.originPivot,this._tweenTransform=!1,this._tweenColor=!1,this._totalTime=this._animationState.totalTime,this.transform.x=0,this.transform.y=0,this.transform.scaleX=0,this.transform.scaleY=0,this.transform.skewX=0,this.transform.skewY=0,this.pivot.x=0,this.pivot.y=0,this._durationTransform.x=0,this._durationTransform.y=0,this._durationTransform.scaleX=0,this._durationTransform.scaleY=0,this._durationTransform.skewX=0,this._durationTransform.skewY=0,this._durationPivot.x=0,this._durationPivot.y=0,this._currentFrame=null,this._timeline.getFrameList().length){case 0:this._bone._arriveAtFrame(null,this,this._animationState,!1),this._updateState=0;break;case 1:this._updateState=-1;break;default:this._updateState=1}},a.prototype.fadeOut=function(){this.transform.skewX=g.TransformUtil.formatRadian(this.transform.skewX),this.transform.skewY=g.TransformUtil.formatRadian(this.transform.skewY)},a.prototype.update=function(b){if(this._updateState)if(this._updateState>0){0==this._timeline.scale?b=1:b/=this._timeline.scale,1==b&&(b=.99999999),b+=this._timeline.offset;var c=Math.floor(b);b-=c;for(var f,d=this._totalTime*b,e=!1;!this._currentFrame||d>this._currentFramePosition+this._currentFrameDuration||d<this._currentFramePosition;)e&&this._bone._arriveAtFrame(this._currentFrame,this,this._animationState,!0),e=!0,this._currentFrame?(f=this._timeline.getFrameList().indexOf(this._currentFrame)+1,f>=this._timeline.getFrameList().length&&(f=0),this._currentFrame=this._timeline.getFrameList()[f]):(f=0,this._currentFrame=this._timeline.getFrameList()[0]),this._currentFrameDuration=this._currentFrame.duration,this._currentFramePosition=this._currentFrame.position;if(e){this.tweenActive=this._currentFrame.displayIndex>=0,f++,f>=this._timeline.getFrameList().length&&(f=0);var h=this._timeline.getFrameList()[f];0==f&&this._animationState.loop&&this._animationState.loopCount>=Math.abs(this._animationState.loop)-1&&((this._currentFramePosition+this._currentFrameDuration)/this._totalTime+c-this._timeline.offset)*this._timeline.scale>.99999999?(this._updateState=0,this._tweenEasing=0/0):this._tweenEasing=this._currentFrame.displayIndex<0||h.displayIndex<0||!this._animationState.tweenEnabled?0/0:isNaN(this._animationState.clip.tweenEasing)?this._currentFrame.tweenEasing:this._animationState.clip.tweenEasing,isNaN(this._tweenEasing)?(this._tweenTransform=!1,this._tweenColor=!1):(this._durationTransform.x=h.transform.x-this._currentFrame.transform.x,this._durationTransform.y=h.transform.y-this._currentFrame.transform.y,this._durationTransform.skewX=h.transform.skewX-this._currentFrame.transform.skewX,this._durationTransform.skewY=h.transform.skewY-this._currentFrame.transform.skewY,this._durationTransform.scaleX=h.transform.scaleX-this._currentFrame.transform.scaleX,this._durationTransform.scaleY=h.transform.scaleY-this._currentFrame.transform.scaleY,0==f&&(this._durationTransform.skewX=g.TransformUtil.formatRadian(this._durationTransform.skewX),this._durationTransform.skewY=g.TransformUtil.formatRadian(this._durationTransform.skewY)),this._durationPivot.x=h.pivot.x-this._currentFrame.pivot.x,this._durationPivot.y=h.pivot.y-this._currentFrame.pivot.y,this._tweenTransform=0!=this._durationTransform.x||0!=this._durationTransform.y||0!=this._durationTransform.skewX||0!=this._durationTransform.skewY||0!=this._durationTransform.scaleX||0!=this._durationTransform.scaleY||0!=this._durationPivot.x||0!=this._durationPivot.y?!0:!1,this._currentFrame.color&&h.color?(this._durationColor.alphaOffset=h.color.alphaOffset-this._currentFrame.color.alphaOffset,this._durationColor.redOffset=h.color.redOffset-this._currentFrame.color.redOffset,this._durationColor.greenOffset=h.color.greenOffset-this._currentFrame.color.greenOffset,this._durationColor.blueOffset=h.color.blueOffset-this._currentFrame.color.blueOffset,this._durationColor.alphaMultiplier=h.color.alphaMultiplier-this._currentFrame.color.alphaMultiplier,this._durationColor.redMultiplier=h.color.redMultiplier-this._currentFrame.color.redMultiplier,this._durationColor.greenMultiplier=h.color.greenMultiplier-this._currentFrame.color.greenMultiplier,this._durationColor.blueMultiplier=h.color.blueMultiplier-this._currentFrame.color.blueMultiplier,this._tweenColor=0!=this._durationColor.alphaOffset||0!=this._durationColor.redOffset||0!=this._durationColor.greenOffset||0!=this._durationColor.blueOffset||0!=this._durationColor.alphaMultiplier||0!=this._durationColor.redMultiplier||0!=this._durationColor.greenMultiplier||0!=this._durationColor.blueMultiplier?!0:!1):this._currentFrame.color?(this._tweenColor=!0,this._durationColor.alphaOffset=-this._currentFrame.color.alphaOffset,this._durationColor.redOffset=-this._currentFrame.color.redOffset,this._durationColor.greenOffset=-this._currentFrame.color.greenOffset,this._durationColor.blueOffset=-this._currentFrame.color.blueOffset,this._durationColor.alphaMultiplier=1-this._currentFrame.color.alphaMultiplier,this._durationColor.redMultiplier=1-this._currentFrame.color.redMultiplier,this._durationColor.greenMultiplier=1-this._currentFrame.color.greenMultiplier,this._durationColor.blueMultiplier=1-this._currentFrame.color.blueMultiplier):h.color?(this._tweenColor=!0,this._durationColor.alphaOffset=h.color.alphaOffset,this._durationColor.redOffset=h.color.redOffset,this._durationColor.greenOffset=h.color.greenOffset,this._durationColor.blueOffset=h.color.blueOffset,this._durationColor.alphaMultiplier=h.color.alphaMultiplier-1,this._durationColor.redMultiplier=h.color.redMultiplier-1,this._durationColor.greenMultiplier=h.color.greenMultiplier-1,this._durationColor.blueMultiplier=h.color.blueMultiplier-1):this._tweenColor=!1),this._tweenTransform||(this._animationState.blend?(this.transform.x=this._originTransform.x+this._currentFrame.transform.x,this.transform.y=this._originTransform.y+this._currentFrame.transform.y,this.transform.skewX=this._originTransform.skewX+this._currentFrame.transform.skewX,this.transform.skewY=this._originTransform.skewY+this._currentFrame.transform.skewY,this.transform.scaleX=this._originTransform.scaleX+this._currentFrame.transform.scaleX,this.transform.scaleY=this._originTransform.scaleY+this._currentFrame.transform.scaleY,this.pivot.x=this._originPivot.x+this._currentFrame.pivot.x,this.pivot.y=this._originPivot.y+this._currentFrame.pivot.y):(this.transform.x=this._currentFrame.transform.x,this.transform.y=this._currentFrame.transform.y,this.transform.skewX=this._currentFrame.transform.skewX,this.transform.skewY=this._currentFrame.transform.skewY,this.transform.scaleX=this._currentFrame.transform.scaleX,this.transform.scaleY=this._currentFrame.transform.scaleY,this.pivot.x=this._currentFrame.pivot.x,this.pivot.y=this._currentFrame.pivot.y)),this._tweenColor||(this._currentFrame.color?this._bone._updateColor(this._currentFrame.color.alphaOffset,this._currentFrame.color.redOffset,this._currentFrame.color.greenOffset,this._currentFrame.color.blueOffset,this._currentFrame.color.alphaMultiplier,this._currentFrame.color.redMultiplier,this._currentFrame.color.greenMultiplier,this._currentFrame.color.blueMultiplier,!0):this._bone._isColorChanged&&this._bone._updateColor(0,0,0,0,1,1,1,1,!1)),this._bone._arriveAtFrame(this._currentFrame,this,this._animationState,!1)}if((this._tweenTransform||this._tweenColor)&&(b=(d-this._currentFramePosition)/this._currentFrameDuration,this._tweenEasing&&(b=a.getEaseValue(b,this._tweenEasing))),this._tweenTransform){var i=this._currentFrame.transform,j=this._currentFrame.pivot;this._animationState.blend?(this.transform.x=this._originTransform.x+i.x+this._durationTransform.x*b,this.transform.y=this._originTransform.y+i.y+this._durationTransform.y*b,this.transform.skewX=this._originTransform.skewX+i.skewX+this._durationTransform.skewX*b,this.transform.skewY=this._originTransform.skewY+i.skewY+this._durationTransform.skewY*b,this.transform.scaleX=this._originTransform.scaleX+i.scaleX+this._durationTransform.scaleX*b,this.transform.scaleY=this._originTransform.scaleY+i.scaleY+this._durationTransform.scaleY*b,this.pivot.x=this._originPivot.x+j.x+this._durationPivot.x*b,this.pivot.y=this._originPivot.y+j.y+this._durationPivot.y*b):(this.transform.x=i.x+this._durationTransform.x*b,this.transform.y=i.y+this._durationTransform.y*b,this.transform.skewX=i.skewX+this._durationTransform.skewX*b,this.transform.skewY=i.skewY+this._durationTransform.skewY*b,this.transform.scaleX=i.scaleX+this._durationTransform.scaleX*b,this.transform.scaleY=i.scaleY+this._durationTransform.scaleY*b,this.pivot.x=j.x+this._durationPivot.x*b,this.pivot.y=j.y+this._durationPivot.y*b)}this._tweenColor&&(this._currentFrame.color?this._bone._updateColor(this._currentFrame.color.alphaOffset+this._durationColor.alphaOffset*b,this._currentFrame.color.redOffset+this._durationColor.redOffset*b,this._currentFrame.color.greenOffset+this._durationColor.greenOffset*b,this._currentFrame.color.blueOffset+this._durationColor.blueOffset*b,this._currentFrame.color.alphaMultiplier+this._durationColor.alphaMultiplier*b,this._currentFrame.color.redMultiplier+this._durationColor.redMultiplier*b,this._currentFrame.color.greenMultiplier+this._durationColor.greenMultiplier*b,this._currentFrame.color.blueMultiplier+this._durationColor.blueMultiplier*b,!0):this._bone._updateColor(this._durationColor.alphaOffset*b,this._durationColor.redOffset*b,this._durationColor.greenOffset*b,this._durationColor.blueOffset*b,1+this._durationColor.alphaMultiplier*b,1+this._durationColor.redMultiplier*b,1+this._durationColor.greenMultiplier*b,1+this._durationColor.blueMultiplier*b,!0))}else this._updateState=0,this._animationState.blend?(this.transform.copy(this._originTransform),this.pivot.x=this._originPivot.x,this.pivot.y=this._originPivot.y):(this.transform.x=this.transform.y=this.transform.skewX=this.transform.skewY=this.transform.scaleX=this.transform.scaleY=0,this.pivot.x=0,this.pivot.y=0),this._currentFrame=this._timeline.getFrameList()[0],this.tweenActive=this._currentFrame.displayIndex>=0,this._currentFrame.color?this._bone._updateColor(this._currentFrame.color.alphaOffset,this._currentFrame.color.redOffset,this._currentFrame.color.greenOffset,this._currentFrame.color.blueOffset,this._currentFrame.color.alphaMultiplier,this._currentFrame.color.redMultiplier,this._currentFrame.color.greenMultiplier,this._currentFrame.color.blueMultiplier,!0):this._bone._updateColor(0,0,0,0,1,1,1,1,!1),this._bone._arriveAtFrame(this._currentFrame,this,this._animationState,!1)},a.prototype.clear=function(){this._updateState=0,this._bone=null,this._animationState=null,this._timeline=null,this._currentFrame=null,this._originTransform=null,this._originPivot=null},a.HALF_PI=.5*Math.PI,a._pool=[],a}();a.TimelineState=f;var h=function(){function a(){this.loop=0,this.layer=0,this._timelineStates={}}return a._borrowObject=function(){return 0==a._pool.length?new a:a._pool.pop()},a._returnObject=function(b){a._pool.indexOf(b)<0&&(a._pool[a._pool.length]=b),b.clear()},a._clear=function(){for(var b=a._pool.length;b--;)a._pool[b].clear();a._pool.length=0},a.prototype.fadeIn=function(a,b,c,d,e,f,g,h){this.layer=f,this.clip=b,this.name=this.clip.name,this.totalTime=this.clip.duration,this._armature=a,Math.round(this.clip.duration*this.clip.frameRate)<2||1/0==d?(this.timeScale=1,this.currentTime=this.totalTime,this.loop=this.loop>=0?1:-1):(this.timeScale=d,this.currentTime=0,this.loop=e),this._pauseBeforeFadeInComplete=h,this._fadeInTime=c*this.timeScale,this._fadeState=1,this._fadeOutBeginTime=0,this._fadeOutWeight=-1,this._fadeWeight=0,this._fadeIn=!0,this._fadeOut=!1,this.loopCount=-1,this.displayControl=g,this.isPlaying=!0,this.isComplete=!1,this.weight=1,this.blend=!0,this.enabled=!0,this.tweenEnabled=!0,this.updateTimelineStates()},a.prototype.fadeOut=function(a,b){if("undefined"==typeof b&&(b=!1),this._armature&&!(this._fadeOutWeight>=0)){this._fadeState=-1,this._fadeOutWeight=this._fadeWeight,this._fadeOutTime=a*this.timeScale,this._fadeOutBeginTime=this.currentTime,this._fadeOut=!0,this.isPlaying=!b,this.displayControl=!1;for(var c in this._timelineStates)this._timelineStates[c].fadeOut();this.enabled=!0}},a.prototype.play=function(){this.isPlaying=!0},a.prototype.stop=function(){this.isPlaying=!1},a.prototype.getMixingTransform=function(a){return this._mixingTransforms?Number(this._mixingTransforms[a]):-1},a.prototype.addMixingTransform=function(a,b,c){if("undefined"==typeof b&&(b=2),"undefined"==typeof c&&(c=!0),!this.clip||!this.clip.getTimeline(a))throw new Error;if(this._mixingTransforms||(this._mixingTransforms={}),c)for(var e,f,d=this._armature._boneList.length;d--;)e=this._armature._boneList[d],e.name==a&&(f=e),f&&(f==e||f.contains(e))&&(this._mixingTransforms[e.name]=b);else this._mixingTransforms[a]=b;this.updateTimelineStates()},a.prototype.removeMixingTransform=function(a,b){if("undefined"==typeof a&&(a=null),"undefined"==typeof b&&(b=!0),a){if(b)for(var d,e,c=this._armature._boneList.length;c--;)d=this._armature._boneList[c],d.name==a&&(e=d),e&&(e==d||e.contains(d))&&delete this._mixingTransforms[d.name];else delete this._mixingTransforms[a];for(var f in this._mixingTransforms){var g=!0;break}g||(this._mixingTransforms=null)}else this._mixingTransforms=null;this.updateTimelineStates()},a.prototype.advanceTime=function(a){if(!this.enabled)return!1;var b,d;if(this._fadeIn&&(this._fadeIn=!1,this._armature.hasEventListener(c.AnimationEvent.FADE_IN)&&(b=new c.AnimationEvent(c.AnimationEvent.FADE_IN),b.animationState=this,this._armature._eventList.push(b))),this._fadeOut&&(this._fadeOut=!1,this._armature.hasEventListener(c.AnimationEvent.FADE_OUT)&&(b=new c.AnimationEvent(c.AnimationEvent.FADE_OUT),b.animationState=this,this._armature._eventList.push(b))),this.currentTime+=a*this.timeScale,this.isPlaying&&!this.isComplete){var e,f;this._pauseBeforeFadeInComplete?(this._pauseBeforeFadeInComplete=!1,this.isPlaying=!1,e=0,f=Math.floor(e)):(e=this.currentTime/this.totalTime,f=Math.floor(e),f!=this.loopCount&&(-1==this.loopCount&&this._armature.hasEventListener(c.AnimationEvent.START)&&(b=new c.AnimationEvent(c.AnimationEvent.START),b.animationState=this,this._armature._eventList.push(b)),this.loopCount=f,this.loopCount&&(this.loop&&this.loopCount*this.loopCount>=this.loop*this.loop-1?(d=!0,e=1,f=0,this._armature.hasEventListener(c.AnimationEvent.COMPLETE)&&(b=new c.AnimationEvent(c.AnimationEvent.COMPLETE),b.animationState=this,this._armature._eventList.push(b))):this._armature.hasEventListener(c.AnimationEvent.LOOP_COMPLETE)&&(b=new c.AnimationEvent(c.AnimationEvent.LOOP_COMPLETE),b.animationState=this,this._armature._eventList.push(b)))));for(var g in this._timelineStates)this._timelineStates[g].update(e);var h=this.clip.getFrameList();if(h.length>0){for(var k,i=this.totalTime*(e-f),j=!1;!this._currentFrame||i>this._currentFrame.position+this._currentFrame.duration||i<this._currentFrame.position;)j&&this._armature._arriveAtFrame(this._currentFrame,null,this,!0),j=!0,this._currentFrame?(k=h.indexOf(this._currentFrame),k++,k>=h.length&&(k=0),this._currentFrame=h[k]):this._currentFrame=h[0];j&&this._armature._arriveAtFrame(this._currentFrame,null,this,!1)}}if(this._fadeState>0)0==this._fadeInTime?(this._fadeWeight=1,this._fadeState=0,this.isPlaying=!0,this._armature.hasEventListener(c.AnimationEvent.FADE_IN_COMPLETE)&&(b=new c.AnimationEvent(c.AnimationEvent.FADE_IN_COMPLETE),b.animationState=this,this._armature._eventList.push(b))):(this._fadeWeight=this.currentTime/this._fadeInTime,this._fadeWeight>=1&&(this._fadeWeight=1,this._fadeState=0,this.isPlaying||(this.currentTime-=this._fadeInTime),this.isPlaying=!0,this._armature.hasEventListener(c.AnimationEvent.FADE_IN_COMPLETE)&&(b=new c.AnimationEvent(c.AnimationEvent.FADE_IN_COMPLETE),b.animationState=this,this._armature._eventList.push(b))));else if(this._fadeState<0){if(0==this._fadeOutTime)return this._fadeWeight=0,this._fadeState=0,this._armature.hasEventListener(c.AnimationEvent.FADE_OUT_COMPLETE)&&(b=new c.AnimationEvent(c.AnimationEvent.FADE_OUT_COMPLETE),b.animationState=this,this._armature._eventList.push(b)),!0;if(this._fadeWeight=(1-(this.currentTime-this._fadeOutBeginTime)/this._fadeOutTime)*this._fadeOutWeight,this._fadeWeight<=0)return this._fadeWeight=0,this._fadeState=0,this._armature.hasEventListener(c.AnimationEvent.FADE_OUT_COMPLETE)&&(b=new c.AnimationEvent(c.AnimationEvent.FADE_OUT_COMPLETE),b.animationState=this,this._armature._eventList.push(b)),!0}return d&&(this.isComplete=!0,this.loop<0&&this.fadeOut((this._fadeOutWeight||this._fadeInTime)/this.timeScale,!0)),!1},a.prototype.updateTimelineStates=function(){if(this._mixingTransforms){for(var a in this._timelineStates)null==this._mixingTransforms[a]&&this.removeTimelineState(a);for(a in this._mixingTransforms)this._timelineStates[a]||this.addTimelineState(a)}else for(a in this.clip.getTimelines())this._timelineStates[a]||this.addTimelineState(a)},a.prototype.addTimelineState=function(a){var b=this._armature.getBone(a);if(b){var c=f._borrowObject(),d=this.clip.getTimeline(a);c.fadeIn(b,this,d),this._timelineStates[a]=c}},a.prototype.removeTimelineState=function(a){f._returnObject(this._timelineStates[a]),delete this._timelineStates[a]},a.prototype.clear=function(){this.clip=null,this.enabled=!1,this._armature=null,this._currentFrame=null,this._mixingTransforms=null;for(var a in this._timelineStates)this.removeTimelineState(a)},a._pool=[],a}();a.AnimationState=h;var i=function(){function a(a){this._armature=a,this._animationLayer=[],this._isPlaying=!1,this.animationNameList=[],this.tweenEnabled=!0,this.timeScale=1}return a.prototype.getLastAnimationName=function(){return this._lastAnimationState?this._lastAnimationState.name:null},a.prototype.getLastAnimationState=function(){return this._lastAnimationState},a.prototype.getAnimationDataList=function(){return this._animationDataList},a.prototype.setAnimationDataList=function(a){this._animationDataList=a,this.animationNameList.length=0;for(var b in this._animationDataList)this.animationNameList[this.animationNameList.length]=this._animationDataList[b].name},a.prototype.getIsPlaying=function(){return this._isPlaying&&!this.getIsComplete()},a.prototype.getIsComplete=function(){if(this._lastAnimationState){if(!this._lastAnimationState.isComplete)return!1;for(var a=this._animationLayer.length;a--;)for(var b=this._animationLayer[a],c=b.length;c--;)if(!b[c].isComplete)return!1;return!0}return!1},a.prototype.dispose=function(){if(this._armature){this.stop();for(var a=this._animationLayer.length;a--;){for(var b=this._animationLayer[a],c=b.length;c--;)h._returnObject(b[c]);b.length=0}this._animationLayer.length=0,this.animationNameList.length=0,this._armature=null,this._animationLayer=null,this._animationDataList=null,this.animationNameList=null}},a.prototype.gotoAndPlay=function(b,c,d,e,f,g,i,j,k,l){if("undefined"==typeof c&&(c=-1),"undefined"==typeof d&&(d=-1),"undefined"==typeof e&&(e=0/0),"undefined"==typeof f&&(f=0),"undefined"==typeof g&&(g=null),"undefined"==typeof i&&(i=a.SAME_LAYER_AND_GROUP),"undefined"==typeof j&&(j=!0),"undefined"==typeof k&&(k=!0),"undefined"==typeof l&&(l=!0),!this._animationDataList)return null;for(var n,m=this._animationDataList.length;m--;)if(this._animationDataList[m].name==b){n=this._animationDataList[m];break}if(!n)return null;this._isPlaying=!0,c=0>c?n.fadeInTime<0?.3:n.fadeInTime:c;var o;o=0>d?n.scale<0?1:n.scale:d/n.duration,e=isNaN(e)?n.loop:e,f=this.addLayer(f);var p,q;switch(i){case a.NONE:break;case a.SAME_LAYER:for(q=this._animationLayer[f],m=q.length;m--;)p=q[m],p.fadeOut(c,k);break;case a.SAME_GROUP:for(r=this._animationLayer.length;r--;)for(q=this._animationLayer[r],m=q.length;m--;)p=q[m],p.group==g&&p.fadeOut(c,k);break;case a.ALL:for(var r=this._animationLayer.length;r--;)for(q=this._animationLayer[r],m=q.length;m--;)p=q[m],p.fadeOut(c,k);break;case a.SAME_LAYER_AND_GROUP:default:for(q=this._animationLayer[f],m=q.length;m--;)p=q[m],p.group==g&&p.fadeOut(c,k)}this._lastAnimationState=h._borrowObject(),this._lastAnimationState.group=g,this._lastAnimationState.tweenEnabled=this.tweenEnabled,this._lastAnimationState.fadeIn(this._armature,n,c,1/o,e,f,j,l),this.addState(this._lastAnimationState);var t,u,s=this._armature._slotList;for(m=s.length;m--;)t=s[m],u=t.getChildArmature(),u&&u.animation.gotoAndPlay(b,c);return this._lastAnimationState},a.prototype.play=function(){this._animationDataList&&0!=this._animationDataList.length&&(this._lastAnimationState?this._isPlaying?this.gotoAndPlay(this._lastAnimationState.name):this._isPlaying=!0:this.gotoAndPlay(this._animationDataList[0].name))},a.prototype.stop=function(){this._isPlaying=!1},a.prototype.getState=function(a,b){"undefined"==typeof b&&(b=0);var c=this._animationLayer.length;if(0==c)return null;b>=c&&(b=c-1);var d=this._animationLayer[b];if(!d)return null;for(var e=d.length;e--;)if(d[e].name==a)return d[e];return null},a.prototype.hasAnimation=function(a){for(var b=this._animationDataList.length;b--;)if(this._animationDataList[b].name==a)return!0;return!1},a.prototype.advanceTime=function(a){if(this._isPlaying){a*=this.timeScale;var c,d,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,b=this._armature._boneList.length,e=b;for(b--;e--;){for(g=this._armature._boneList[e],h=g.name,i=1,j=0,k=0,l=0,m=0,n=0,o=0,p=0,q=0,c=this._animationLayer.length;c--;){for(r=0,s=this._animationLayer[c],f=s.length,d=0;f>d;d++)t=s[d],e==b&&t.advanceTime(a)?(this.removeState(t),d--,f--):(u=t._timelineStates[h],u&&u.tweenActive&&(v=t._fadeWeight*t.weight*i,w=u.transform,x=u.pivot,j+=w.x*v,k+=w.y*v,l+=w.skewX*v,m+=w.skewY*v,n+=w.scaleX*v,o+=w.scaleY*v,p+=x.x*v,q+=x.y*v,r+=v));if(r>=i)break;i-=r}w=g.tween,x=g._tweenPivot,w.x=j,w.y=k,w.skewX=l,w.skewY=m,w.scaleX=n,w.scaleY=o,x.x=p,x.y=q}}},a.prototype.addLayer=function(a){return a>=this._animationLayer.length&&(a=this._animationLayer.length,this._animationLayer[a]=[]),a},a.prototype.addState=function(a){var b=this._animationLayer[a.layer];b.push(a)},a.prototype.removeState=function(a){var b=a.layer,c=this._animationLayer[b];c.splice(c.indexOf(a),1),h._returnObject(a),0==c.length&&b==this._animationLayer.length-1&&this._animationLayer.length--},a.NONE="none",a.SAME_LAYER="sameLayer",a.SAME_GROUP="sameGroup",a.SAME_LAYER_AND_GROUP="sameLayerAndGroup",a.ALL="all",a}();a.Animation=i}(a.animation||(a.animation={}));var d=a.animation;!function(a){var c=function(){function a(){this.x=0,this.y=0,this.skewX=0,this.skewY=0,this.scaleX=1,this.scaleY=1}return a.prototype.getRotation=function(){return this.skewX},a.prototype.setRotation=function(a){this.skewX=this.skewY=a},a.prototype.copy=function(a){this.x=a.x,this.y=a.y,this.skewX=a.skewX,this.skewY=a.skewY,this.scaleX=a.scaleX,this.scaleY=a.scaleY},a.prototype.toString=function(){return"[DBTransform (x="+this.x+" y="+this.y+" skewX="+this.skewX+" skewY="+this.skewY+" scaleX="+this.scaleX+" scaleY="+this.scaleY+")]"},a}();a.DBTransform=c;var d=function(){function a(){this.position=0,this.duration=0}return a.prototype.dispose=function(){},a}();a.Frame=d;var e=function(a){function d(){a.call(this),this.tweenEasing=0,this.tweenRotate=0,this.displayIndex=0,this.zOrder=0/0,this.visible=!0,this.global=new c,this.transform=new c,this.pivot=new b.Point}return __extends(d,a),d.prototype.dispose=function(){a.prototype.dispose.call(this),this.global=null,this.transform=null,this.pivot=null,this.color=null},d}(d);a.TransformFrame=e;var f=function(){function a(){this._frameList=[],this.duration=0,this.scale=1}return a.prototype.getFrameList=function(){return this._frameList},a.prototype.dispose=function(){for(var a=this._frameList.length;a--;)this._frameList[a].dispose();this._frameList.length=0,this._frameList=null},a.prototype.addFrame=function(a){if(!a)throw new Error;if(!(this._frameList.indexOf(a)<0))throw new Error;this._frameList[this._frameList.length]=a},a}();a.Timeline=f;var h=function(a){function d(){a.call(this),this.originTransform=new c,this.originPivot=new b.Point,this.offset=0,this.transformed=!1}return __extends(d,a),d.prototype.dispose=function(){this!=d.HIDE_TIMELINE&&(a.prototype.dispose.call(this),this.originTransform=null,this.originPivot=null)},d.HIDE_TIMELINE=new d,d}(f);a.TransformTimeline=h;var i=function(a){function b(){a.call(this),this.frameRate=0,this.loop=0,this.tweenEasing=0/0,this.fadeInTime=0,this._timelines={}}return __extends(b,a),b.prototype.getTimelines=function(){return this._timelines},b.prototype.dispose=function(){a.prototype.dispose.call(this);for(var b in this._timelines)this._timelines[b].dispose();this._timelines=null},b.prototype.getTimeline=function(a){return this._timelines[a]},b.prototype.addTimeline=function(a,b){if(!a)throw new Error;this._timelines[b]=a},b}(f);a.AnimationData=i;var j=function(){function a(){this.transform=new c}return a.prototype.dispose=function(){this.transform=null,this.pivot=null},a.ARMATURE="armature",a.IMAGE="image",a}();a.DisplayData=j;var k=function(){function a(){this._displayDataList=[],this.zOrder=0}return a.prototype.getDisplayDataList=function(){return this._displayDataList},a.prototype.dispose=function(){for(var a=this._displayDataList.length;a--;)this._displayDataList[a].dispose();this._displayDataList.length=0,this._displayDataList=null},a.prototype.addDisplayData=function(a){if(!a)throw new Error;if(!(this._displayDataList.indexOf(a)<0))throw new Error;this._displayDataList[this._displayDataList.length]=a},a.prototype.getDisplayData=function(a){for(var b=this._displayDataList.length;b--;)if(this._displayDataList[b].name==a)return this._displayDataList[b];return null},a}();a.SlotData=k;var l=function(){function a(){this.length=0,this.global=new c,this.transform=new c}return a.prototype.dispose=function(){this.global=null,this.transform=null},a}();a.BoneData=l;var m=function(){function a(){this._slotDataList=[]}return a.prototype.getSlotDataList=function(){return this._slotDataList},a.prototype.dispose=function(){for(var a=this._slotDataList.length;a--;)this._slotDataList[a].dispose();this._slotDataList.length=0,this._slotDataList=null},a.prototype.getSlotData=function(a){for(var b=this._slotDataList.length;b--;)if(this._slotDataList[b].name==a)return this._slotDataList[b];return null},a.prototype.addSlotData=function(a){if(!a)throw new Error;if(!(this._slotDataList.indexOf(a)<0))throw new Error;this._slotDataList[this._slotDataList.length]=a},a}();a.SkinData=m;var n=function(){function a(){this._boneDataList=[],this._skinDataList=[],this._animationDataList=[]}return a.prototype.getBoneDataList=function(){return this._boneDataList},a.prototype.getSkinDataList=function(){return this._skinDataList},a.prototype.getAnimationDataList=function(){return this._animationDataList},a.prototype.dispose=function(){for(var a=this._boneDataList.length;a--;)this._boneDataList[a].dispose();for(a=this._skinDataList.length;a--;)this._skinDataList[a].dispose();for(a=this._animationDataList.length;a--;)this._animationDataList[a].dispose();this._boneDataList.length=0,this._skinDataList.length=0,this._animationDataList.length=0,this._boneDataList=null,this._skinDataList=null,this._animationDataList=null},a.prototype.getBoneData=function(a){for(var b=this._boneDataList.length;b--;)if(this._boneDataList[b].name==a)return this._boneDataList[b];
return null},a.prototype.getSkinData=function(a){if(!a)return this._skinDataList[0];for(var b=this._skinDataList.length;b--;)if(this._skinDataList[b].name==a)return this._skinDataList[b];return null},a.prototype.getAnimationData=function(a){for(var b=this._animationDataList.length;b--;)if(this._animationDataList[b].name==a)return this._animationDataList[b];return null},a.prototype.addBoneData=function(a){if(!a)throw new Error;if(!(this._boneDataList.indexOf(a)<0))throw new Error;this._boneDataList[this._boneDataList.length]=a},a.prototype.addSkinData=function(a){if(!a)throw new Error;if(!(this._skinDataList.indexOf(a)<0))throw new Error;this._skinDataList[this._skinDataList.length]=a},a.prototype.addAnimationData=function(a){if(!a)throw new Error;this._animationDataList.indexOf(a)<0&&(this._animationDataList[this._animationDataList.length]=a)},a.prototype.sortBoneDataList=function(){var a=this._boneDataList.length;if(0!=a){for(var b=[];a--;){for(var c=this._boneDataList[a],d=0,e=c;e&&e.parent;)d++,e=this.getBoneData(e.parent);b[a]={level:d,boneData:c}}for(b.sort(this.sortBoneData),a=b.length;a--;)this._boneDataList[a]=b[a].boneData}},a.prototype.sortBoneData=function(a,b){return a.level>b.level?1:-1},a}();a.ArmatureData=n;var o=function(){function a(){this._armatureDataList=[],this._subTexturePivots={}}return a.prototype.getArmatureNames=function(){var a=[];for(var b in this._armatureDataList)a[a.length]=this._armatureDataList[b].name;return a},a.prototype.getArmatureDataList=function(){return this._armatureDataList},a.prototype.dispose=function(){for(var a in this._armatureDataList)this._armatureDataList[a].dispose();this._armatureDataList.length=0,this._armatureDataList=null,this._subTexturePivots=null},a.prototype.getArmatureData=function(a){for(var b=this._armatureDataList.length;b--;)if(this._armatureDataList[b].name==a)return this._armatureDataList[b];return null},a.prototype.addArmatureData=function(a){if(!a)throw new Error;if(!(this._armatureDataList.indexOf(a)<0))throw new Error;this._armatureDataList[this._armatureDataList.length]=a},a.prototype.removeArmatureData=function(a){var b=this._armatureDataList.indexOf(a);b>=0&&this._armatureDataList.splice(b,1)},a.prototype.removeArmatureDataByName=function(a){for(var b=this._armatureDataList.length;b--;)this._armatureDataList[b].name==a&&this._armatureDataList.splice(b,1)},a.prototype.getSubTexturePivot=function(a){return this._subTexturePivots[a]},a.prototype.addSubTexturePivot=function(a,c,d){var e=this._subTexturePivots[d];return e?(e.x=a,e.y=c):this._subTexturePivots[d]=e=new b.Point(a,c),e},a.prototype.removeSubTexturePivot=function(a){if(a)delete this._subTexturePivots[a];else for(a in this._subTexturePivots)delete this._subTexturePivots[a]},a}();a.SkeletonData=o;var p=function(){function a(){}return a.parseTextureAtlasData=function(a,c){if("undefined"==typeof c&&(c=1),!a)throw new Error;var d={};d.__name=a[g.ConstValues.A_NAME];var e=a[g.ConstValues.SUB_TEXTURE];for(var f in e){var h=e[f],i=h[g.ConstValues.A_NAME],j=new b.Rectangle(Number(h[g.ConstValues.A_X])/c,Number(h[g.ConstValues.A_Y])/c,Number(h[g.ConstValues.A_WIDTH])/c,Number(h[g.ConstValues.A_HEIGHT])/c);d[i]=j}return d},a.parseSkeletonData=function(b){if(!b)throw new Error;var c=Number(b[g.ConstValues.A_FRAME_RATE]),d=new o;d.name=b[g.ConstValues.A_NAME];var e=b[g.ConstValues.ARMATURE];for(var f in e){var h=e[f];d.addArmatureData(a.parseArmatureData(h,d,c))}return d},a.parseArmatureData=function(b,c,d){var e=new n;e.name=b[g.ConstValues.A_NAME];var f=b[g.ConstValues.BONE];for(var h in f){var i=f[h];e.addBoneData(a.parseBoneData(i))}var j=b[g.ConstValues.SKIN];for(var h in j){var k=j[h];e.addSkinData(a.parseSkinData(k,c))}g.DBDataUtil.transformArmatureData(e),e.sortBoneDataList();var l=b[g.ConstValues.ANIMATION];for(var h in l){var m=l[h];e.addAnimationData(a.parseAnimationData(m,e,d))}return e},a.parseBoneData=function(b){var c=new l;return c.name=b[g.ConstValues.A_NAME],c.parent=b[g.ConstValues.A_PARENT],c.length=Number(b[g.ConstValues.A_LENGTH])||0,a.parseTransform(b[g.ConstValues.TRANSFORM],c.global),c.transform.copy(c.global),c},a.parseSkinData=function(b,c){var d=new m;d.name=b[g.ConstValues.A_NAME];var e=b[g.ConstValues.SLOT];for(var f in e){var h=e[f];d.addSlotData(a.parseSlotData(h,c))}return d},a.parseSlotData=function(b,c){var d=new k;d.name=b[g.ConstValues.A_NAME],d.parent=b[g.ConstValues.A_PARENT],d.zOrder=Number(b[g.ConstValues.A_Z_ORDER]);var e=b[g.ConstValues.DISPLAY];for(var f in e){var h=e[f];d.addDisplayData(a.parseDisplayData(h,c))}return d},a.parseDisplayData=function(b,c){var d=new j;return d.name=b[g.ConstValues.A_NAME],d.type=b[g.ConstValues.A_TYPE],d.pivot=c.addSubTexturePivot(0,0,d.name),a.parseTransform(b[g.ConstValues.TRANSFORM],d.transform,d.pivot),d},a.parseAnimationData=function(b,c,d){var e=new i;if(e.name=b[g.ConstValues.A_NAME],e.frameRate=d,e.loop=Number(b[g.ConstValues.A_LOOP])||0,e.fadeInTime=Number(b[g.ConstValues.A_FADE_IN_TIME]),e.duration=Number(b[g.ConstValues.A_DURATION])/d,e.scale=Number(b[g.ConstValues.A_SCALE]),b.hasOwnProperty(g.ConstValues.A_TWEEN_EASING)){var f=b[g.ConstValues.A_TWEEN_EASING];e.tweenEasing=void 0==f||null==f?0/0:Number(f)}else e.tweenEasing=0/0;a.parseTimeline(b,e,a.parseMainFrame,d);var h,j,k=b[g.ConstValues.TIMELINE];for(var l in k){var m=k[l];h=a.parseTransformTimeline(m,e.duration,d),j=m[g.ConstValues.A_NAME],e.addTimeline(h,j)}return g.DBDataUtil.addHideTimeline(e,c),g.DBDataUtil.transformAnimationData(e,c),e},a.parseTimeline=function(a,b,c,d){var f,e=0,h=a[g.ConstValues.FRAME];for(var i in h){var j=h[i];f=c(j,d),f.position=e,b.addFrame(f),e+=f.duration}f&&(f.duration=b.duration-f.position)},a.parseTransformTimeline=function(b,c,d){var e=new h;return e.duration=c,a.parseTimeline(b,e,a.parseTransformFrame,d),e.scale=Number(b[g.ConstValues.A_SCALE]),e.offset=Number(b[g.ConstValues.A_OFFSET]),e},a.parseFrame=function(a,b,c){b.duration=Number(a[g.ConstValues.A_DURATION])/c,b.action=a[g.ConstValues.A_ACTION],b.event=a[g.ConstValues.A_EVENT],b.sound=a[g.ConstValues.A_SOUND]},a.parseMainFrame=function(b,c){var e=new d;return a.parseFrame(b,e,c),e},a.parseTransformFrame=function(c,d){var f=new e;if(a.parseFrame(c,f,d),f.visible=1!=Number(c[g.ConstValues.A_HIDE]),c.hasOwnProperty(g.ConstValues.A_TWEEN_EASING)){var h=c[g.ConstValues.A_TWEEN_EASING];f.tweenEasing=void 0==h||null==h?0/0:Number(h)}else f.tweenEasing=0;f.tweenRotate=Number(c[g.ConstValues.A_TWEEN_ROTATE])||0,f.displayIndex=Number(c[g.ConstValues.A_DISPLAY_INDEX])||0,f.zOrder=Number(c[g.ConstValues.A_Z_ORDER])||0,a.parseTransform(c[g.ConstValues.TRANSFORM],f.global,f.pivot),f.transform.copy(f.global);var i=c[g.ConstValues.COLOR_TRANSFORM];return i&&(f.color=new b.ColorTransform,f.color.alphaOffset=Number(i[g.ConstValues.A_ALPHA_OFFSET]),f.color.redOffset=Number(i[g.ConstValues.A_RED_OFFSET]),f.color.greenOffset=Number(i[g.ConstValues.A_GREEN_OFFSET]),f.color.blueOffset=Number(i[g.ConstValues.A_BLUE_OFFSET]),f.color.alphaMultiplier=.01*Number(i[g.ConstValues.A_ALPHA_MULTIPLIER]),f.color.redMultiplier=.01*Number(i[g.ConstValues.A_RED_MULTIPLIER]),f.color.greenMultiplier=.01*Number(i[g.ConstValues.A_GREEN_MULTIPLIER]),f.color.blueMultiplier=.01*Number(i[g.ConstValues.A_BLUE_MULTIPLIER])),f},a.parseTransform=function(a,b,c){"undefined"==typeof c&&(c=null),a&&(b&&(b.x=Number(a[g.ConstValues.A_X]),b.y=Number(a[g.ConstValues.A_Y]),b.skewX=Number(a[g.ConstValues.A_SKEW_X])*g.ConstValues.ANGLE_TO_RADIAN,b.skewY=Number(a[g.ConstValues.A_SKEW_Y])*g.ConstValues.ANGLE_TO_RADIAN,b.scaleX=Number(a[g.ConstValues.A_SCALE_X]),b.scaleY=Number(a[g.ConstValues.A_SCALE_Y])),c&&(c.x=Number(a[g.ConstValues.A_PIVOT_X]),c.y=Number(a[g.ConstValues.A_PIVOT_Y])))},a}();a.DataParser=p}(a.objects||(a.objects={}));var e=a.objects;!function(b){var d=function(b){function c(){b.call(this),this._dataDic={},this._textureAtlasDic={},this._textureAtlasLoadingDic={}}return __extends(c,b),c.prototype.getSkeletonData=function(a){return this._dataDic[a]},c.prototype.addSkeletonData=function(a,b){if(!a)throw new Error;if(b=b||a.name,!b)throw new Error("Unnamed data!");this._dataDic[b],this._dataDic[b]=a},c.prototype.removeSkeletonData=function(a){delete this._dataDic[a]},c.prototype.getTextureAtlas=function(a){return this._textureAtlasDic[a]},c.prototype.addTextureAtlas=function(a,b){if(!a)throw new Error;if(b=b||a.name,!b)throw new Error("Unnamed data!");this._textureAtlasDic[b],this._textureAtlasDic[b]=a},c.prototype.removeTextureAtlas=function(a){delete this._textureAtlasDic[a]},c.prototype.dispose=function(a){if("undefined"==typeof a&&(a=!0),a){for(var b in this._dataDic)this._dataDic[b].dispose();for(var b in this._textureAtlasDic)this._textureAtlasDic[b].dispose()}this._dataDic=null,this._textureAtlasDic=null,this._textureAtlasLoadingDic=null,this._currentDataName=null,this._currentTextureAtlasName=null},c.prototype.buildArmature=function(b,c,d,f,g){if(d){var h=this._dataDic[d];if(h)var i=h.getArmatureData(b)}else for(d in this._dataDic)if(h=this._dataDic[d],i=h.getArmatureData(b))break;if(!i)return null;this._currentDataName=d,this._currentTextureAtlasName=f||d;var j=this._generateArmature();j.name=b;var k,l,m=i.getBoneDataList();for(var n in m)l=m[n],k=new a.Bone,k.name=l.name,k.origin.copy(l.transform),i.getBoneData(l.parent)?j.addChild(k,l.parent):j.addChild(k,null);if(c&&c!=b){var o=h.getArmatureData(c);if(!o)for(d in this._dataDic)if(h=this._dataDic[d],o=h.getArmatureData(c))break}o?j.animation.setAnimationDataList(o.getAnimationDataList()):j.animation.setAnimationDataList(i.getAnimationDataList());var p=i.getSkinData(g);if(!p)throw new Error;var q,r,s,t,v,x,u=[],w=p.getSlotDataList();for(var n in w)if(v=w[n],k=j.getBone(v.parent)){for(x=v.getDisplayDataList(),q=this._generateSlot(),q.name=v.name,q._originZOrder=v.zOrder,q._dislayDataList=x,u.length=0,t=x.length;t--;)switch(r=x[t],r.type){case e.DisplayData.ARMATURE:s=this.buildArmature(r.name,null,this._currentDataName,this._currentTextureAtlasName,null),s&&(u[t]=s);break;case e.DisplayData.IMAGE:default:u[t]=this._generateDisplay(this._textureAtlasDic[this._currentTextureAtlasName],r.name,r.pivot.x,r.pivot.y)}q.setDisplayList(u),q._changeDisplay(0),k.addChild(q)}return j._slotsZOrderChanged=!0,j.advanceTime(0),j},c.prototype.getTextureDisplay=function(a,b,c,d){if(b)var e=this._textureAtlasDic[b];if(!e&&!b)for(b in this._textureAtlasDic){if(e=this._textureAtlasDic[b],e.getRegion(a))break;e=null}if(e){if(isNaN(c)||isNaN(d)){var f=this._dataDic[b];if(f){var g=f.getSubTexturePivot(a);g&&(c=g.x,d=g.y)}}return this._generateDisplay(e,a,c,d)}return null},c.prototype._generateArmature=function(){return null},c.prototype._generateSlot=function(){return null},c.prototype._generateDisplay=function(){return null},c}(c.EventDispatcher);b.BaseFactory=d}(a.factorys||(a.factorys={})),a.factorys,function(a){var c=function(){function a(){}return a.ANGLE_TO_RADIAN=Math.PI/180,a.DRAGON_BONES="dragonBones",a.ARMATURE="armature",a.SKIN="skin",a.BONE="bone",a.SLOT="slot",a.DISPLAY="display",a.ANIMATION="animation",a.TIMELINE="timeline",a.FRAME="frame",a.TRANSFORM="transform",a.COLOR_TRANSFORM="colorTransform",a.TEXTURE_ATLAS="TextureAtlas",a.SUB_TEXTURE="SubTexture",a.A_VERSION="version",a.A_IMAGE_PATH="imagePath",a.A_FRAME_RATE="frameRate",a.A_NAME="name",a.A_PARENT="parent",a.A_LENGTH="length",a.A_TYPE="type",a.A_FADE_IN_TIME="fadeInTime",a.A_DURATION="duration",a.A_SCALE="scale",a.A_OFFSET="offset",a.A_LOOP="loop",a.A_EVENT="event",a.A_SOUND="sound",a.A_ACTION="action",a.A_HIDE="hide",a.A_TWEEN_EASING="tweenEasing",a.A_TWEEN_ROTATE="tweenRotate",a.A_DISPLAY_INDEX="displayIndex",a.A_Z_ORDER="z",a.A_WIDTH="width",a.A_HEIGHT="height",a.A_X="x",a.A_Y="y",a.A_SKEW_X="skX",a.A_SKEW_Y="skY",a.A_SCALE_X="scX",a.A_SCALE_Y="scY",a.A_PIVOT_X="pX",a.A_PIVOT_Y="pY",a.A_ALPHA_OFFSET="aO",a.A_RED_OFFSET="rO",a.A_GREEN_OFFSET="gO",a.A_BLUE_OFFSET="bO",a.A_ALPHA_MULTIPLIER="aM",a.A_RED_MULTIPLIER="rM",a.A_GREEN_MULTIPLIER="gM",a.A_BLUE_MULTIPLIER="bM",a}();a.ConstValues=c;var f=function(){function a(){}return a.transformPointWithParent=function(b,c){var d=a._helpMatrix;a.transformToMatrix(c,d),d.invert();var e=b.x,f=b.y;b.x=d.a*e+d.c*f+d.tx,b.y=d.d*f+d.b*e+d.ty,b.skewX=a.formatRadian(b.skewX-c.skewX),b.skewY=a.formatRadian(b.skewY-c.skewY)},a.transformToMatrix=function(a,b){b.a=a.scaleX*Math.cos(a.skewY),b.b=a.scaleX*Math.sin(a.skewY),b.c=-a.scaleY*Math.sin(a.skewX),b.d=a.scaleY*Math.cos(a.skewX),b.tx=a.x,b.ty=a.y},a.formatRadian=function(b){return b%=a.DOUBLE_PI,b>Math.PI&&(b-=a.DOUBLE_PI),b<-Math.PI&&(b+=a.DOUBLE_PI),b},a.DOUBLE_PI=2*Math.PI,a._helpMatrix=new b.Matrix,a}();a.TransformUtil=f;var g=function(){function a(){}return a.transformArmatureData=function(a){for(var d,e,b=a.getBoneDataList(),c=b.length;c--;)d=b[c],d.parent&&(e=a.getBoneData(d.parent),e&&(d.transform.copy(d.global),f.transformPointWithParent(d.transform,e.global)))},a.transformArmatureDataAnimations=function(b){for(var c=b.getAnimationDataList(),d=c.length;d--;)a.transformAnimationData(c[d],b)},a.transformAnimationData=function(b,c){for(var i,j,k,m,n,o,p,q,r,s,d=c.getSkinData(null),e=c.getBoneDataList(),g=d.getSlotDataList(),h=e.length;h--;)if(i=e[h],j=b.getTimeline(i.name)){k=null;for(var t in g)if(k=g[t],k.parent==i.name)break;m=i.parent?b.getTimeline(i.parent):null,n=j.getFrameList(),o=null,p=null,q=null,s=n.length;for(var u=0;s>u;u++){if(r=n[u],m?(a._helpTransform1.copy(r.global),a.getTimelineTransform(m,r.position,a._helpTransform2),f.transformPointWithParent(a._helpTransform1,a._helpTransform2),r.transform.copy(a._helpTransform1)):r.transform.copy(r.global),r.transform.x-=i.transform.x,r.transform.y-=i.transform.y,r.transform.skewX-=i.transform.skewX,r.transform.skewY-=i.transform.skewY,r.transform.scaleX-=i.transform.scaleX,r.transform.scaleY-=i.transform.scaleY,j.transformed||k&&(r.zOrder-=k.zOrder),o||(o=j.originTransform,o.copy(r.transform),o.skewX=f.formatRadian(o.skewX),o.skewY=f.formatRadian(o.skewY),p=j.originPivot,p.x=r.pivot.x,p.y=r.pivot.y),r.transform.x-=o.x,r.transform.y-=o.y,r.transform.skewX=f.formatRadian(r.transform.skewX-o.skewX),r.transform.skewY=f.formatRadian(r.transform.skewY-o.skewY),r.transform.scaleX-=o.scaleX,r.transform.scaleY-=o.scaleY,j.transformed||(r.pivot.x-=p.x,r.pivot.y-=p.y),q){var v=r.transform.skewX-q.transform.skewX;q.tweenRotate?q.tweenRotate>0?(0>v&&(r.transform.skewX+=2*Math.PI,r.transform.skewY+=2*Math.PI),q.tweenRotate>1&&(r.transform.skewX+=2*Math.PI*(q.tweenRotate-1),r.transform.skewY+=2*Math.PI*(q.tweenRotate-1))):(v>0&&(r.transform.skewX-=2*Math.PI,r.transform.skewY-=2*Math.PI),q.tweenRotate<1&&(r.transform.skewX+=2*Math.PI*(q.tweenRotate+1),r.transform.skewY+=2*Math.PI*(q.tweenRotate+1))):(r.transform.skewX=q.transform.skewX+f.formatRadian(r.transform.skewX-q.transform.skewX),r.transform.skewY=q.transform.skewY+f.formatRadian(r.transform.skewY-q.transform.skewY))}q=r}j.transformed=!0}},a.getTimelineTransform=function(a,b,c){for(var h,i,j,k,e=a.getFrameList(),g=e.length;g--;)if(h=e[g],h.position<=b&&h.position+h.duration>b){i=h.tweenEasing,g==e.length-1||isNaN(i)||b==h.position?c.copy(h.global):(j=(b-h.position)/h.duration,i&&(j=d.TimelineState.getEaseValue(j,i)),k=e[g+1],c.x=h.global.x+(k.global.x-h.global.x)*j,c.y=h.global.y+(k.global.y-h.global.y)*j,c.skewX=f.formatRadian(h.global.skewX+(k.global.skewX-h.global.skewX)*j),c.skewY=f.formatRadian(h.global.skewY+(k.global.skewY-h.global.skewY)*j),c.scaleX=h.global.scaleX+(k.global.scaleX-h.global.scaleX)*j,c.scaleY=h.global.scaleY+(k.global.scaleY-h.global.scaleY)*j);break}},a.addHideTimeline=function(a,b){for(var f,g,c=b.getBoneDataList(),d=c.length;d--;)f=c[d],g=f.name,a.getTimeline(g)||a.addTimeline(e.TransformTimeline.HIDE_TIMELINE,g)},a._helpTransform1=new e.DBTransform,a._helpTransform2=new e.DBTransform,a}();a.DBDataUtil=g}(a.utils||(a.utils={}));var g=a.utils,h=function(){function a(){this.global=new e.DBTransform,this.origin=new e.DBTransform,this.offset=new e.DBTransform,this.tween=new e.DBTransform,this.tween.scaleX=this.tween.scaleY=0,this._globalTransformMatrix=new b.Matrix,this._visible=!0,this._isColorChanged=!1,this._isDisplayOnStage=!1,this._scaleType=0,this.fixedRotation=!1}return a.prototype.getVisible=function(){return this._visible},a.prototype.setVisible=function(a){this._visible=a},a.prototype._setParent=function(a){this.parent=a},a.prototype._setArmature=function(a){this.armature&&this.armature._removeDBObject(this),this.armature=a,this.armature&&this.armature._addDBObject(this)},a.prototype.dispose=function(){this.parent=null,this.armature=null,this.global=null,this.origin=null,this.offset=null,this.tween=null,this._globalTransformMatrix=null},a.prototype._update=function(){if(this.global.scaleX=(this.origin.scaleX+this.tween.scaleX)*this.offset.scaleX,this.global.scaleY=(this.origin.scaleY+this.tween.scaleY)*this.offset.scaleY,this.parent){var a=this.origin.x+this.offset.x+this.tween.x,b=this.origin.y+this.offset.y+this.tween.y,c=this.parent._globalTransformMatrix;this._globalTransformMatrix.tx=this.global.x=c.a*a+c.c*b+c.tx,this._globalTransformMatrix.ty=this.global.y=c.d*b+c.b*a+c.ty,this.fixedRotation?(this.global.skewX=this.origin.skewX+this.offset.skewX+this.tween.skewX,this.global.skewY=this.origin.skewY+this.offset.skewY+this.tween.skewY):(this.global.skewX=this.origin.skewX+this.offset.skewX+this.tween.skewX+this.parent.global.skewX,this.global.skewY=this.origin.skewY+this.offset.skewY+this.tween.skewY+this.parent.global.skewY),this.parent.scaleMode>=this._scaleType&&(this.global.scaleX*=this.parent.global.scaleX,this.global.scaleY*=this.parent.global.scaleY)}else this._globalTransformMatrix.tx=this.global.x=this.origin.x+this.offset.x+this.tween.x,this._globalTransformMatrix.ty=this.global.y=this.origin.y+this.offset.y+this.tween.y,this.global.skewX=this.origin.skewX+this.offset.skewX+this.tween.skewX,this.global.skewY=this.origin.skewY+this.offset.skewY+this.tween.skewY;this._globalTransformMatrix.a=this.global.scaleX*Math.cos(this.global.skewY),this._globalTransformMatrix.b=this.global.scaleX*Math.sin(this.global.skewY),this._globalTransformMatrix.c=-this.global.scaleY*Math.sin(this.global.skewX),this._globalTransformMatrix.d=this.global.scaleY*Math.cos(this.global.skewX)},a}();a.DBObject=h;var i=function(a){function b(b){a.call(this),this._displayBridge=b,this._displayList=[],this._displayIndex=-1,this._scaleType=1,this._originZOrder=0,this._tweenZorder=0,this._offsetZOrder=0,this._isDisplayOnStage=!1,this._isHideDisplay=!1}return __extends(b,a),b.prototype.getZOrder=function(){return this._originZOrder+this._tweenZorder+this._offsetZOrder},b.prototype.setZOrder=function(a){this.getZOrder()!=a&&(this._offsetZOrder=a-this._originZOrder-this._tweenZorder,this.armature&&(this.armature._slotsZOrderChanged=!0))},b.prototype.getDisplay=function(){var a=this._displayList[this._displayIndex];return a instanceof k?a.getDisplay():a},b.prototype.setDisplay=function(a){this._displayList[this._displayIndex]=a,this._setDisplay(a)},b.prototype.getChildArmature=function(){var a=this._displayList[this._displayIndex];return a instanceof k?a:null},b.prototype.setChildArmature=function(a){this._displayList[this._displayIndex]=a,a&&this._setDisplay(a.getDisplay())},b.prototype.getDisplayList=function(){return this._displayList},b.prototype.setDisplayList=function(a){if(!a)throw new Error;for(var b=this._displayList.length=a.length;b--;)this._displayList[b]=a[b];if(this._displayIndex>=0){var c=this._displayIndex;this._displayIndex=-1,this._changeDisplay(c)}},b.prototype._setDisplay=function(a){this._displayBridge.getDisplay()?this._displayBridge.setDisplay(a):(this._displayBridge.setDisplay(a),this.armature&&(this._displayBridge.addDisplay(this.armature.getDisplay(),-1),this.armature._slotsZOrderChanged=!0)),this.updateChildArmatureAnimation(),this._isDisplayOnStage=!this._isHideDisplay&&this._displayBridge.getDisplay()?!0:!1},b.prototype._changeDisplay=function(a){if(0>a)this._isHideDisplay||(this._isHideDisplay=!0,this._displayBridge.removeDisplay(),this.updateChildArmatureAnimation());else{if(this._isHideDisplay){this._isHideDisplay=!1;var b=!0;this.armature&&(this._displayBridge.addDisplay(this.armature.getDisplay(),-1),this.armature._slotsZOrderChanged=!0)}var c=this._displayList.length;if(a>=c&&c>0&&(a=c-1),this._displayIndex!=a){this._displayIndex=a;var d=this._displayList[this._displayIndex];d instanceof k?this._setDisplay(d.getDisplay()):this._setDisplay(d),this._dislayDataList&&this._displayIndex<=this._dislayDataList.length&&this.origin.copy(this._dislayDataList[this._displayIndex].transform)}else b&&this.updateChildArmatureAnimation()}this._isDisplayOnStage=!this._isHideDisplay&&this._displayBridge.getDisplay()?!0:!1},b.prototype.setVisible=function(a){a!=this._visible&&(this._visible=a,this._updateVisible(this._visible))},b.prototype._setArmature=function(b){a.prototype._setArmature.call(this,b),this.armature?(this.armature._slotsZOrderChanged=!0,this._displayBridge.addDisplay(this.armature.getDisplay(),-1)):this._displayBridge.removeDisplay()},b.prototype.dispose=function(){this._displayBridge&&(a.prototype.dispose.call(this),this._displayBridge.dispose(),this._displayList.length=0,this._displayBridge=null,this._displayList=null,this._dislayDataList=null)},b.prototype._update=function(){if(a.prototype._update.call(this),this._isDisplayOnStage){var b=this.parent._tweenPivot.x,c=this.parent._tweenPivot.y;if(b||c){var d=this.parent._globalTransformMatrix;this._globalTransformMatrix.tx+=d.a*b+d.c*c,this._globalTransformMatrix.ty+=d.b*b+d.d*c}this._displayBridge.updateTransform(this._globalTransformMatrix,this.global)}},b.prototype._updateVisible=function(a){this._displayBridge.setVisible(this.parent.getVisible()&&this._visible&&a)},b.prototype.updateChildArmatureAnimation=function(){var a=this.getChildArmature();if(a)if(this._isHideDisplay)a.animation.stop(),a.animation._lastAnimationState=null;else{var b=this.armature?this.armature.animation.getLastAnimationName():null;b&&a.animation.hasAnimation(b)?a.animation.gotoAndPlay(b):a.animation.play()}},b}(h);a.Slot=i;var j=function(a){function d(){a.call(this),this._children=[],this._scaleType=2,this._tweenPivot=new b.Point,this.scaleMode=1}return __extends(d,a),d.prototype.setVisible=function(a){if(this._visible!=a){this._visible=a;for(var b=this._children.length;b--;){var c=this._children[b];c instanceof i&&c._updateVisible(this._visible)}}},d.prototype._setArmature=function(b){a.prototype._setArmature.call(this,b);for(var c=this._children.length;c--;)this._children[c]._setArmature(this.armature)},d.prototype.dispose=function(){if(this._children){a.prototype.dispose.call(this);for(var b=this._children.length;b--;)this._children[b].dispose();this._children.length=0,this._children=null,this._tweenPivot=null,this.slot=null}},d.prototype.contains=function(a){if(!a)throw new Error;if(a==this)return!1;for(var b=a;b!=this&&null!=b;)b=b.parent;return b==this},d.prototype.addChild=function(a){if(!a)throw new Error;if(a==this||a instanceof d&&a.contains(this))throw new Error("An Bone cannot be added as a child to itself or one of its children (or children's children, etc.)");a.parent&&a.parent.removeChild(a),this._children[this._children.length]=a,a._setParent(this),a._setArmature(this.armature),!this.slot&&a instanceof i&&(this.slot=a)},d.prototype.removeChild=function(a){if(!a)throw new Error;var b=this._children.indexOf(a);if(!(b>=0))throw new Error;this._children.splice(b,1),a._setParent(null),a._setArmature(null),a==this.slot&&(this.slot=null)},d.prototype.getSlots=function(){for(var a=[],b=this._children.length;b--;)this._children[b]instanceof i&&a.unshift(this._children[b]);return a},d.prototype._arriveAtFrame=function(a,b,e){if(a){var g=e.getMixingTransform(name);if(!(!e.displayControl||2!=g&&-1!=g||this.displayController&&this.displayController!=e.name)){var h=a;if(this.slot){var j=h.displayIndex;j>=0&&(isNaN(h.zOrder)||h.zOrder==this.slot._tweenZorder||(this.slot._tweenZorder=h.zOrder,this.armature._slotsZOrderChanged=!0)),this.slot._changeDisplay(j),this.slot._updateVisible(h.visible)}}if(a.event&&this.armature.hasEventListener(c.FrameEvent.BONE_FRAME_EVENT)){var k=new c.FrameEvent(c.FrameEvent.BONE_FRAME_EVENT);k.bone=this,k.animationState=e,k.frameLabel=a.event,this.armature._eventList.push(k)}if(a.sound&&d._soundManager.hasEventListener(c.SoundEvent.SOUND)){var l=new c.SoundEvent(c.SoundEvent.SOUND);l.armature=this.armature,l.animationState=e,l.sound=a.sound,d._soundManager.dispatchEvent(l)}if(a.action)for(var m in this._children)if(this._children[m]instanceof i){var n=this._children[m].getChildArmature();n&&n.animation.gotoAndPlay(a.action)}}else this.slot&&this.slot._changeDisplay(-1)},d.prototype._updateColor=function(a,b,c,d,e,f,g,h,i){(i||this._isColorChanged)&&this.slot._displayBridge.updateColor(a,b,c,d,e,f,g,h),this._isColorChanged=i},d._soundManager=c.SoundEventManager.getInstance(),d}(h);a.Bone=j;var k=function(a){function b(b){a.call(this),this.animation=new d.Animation(this),this._display=b,this._slotsZOrderChanged=!1,this._slotList=[],this._boneList=[],this._eventList=[]}return __extends(b,a),b.prototype.getDisplay=function(){return this._display},b.prototype.dispose=function(){if(this.animation){this.animation.dispose();for(var a=this._slotList.length;a--;)this._slotList[a].dispose();for(a=this._boneList.length;a--;)this._boneList[a].dispose();this._slotList.length=0,this._boneList.length=0,this._eventList.length=0,this._slotList=null,this._boneList=null,this._eventList=null,this._display=null,this.animation=null}},b.prototype.advanceTime=function(a){this.animation.advanceTime(a),a*=this.animation.timeScale;for(var b=this._boneList.length;b--;)this._boneList[b]._update();b=this._slotList.length;for(var d;b--;)if(d=this._slotList[b],d._update(),d._isDisplayOnStage){var e=d.getChildArmature();e&&e.advanceTime(a)}if(this._slotsZOrderChanged&&(this.updateSlotsZOrder(),this.hasEventListener(c.ArmatureEvent.Z_ORDER_UPDATED)&&this.dispatchEvent(new c.ArmatureEvent(c.ArmatureEvent.Z_ORDER_UPDATED))),this._eventList.length){var f=this._eventList.length;for(b=0;f>b;b++)this.dispatchEvent(this._eventList[b]);this._eventList.length=0}},b.prototype.getSlots=function(a){return"undefined"==typeof a&&(a=!0),a?this._slotList.concat():this._slotList},b.prototype.getBones=function(a){return"undefined"==typeof a&&(a=!0),a?this._boneList.concat():this._boneList},b.prototype.getSlot=function(a){for(var b=this._slotList.length;b--;)if(this._slotList[b].name==a)return this._slotList[b];return null},b.prototype.getSlotByDisplay=function(a){if(a)for(var b=this._slotList.length;b--;)if(this._slotList[b].getDisplay()==a)return this._slotList[b];return null},b.prototype.removeSlot=function(a){if(!a)throw new Error;if(!(this._slotList.indexOf(a)>=0))throw new Error;a.parent.removeChild(a)},b.prototype.removeSlotByName=function(a){if(a){var b=this.getSlot(a);b&&this.removeSlot(b)}},b.prototype.getBone=function(a){for(var b=this._boneList.length;b--;)if(this._boneList[b].name==a)return this._boneList[b];return null},b.prototype.getBoneByDisplay=function(a){var b=this.getSlotByDisplay(a);return b?b.parent:null},b.prototype.removeBone=function(a){if(!a)throw new Error;if(!(this._boneList.indexOf(a)>=0))throw new Error;a.parent?a.parent.removeChild(a):a._setArmature(null)},b.prototype.removeBoneByName=function(a){if(a){var b=this.getBone(a);b&&this.removeBone(b)}},b.prototype.addChild=function(a,b){if(!a)throw new Error;if(b){var c=this.getBone(b);if(!c)throw new Error;c.addChild(a)}else a.parent&&a.parent.removeChild(a),a._setArmature(this)},b.prototype.updateSlotsZOrder=function(){this._slotList.sort(this.sortSlot);for(var b,a=this._slotList.length;a--;)b=this._slotList[a],b._isDisplayOnStage&&b._displayBridge.addDisplay(this._display,-1);this._slotsZOrderChanged=!1},b.prototype._addDBObject=function(a){if(a instanceof i){var b=a;this._slotList.indexOf(b)<0&&(this._slotList[this._slotList.length]=b)}else if(a instanceof j){var c=a;this._boneList.indexOf(c)<0&&(this._boneList[this._boneList.length]=c,this._sortBoneList())}},b.prototype._removeDBObject=function(a){if(a instanceof i){var b=a,c=this._slotList.indexOf(b);c>=0&&this._slotList.splice(c,1)}else if(a instanceof j){var d=a;c=this._boneList.indexOf(d),c>=0&&this._boneList.splice(c,1)}},b.prototype._sortBoneList=function(){var a=this._boneList.length;if(0!=a){for(var c,d,e,b=[];a--;){for(c=0,d=this._boneList[a],e=d;e;)c++,e=e.parent;b[a]={level:c,bone:d}}for(b.sort(this.sortBone),a=b.length;a--;)this._boneList[a]=b[a].bone}},b.prototype._arriveAtFrame=function(a,d,e){if(a.event&&this.hasEventListener(c.FrameEvent.ANIMATION_FRAME_EVENT)){var g=new c.FrameEvent(c.FrameEvent.ANIMATION_FRAME_EVENT);g.animationState=e,g.frameLabel=a.event,this._eventList.push(g)}if(a.sound&&b._soundManager.hasEventListener(c.SoundEvent.SOUND)){var h=new c.SoundEvent(c.SoundEvent.SOUND);h.armature=this,h.animationState=e,h.sound=a.sound,b._soundManager.dispatchEvent(h)}a.action&&e.isPlaying&&this.animation.gotoAndPlay(a.action)},b.prototype.sortSlot=function(a,b){return a.getZOrder()<b.getZOrder()?1:-1},b.prototype.sortBone=function(a,b){return a.level<b.level?1:-1},b._soundManager=c.SoundEventManager.getInstance(),b}(c.EventDispatcher);a.Armature=k}(dragonBones||(dragonBones={}));
