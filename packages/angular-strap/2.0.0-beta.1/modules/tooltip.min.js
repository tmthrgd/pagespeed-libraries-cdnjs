/**
 * angular-strap
 * @version v2.0.0-beta.1 - 2014-01-07
 * @link http://mgcrea.github.io/angular-strap
 * @author Olivier Louvignes <olivier@mg-crea.com>
 * @license MIT License, http://www.opensource.org/licenses/MIT
 */
"use strict";angular.module("mgcrea.ngStrap.tooltip",["mgcrea.ngStrap.jqlite.dimensions"]).run(["$templateCache",function(a){var b='<div class="tooltip" ng-show="title"><div class="tooltip-arrow"></div><div class="tooltip-inner" ng-bind-html="title"></div></div>';a.put("$tooltip",b)}]).provider("$tooltip",function(){var a=this.defaults={animation:"animation-fade",prefixClass:"tooltip",container:!1,placement:"top",template:"$tooltip",trigger:"hover focus",keyboard:!1,type:"",title:"",delay:0};this.$get=["$window","$rootScope","$compile","$q","$templateCache","$http","$animate","$timeout","dimensions",function(b,c,d,e,f,g,h,i,j){function k(b,i){function k(){return"body"===q.container?j.offset(b[0]):j.position(b[0])}function o(a,b,c,d){var e,f=a.split("-");switch(f[0]){case"right":e={top:b.top+b.height/2-d/2,left:b.left+b.width};break;case"bottom":e={top:b.top+b.height,left:b.left+b.width/2-c/2};break;case"left":e={top:b.top+b.height/2-d/2,left:b.left-c};break;default:e={top:b.top-d,left:b.left+b.width/2-c/2}}if(!f[1])return e;if("top"===f[0]||"bottom"===f[0])switch(f[1]){case"left":e.left=b.left;break;case"right":e.left=b.left+b.width-c}else if("left"===f[0]||"right"===f[0])switch(f[1]){case"top":e.top=b.top-d;break;case"bottom":e.top=b.top+b.height}return e}var p={},q=angular.extend({},a,i);p.$promise=e.when(f.get(q.template)||g.get(q.template));var r=q.scope.$new()||c.$new();q.delay&&angular.isString(q.delay)&&(q.delay=parseFloat(q.delay)),r.$hide=function(){r.$$postDigest(function(){p.hide()})},r.$show=function(){r.$$postDigest(function(){p.show()})},r.$toggle=function(){r.$$postDigest(function(){p.toggle()})};var s,t,u,v,w,x;return p.$promise.then(function(a){angular.isObject(a)&&(a=a.data),a=l.apply(a),x=a,v=d(a),p.init()}),p.init=function(){q.delay&&angular.isNumber(q.delay)&&(q.delay={show:q.delay,hide:q.delay});for(var a=q.trigger.split(" "),c=a.length;c--;){var d=a[c];"click"===d?b.on("click",this.toggle):"manual"!==d&&(b.on("hover"===d?"mouseenter":"focus",this.enter),b.on("hover"===d?"mouseleave":"blur",this.leave))}},p.destroy=function(){for(var a=q.trigger.split(" "),c=a.length;c--;){var d=a[c];"click"===d?b.off("click",this.toggle):"manual"!==d&&(b.off("hover"===d?"mouseenter":"focus",this.enter),b.off("hover"===d?"mouseleave":"blur",this.leave))}w&&(w.remove(),w=null),r.$destroy()},p.enter=function(){return clearTimeout(s),t="in",q.delay&&q.delay.show?(s=setTimeout(function(){"in"===t&&p.show()},q.delay.show),void 0):p.show()},p.show=function(){var a=q.container?n(q.container):null,c=q.container?null:b;w=p.$element=v(r,function(){}),w.css({top:"0px",left:"0px",display:"block"}).addClass(q.placement),q.animation&&w.addClass(q.animation),q.type&&w.addClass(q.prefixClass+"-"+q.type),h.enter(w,a,c,function(){}),u=!0,r.$digest(),m(p.$applyPlacement),q.keyboard&&(p.focus(),w.on("keyup",p.$onKeyUp))},p.leave=function(){return clearTimeout(s),t="out",q.delay&&q.delay.hide?(s=setTimeout(function(){"out"===t&&p.hide()},q.delay.hide),void 0):p.hide()},p.hide=function(){h.leave(w,function(){}),r.$digest(),u=!1,q.keyboard&&w.off("keyup",p.$onKeyUp)},p.toggle=function(){u?p.leave():p.enter()},p.focus=function(){w[0].focus()},p.$applyPlacement=function(){if(w){var a=k(),b=w.prop("offsetWidth"),c=w.prop("offsetHeight"),d=o(q.placement,a,b,c);d.top+="px",d.left+="px",w.css(d)}},p.$onKeyUp=function(a){27===a.which&&p.hide()},p}var l=String.prototype.trim,m=b.requestAnimationFrame||b.setTimeout,n=function(a,b){return angular.element((b||document).querySelectorAll(a))};return k}]}).directive("bsTooltip",["$window","$location","$sce","$tooltip",function(a,b,c,d){var e=a.requestAnimationFrame||a.setTimeout;return{restrict:"EAC",scope:!0,link:function(a,b,c){var f={scope:a};angular.forEach(["placement","container","delay","trigger","animation","type","template"],function(a){angular.isDefined(c[a])&&(f[a]=c[a])}),angular.forEach(["title"],function(b){c[b]&&c.$observe(b,function(c,d){a[b]=c,angular.isDefined(d)&&e(function(){g&&g.$applyPlacement()})})}),c.bsTooltip&&a.$watch(c.bsTooltip,function(b,c){angular.isObject(b)?angular.extend(a,b):a.content=b,angular.isDefined(c)&&e(function(){g&&g.$applyPlacement()})},!0);var g=d(b,f);a.$on("$destroy",function(){g.destroy(),f=null,g=null})}}}]);
//# sourceMappingURL=angular-strap.min.map